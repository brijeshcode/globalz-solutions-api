import{K as e,N as ee,P as t,_ as te,aA as ne,aC as n,aE as r,aF as re,aH as ie,aL as ae,aO as i,aP as a,aS as o,af as s,ag as c,aq as l,as as u,at as d,av as f,aw as p,ay as m,az as h,y as oe}from"./index-DPZISxi2.js";import{b as g}from"./useAuth-Ck5Vr8KP.js";import"./GlobalConfig-BnwaQAhg.js";import"./tableUtils-BvWofAYZ.js";import{b as _,c as v,d as y,f as b}from"./common-BPa_8IsB.js";import"./Modal-Csr4ntEV.js";import{b as x,c as S}from"./CustomerReturnMarkReceived-DD4ElLyB.js";const C={class:`max-w-7xl mx-auto sm:px-6 lg:px-8 py-6`},w={class:`mb-6`},T={class:`flex items-center justify-between`},E={key:0,class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},D={class:`flex items-center space-x-3`},O={key:0,class:`flex justify-center items-center py-8`},k={key:1,class:`space-y-6`},A={class:`flex items-center space-x-3`},j={key:0,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200`},M={key:1,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200`},N={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200`},P={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},F={class:`px-6 py-4`},I={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},L={class:`mt-1 text-sm text-gray-900 dark:text-white font-mono`},R={class:`mt-1 text-sm text-gray-900 dark:text-white`},z={class:`mt-1 text-sm text-gray-900 dark:text-white`},B={class:`mt-1 text-sm text-gray-900 dark:text-white`},V={class:`mt-1 text-sm text-gray-900 dark:text-white`},H={class:`mt-1 text-sm text-gray-900 dark:text-white`},U={key:0},W={class:`mt-1 text-sm text-gray-900 dark:text-white`},G={key:0,class:`mt-6`},K={class:`mt-1 text-sm text-gray-900 dark:text-white`},q={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},se={class:`px-6 py-4`},J={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},ce={class:`mt-1 text-sm text-gray-900 dark:text-white`},le={class:`mt-1 text-sm text-gray-900 dark:text-white`},ue={key:0,class:`mt-6`},de={class:`mt-1 text-sm text-gray-900 dark:text-white`},fe={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},pe={class:`px-6 py-4`},me={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},he={class:`mt-1 text-sm text-gray-900 dark:text-white`},ge={class:`mt-1 text-sm text-gray-900 dark:text-white`},_e={key:0,class:`mt-6`},ve={class:`mt-1 text-sm text-gray-900 dark:text-white`},ye={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},be={class:`overflow-x-auto`},xe={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Se={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Ce={class:`px-6 py-4 whitespace-nowrap`},we={class:`flex items-center`},Te={class:`flex-shrink-0 h-10 w-10`},Ee=[`src`,`alt`],De={key:1,class:`h-10 w-10 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center`},Oe={class:`ml-4`},ke={class:`text-sm font-medium text-gray-900 dark:text-white`},Ae={class:`text-sm text-gray-500 dark:text-gray-400`},je={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Me={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ne={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Pe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Fe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ie={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Le={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900 dark:text-white`},Re={class:`px-6 py-4 text-right`},ze={key:0,class:`px-6 py-4 text-right`},Be={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ve={class:`px-6 py-4`},He={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-4`},Ue={class:`mt-1 text-sm text-gray-900 dark:text-white`},We={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ge={class:`mt-1 text-sm text-gray-900 dark:text-white`};var Y=ne({__name:`ViewPage`,setup(ne){let Y=s(),X=c(),Ke=S(),{isWarehouseManager:qe,isSuperAdmin:Je,isAdmin:Ye,isSalesman:Xe}=g(),Z=i(null),Q=i(!0),$=i(!1),Ze=u(()=>{if(Xe)return!1;if(qe||Je||Ye)return!0}),Qe=async()=>{try{Q.value=!0;let e=parseInt(Y.params.id);Z.value=await Ke.fetchReturn(e)}catch(e){console.error(`Error fetching customer return:`,e),X.push({name:`customer.returns.index`})}finally{Q.value=!1}},$e=e=>{Z.value=e,$.value=!1};return n(()=>{Qe()}),(ne,n)=>{let i=ie(`router-link`);return r(),p(`div`,C,[d(`div`,w,[d(`div`,T,[d(`div`,null,[n[2]||=d(`h1`,{class:`text-2xl font-semibold text-gray-900 dark:text-white`},`Customer Return Details`,-1),Z.value?(r(),p(`p`,E,o(Z.value.return_code)+` " `+o(a(v)(Z.value.date)),1)):f(``,!0)]),d(`div`,D,[Ze.value&&Z.value&&!Z.value.is_received?(r(),p(`button`,{key:0,onClick:n[0]||=e=>$.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`},[h(a(e),{class:`h-4 w-4 mr-2`}),n[3]||=m(` Mark as Received `,-1)])):f(``,!0),h(i,{to:{name:`customer.return.index`},class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},{default:ae(()=>[h(a(te),{class:`h-4 w-4 mr-2`}),n[4]||=m(` Back to List `,-1)]),_:1,__:[4]})])])]),Q.value?(r(),p(`div`,O,n[5]||=[d(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)])):Z.value?(r(),p(`div`,k,[d(`div`,A,[Z.value.is_received?(r(),p(`span`,j,[h(a(t),{class:`h-4 w-4 mr-1`}),n[6]||=m(` Received `,-1)])):(r(),p(`span`,M,[h(a(ee),{class:`h-4 w-4 mr-1`}),n[7]||=m(` Not Received `,-1)])),d(`span`,N,[h(a(t),{class:`h-4 w-4 mr-1`}),n[8]||=m(` Approved `,-1)])]),d(`div`,P,[n[17]||=d(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[d(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Information`)],-1),d(`div`,F,[d(`dl`,I,[d(`div`,null,[n[9]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Return Code`,-1),d(`dd`,L,o(Z.value.return_code),1)]),d(`div`,null,[n[10]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Date`,-1),d(`dd`,R,o(a(v)(Z.value.date)),1)]),d(`div`,null,[n[11]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),d(`dd`,z,o(Z.value.customer?.name),1)]),d(`div`,null,[n[12]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),d(`dd`,B,o(Z.value.salesperson?.name),1)]),d(`div`,null,[n[13]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),d(`dd`,V,o(Z.value.warehouse?.name),1)]),d(`div`,null,[n[14]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),d(`dd`,H,o(Z.value.currency?.code),1)]),Z.value.currency_rate?(r(),p(`div`,U,[n[15]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Exchange Rate`,-1),d(`dd`,W,o(Z.value.currency_rate),1)])):f(``,!0)]),Z.value.note?(r(),p(`div`,G,[n[16]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Note`,-1),d(`dd`,K,o(Z.value.note),1)])):f(``,!0)])]),d(`div`,q,[n[21]||=d(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[d(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),d(`div`,se,[d(`dl`,J,[d(`div`,null,[n[18]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved By`,-1),d(`dd`,ce,o(Z.value.approved_by_user?.name),1)]),d(`div`,null,[n[19]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved At`,-1),d(`dd`,le,o(a(y)(Z.value.approved_at)),1)])]),Z.value.approve_note?(r(),p(`div`,ue,[n[20]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approval Note`,-1),d(`dd`,de,o(Z.value.approve_note),1)])):f(``,!0)])]),Z.value.is_received?(r(),p(`div`,fe,[n[25]||=d(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[d(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Receipt Information`)],-1),d(`div`,pe,[d(`dl`,me,[d(`div`,null,[n[22]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received By`,-1),d(`dd`,he,o(Z.value.return_received_by_user?.name),1)]),d(`div`,null,[n[23]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received At`,-1),d(`dd`,ge,o(a(y)(Z.value.return_received_at)),1)])]),Z.value.return_received_note?(r(),p(`div`,_e,[n[24]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Receipt Note`,-1),d(`dd`,ve,o(Z.value.return_received_note),1)])):f(``,!0)])])):f(``,!0),d(`div`,ye,[n[29]||=d(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[d(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Items`)],-1),d(`div`,be,[d(`table`,xe,[n[28]||=d(`thead`,{class:`bg-gray-50 dark:bg-gray-900`},[d(`tr`,null,[d(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Item`),d(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Quantity`),d(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Unit Price`),d(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[d(`abbr`,{title:`Discount %`},`Dis %`)]),d(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[d(`abbr`,{title:`Tax %`},`TAX %`)]),d(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[d(`abbr`,{title:`TTC price`},`TTC`)]),d(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total`),d(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total USD`)])],-1),d(`tbody`,Se,[(r(!0),p(l,null,re(Z.value.items,e=>(r(),p(`tr`,{key:e.id},[d(`td`,Ce,[d(`div`,we,[d(`div`,Te,[e.item?.image?(r(),p(`img`,{key:0,src:e.item.image,alt:e.item.name,class:`h-10 w-10 rounded object-cover`},null,8,Ee)):(r(),p(`div`,De,[h(a(oe),{class:`h-6 w-6 text-gray-400`})]))]),d(`div`,Oe,[d(`div`,ke,o(e.item?.name),1),d(`div`,Ae,o(e.item_code),1)])])]),d(`td`,je,o(a(b)(e.quantity)),1),d(`td`,Me,o(a(_)(e.price,Z.value.currency?.code)),1),d(`td`,Ne,o(a(b)(e.discount_percent)),1),d(`td`,Pe,o(a(b)(e.tax_percent)),1),d(`td`,Fe,o(a(b)(e.ttc_price)),1),d(`td`,Ie,o(a(_)(e.total_price,Z.value.currency?.code)),1),d(`td`,Le,o(a(_)(e.total_price_usd,`USD`)),1)]))),128))]),d(`tfoot`,null,[n[26]||=d(`td`,{colspan:`5`},null,-1),n[27]||=d(`td`,{class:`px-6 py-4 text-right`},`Total`,-1),d(`td`,Re,o(a(_)(Z.value.total,Z.value.currency?.code)),1),Z.value.currency?.code===`USD`?f(``,!0):(r(),p(`td`,ze,o(a(_)(Z.value.total_usd,`USD`)),1))])])])]),d(`div`,Be,[n[33]||=d(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[d(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Summary`)],-1),d(`div`,Ve,[d(`dl`,He,[d(`div`,null,[n[30]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Volume`,-1),d(`dd`,Ue,o(a(b)(Z.value.total_volume_cbm))+` cbm`,1)]),d(`div`,null,[n[31]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Weight`,-1),d(`dd`,We,o(a(b)(Z.value.total_weight_kg))+` kg`,1)]),d(`div`,null,[n[32]||=d(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Items`,-1),d(`dd`,Ge,o(Z.value.items?.length||0),1)])])])])])):f(``,!0),h(x,{show:$.value,"onUpdate:show":n[1]||=e=>$.value=e,"return-order":Z.value,onMarkedReceived:$e},null,8,[`show`,`return-order`])])}}}),X=Y;export{X as default};