import{I as e,a$ as t,aC as n,aE as r,aF as i,aH as a,aI as o,aJ as s,aK as c,aL as l,aM as u,aO as d,aQ as f,aR as p,a_ as m,aa as h,am as g,aq as _,ar as v,b0 as y,b2 as b,z as ee}from"./index--pi_6MVY.js";import"./GlobalConfig-Dep5CV3r.js";import{c as te}from"./accountsStore-Bu5eTIeq.js";import"./tableUtils-BFc6-TYF.js";import{c as x}from"./common-DNevajli.js";import{b as S}from"./companyStore-CvagIShB.js";const C={class:`max-w-4xl mx-auto p-8 bg-white text-gray-900 print:h-full print:p-0 print:max-w-none print:mx-0`},w={class:`header`},T={class:`flex justify-between items-start mb-10 pb-6 border-b-2 border-blue-600 print:border-black print:mb-6`},E={class:`flex-1`},D={class:`flex items-center mb-3`},O=[`src`,`alt`],k={key:1,class:`text-3xl font-bold text-blue-600 print:text-black print:text-2xl`},A={key:0},j={class:`print:text-black`},M={class:`text-right flex-1 mt-4`},N={class:`text-lg font-semibold text-gray-600 print:text-black print:text-base`},P={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 print:grid-cols-2 print:gap-6 print:mb-6`},F={class:`space-y-1 print:space-y-0`},I={class:`flex justify-between print:justify-between`},L={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},R={key:0,class:`flex justify-between print:justify-between`},z={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},B={key:1,class:`flex justify-between print:justify-between`},V={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},H={key:2,class:`flex justify-between print:justify-between`},U={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},W={class:`space-y-1 print:space-y-0`},G={key:0,class:`flex justify-between print:justify-between`},K={class:`text-gray-900 print:text-black print:text-xs`},q={class:`flex justify-between print:justify-between`},J={class:`text-gray-900 print:text-black print:text-xs`},Y={class:`flex justify-between print:justify-between`},X={class:`text-gray-900 print:text-black print:text-xs`},Z={class:`body`},Q={class:`mb-8 print:mb-4`},ne={class:`overflow-x-auto print:overflow-visible`},re={class:`w-full border-collapse border border-gray-300 print:border-black`},ie={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},ae={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},oe={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},se={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},ce={class:`border-t-2 border-gray-400 print:border-t-2 print:border-black font-bold bg-gray-100 print:bg-gray-200`},le={class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-black print:text-xs`},ue={class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-black print:text-xs`},de={class:`footer print:block hidden print:fixed print:bottom-0 print:left-0 print:right-0`},fe={class:`border-t-2 border-gray-300 print:border-black pt-4 pb-2`},pe={class:`mt-2 print:mt-1`},me={class:`flex flex-wrap gap-2 text-sm text-gray-600 print:text-black print:text-xs justify-between`},he={key:0,class:`flex-1`},ge={key:1,class:`flex-1 text-center`},_e={key:2,class:`flex-1 text-center`},ve={key:3,class:`flex-1 text-right`};var ye=u({__name:`AccountStatement`,props:{statements:{default:()=>[]},stats:{default:()=>({})},accountData:{},filters:{default:()=>({})}},setup(e,{expose:c}){let l=e,u=S();d(async()=>{try{u.company.name||await u.fetchCompany()}catch(e){console.error(`Failed to fetch company data:`,e)}});let m=r(()=>{let e=l.statements?.length||0,t=15;return e>=t?0:t-e}),h=e=>!e&&e!==0?`0.00`:Number(e).toLocaleString(`en-US`,{minimumFractionDigits:2,maximumFractionDigits:2}),g=e=>{let t={sales:`Sales`,payments:`Payment`,credit_note:`Credit Note`,debit_note:`Debit Note`,returns:`Return`,journal:`Journal Entry`,opening_balance:`Opening Balance`,purchase:`Purchase`,expense:`Expense`};return t[e]||e},_=e=>!e&&e!==0?`print:text-black`:e>=0?`text-green-600 dark:text-green-400 print:text-black`:`text-red-600 dark:text-red-400 print:text-black`,v=()=>{window.print()};return c({printStatement:v}),(e,r)=>(f(),o(`div`,C,[i(`section`,w,[i(`div`,T,[i(`div`,E,[i(`div`,D,[t(u).company.logo?.preview_url?(f(),o(`img`,{key:0,src:t(u).company.logo.preview_url,alt:t(u).company.name||`Company Logo`,class:`h-24 w-auto mr-4 print:h-12`},null,8,O)):a(``,!0),t(u).company.logo?.preview_url?a(``,!0):(f(),o(`div`,k,b(t(u).company.name),1))]),t(u).company.tax_number?(f(),o(`div`,A,[i(`p`,j,[i(`b`,null,`Tax Registration #: `+b(t(u).company.tax_number),1)])])):a(``,!0)]),i(`div`,M,[r[0]||=i(`h1`,{class:`text-2xl font-bold text-blue-600 mb-2 print:text-black print:text-xl`},`ACCOUNT STATEMENT`,-1),i(`div`,N,b(e.accountData?.code),1)])]),i(`div`,P,[i(`div`,null,[r[5]||=i(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},`Account Information`,-1),i(`div`,F,[i(`div`,I,[r[1]||=i(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Account:`,-1),i(`span`,L,b(e.accountData?.code)+`, `+b(e.accountData?.name||`Unknown Account`),1)]),e.accountData?.account_type?(f(),o(`div`,R,[r[2]||=i(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Type:`,-1),i(`span`,z,b(e.accountData?.account_type?.name),1)])):a(``,!0),e.accountData?.currency?(f(),o(`div`,B,[r[3]||=i(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Currency:`,-1),i(`span`,V,b(e.accountData?.currency?.code),1)])):a(``,!0),e.accountData?.description?(f(),o(`div`,H,[r[4]||=i(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Description:`,-1),i(`span`,U,b(e.accountData?.description),1)])):a(``,!0)])]),i(`div`,null,[r[9]||=i(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},`Statement Period`,-1),i(`div`,W,[e.filters?.from_date?(f(),o(`div`,G,[r[6]||=i(`span`,{class:`font-semibold text-gray-700 print:text-black`},`From Date:`,-1),i(`span`,K,b(t(x)(e.filters.from_date)),1)])):a(``,!0),i(`div`,q,[r[7]||=i(`span`,{class:`font-semibold text-gray-700 print:text-black`},`To Date:`,-1),i(`span`,J,b(e.filters?.to_date?t(x)(e.filters.to_date):`Current`),1)]),i(`div`,Y,[r[8]||=i(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Print Date:`,-1),i(`span`,X,b(t(x)(new Date().toISOString())),1)])])])])]),i(`section`,Z,[i(`div`,Q,[i(`div`,ne,[i(`table`,re,[r[14]||=i(`thead`,null,[i(`tr`,{class:`bg-gray-100 print:bg-gray-200`},[i(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Date`),i(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Type`),i(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Transaction ID`),i(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Note`),i(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Debit`),i(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Credit`),i(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Balance`)])],-1),i(`tbody`,null,[(f(!0),o(n,null,p(e.statements,e=>(f(),o(`tr`,{key:e.id,class:`even:bg-gray-50 print:even:bg-gray-100`},[i(`td`,ie,b(t(x)(e.date)),1),i(`td`,ae,b(g(e.type)),1),i(`td`,oe,b(e.code||`-`),1),i(`td`,se,b(e.note||`-`),1),i(`td`,{class:y([`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-xs`,e.debit?`text-red-600 dark:text-red-400 font-medium print:text-black`:`print:text-black`])},b(e.debit?h(e.debit):`-`),3),i(`td`,{class:y([`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-xs`,e.credit?`text-green-600 dark:text-green-400 font-medium print:text-black`:`print:text-black`])},b(e.credit?h(e.credit):`-`),3),i(`td`,{class:y([`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-semibold print:border-black print:text-xs`,_(e.balance)])},b(h(e.balance)),3)]))),128)),(f(!0),o(n,null,p(m.value,e=>(f(),o(`tr`,{key:`empty-`+e,class:`even:bg-gray-50 print:even:bg-gray-100`},r[10]||=[i(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),i(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),i(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),i(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),i(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),i(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),i(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1)]))),128)),r[13]||=i(`tr`,null,[i(`td`,{colspan:`7`,class:`print:border-black py-2`},`\xA0`)],-1),i(`tr`,ce,[r[11]||=i(`td`,{colspan:`3`,class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black`},null,-1),r[12]||=i(`td`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},`Total`,-1),i(`td`,le,b(h(e.stats?.total_debit)),1),i(`td`,ue,b(h(e.stats?.total_credit)),1),i(`td`,{class:y([`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-lg print:border-black print:text-xs`,_(e.stats?.balance)])},b(h(e.stats?.balance)),3)])])])])]),r[15]||=s(`<div class="flex justify-between items-center mb-6 print:mb-3 mt-8 print:mt-6"><div class="flex-1 text-center"><p class="font-semibold text-gray-700 print:text-black print:text-xs">Prepared By</p><div class="border-b border-gray-400 print:border-black mt-8 print:mt-4"></div></div><div class="flex-1 text-center ml-8"><p class="font-semibold text-gray-700 print:text-black print:text-xs">Approved By</p><div class="border-b border-gray-400 print:border-black mt-8 print:mt-4"></div></div></div>`,1)]),i(`section`,de,[i(`footer`,fe,[i(`div`,pe,[i(`div`,me,[t(u).company.address?(f(),o(`p`,he,b(t(u).company.address),1)):a(``,!0),t(u).company.phone?(f(),o(`p`,ge,b(t(u).company.phone),1)):a(``,!0),t(u).company.email?(f(),o(`p`,_e,b(t(u).company.email),1)):a(``,!0),t(u).company.website?(f(),o(`p`,ve,b(t(u).company.website),1)):a(``,!0)])])])])]))}}),be=ye;const $={class:`min-h-screen bg-gray-50 print:bg-white`},xe={class:`bg-white shadow-sm border-b print:hidden`},Se={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`},Ce={class:`flex items-center justify-between h-16`},we={class:`flex items-center space-x-4`},Te={class:`text-sm text-gray-500`},Ee={class:`flex items-center space-x-3`},De={key:0,class:`flex items-center justify-center min-h-screen`},Oe={class:`text-center`},ke={key:1,class:`py-8 print:py-0`},Ae={class:`max-w-6xl mx-auto print:max-w-none`};var je=u({__name:`StatementPreviewPage`,setup(n){let a=v(),s=_(),u=g(),p=te(),y=r(()=>parseInt(s.params.id)),x=m(!0),S=m([]),C=m({}),w=m(null),T=m(null),E=m({search:s.query.search||``,from_date:s.query.from_date||``,to_date:s.query.to_date||``,withPage:!1}),D=()=>{a.back()},O=async()=>{if(T.value)try{await T.value.printStatement()}catch(e){console.error(`Failed to print statement:`,e),u.error(`Failed to print statement`)}},k=async()=>{try{w.value=await p.fetchAccount(y.value)}catch(e){console.error(`Error loading account:`,e),u.error(`Failed to load account details`),a.push({name:`accounts.index`})}},A=async()=>{try{let e=await p.getAccountStatements(y.value,E.value);S.value=e.data,C.value=e.stats}catch(e){u.error(`Failed to load account statements`,{title:`Error`}),console.error(`Error fetching statements:`,e)}};return d(async()=>{try{x.value=!0,await Promise.all([k(),A()])}catch(e){console.error(`Error initializing statement preview:`,e)}finally{x.value=!1}}),(n,r)=>(f(),o(`div`,$,[i(`div`,xe,[i(`div`,Se,[i(`div`,Ce,[i(`div`,we,[i(`button`,{onClick:D,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 transition-colors`},[l(t(h),{class:`w-5 h-5`})]),i(`div`,null,[r[0]||=i(`h1`,{class:`text-lg font-semibold text-gray-900`},`Account Statement Preview`,-1),i(`p`,Te,b(w.value?.code)+` - `+b(w.value?.name),1)])]),i(`div`,Ee,[i(`button`,{onClick:O,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},[l(t(ee),{class:`w-4 h-4 mr-2`}),r[1]||=c(` Print Statement `,-1)])])])])]),x.value?(f(),o(`div`,De,[i(`div`,Oe,[l(t(e),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),r[2]||=i(`p`,{class:`mt-2 text-gray-600`},`Loading statement...`,-1)])])):(f(),o(`div`,ke,[i(`div`,Ae,[l(be,{ref_key:`accountStatementRef`,ref:T,statements:S.value,stats:C.value,"account-data":w.value,filters:E.value},null,8,[`statements`,`stats`,`account-data`,`filters`])])]))]))}}),Me=je;export{Me as default};