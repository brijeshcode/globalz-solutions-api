import{$ as e,M as t,R as n,S as r,U as i,V as a,a$ as o,aD as ee,aF as te,aG as s,aH as c,aI as l,aJ as u,aL as d,aM as f,aN as ne,aP as re,aR as p,aS as ie,aV as ae,aY as m,ab as oe,ar as se,as as ce,b0 as h,b1 as le,b3 as g,h as ue,p as de}from"./index-DMU9rpXT.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-BFc6-TYF.js";import{d as _}from"./common-DNevajli.js";import{b as fe}from"./currencyUtil-DFY2m5KW.js";import{b as v}from"./DataItems-myrjCmz7.js";import{b as pe,c as y}from"./SystemInfoCard-DXqpeQvm.js";import{b}from"./documentService-Cgcy_0n1.js";import{c as x}from"./suppliersStore-CAaYPuDO.js";const S={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},C={class:`mb-8`},w={class:`flex items-center justify-between`},T={class:`flex items-center space-x-4`},E={class:`text-3xl font-bold text-gray-900 dark:text-gray-100`},D={class:`text-sm text-gray-600 dark:text-gray-400 mt-1`},O={class:`flex items-center space-x-3`},k={key:0,class:`flex items-center justify-center py-12`},A={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6`},j={class:`flex items-center`},M={class:`text-red-600 dark:text-red-400 mt-1`},N={key:2,class:`space-y-8`},P=[`href`],F={key:1},I={key:0},L={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},R=[`href`],z={key:1},B={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},me=[`href`],he={key:2,class:`sm:col-span-2`},ge={class:`text-sm text-gray-900 dark:text-gray-100`},_e={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},ve={class:`grid grid-cols-1 gap-2 sm:grid-cols-3`},ye={class:`font-medium`},be={key:0},xe=[`href`],Se={key:1},Ce=[`href`],we={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Te={class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},Ee={class:`flex items-center justify-between`},De={class:`text-lg font-medium text-gray-900 dark:text-gray-100`},Oe={class:`px-6 py-5`},V={class:`grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3`},ke={class:`flex items-start space-x-3`},Ae={class:`flex-shrink-0`},je={class:`flex-1 min-w-0`},Me={class:`text-sm font-medium text-gray-900 dark:text-gray-100 truncate`},Ne={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},Pe={class:`text-xs text-gray-500 dark:text-gray-400`},Fe={class:`flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity`},Ie={class:`flex space-x-2`},Le=[`onClick`],Re=[`onClick`],ze={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Be={class:`px-6 py-8 text-center`},Ve={key:3,class:`fixed inset-0 z-50 overflow-y-auto`,"aria-labelledby":`modal-title`,role:`dialog`,"aria-modal":`true`},He={class:`flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0`},Ue={class:`inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6`},We={class:`absolute top-0 right-0 pt-4 pr-4`},Ge={class:`mt-3 text-center sm:mt-5`},Ke={class:`text-lg leading-6 font-medium text-gray-900 dark:text-gray-100 mb-4`},qe={key:0,class:`max-h-96 overflow-auto`},Je=[`src`,`alt`],Ye={key:1,class:`flex items-center justify-center py-8`},Xe={key:1,class:`h-96`},Ze=[`src`],Qe={key:1,class:`flex items-center justify-center py-8`},$e={key:2,class:`text-center py-8`},et={class:`mt-5 sm:mt-6 flex justify-center space-x-3`};var H=ne({__name:`DetailPage`,setup(ne){let H=ce(),U=se(),tt=te(()=>parseInt(U.params.id)),nt=x(),W=o(null),G=o(!1),K=o(``),q=o(!1),J=o(null),Y=o(``),rt=async()=>{try{G.value=!0,K.value=``,W.value=await nt.fetchSupplier(tt.value)}catch(e){K.value=e.message||`Failed to load supplier details`,console.error(`Error loading supplier:`,e)}finally{G.value=!1}},it=()=>{H.push({name:`suppliers.index`})},at=()=>{W.value&&H.push({name:`suppliers.edit`,params:{id:W.value.id.toString()}})},X=async e=>{await b.download(e)},ot=async e=>{try{J.value=e,q.value=!0;let t=await b.preview(e.id);Y.value=t.preview_url}catch(t){console.error(`Error getting preview URL:`,t),Y.value=ct(e)}},Z=()=>{q.value=!1,J.value=null,Y.value=``},st=e=>Q(e)||$(e),Q=e=>{let t=e.file_extension?.toLowerCase();return[`jpg`,`jpeg`,`png`,`gif`,`bmp`,`svg`,`webp`].includes(t||``)},$=e=>{let t=e.file_extension?.toLowerCase();return t===`pdf`},ct=e=>{let t=`https://staging.globalzsolutions.com`;return`${t}/api/documents/${e.id}/preview`},lt=e=>{let i=e?.toLowerCase();return[`jpg`,`jpeg`,`png`,`gif`,`bmp`,`svg`].includes(i)?t:[`pdf`].includes(i)?r:n};return re(()=>{rt()}),(t,n)=>(p(),u(`div`,S,[s(`div`,C,[s(`div`,w,[s(`div`,T,[s(`button`,{onClick:it,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[f(h(oe),{class:`w-5 h-5`})]),s(`div`,null,[s(`h1`,E,g(W.value?.name||`Supplier Details`),1),s(`p`,D,` Supplier Code: `+g(W.value?.code),1)])]),s(`div`,O,[W.value?(p(),u(`span`,{key:0,class:le([`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium`,W.value?.is_active?`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300`:`bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300`])},g(W.value?.is_active?`Active`:`Inactive`),3)):l(``,!0),s(`button`,{onClick:at,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700`},[f(h(de),{class:`w-4 h-4 mr-2`}),n[1]||=d(` Edit `,-1)])])])]),G.value?(p(),u(`div`,k,n[2]||=[s(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),s(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading supplier details...`,-1)])):K.value?(p(),u(`div`,A,[s(`div`,j,[f(h(e),{class:`w-6 h-6 text-red-500 mr-3`}),s(`div`,null,[n[3]||=s(`h3`,{class:`text-lg font-medium text-red-800 dark:text-red-300`},`Error Loading Supplier`,-1),s(`p`,M,g(K.value),1)])])])):W.value?(p(),u(`div`,N,[f(y,{title:`General Information`},{default:m(()=>[f(v,{label:`Supplier Name`,value:W.value.name},null,8,[`value`]),f(v,{label:`Code`,value:W.value.code},null,8,[`value`]),f(v,{label:`Type`,value:W.value.supplier_type?.name},null,8,[`value`]),f(v,{label:`Country`,value:W.value.country?.name},null,8,[`value`]),f(v,{label:`Opening Balance`,value:h(fe)(W.value.opening_balance,!0,W.value.currency)},null,8,[`value`]),f(v,{label:`Currency`,value:`${W.value.currency?.name} (${W.value.currency?.code})`},null,8,[`value`])]),_:1}),f(y,{title:`Contact Information`,gridCols:`cols-2`},{default:m(()=>[f(v,{label:`Address`,value:W.value.address,class:`sm:col-span-2`},null,8,[`value`]),f(v,{label:`Phone`},{default:m(()=>[W.value.phone?(p(),u(`a`,{key:0,href:`tel:${W.value.phone}`,class:`text-indigo-600 hover:text-indigo-500`},g(W.value.phone),9,P)):(p(),u(`span`,F,`No phone number`))]),_:1}),W.value.email?(p(),u(`div`,I,[n[4]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Email`,-1),s(`dd`,L,[s(`a`,{href:`mailto:${W.value.email}`,class:`text-indigo-600 hover:text-indigo-500`},g(W.value.email),9,R)])])):l(``,!0),W.value.url?(p(),u(`div`,z,[n[5]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Website`,-1),s(`dd`,B,[s(`a`,{href:W.value.url,target:`_blank`,class:`text-indigo-600 hover:text-indigo-500`},g(W.value.url),9,me)])])):l(``,!0),W.value.contact_person?(p(),u(`div`,he,[n[6]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400 mb-2`},`Contact Person`,-1),s(`dd`,ge,[s(`div`,_e,[s(`div`,ve,[s(`div`,null,[s(`span`,ye,g(W.value.contact_person),1)]),W.value.contact_person_email?(p(),u(`div`,be,[s(`a`,{href:`mailto:${W.value.contact_person_email}`,class:`text-indigo-600 hover:text-indigo-500`},g(W.value.contact_person_email),9,xe)])):l(``,!0),W.value.contact_person_mobile?(p(),u(`div`,Se,[s(`a`,{href:`tel:${W.value.contact_person_mobile}`,class:`text-indigo-600 hover:text-indigo-500`},g(W.value.contact_person_mobile),9,Ce)])):l(``,!0)])])])])):l(``,!0)]),_:1}),f(y,{title:`Business Information`,gridCols:`cols-2`},{default:m(()=>[f(v,{label:`Payment Term`,value:W.value.payment_term?.name},null,8,[`value`]),f(v,{label:`Ship From`,value:W.value.ship_from},null,8,[`value`]),f(v,{label:`Discount Percentage`,value:`${W.value.discount_percentage}%`},null,8,[`value`]),f(v,{label:`Bank Information`,value:W.value.bank_info,class:`sm:col-span-2`},null,8,[`value`]),f(v,{label:`Notes`,value:W.value.notes,class:`sm:col-span-2`},null,8,[`value`])]),_:1}),W.value.documents&&W.value.documents.length>0?(p(),u(`div`,we,[s(`div`,Te,[s(`div`,Ee,[s(`h3`,De,` Documents (`+g(W.value.documents.length)+`) `,1)])]),s(`div`,Oe,[s(`div`,V,[(p(!0),u(ee,null,ie(W.value.documents,e=>(p(),u(`div`,{key:e.id,class:`relative group bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors`},[s(`div`,ke,[s(`div`,Ae,[(p(),c(ae(lt(e.file_extension)),{class:`h-8 w-8 text-gray-400`}))]),s(`div`,je,[s(`p`,Me,g(e.title||e.original_name),1),s(`p`,Ne,g(e.file_size_human),1),s(`p`,Pe,g(h(_)(e.created_at)),1)]),s(`div`,Fe,[s(`div`,Ie,[st(e)?(p(),u(`button`,{key:0,onClick:t=>ot(e),class:`text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300`,title:`Preview`},[f(h(i),{class:`h-5 w-5`})],8,Le)):l(``,!0),s(`button`,{onClick:t=>X(e),class:`text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300`,title:`Download`},[f(h(a),{class:`h-5 w-5`})],8,Re)])])])]))),128))])])])):(p(),u(`div`,ze,[n[9]||=s(`div`,{class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},[s(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100`},` Documents `)],-1),s(`div`,Be,[f(h(r),{class:`mx-auto h-12 w-12 text-gray-400`}),n[7]||=s(`h3`,{class:`mt-4 text-sm font-medium text-gray-900 dark:text-gray-100`},`No documents`,-1),n[8]||=s(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},` No documents have been uploaded for this supplier. `,-1)])])),f(pe,{item:W.value,formatDateTime:h(_)},null,8,[`item`,`formatDateTime`])])):l(``,!0),q.value?(p(),u(`div`,Ve,[s(`div`,He,[s(`div`,{class:`fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity`,onClick:Z}),s(`div`,Ue,[s(`div`,We,[s(`button`,{onClick:Z,class:`bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none`},[f(h(ue),{class:`h-6 w-6`})])]),s(`div`,Ge,[s(`h3`,Ke,g(J.value?.title||J.value?.original_name),1),J.value&&Q(J.value)?(p(),u(`div`,qe,[Y.value?(p(),u(`img`,{key:0,src:Y.value,alt:J.value.original_name,class:`max-w-full h-auto mx-auto rounded-lg shadow-lg`},null,8,Je)):(p(),u(`div`,Ye,n[10]||=[s(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),s(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading preview...`,-1)]))])):J.value&&$(J.value)?(p(),u(`div`,Xe,[Y.value?(p(),u(`iframe`,{key:0,src:Y.value,class:`w-full h-full border rounded-lg`,title:`PDF Preview`,frameborder:`0`},null,8,Ze)):(p(),u(`div`,Qe,n[11]||=[s(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),s(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading preview...`,-1)]))])):(p(),u(`div`,$e,[f(h(r),{class:`mx-auto h-12 w-12 text-gray-400 mb-4`}),n[12]||=s(`p`,{class:`text-gray-500 dark:text-gray-400`},`Preview not available for this file type.`,-1)]))]),s(`div`,et,[s(`button`,{onClick:n[0]||=e=>X(J.value),class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700`},[f(h(a),{class:`h-4 w-4 mr-2`}),n[13]||=d(` Download `,-1)]),s(`button`,{onClick:Z,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},` Close `)])])])])):l(``,!0)]))}}),U=H;export{U as default};