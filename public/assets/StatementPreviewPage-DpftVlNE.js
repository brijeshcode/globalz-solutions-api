import{G as e,Q as t,a$ as n,aC as r,aG as i,aH as a,aS as o,aU as s,aV as c,aX as l,aY as u,aZ as d,a_ as f,ao as p,b0 as m,b3 as h,b5 as g,b6 as _,bf as v,bg as y,bh as b,bj as x}from"./index-BogmXPcL.js";import"./GlobalConfig-wPgXFcZ5.js";import{c as S}from"./common-CZbH6H1Z.js";import"./tableUtils-dXs1kjAL.js";import{b as ee}from"./accountsStore-CkY2_KMu.js";import{b as C}from"./currencyUtil-Bk2vDNVl.js";import{b as w}from"./companyStore-Cy32E7N5.js";const T={class:`max-w-4xl mx-auto p-8 bg-white text-gray-900 print:h-full print:p-0 print:max-w-none print:mx-0`},E={class:`header`},D={class:`flex justify-between items-start mb-10 pb-6 border-b-2 border-blue-600 print:border-black print:mb-6`},O={class:`flex-1`},k={class:`flex items-center mb-3`},A=[`src`,`alt`],j={key:1,class:`text-3xl font-bold text-blue-600 print:text-black print:text-2xl`},te={key:0},M={class:`print:text-black`},N={class:`text-right flex-1 mt-4`},P={class:`text-lg font-semibold text-gray-600 print:text-black print:text-base`},F={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 print:grid-cols-2 print:gap-6 print:mb-6`},I={class:`space-y-1 print:space-y-0`},L={class:`flex justify-between print:justify-between`},R={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},z={key:0,class:`flex justify-between print:justify-between`},B={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},V={key:1,class:`flex justify-between print:justify-between`},H={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},U={key:2,class:`flex justify-between print:justify-between`},W={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},G={class:`space-y-1 print:space-y-0`},K={key:0,class:`flex justify-between print:justify-between`},q={class:`text-gray-900 print:text-black print:text-xs`},J={class:`flex justify-between print:justify-between`},Y={class:`text-gray-900 print:text-black print:text-xs`},X={class:`flex justify-between print:justify-between`},Z={class:`text-gray-900 print:text-black print:text-xs`},Q={class:`body`},ne={class:`mb-8 print:mb-4`},re={class:`overflow-x-auto print:overflow-visible`},ie={class:`w-full border-collapse border border-gray-300 print:border-black`},ae={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},oe={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},se={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},ce={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},le={class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},ue={class:`border-t-2 border-gray-400 print:border-t-2 print:border-black font-bold bg-gray-100 print:bg-gray-200`},de={class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-black print:text-xs`},fe={class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-black print:text-xs`},pe={class:`footer print:block hidden print:fixed print:bottom-0 print:left-0 print:right-0`},me={class:`border-t-2 border-gray-300 print:border-black pt-4 pb-2`},he={class:`mt-2 print:mt-1`},ge={class:`flex flex-wrap gap-2 text-sm text-gray-600 print:text-black print:text-xs justify-between`},_e={key:0,class:`flex-1`},ve={key:1,class:`flex-1 text-center`},ye={key:2,class:`flex-1 text-center`},be={key:3,class:`flex-1 text-right`};var xe=m({__name:`AccountStatement`,props:{statements:{default:()=>[]},stats:{default:()=>({})},accountData:{},filters:{default:()=>({})}},setup(e,{expose:t}){let n=e,r=w();h(async()=>{try{r.company.name||await r.fetchCompany()}catch(e){console.error(`Failed to fetch company data:`,e)}});let i=s(()=>{let e=n.statements?.length||0,t=15;return e>=t?0:t-e}),a=e=>{let t={sales:`Sales`,payments:`Payment`,credit_note:`Credit Note`,debit_note:`Debit Note`,returns:`Return`,journal:`Journal Entry`,opening_balance:`Opening Balance`,purchase:`Purchase`,expense:`Expense`};return t[e]||e},f=e=>!e&&e!==0?`print:text-black`:e>=0?`text-green-600 dark:text-green-400 print:text-black`:`text-red-600 dark:text-red-400 print:text-black`,p=()=>{window.print()};return t({printStatement:p}),(e,t)=>(g(),u(`div`,T,[c(`section`,E,[c(`div`,D,[c(`div`,O,[c(`div`,k,[y(r).company.logo?.preview_url?(g(),u(`img`,{key:0,src:y(r).company.logo.preview_url,alt:y(r).company.name||`Company Logo`,class:`h-24 w-auto mr-4 print:h-12`},null,8,A)):l(``,!0),y(r).company.logo?.preview_url?l(``,!0):(g(),u(`div`,j,x(y(r).company.name),1))]),y(r).company.tax_number?(g(),u(`div`,te,[c(`p`,M,[c(`b`,null,`Tax Registration #: `+x(y(r).company.tax_number),1)])])):l(``,!0)]),c(`div`,N,[t[0]||=c(`h1`,{class:`text-2xl font-bold text-blue-600 mb-2 print:text-black print:text-xl`},`ACCOUNT STATEMENT`,-1),c(`div`,P,x(e.accountData?.code),1)])]),c(`div`,F,[c(`div`,null,[t[5]||=c(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},`Account Information`,-1),c(`div`,I,[c(`div`,L,[t[1]||=c(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Account:`,-1),c(`span`,R,x(e.accountData?.code)+`, `+x(e.accountData?.name||`Unknown Account`),1)]),e.accountData?.account_type?(g(),u(`div`,z,[t[2]||=c(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Type:`,-1),c(`span`,B,x(e.accountData?.account_type?.name),1)])):l(``,!0),e.accountData?.currency?(g(),u(`div`,V,[t[3]||=c(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Currency:`,-1),c(`span`,H,x(e.accountData?.currency?.code),1)])):l(``,!0),e.accountData?.description?(g(),u(`div`,U,[t[4]||=c(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Description:`,-1),c(`span`,W,x(e.accountData?.description),1)])):l(``,!0)])]),c(`div`,null,[t[9]||=c(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},`Statement Period`,-1),c(`div`,G,[e.filters?.from_date?(g(),u(`div`,K,[t[6]||=c(`span`,{class:`font-semibold text-gray-700 print:text-black`},`From Date:`,-1),c(`span`,q,x(y(S)(e.filters.from_date)),1)])):l(``,!0),c(`div`,J,[t[7]||=c(`span`,{class:`font-semibold text-gray-700 print:text-black`},`To Date:`,-1),c(`span`,Y,x(e.filters?.to_date?y(S)(e.filters.to_date):`Current`),1)]),c(`div`,X,[t[8]||=c(`span`,{class:`font-semibold text-gray-700 print:text-black`},`Print Date:`,-1),c(`span`,Z,x(y(S)(new Date().toISOString())),1)])])])])]),c(`section`,Q,[c(`div`,ne,[c(`div`,re,[c(`table`,ie,[t[13]||=c(`thead`,null,[c(`tr`,{class:`bg-gray-100 print:bg-gray-200`},[c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Date`),c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Type`),c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Name`),c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Transaction ID`),c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-left font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Note`),c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Debit`),c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Credit`),c(`th`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-gray-700 print:border-black print:text-black print:text-xs`},`Balance`)])],-1),c(`tbody`,null,[(g(!0),u(o,null,_(e.statements,t=>(g(),u(`tr`,{key:t.id,class:`even:bg-gray-50 print:even:bg-gray-100`},[c(`td`,ae,x(y(S)(t.date)),1),c(`td`,oe,x(a(t.type)),1),c(`td`,se,x(t.name||`-`),1),c(`td`,ce,x(t.code||`-`),1),c(`td`,le,x(t.note||`-`),1),c(`td`,{class:b([`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-xs`,t.debit?`text-red-600 dark:text-red-400 font-medium print:text-black`:`print:text-black`])},x(t.debit?y(C)(t.debit,!1,e.accountData.currency):`-`),3),c(`td`,{class:b([`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right print:border-black print:text-xs`,t.credit?`text-green-600 dark:text-green-400 font-medium print:text-black`:`print:text-black`])},x(t.credit?y(C)(t.credit,!1,e.accountData.currency):`-`),3),c(`td`,{class:b([`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-semibold print:border-black print:text-xs`,f(t.balance)])},x(y(C)(t.balance,!1,e.accountData.currency)),3)]))),128)),(g(!0),u(o,null,_(i.value,e=>(g(),u(`tr`,{key:`empty-`+e,class:`even:bg-gray-50 print:even:bg-gray-100`},t[10]||=[c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1),c(`td`,{class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-xs`},`\xA0`,-1)]))),128)),c(`tr`,ue,[t[11]||=c(`td`,{colspan:`4`,class:`border-r border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black`},null,-1),t[12]||=c(`td`,{class:`border border-gray-300 px-3 py-1 print:px-1 print:py-0 print:border-black print:text-black print:text-xs`},`Total`,-1),c(`td`,de,x(y(C)(e.stats?.total_debit,!1,e.accountData.currency)),1),c(`td`,fe,x(y(C)(e.stats?.total_credit,!1,e.accountData.currency)),1),c(`td`,{class:b([`border border-gray-300 px-3 py-1 print:px-1 print:py-0 text-right font-bold text-lg print:border-black print:text-xs`,f(e.stats?.balance)])},x(y(C)(e.stats?.balance,!1,e.accountData.currency)),3)])])])])]),t[14]||=d(`<div class="flex justify-between items-center mb-6 print:mb-3 mt-8 print:mt-6"><div class="flex-1 text-center"><p class="font-semibold text-gray-700 print:text-black print:text-xs">Prepared By</p><div class="border-b border-gray-400 print:border-black mt-8 print:mt-4"></div></div><div class="flex-1 text-center ml-8"><p class="font-semibold text-gray-700 print:text-black print:text-xs">Approved By</p><div class="border-b border-gray-400 print:border-black mt-8 print:mt-4"></div></div></div>`,1)]),c(`section`,pe,[c(`footer`,me,[c(`div`,he,[c(`div`,ge,[y(r).company.address?(g(),u(`p`,_e,x(y(r).company.address),1)):l(``,!0),y(r).company.phone?(g(),u(`p`,ve,x(y(r).company.phone),1)):l(``,!0),y(r).company.email?(g(),u(`p`,ye,x(y(r).company.email),1)):l(``,!0),y(r).company.website?(g(),u(`p`,be,x(y(r).company.website),1)):l(``,!0)])])])])]))}}),Se=xe;const Ce={class:`min-h-screen bg-gray-50 print:bg-white`},we={class:`bg-white shadow-sm border-b print:hidden`},Te={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`},Ee={class:`flex items-center justify-between h-16`},De={class:`flex items-center space-x-4`},$={class:`text-sm text-gray-500`},Oe={class:`flex items-center space-x-3`},ke={key:0,class:`flex items-center justify-center min-h-screen`},Ae={class:`text-center`},je={key:1,class:`py-8 print:py-0`},Me={class:`max-w-6xl mx-auto print:max-w-none`};var Ne=m({__name:`StatementPreviewPage`,setup(o){let l=a(),d=i(),m=r(),_=ee(),b=s(()=>parseInt(d.params.id)),S=v(!0),C=v([]),w=v({}),T=v(null),E=v(null),D=v({search:d.query.search||``,from_date:d.query.from_date||``,to_date:d.query.to_date||``,withPage:!1}),O=()=>{l.back()},k=async()=>{if(E.value)try{await E.value.printStatement()}catch(e){console.error(`Failed to print statement:`,e),m.error(`Failed to print statement`)}},A=async()=>{try{T.value=await _.fetchAccount(b.value)}catch(e){console.error(`Error loading account:`,e),m.error(`Failed to load account details`),l.push({name:`accounts.index`})}},j=async()=>{try{let e=await _.getAccountStatements(b.value,D.value);C.value=e.data,w.value=e.stats}catch(e){m.error(`Failed to load account statements`,{title:`Error`}),console.error(`Error fetching statements:`,e)}};return h(async()=>{try{S.value=!0,await Promise.all([A(),j()])}catch(e){console.error(`Error initializing statement preview:`,e)}finally{S.value=!1}}),(r,i)=>(g(),u(`div`,Ce,[c(`div`,we,[c(`div`,Te,[c(`div`,Ee,[c(`div`,De,[c(`button`,{onClick:O,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 transition-colors`},[n(y(p),{class:`w-5 h-5`})]),c(`div`,null,[i[0]||=c(`h1`,{class:`text-lg font-semibold text-gray-900`},`Account Statement Preview`,-1),c(`p`,$,x(T.value?.code)+` `+x(T.value?.name),1)])]),c(`div`,Oe,[c(`button`,{onClick:k,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},[n(y(e),{class:`w-4 h-4 mr-2`}),i[1]||=f(` Print Statement `,-1)])])])])]),S.value?(g(),u(`div`,ke,[c(`div`,Ae,[n(y(t),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),i[2]||=c(`p`,{class:`mt-2 text-gray-600`},`Loading statement...`,-1)])])):(g(),u(`div`,je,[c(`div`,Me,[n(Se,{ref_key:`accountStatementRef`,ref:E,statements:C.value,stats:w.value,"account-data":T.value,filters:D.value},null,8,[`statements`,`stats`,`account-data`,`filters`])])]))]))}}),Pe=Ne;export{Pe as default};