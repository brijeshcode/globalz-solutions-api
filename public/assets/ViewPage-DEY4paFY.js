import{H as e,J as t,M as n,a$ as r,aB as i,aC as a,aN as ee,aP as o,aQ as s,aS as c,aT as l,aV as u,aW as d,aX as te,aZ as ne,aj as re,ax as ie,b0 as ae,b9 as f,ba as p,bb as oe,bd as m,r as se}from"./index-B0ZF1ES8.js";import{b as ce}from"./useAuth-ekE47iJd.js";import"./GlobalConfig-wPgXFcZ5.js";import"./tableUtils-ylneqlK-.js";import{b as le}from"./ConfirmationModal-DQITqwkF.js";import{b as ue}from"./itemAdjustStore-BU3e2kTQ.js";(()=>{let e=0;return()=>e++})();const h=Math.PI,g=2*h;g+h,h/180,h/2,h/4,h*2/3,function(){return typeof window>`u`?function(e){return e()}:window.requestAnimationFrame}();const _=new Map;function v(e,t){t||={};let n=e+JSON.stringify(t),r=_.get(n);return r||(r=new Intl.NumberFormat(e,t),_.set(n,r)),r}function y(e,t,n){return v(t,n).format(e)}Object.create(null),Object.create(null);function b(){return typeof window<`u`&&typeof document<`u`}(function(){let e=!1;try{let t={get passive(){return e=!0,!1}};b()&&(window.addEventListener(`test`,null,t),window.removeEventListener(`test`,null,t))}catch{}return e})();const x={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},S={class:``},C={class:`mb-8`},w={class:`flex items-center space-x-4 mb-2`},T={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},E={class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},D={class:`flex items-center justify-between`},O={class:`text-lg font-medium text-gray-900 dark:text-white`},k={class:`text-sm text-gray-500 dark:text-gray-400`},A={class:`flex space-x-3`},j={class:`px-6 py-8`},M={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},N={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},P={class:`mt-1 text-sm text-gray-900 dark:text-white`},F={class:`mt-1`},I={class:`mt-1 text-sm text-gray-900 dark:text-white`},L={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},R={class:`flex items-center justify-between mb-4`},z={class:`text-sm text-gray-600 dark:text-gray-400`},B={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},V={key:1,class:`overflow-x-auto`},H={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},U={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},de={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},fe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},pe={class:`px-6 py-4 text-sm text-gray-900 dark:text-white`},me={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white`},he={class:`px-6 py-4 text-sm text-gray-500 dark:text-gray-400`},ge={class:`bg-gray-50 dark:bg-gray-700`},_e={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},ve={key:0,class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},ye={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},be={class:`text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap`},xe={class:`pt-6 border-t border-gray-200 dark:border-gray-700`},Se={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},Ce={key:0},we={class:`mt-1 text-sm text-gray-900 dark:text-white`},Te={key:1},Ee={class:`mt-1 text-sm text-gray-900 dark:text-white`},De={key:2},Oe={class:`mt-1 text-sm text-gray-900 dark:text-white`},ke={key:3},Ae={class:`mt-1 text-sm text-gray-900 dark:text-white`},je={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Me={class:`px-6 py-8 text-center`};var W=te({__name:`ViewPage`,setup(te){let h=a(),g=i(),_=ie(),v=ue(),{isSuperAdmin:b,isAdmin:W}=ce(),G=parseInt(g.params.id),K=f(!0),q=f({}),J=f(!1),Y=f(!1),X=o(()=>b.value||W.value),Z=()=>{h.push({name:`item-adjusts.index`})},Ne=()=>{h.push({name:`item-adjusts.edit`,params:{id:G.toString()}})},Pe=()=>{J.value=!0},Q=()=>{J.value=!1,Y.value=!1},Fe=async()=>{Y.value=!0;try{await v.deleteItemAdjust(G),_.success(`Item adjustment deleted successfully`),h.push({name:`item-adjusts.index`})}catch(e){console.error(`Error deleting item adjustment:`,e),_.error(`Failed to delete item adjustment`)}finally{Y.value=!1,Q()}},Ie=()=>q.value.items?q.value.items.reduce((e,t)=>e+(t.quantity||0),0):0,Le=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`})},$=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})},Re=async()=>{K.value=!0;try{let e=await v.fetchItemAdjust(G);q.value=e}catch(e){console.error(`Error loading item adjustment:`,e),_.error(`Failed to load item adjustment`),Z()}finally{K.value=!1}};return ne(async()=>{await Re()}),(i,a)=>(r(),l(`div`,x,[s(`div`,S,[s(`div`,C,[s(`div`,w,[s(`button`,{onClick:Z,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[d(p(re),{class:`w-5 h-5`})]),a[1]||=s(`div`,null,[s(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Item Adjustment Details `),s(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` View item adjustment information `)],-1)])]),K.value?(r(),l(`div`,je,[s(`div`,Me,[d(p(n),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),a[20]||=s(`p`,{class:`mt-2 text-gray-600 dark:text-gray-400`},`Loading item adjustment details...`,-1)])])):(r(),l(`div`,T,[s(`div`,E,[s(`div`,D,[s(`div`,null,[s(`h3`,O,m(q.value.prefix)+m(q.value.code),1),s(`p`,k,` Item Adjustment ID: `+m(q.value.id),1)]),s(`div`,A,[X.value?(r(),l(`button`,{key:0,onClick:Ne,class:`inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[d(p(e),{class:`w-4 h-4 mr-2`}),a[2]||=u(` Edit `,-1)])):c(``,!0),X.value?(r(),l(`button`,{key:1,onClick:Pe,class:`inline-flex items-center px-3 py-2 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200`},[d(p(se),{class:`w-4 h-4 mr-2`}),a[3]||=u(` Delete `,-1)])):c(``,!0)])])]),s(`div`,j,[s(`div`,M,[a[7]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),s(`div`,N,[s(`div`,null,[a[4]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Adjustment Date`,-1),s(`dd`,P,m(Le(q.value.date)),1)]),s(`div`,null,[a[5]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Adjustment Type`,-1),s(`dd`,F,[s(`span`,{class:oe([`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium`,q.value.type===`Add`?`bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100`:`bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100`])},m(q.value.type),3)])]),s(`div`,null,[a[6]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),s(`dd`,I,m(q.value.warehouse?.name||`-`),1)])])]),s(`div`,L,[s(`div`,R,[a[8]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Adjustment Items `,-1),s(`div`,z,` Total Items: `+m(q.value.total_items_count||0)+` | Total Quantity: `+m(q.value.total_quantity||0),1)]),!q.value.items||q.value.items.length===0?(r(),l(`div`,B,[d(p(t),{class:`mx-auto h-12 w-12 text-gray-400`}),a[9]||=s(`h5`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items found`,-1),a[10]||=s(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`This item adjustment has no items.`,-1)])):(r(),l(`div`,V,[s(`table`,H,[a[13]||=s(`thead`,{class:`bg-gray-50 dark:bg-gray-700`},[s(`tr`,null,[s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`#`),s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Item Code`),s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Description`),s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Quantity`),s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Note`)])],-1),s(`tbody`,U,[(r(!0),l(ee,null,ae(q.value.items,(e,t)=>(r(),l(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[s(`td`,de,m(t+1),1),s(`td`,fe,m(e.item_code),1),s(`td`,pe,m(e.item?.short_name||e.item?.description||`-`),1),s(`td`,me,m(p(y)(e.quantity)),1),s(`td`,he,m(e.note||`-`),1)]))),128))]),s(`tfoot`,ge,[s(`tr`,null,[a[11]||=s(`td`,{colspan:`3`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Total Quantity:`,-1),s(`td`,_e,m(p(y)(Ie())),1),a[12]||=s(`td`,null,null,-1)])])])]))]),q.value.note?(r(),l(`div`,ve,[a[14]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Notes `,-1),s(`div`,ye,[s(`p`,be,m(q.value.note),1)])])):c(``,!0),s(`div`,xe,[a[19]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Audit Information `,-1),s(`div`,Se,[q.value.created_by?(r(),l(`div`,Ce,[a[15]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created By`,-1),s(`dd`,we,m(q.value.created_by.name),1)])):c(``,!0),q.value.created_at?(r(),l(`div`,Te,[a[16]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created At`,-1),s(`dd`,Ee,m($(q.value.created_at)),1)])):c(``,!0),q.value.updated_by?(r(),l(`div`,De,[a[17]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Updated By`,-1),s(`dd`,Oe,m(q.value.updated_by.name),1)])):c(``,!0),q.value.updated_at?(r(),l(`div`,ke,[a[18]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated`,-1),s(`dd`,Ae,m($(q.value.updated_at)),1)])):c(``,!0)])])])]))]),d(le,{show:J.value,"onUpdate:show":a[0]||=e=>J.value=e,type:`delete`,title:`Delete Item Adjustment ${q.value.code}`,message:`Are you sure you want to delete item adjustment '${q.value.code}'? This action can be undone by restoring from trash.`,"confirm-text":`Delete Item Adjustment`,"loading-text":`Deleting...`,loading:Y.value,onConfirm:Fe,onCancel:Q},null,8,[`show`,`title`,`message`,`loading`])]))}}),G=W;export{G as default};