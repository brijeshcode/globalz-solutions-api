import{B as e,C as t,M as n,N as r,Q as i,a$ as a,a5 as o,a6 as s,a7 as c,aH as l,aN as u,aS as d,aU as f,aV as p,aW as m,aX as h,aY as g,a_ as _,aa as v,ab as y,ad as b,ay as x,b0 as S,b2 as C,b3 as w,b5 as T,b6 as E,b9 as D,bd as O,bf as k,bg as A,bh as j,bj as M,o as N,p as P,w as F}from"./index-DUzK-0uf.js";import{b as I}from"./useAuth-Dtin66jR.js";import{b as L}from"./GlobalConfig-wPgXFcZ5.js";import"./common-CZbH6H1Z.js";import"./currencyUtil-C9MgD6Z9.js";import{b as R,c as ee,d as te}from"./EmployeeDailyBusinessBreadDown-DhNKZjrS.js";var z=class{baseUrl=`/homepage`;async getHomePage(){try{let e=await x(this.baseUrl,{loadingMessage:`Loading homepage data...`,showSuccessNotification:!1});return e.data.data}catch(e){throw console.error(`Error fetching homepage data:`,e),e}}};const B=new z,V=e=>{if(typeof e==`number`)return e;let{value:t,unit:n}=e;switch(n){case`seconds`:return t*1e3;case`minutes`:return t*60*1e3;case`hours`:return t*60*60*1e3;case`days`:return t*24*60*60*1e3;default:throw Error(`Invalid time unit: ${n}`)}};function H(e,t={}){let{interval:n={value:5,unit:`minutes`},immediate:r=!0,autoStart:i=!0,preventOverlap:a=!0}=t,o=V(n),s=k(!1),c=k(!1),l=null,u=async()=>{if(!(a&&c.value))try{c.value=!0,await e()}finally{c.value=!1}},d=()=>{s.value||(s.value=!0,l=setInterval(()=>{u()},o))},f=()=>{l&&(clearInterval(l),l=null,s.value=!1)},p=()=>{f(),d()},m=async()=>{await u()};return w(()=>{r&&u(),i&&d()}),C(()=>{f()}),{isActive:s,isRefreshing:c,start:d,stop:f,restart:p,refresh:m}}var U=S({__name:`CountdownTimer`,props:{duration:{default:300}},setup(e,{expose:t}){let n=e,r=k(n.duration),i=null,a=f(()=>{let e=Math.floor(r.value/60),t=r.value%60;return`${e}:${t.toString().padStart(2,`0`)}`}),o=()=>{r.value=n.duration},s=()=>{i&&clearInterval(i),i=setInterval(()=>{r.value>0?r.value--:r.value=n.duration},1e3)},c=()=>{i&&(clearInterval(i),i=null)};return t({reset:o,stop:c,start:s}),w(()=>{s()}),C(()=>{c()}),(e,t)=>(T(),g(`span`,null,M(a.value),1))}}),W=U;const G={class:`space-y-4 p-4`},K={class:`flex flex-col sm:flex-row sm:items-center sm:justify-between`},q={class:`mt-2 sm:mt-0 flex items-center gap-2`},J={key:0,class:`flex items-center text-xs text-gray-500 dark:text-gray-400`},Y={class:`flex items-center gap-2`},X={class:`flex items-center text-xs text-gray-600 dark:text-gray-300`},Z={key:0,class:`flex justify-center items-center py-12`},Q={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3`},ne={class:`flex items-center`},re={class:`text-xs text-red-700 dark:text-red-400`},ie={key:2,class:`space-y-4`},ae={class:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4`},oe={class:`relative p-4`},se={class:`flex items-center justify-between mb-2`},ce={class:`p-2 bg-white/20 rounded-lg backdrop-blur-sm`},le={class:`space-y-0.5`},ue={class:`text-2xl font-bold text-white`},de={class:`relative p-4`},fe={class:`flex items-center justify-between mb-2`},pe={class:`p-2 bg-white/20 rounded-lg backdrop-blur-sm`},me={class:`space-y-0.5`},he={class:`text-2xl font-bold text-white`},ge={class:`relative p-4`},_e={class:`flex items-center justify-between mb-2`},ve={class:`p-2 bg-white/20 rounded-lg backdrop-blur-sm`},ye={class:`space-y-0.5`},be={class:`text-2xl font-bold text-white`},xe={class:`relative p-4`},Se={class:`flex items-center justify-between mb-2`},Ce={class:`p-2 bg-white/20 rounded-lg backdrop-blur-sm`},we={class:`space-y-0.5`},Te={class:`text-2xl font-bold text-white`},Ee={class:`bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700`},De={class:`px-4 py-3 border-b border-gray-200 dark:border-gray-700`},Oe={class:`flex items-center justify-between`},ke={class:`flex items-center gap-2`},Ae={class:`overflow-x-auto`},je={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Me={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Ne={class:`px-4 py-3 whitespace-nowrap`},Pe={class:`flex items-center`},Fe={class:`flex-shrink-0 p-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors duration-200`},Ie={class:`px-4 py-3 whitespace-nowrap`},Le={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300`},Re={class:`px-4 py-3 whitespace-nowrap`},ze={key:0,class:`inline-flex items-center gap-1 text-xs font-medium text-amber-600 dark:text-amber-400`},Be={key:1,class:`inline-flex items-center gap-1 text-xs font-medium text-green-600 dark:text-green-400`},Ve={class:`px-4 py-3 whitespace-nowrap`},He={class:`flex items-center`},Ue={class:`flex-shrink-0 p-1.5 bg-amber-100 dark:bg-amber-900/30 rounded-lg group-hover:bg-amber-200 dark:group-hover:bg-amber-900/50 transition-colors duration-200`},We={class:`px-4 py-3 whitespace-nowrap`},Ge={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300`},Ke={class:`px-4 py-3 whitespace-nowrap`},qe={key:0,class:`inline-flex items-center gap-1 text-xs font-medium text-amber-600 dark:text-amber-400`},Je={key:1,class:`inline-flex items-center gap-1 text-xs font-medium text-green-600 dark:text-green-400`},Ye={class:`px-4 py-3 whitespace-nowrap`},Xe={class:`flex items-center`},Ze={class:`flex-shrink-0 p-1.5 bg-green-100 dark:bg-green-900/30 rounded-lg group-hover:bg-green-200 dark:group-hover:bg-green-900/50 transition-colors duration-200`},Qe={class:`px-4 py-3 whitespace-nowrap`},$e={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300`},et={class:`px-4 py-3 whitespace-nowrap`},tt={key:0,class:`inline-flex items-center gap-1 text-xs font-medium text-amber-600 dark:text-amber-400`},nt={key:1,class:`inline-flex items-center gap-1 text-xs font-medium text-green-600 dark:text-green-400`},rt={class:`px-4 py-3 whitespace-nowrap`},it={class:`flex items-center`},at={class:`flex-shrink-0 p-1.5 bg-red-100 dark:bg-red-900/30 rounded-lg group-hover:bg-red-200 dark:group-hover:bg-red-900/50 transition-colors duration-200`},ot={class:`px-4 py-3 whitespace-nowrap`},st={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300`},ct={class:`px-4 py-3 whitespace-nowrap`},lt={key:0,class:`inline-flex items-center gap-1 text-xs font-medium text-red-600 dark:text-red-400`},ut={key:1,class:`inline-flex items-center gap-1 text-xs font-medium text-green-600 dark:text-green-400`};var dt=S({__name:`AdminHomePage`,setup(e){let n=l(),{isSuperAdmin:r,isAdmin:u,isSalesman:d,isWarehouseManager:f}=I(),m=k(null),x=k(!0),S=k(null),C=k(),w=async()=>{try{x.value=!0,S.value=null;let e=await B.getHomePage();m.value=e.data||e,C.value?.reset()}catch(e){console.error(`Error fetching homepage data:`,e),S.value=`Failed to load data. Please try again.`}finally{x.value=!1}},E=e=>{n.push({name:e})},{isRefreshing:D}=H(w,{interval:{value:5,unit:`minutes`},immediate:!0,autoStart:!0});return(e,n)=>(T(),g(`div`,G,[p(`div`,K,[n[11]||=p(`div`,null,[p(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`Dashboard`),p(`p`,{class:`mt-0.5 text-xs text-gray-500 dark:text-gray-400`},` Monitor your pending reviews and stock alerts `)],-1),p(`div`,q,[A(D)?(T(),g(`div`,J,[a(A(i),{class:`h-3 w-3 animate-spin mr-1.5`}),n[8]||=p(`span`,null,`Refreshing...`,-1)])):h(``,!0),p(`div`,Y,[p(`div`,X,[a(A(s),{class:`h-3 w-3 mr-1.5`}),p(`span`,null,[n[9]||=_(`Next refresh: `,-1),a(W,{ref_key:`countdownRef`,ref:C,duration:300},null,512)])]),p(`button`,{onClick:w,class:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors duration-200`},[a(A(t),{class:j([`h-3 w-3`,x.value?`animate-spin`:``])},null,8,[`class`]),n[10]||=p(`span`,null,`Now`,-1)])])])]),x.value&&!m.value?(T(),g(`div`,Z,[a(A(i),{class:`h-6 w-6 animate-spin text-blue-600 dark:text-blue-400`}),n[12]||=p(`span`,{class:`ml-2 text-xs text-gray-500 dark:text-gray-400`},`Loading dashboard data...`,-1)])):S.value?(T(),g(`div`,Q,[p(`div`,ne,[a(A(y),{class:`h-4 w-4 text-red-600 dark:text-red-400 mr-2`}),p(`p`,re,M(S.value),1)])])):(T(),g(`div`,ie,[p(`div`,ae,[A(r)||A(u)||A(d)?(T(),g(`div`,{key:0,onClick:n[0]||=e=>E(`salesOrder.index`),class:`group relative bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 rounded-lg shadow-md overflow-hidden cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg`},[n[14]||=p(`div`,{class:`absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200`},null,-1),p(`div`,oe,[p(`div`,se,[p(`div`,ce,[a(A(F),{class:`h-5 w-5 text-white`})]),a(A(b),{class:`h-4 w-4 text-white/70 group-hover:text-white group-hover:translate-x-1 transition-all duration-200`})]),p(`div`,le,[n[13]||=p(`p`,{class:`text-white/90 text-xs font-medium`},`Sales to Review`,-1),p(`p`,ue,M(m.value?.sales||0),1)])])])):h(``,!0),A(r)||A(u)||A(d)?(T(),g(`div`,{key:1,onClick:n[1]||=e=>E(`customer.return-orders.index`),class:`group relative bg-gradient-to-br from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 rounded-lg shadow-md overflow-hidden cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg`},[n[16]||=p(`div`,{class:`absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200`},null,-1),p(`div`,de,[p(`div`,fe,[p(`div`,pe,[a(A(t),{class:`h-5 w-5 text-white`})]),a(A(b),{class:`h-4 w-4 text-white/70 group-hover:text-white group-hover:translate-x-1 transition-all duration-200`})]),p(`div`,me,[n[15]||=p(`p`,{class:`text-white/90 text-xs font-medium`},`Returns to Review`,-1),p(`p`,he,M(m.value?.returns||0),1)])])])):h(``,!0),A(r)||A(u)||A(d)?(T(),g(`div`,{key:2,onClick:n[2]||=e=>E(`customer.payment-orders.index`),class:`group relative bg-gradient-to-br from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 rounded-lg shadow-md overflow-hidden cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg`},[n[18]||=p(`div`,{class:`absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200`},null,-1),p(`div`,ge,[p(`div`,_e,[p(`div`,ve,[a(A(o),{class:`h-5 w-5 text-white`})]),a(A(b),{class:`h-4 w-4 text-white/70 group-hover:text-white group-hover:translate-x-1 transition-all duration-200`})]),p(`div`,ye,[n[17]||=p(`p`,{class:`text-white/90 text-xs font-medium`},`Payments to Review`,-1),p(`p`,be,M(m.value?.payments||0),1)])])])):h(``,!0),A(r)||A(u)?(T(),g(`div`,{key:3,onClick:n[3]||=e=>E(`items.index`),class:`group relative bg-gradient-to-br from-red-500 to-red-600 dark:from-red-600 dark:to-red-700 rounded-lg shadow-md overflow-hidden cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg`},[n[20]||=p(`div`,{class:`absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200`},null,-1),p(`div`,xe,[p(`div`,Se,[p(`div`,Ce,[a(A(P),{class:`h-5 w-5 text-white`})]),a(A(b),{class:`h-4 w-4 text-white/70 group-hover:text-white group-hover:translate-x-1 transition-all duration-200`})]),p(`div`,we,[n[19]||=p(`p`,{class:`text-white/90 text-xs font-medium`},`Low Stock Items`,-1),p(`p`,Te,M(m.value?.lowStocks||0),1)])])])):h(``,!0)]),p(`div`,Ee,[p(`div`,De,[p(`div`,Oe,[p(`div`,ke,[a(A(c),{class:`h-4 w-4 text-gray-500 dark:text-gray-400`}),n[21]||=p(`h2`,{class:`text-base font-semibold text-gray-900 dark:text-white`},`Review Queue`,-1)]),n[22]||=p(`span`,{class:`text-xs text-gray-500 dark:text-gray-400`},` Click row to view `,-1)])]),p(`div`,Ae,[p(`table`,je,[n[35]||=p(`thead`,{class:`bg-gray-50 dark:bg-gray-900/50`},[p(`tr`,null,[p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},` Category `),p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},` Count `),p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},` Status `)])],-1),p(`tbody`,Me,[A(r)||A(u)||A(d)?(T(),g(`tr`,{key:0,onClick:n[4]||=e=>E(`salesOrder.index`),class:`hover:bg-blue-50 dark:hover:bg-blue-900/10 cursor-pointer transition-all duration-200 group`},[p(`td`,Ne,[p(`div`,Pe,[p(`div`,Fe,[a(A(F),{class:`h-4 w-4 text-blue-600 dark:text-blue-400`})]),n[23]||=p(`div`,{class:`ml-3`},[p(`div`,{class:`text-sm font-medium text-gray-900 dark:text-white`},`Sales Orders`),p(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Pending approval`)],-1)])]),p(`td`,Ie,[p(`span`,Le,M(m.value?.sales||0),1)]),p(`td`,Re,[(m.value?.sales||0)>0?(T(),g(`span`,ze,[a(A(s),{class:`h-3 w-3`}),n[24]||=_(` Requires attention `,-1)])):(T(),g(`span`,Be,[a(A(v),{class:`h-3 w-3`}),n[25]||=_(` All clear `,-1)]))])])):h(``,!0),A(r)||A(u)||A(d)?(T(),g(`tr`,{key:1,onClick:n[5]||=e=>E(`customer.return-orders.index`),class:`hover:bg-amber-50 dark:hover:bg-amber-900/10 cursor-pointer transition-all duration-200 group`},[p(`td`,Ve,[p(`div`,He,[p(`div`,Ue,[a(A(t),{class:`h-4 w-4 text-amber-600 dark:text-amber-400`})]),n[26]||=p(`div`,{class:`ml-3`},[p(`div`,{class:`text-sm font-medium text-gray-900 dark:text-white`},`Return Orders`),p(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Pending processing`)],-1)])]),p(`td`,We,[p(`span`,Ge,M(m.value?.returns||0),1)]),p(`td`,Ke,[(m.value?.returns||0)>0?(T(),g(`span`,qe,[a(A(s),{class:`h-3 w-3`}),n[27]||=_(` Requires attention `,-1)])):(T(),g(`span`,Je,[a(A(v),{class:`h-3 w-3`}),n[28]||=_(` All clear `,-1)]))])])):h(``,!0),A(r)||A(u)||A(d)?(T(),g(`tr`,{key:2,onClick:n[6]||=e=>E(`customer.payment-orders.index`),class:`hover:bg-green-50 dark:hover:bg-green-900/10 cursor-pointer transition-all duration-200 group`},[p(`td`,Ye,[p(`div`,Xe,[p(`div`,Ze,[a(A(o),{class:`h-4 w-4 text-green-600 dark:text-green-400`})]),n[29]||=p(`div`,{class:`ml-3`},[p(`div`,{class:`text-sm font-medium text-gray-900 dark:text-white`},`Payment Orders`),p(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Pending verification`)],-1)])]),p(`td`,Qe,[p(`span`,$e,M(m.value?.payments||0),1)]),p(`td`,et,[(m.value?.payments||0)>0?(T(),g(`span`,tt,[a(A(s),{class:`h-3 w-3`}),n[30]||=_(` Requires attention `,-1)])):(T(),g(`span`,nt,[a(A(v),{class:`h-3 w-3`}),n[31]||=_(` All clear `,-1)]))])])):h(``,!0),A(r)||A(u)?(T(),g(`tr`,{key:3,onClick:n[7]||=e=>E(`items.index`),class:`hover:bg-red-50 dark:hover:bg-red-900/10 cursor-pointer transition-all duration-200 group`},[p(`td`,rt,[p(`div`,it,[p(`div`,at,[a(A(P),{class:`h-4 w-4 text-red-600 dark:text-red-400`})]),n[32]||=p(`div`,{class:`ml-3`},[p(`div`,{class:`text-sm font-medium text-gray-900 dark:text-white`},`Low Stock Alert`),p(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Items running low`)],-1)])]),p(`td`,ot,[p(`span`,st,M(m.value?.lowStocks||0),1)]),p(`td`,ct,[(m.value?.lowStocks||0)>0?(T(),g(`span`,lt,[a(A(y),{class:`h-3 w-3`}),n[33]||=_(` Action needed `,-1)])):(T(),g(`span`,ut,[a(A(v),{class:`h-3 w-3`}),n[34]||=_(` All clear `,-1)]))])])):h(``,!0)])])])])]))]))}}),ft=dt;const pt={class:`p-6`},mt={class:`flex justify-between items-center mb-6`},ht={class:`flex items-center gap-3 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md`},gt=[`value`],_t=[`value`],vt={key:0,class:`text-center text-gray-600 dark:text-gray-400 mt-20`},yt={key:1,class:`mt-6 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded`},bt={key:2,class:`space-y-6`},xt={class:`bg-white dark:bg-gray-800 rounded-lg shadow-md p-6`},St={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4`},Ct={class:`bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg`},wt={class:`text-lg font-bold text-gray-900 dark:text-white`},Tt={class:`text-xs text-gray-500 dark:text-gray-500`},Et={class:`bg-green-50 dark:bg-green-900/20 p-4 rounded-lg`},Dt={class:`text-lg font-bold text-gray-900 dark:text-white`},Ot={class:`bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg`},kt={class:`text-lg font-bold text-gray-900 dark:text-white`},At={class:`bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg`},jt={class:`text-lg font-bold text-gray-900 dark:text-white`},Mt={class:`grid grid-cols-1 md:grid-cols-3 gap-4 mt-4`},Nt={class:`bg-red-50 dark:bg-red-700/20 p-4 rounded-lg`},Pt={class:`text-lg font-semibold text-red-900 dark:text-white`},Ft={class:`bg-gray-50 dark:bg-gray-700/20 p-4 rounded-lg`},It={class:`text-lg font-semibold text-gray-900 dark:text-white`},Lt={class:`bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border-2 border-yellow-400 dark:border-yellow-600`},Rt={class:`text-2xl font-bold text-yellow-700 dark:text-yellow-400`},zt={class:`grid grid-cols-1 p-6 md:grid-cols-10 gap-4 mt-4 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden`},Bt={class:`col-span-10`};var Vt=S({__name:`SaleManHomePage`,setup(e){let t=k(null),n=k(!0),r=k(null),i=new Date,o=i.getMonth()+1,s=i.getFullYear(),c=k(o),l=k(s),m=[{value:1,label:`January`},{value:2,label:`February`},{value:3,label:`March`},{value:4,label:`April`},{value:5,label:`May`},{value:6,label:`June`},{value:7,label:`July`},{value:8,label:`August`},{value:9,label:`September`},{value:10,label:`October`},{value:11,label:`November`},{value:12,label:`December`}],_=f(()=>{let e=[];for(let t=L.commissionStartYear;t<=s;t++)e.push(t);return e.reverse()}),v=async()=>{try{n.value=!0,r.value=null;let e=await te.getEmployeeMonthlyCommission({month:c.value,year:l.value});t.value=e}catch(e){console.error(`Error fetching commission data:`,e),r.value=`Failed to load commission data. Please try again.`}finally{n.value=!1}},y=e=>e==null?`-`:new Intl.NumberFormat(`en-US`,{style:`currency`,currency:`USD`}).format(e),b=e=>{let t=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`];return t[e-1]||``};return w(()=>{v()}),(e,i)=>(T(),g(`div`,pt,[p(`div`,mt,[i[4]||=p(`h1`,{class:`text-3xl font-bold text-gray-900 dark:text-white`},`My Monthly Commission`,-1),p(`div`,ht,[p(`div`,null,[i[2]||=p(`label`,{class:`block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1`},`Month`,-1),O(p(`select`,{"onUpdate:modelValue":i[0]||=e=>c.value=e,class:`px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500`},[(T(),g(d,null,E(m,e=>p(`option`,{key:e.value,value:e.value},M(e.label),9,gt)),64))],512),[[u,c.value]])]),p(`div`,null,[i[3]||=p(`label`,{class:`block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1`},`Year`,-1),O(p(`select`,{"onUpdate:modelValue":i[1]||=e=>l.value=e,class:`px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500`},[(T(!0),g(d,null,E(_.value,e=>(T(),g(`option`,{key:e,value:e},M(e),9,_t))),128))],512),[[u,l.value]])]),p(`button`,{onClick:v,class:`mt-5 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors duration-150 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`},` View `)])]),n.value?(T(),g(`div`,vt,i[5]||=[p(`p`,null,`Loading commission data...`,-1)])):r.value?(T(),g(`div`,yt,[p(`p`,null,M(r.value),1)])):t.value?(T(),g(`div`,bt,[p(`div`,xt,[i[13]||=p(`h2`,{class:`text-xl font-semibold mb-4 text-gray-900 dark:text-white`},`Business Summary`,-1),p(`div`,St,[p(`div`,Ct,[i[6]||=p(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Employee`,-1),p(`p`,wt,M(t.value.business_summary.employee_name),1),p(`p`,Tt,`ID: `+M(t.value.business_summary.employee_id),1)]),p(`div`,Et,[i[7]||=p(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Period`,-1),p(`p`,Dt,M(b(t.value.business_summary.month))+` `+M(t.value.business_summary.year),1)]),p(`div`,Ot,[i[8]||=p(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Total Sales`,-1),p(`p`,kt,M(y(t.value.business_summary.total_sales)),1)]),p(`div`,At,[i[9]||=p(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Net Sales`,-1),p(`p`,jt,M(y(t.value.business_summary.net_sales)),1)])]),p(`div`,Mt,[p(`div`,Nt,[i[10]||=p(`p`,{class:`text-sm text-red-600 dark:text-red-400`},`Returns`,-1),p(`p`,Pt,M(y(t.value.business_summary.total_returns)),1)]),p(`div`,Ft,[i[11]||=p(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Payments`,-1),p(`p`,It,M(y(t.value.business_summary.total_payments)),1)]),p(`div`,Lt,[i[12]||=p(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Total Commission`,-1),p(`p`,Rt,M(y(t.value.total_commission)),1)])])]),p(`div`,zt,[p(`div`,Bt,[a(ee,{"commission-data":t.value},null,8,[`commission-data`]),a(R,{"commission-data":t.value},null,8,[`commission-data`])])])])):h(``,!0)]))}}),Ht=Vt;const Ut={class:`space-y-4 p-4`},Wt={class:`flex flex-col sm:flex-row sm:items-center sm:justify-between`},Gt={class:`mt-2 sm:mt-0 flex items-center gap-2`},Kt={key:0,class:`flex items-center text-xs text-gray-500 dark:text-gray-400`},qt={class:`flex items-center gap-2`},Jt={class:`flex items-center text-xs text-gray-600 dark:text-gray-300`},Yt={key:0,class:`flex justify-center items-center py-12`},Xt={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3`},Zt={class:`flex items-center`},Qt={class:`text-xs text-red-700 dark:text-red-400`},$t={key:2,class:`space-y-4`},en={class:`bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700`},$={class:`px-4 py-3 border-b border-gray-200 dark:border-gray-700`},tn={class:`flex items-center justify-between`},nn={class:`flex items-center gap-2`},rn={class:`overflow-x-auto`},an={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},on={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},sn=[`onClick`],cn={class:`px-4 py-3 whitespace-nowrap`},ln={class:`flex items-center`},un={class:`ml-3`},dn={class:`text-sm font-medium text-gray-900 dark:text-white`},fn={class:`text-xs text-gray-500 dark:text-gray-400`},pn={class:`px-4 py-3 whitespace-nowrap`},mn={class:`px-4 py-3 whitespace-nowrap`},hn={key:0,class:`inline-flex items-center gap-1 text-xs font-medium text-amber-600 dark:text-amber-400`},gn={key:1,class:`inline-flex items-center gap-1 text-xs font-medium text-green-600 dark:text-green-400`};var _n=S({__name:`WarehouseManagerHomepage`,setup(o){let u=l(),b=k(null),x=k(!0),S=k(null),C=k(),w=f(()=>[{key:`invoices_to_prepare`,label:`Invoices to Prepare`,description:`Waiting status`,icon:n,color:`blue`,route:`sales.index`,statusText:{active:`Requires attention`,clear:`All clear`}},{key:`returns_to_receive`,label:`Returns to Receive`,description:`Pending processing`,icon:t,color:`amber`,route:`customer.return-orders.index`,statusText:{active:`Requires attention`,clear:`All clear`}},{key:`purchases_to_receive`,label:`Purchases to Receive`,description:`Waiting purchases`,icon:N,color:`green`,route:`purchases.index`,statusText:{active:`Requires attention`,clear:`All clear`}},{key:`purchase_returns`,label:`Purchase Returns`,description:`Pending return`,icon:r,color:`red`,route:`supplier.purchase-returns.index`,statusText:{active:`Action needed`,clear:`All clear`}}]),O=async()=>{try{x.value=!0,S.value=null;let e=await B.getHomePage();b.value=e.data||e,C.value?.reset()}catch(e){console.error(`Error fetching homepage data:`,e),S.value=`Failed to load data. Please try again.`}finally{x.value=!1}},P=e=>{u.push({name:e})},{isRefreshing:F}=H(O,{interval:{value:5,unit:`minutes`},immediate:!0,autoStart:!0});return(t,n)=>(T(),g(`div`,Ut,[p(`div`,Wt,[n[3]||=p(`div`,null,[p(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`Welcome Warehouse Manager`),p(`p`,{class:`mt-0.5 text-xs text-gray-500 dark:text-gray-400`},` Monitor your pending reviews and stock alerts `)],-1),p(`div`,Gt,[A(F)?(T(),g(`div`,Kt,[a(A(i),{class:`h-3 w-3 animate-spin mr-1.5`}),n[0]||=p(`span`,null,`Refreshing...`,-1)])):h(``,!0),p(`div`,qt,[p(`div`,Jt,[a(A(s),{class:`h-3 w-3 mr-1.5`}),p(`span`,null,[n[1]||=_(`Next refresh: `,-1),a(W,{ref_key:`countdownRef`,ref:C,duration:300},null,512)])]),p(`button`,{onClick:O,class:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors duration-200`},[a(A(e),{class:j([`h-3 w-3`,x.value?`animate-spin`:``])},null,8,[`class`]),n[2]||=p(`span`,null,`Now`,-1)])])])]),x.value&&!b.value?(T(),g(`div`,Yt,[a(A(i),{class:`h-6 w-6 animate-spin text-blue-600 dark:text-blue-400`}),n[4]||=p(`span`,{class:`ml-2 text-xs text-gray-500 dark:text-gray-400`},`Loading dashboard data...`,-1)])):S.value?(T(),g(`div`,Xt,[p(`div`,Zt,[a(A(y),{class:`h-4 w-4 text-red-600 dark:text-red-400 mr-2`}),p(`p`,Qt,M(S.value),1)])])):(T(),g(`div`,$t,[p(`div`,en,[p(`div`,$,[p(`div`,tn,[p(`div`,nn,[a(A(c),{class:`h-4 w-4 text-gray-500 dark:text-gray-400`}),n[5]||=p(`h2`,{class:`text-base font-semibold text-gray-900 dark:text-white`},`Review Queue`,-1)])])]),p(`div`,rn,[p(`table`,an,[n[6]||=p(`thead`,{class:`bg-gray-50 dark:bg-gray-900/50`},[p(`tr`,null,[p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},` Category `),p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},` Count `),p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},` Status `)])],-1),p(`tbody`,on,[(T(!0),g(d,null,E(w.value,e=>(T(),g(`tr`,{key:e.key,onClick:t=>P(e.route),class:j(`hover:bg-${e.color}-50 dark:hover:bg-${e.color}-900/10 cursor-pointer transition-all duration-200 group`)},[p(`td`,cn,[p(`div`,ln,[p(`div`,{class:j(`flex-shrink-0 p-1.5 bg-${e.color}-100 dark:bg-${e.color}-900/30 rounded-lg group-hover:bg-${e.color}-200 dark:group-hover:bg-${e.color}-900/50 transition-colors duration-200`)},[(T(),m(D(e.icon),{class:j(`h-4 w-4 text-${e.color}-600 dark:text-${e.color}-400`)},null,8,[`class`]))],2),p(`div`,un,[p(`div`,dn,M(e.label),1),p(`div`,fn,M(e.description),1)])])]),p(`td`,pn,[p(`span`,{class:j(`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-${e.color}-100 dark:bg-${e.color}-900/30 text-${e.color}-800 dark:text-${e.color}-300`)},M(b.value?.[e.key]||0),3)]),p(`td`,mn,[(b.value?.[e.key]||0)>0?(T(),g(`span`,hn,[a(A(s),{class:`h-3 w-3`}),_(` `+M(e.statusText?.active||`Requires attention`),1)])):(T(),g(`span`,gn,[a(A(v),{class:`h-3 w-3`}),_(` `+M(e.statusText?.clear||`All clear`),1)]))])],10,sn))),128))])])])])]))]))}}),vn=_n;const yn={class:`p-6`};var bn=S({__name:`HomePage`,setup(e){let{isSuperAdmin:t,isAdmin:n,isSalesman:r,isWarehouseManager:i}=I();return(e,a)=>(T(),g(`div`,yn,[A(n)||A(t)?(T(),m(ft,{key:0})):A(r)?(T(),m(Ht,{key:1})):A(i)?(T(),m(vn,{key:2})):h(``,!0)]))}}),xn=bn;export{xn as default};