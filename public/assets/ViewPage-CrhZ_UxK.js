import{$ as e,A as t,F as ee,N as te,_ as n,a9 as ne,aB as r,ab as re,ac as i,ad as ie,ae as a,af as o,ah as s,ai as c,aj as ae,al as oe,an as l,ao as se,ar as ce,ax as u,ay as d,az as f,e as le,j as ue,v as de,x as fe,y as p,z as pe}from"./index-DAYJef18.js";import"./GlobalConfig-DCFE7Hv9.js";import{b as me}from"./customersStore-h9nd7KgX.js";import"./tableUtils-DLdmKRvi.js";import{b as m}from"./documentService-csvTtVzj.js";import{c as h}from"./common-DsZvguJR.js";const g={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},_={class:`mb-8`},v={class:`flex items-center justify-between`},y={class:`flex items-center space-x-4`},b={class:`text-3xl font-bold text-gray-900 dark:text-gray-100`},x={class:`text-sm text-gray-600 dark:text-gray-400 mt-1`},S={class:`flex items-center space-x-3`},C={key:0,class:`flex items-center justify-center py-12`},w={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6`},T={class:`flex items-center`},E={class:`text-red-600 dark:text-red-400 mt-1`},D={key:2,class:`space-y-8`},O={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},k={class:`px-6 py-5`},A={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},j={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},M={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},N={key:0},P={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},F={key:1},I={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},L={key:2},R={key:3},z={key:4},he={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},ge={class:`mt-1`},_e={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ve={class:`px-6 py-5`},ye={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},be={key:0,class:`sm:col-span-2 lg:col-span-3`},xe={class:`mt-1 text-sm text-gray-900 dark:text-gray-100 whitespace-pre-line`},Se={key:1},Ce={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},we={key:2},Te={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Ee={key:3},De={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Oe={key:4},ke={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Ae={key:5},je={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Me={key:6},Ne={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Pe=[`href`],Fe={key:7},Ie={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Le=[`href`],Re={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ze={class:`px-6 py-5`},Be={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},Ve={key:0},He={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Ue={key:1},We={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Ge={key:2},Ke={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},qe={key:3,class:`sm:col-span-2`},Je={class:`mt-1 text-sm text-gray-900 dark:text-gray-100 whitespace-pre-line`},Ye={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Xe={class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},Ze={class:`flex items-center justify-between`},Qe={class:`text-lg font-medium text-gray-900 dark:text-gray-100`},$e={class:`px-6 py-5`},et={class:`grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3`},tt={class:`flex items-start space-x-3`},nt={class:`flex-shrink-0`},rt={class:`flex-1 min-w-0`},it={class:`text-sm font-medium text-gray-900 dark:text-gray-100 truncate`},at={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},ot={class:`text-xs text-gray-500 dark:text-gray-400`},st={class:`flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity`},ct={class:`flex space-x-2`},lt=[`onClick`],ut=[`onClick`],dt={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ft={class:`px-6 py-8 text-center`},pt={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},mt={class:`px-6 py-5`},ht={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},gt={key:0},_t={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},vt={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},yt={key:1},bt={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},xt={key:2},St={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},Ct={key:3,class:`fixed inset-0 z-50 overflow-y-auto`,"aria-labelledby":`modal-title`,role:`dialog`,"aria-modal":`true`},wt={class:`flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0`},Tt={class:`inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6`},Et={class:`absolute top-0 right-0 pt-4 pr-4`},Dt={class:`mt-3 text-center sm:mt-5`},Ot={class:`text-lg leading-6 font-medium text-gray-900 dark:text-gray-100 mb-4`},kt={key:0,class:`max-h-96 overflow-auto`},At=[`src`,`alt`],jt={key:1,class:`flex items-center justify-center py-8`},Mt={key:1,class:`h-96`},Nt=[`src`],Pt={key:1,class:`flex items-center justify-center py-8`},Ft={key:2,class:`text-center py-8`},It={class:`mt-5 sm:mt-6 flex justify-center space-x-3`};var B=ae({__name:`ViewPage`,setup(ae){let B=e(),V=n(),Lt=re(()=>parseInt(V.params.id)),Rt=me(),H=u(null),U=u(!1),W=u(``),G=u(!1),K=u(null),q=u(``),J=async()=>{try{U.value=!0,W.value=``,H.value=await Rt.fetchCustomer(Lt.value)}catch(e){W.value=e.message||`Failed to load customer details`,console.error(`Error loading customer:`,e)}finally{U.value=!1}},zt=()=>{B.push({name:`customer.index`})},Bt=()=>{H.value&&B.push({name:`customer.edit`,params:{id:H.value.id.toString()}})},Y=async e=>{await m.download(e)},Vt=async e=>{try{K.value=e,G.value=!0;let t=await m.preview(e.id);q.value=t.preview_url}catch(t){console.error(`Error getting preview URL:`,t),q.value=Ut(e)}},X=()=>{G.value=!1,K.value=null,q.value=``},Ht=e=>Z(e)||Q(e),Z=e=>{let t=e.file_extension?.toLowerCase();return[`jpg`,`jpeg`,`png`,`gif`,`bmp`,`svg`,`webp`].includes(t||``)},Q=e=>{let t=e.file_extension?.toLowerCase();return t===`pdf`},Ut=e=>{let t=`https://staging.globalzsolutions.com`;return`${t}/api/documents/${e.id}/preview`},Wt=e=>{let t=e?.toLowerCase();return[`jpg`,`jpeg`,`png`,`gif`,`bmp`,`svg`].includes(t)?de:[`pdf`].includes(t)?p:fe},$=e=>new Intl.NumberFormat(`en-US`,{style:`currency`,currency:`USD`}).format(e);return oe(()=>{J()}),(e,n)=>(l(),o(`div`,g,[i(`div`,_,[i(`div`,v,[i(`div`,y,[i(`button`,{onClick:zt,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[c(d(te),{class:`w-5 h-5`})]),i(`div`,null,[i(`h1`,b,r(H.value?.name||`Customer Details`),1),i(`p`,x,` Customer Code: `+r(H.value?.code),1)])]),i(`div`,S,[H.value?(l(),o(`span`,{key:0,class:f([`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium`,H.value?.is_active?`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300`:`bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300`])},r(H.value?.is_active?`Active`:`Inactive`),3)):a(``,!0),i(`button`,{onClick:Bt,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700`},[c(d(ue),{class:`w-4 h-4 mr-2`}),n[1]||=s(` Edit `,-1)])])])]),U.value?(l(),o(`div`,C,n[2]||=[i(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),i(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading customer details...`,-1)])):W.value?(l(),o(`div`,w,[i(`div`,T,[c(d(ee),{class:`w-6 h-6 text-red-500 mr-3`}),i(`div`,null,[n[3]||=i(`h3`,{class:`text-lg font-medium text-red-800 dark:text-red-300`},`Error Loading Customer`,-1),i(`p`,E,r(W.value),1)])])])):H.value?(l(),o(`div`,D,[i(`div`,O,[n[12]||=i(`div`,{class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100`},` General Information `)],-1),i(`div`,k,[i(`dl`,A,[i(`div`,null,[n[4]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer Name`,-1),i(`dd`,j,r(H.value.name),1)]),i(`div`,null,[n[5]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Code`,-1),i(`dd`,M,r(H.value.code),1)]),H.value.customer_type?(l(),o(`div`,N,[n[6]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Type`,-1),i(`dd`,P,r(H.value.customer_type.name),1)])):a(``,!0),H.value.customer_group?(l(),o(`div`,F,[n[7]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Group`,-1),i(`dd`,I,r(H.value.customer_group.name),1)])):a(``,!0),H.value.opening_balance!==void 0&&H.value.opening_balance!==null?(l(),o(`div`,L,[n[8]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Opening Balance`,-1),i(`dd`,{class:f([`mt-1 text-sm font-semibold`,H.value.opening_balance>=0?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`])},r($(H.value.opening_balance)),3)])):a(``,!0),H.value.current_balance!==void 0&&H.value.current_balance!==null?(l(),o(`div`,R,[n[9]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Current Balance`,-1),i(`dd`,{class:f([`mt-1 text-sm font-semibold`,H.value.current_balance>=0?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`])},r($(H.value.current_balance)),3)])):a(``,!0),H.value.credit_limit?(l(),o(`div`,z,[n[10]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Credit Limit`,-1),i(`dd`,he,r($(H.value.credit_limit)),1)])):a(``,!0),i(`div`,null,[n[11]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Status`,-1),i(`dd`,ge,[i(`span`,{class:f([`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium`,H.value.is_active?`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300`:`bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300`])},r(H.value.is_active?`Active`:`Inactive`),3)])])])])]),i(`div`,_e,[n[21]||=i(`div`,{class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100`},` Contact Information `)],-1),i(`div`,ve,[i(`dl`,ye,[H.value.address?(l(),o(`div`,be,[n[13]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Address`,-1),i(`dd`,xe,r(H.value.address),1)])):a(``,!0),H.value.city?(l(),o(`div`,Se,[n[14]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`City`,-1),i(`dd`,Ce,r(H.value.city),1)])):a(``,!0),H.value.customer_province?(l(),o(`div`,we,[n[15]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Province`,-1),i(`dd`,Te,r(H.value.customer_province.name),1)])):a(``,!0),H.value.customer_zone?(l(),o(`div`,Ee,[n[16]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Zone`,-1),i(`dd`,De,r(H.value.customer_zone.name),1)])):a(``,!0),H.value.phone?(l(),o(`div`,Oe,[n[17]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Phone`,-1),i(`dd`,ke,r(H.value.phone),1)])):a(``,!0),H.value.mobile?(l(),o(`div`,Ae,[n[18]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Mobile`,-1),i(`dd`,je,r(H.value.mobile),1)])):a(``,!0),H.value.email?(l(),o(`div`,Me,[n[19]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Email`,-1),i(`dd`,Ne,[i(`a`,{href:`mailto:`+H.value.email,class:`text-blue-600 hover:text-blue-500 dark:text-blue-400`},r(H.value.email),9,Pe)])])):a(``,!0),H.value.website?(l(),o(`div`,Fe,[n[20]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Website`,-1),i(`dd`,Ie,[i(`a`,{href:H.value.website,target:`_blank`,class:`text-blue-600 hover:text-blue-500 dark:text-blue-400`},r(H.value.website),9,Le)])])):a(``,!0)])])]),i(`div`,Re,[n[26]||=i(`div`,{class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100`},` Sales Information `)],-1),i(`div`,ze,[i(`dl`,Be,[H.value.salesperson?(l(),o(`div`,Ve,[n[22]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),i(`dd`,He,r(H.value.salesperson.name)+` (`+r(H.value.salesperson.code)+`)`,1)])):a(``,!0),H.value.customer_payment_term?(l(),o(`div`,Ue,[n[23]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Payment Term`,-1),i(`dd`,We,r(H.value.customer_payment_term.name),1)])):a(``,!0),H.value.discount_percentage?(l(),o(`div`,Ge,[n[24]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Discount Percentage`,-1),i(`dd`,Ke,r(H.value.discount_percentage)+`%`,1)])):a(``,!0),H.value.notes?(l(),o(`div`,qe,[n[25]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Notes`,-1),i(`dd`,Je,r(H.value.notes),1)])):a(``,!0)])])]),H.value.documents&&H.value.documents.length>0?(l(),o(`div`,Ye,[i(`div`,Xe,[i(`div`,Ze,[i(`h3`,Qe,` Documents (`+r(H.value.documents.length)+`) `,1)])]),i(`div`,$e,[i(`div`,et,[(l(!0),o(ne,null,se(H.value.documents,e=>(l(),o(`div`,{key:e.id,class:`relative group bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors`},[i(`div`,tt,[i(`div`,nt,[(l(),ie(ce(Wt(e.file_extension)),{class:`h-8 w-8 text-gray-400`}))]),i(`div`,rt,[i(`p`,it,r(e.title||e.original_name),1),i(`p`,at,r(e.file_size_human),1),i(`p`,ot,r(d(h)(e.created_at)),1)]),i(`div`,st,[i(`div`,ct,[Ht(e)?(l(),o(`button`,{key:0,onClick:t=>Vt(e),class:`text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300`,title:`Preview`},[c(d(pe),{class:`h-5 w-5`})],8,lt)):a(``,!0),i(`button`,{onClick:t=>Y(e),class:`text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300`,title:`Download`},[c(d(t),{class:`h-5 w-5`})],8,ut)])])])]))),128))])])])):(l(),o(`div`,dt,[n[29]||=i(`div`,{class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100`},` Documents `)],-1),i(`div`,ft,[c(d(p),{class:`mx-auto h-12 w-12 text-gray-400`}),n[27]||=i(`h3`,{class:`mt-4 text-sm font-medium text-gray-900 dark:text-gray-100`},`No documents`,-1),n[28]||=i(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},` No documents have been uploaded for this customer. `,-1)])])),i(`div`,pt,[n[34]||=i(`div`,{class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100`},` System Information `)],-1),i(`div`,mt,[i(`dl`,ht,[H.value.created_by?(l(),o(`div`,gt,[n[30]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created By`,-1),i(`dd`,_t,r(H.value.created_by.name),1)])):a(``,!0),i(`div`,null,[n[31]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created At`,-1),i(`dd`,vt,r(d(h)(H.value.created_at)),1)]),H.value.updated_by?(l(),o(`div`,yt,[n[32]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated By`,-1),i(`dd`,bt,r(H.value.updated_by.name),1)])):a(``,!0),H.value.updated_at===H.value.created_at?a(``,!0):(l(),o(`div`,xt,[n[33]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated`,-1),i(`dd`,St,r(d(h)(H.value.updated_at)),1)]))])])])])):a(``,!0),G.value?(l(),o(`div`,Ct,[i(`div`,wt,[i(`div`,{class:`fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity`,onClick:X}),i(`div`,Tt,[i(`div`,Et,[i(`button`,{onClick:X,class:`bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none`},[c(d(le),{class:`h-6 w-6`})])]),i(`div`,Dt,[i(`h3`,Ot,r(K.value?.title||K.value?.original_name),1),K.value&&Z(K.value)?(l(),o(`div`,kt,[q.value?(l(),o(`img`,{key:0,src:q.value,alt:K.value.original_name,class:`max-w-full h-auto mx-auto rounded-lg shadow-lg`},null,8,At)):(l(),o(`div`,jt,n[35]||=[i(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),i(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading preview...`,-1)]))])):K.value&&Q(K.value)?(l(),o(`div`,Mt,[q.value?(l(),o(`iframe`,{key:0,src:q.value,class:`w-full h-full border rounded-lg`,title:`PDF Preview`,frameborder:`0`},null,8,Nt)):(l(),o(`div`,Pt,n[36]||=[i(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),i(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading preview...`,-1)]))])):(l(),o(`div`,Ft,[c(d(p),{class:`mx-auto h-12 w-12 text-gray-400 mb-4`}),n[37]||=i(`p`,{class:`text-gray-500 dark:text-gray-400`},`Preview not available for this file type.`,-1)]))]),i(`div`,It,[i(`button`,{onClick:n[0]||=e=>Y(K.value),class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700`},[c(d(t),{class:`h-4 w-4 mr-2`}),n[38]||=s(` Download `,-1)]),i(`button`,{onClick:X,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},` Close `)])])])])):a(``,!0)]))}}),V=B;export{V as default};