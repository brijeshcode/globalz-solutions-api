import{A as e,G as t,I as n,N as r,Z as i,a$ as a,a1 as o,a8 as s,a9 as c,aE as l,aJ as u,aK as d,aN as f,aO as p,aQ as m,aR as h,aS as g,aT as _,aU as v,aW as y,aX as b,aY as x,aa as S,ab as C,at as w,au as T,av as E,aw as D,ax as O,ay as k,b1 as A,b2 as j,b7 as M,b8 as N,b9 as P,bb as F,bc as I,bd as L,bf as R,d as ee,i as z,r as te,x as ne}from"./index-B0KD7do8.js";import{b as re}from"./useAuth-Dgbrst5c.js";import"./GlobalConfig-wPgXFcZ5.js";import{c as B,d as V,f as H}from"./common-CZbH6H1Z.js";import{b as U}from"./tableUtils-dXs1kjAL.js";import{b as ie}from"./PageHeader-DVVxcgni.js";import{b as ae}from"./ConfirmationModal-D_gbbtq6.js";import{b as W}from"./Modal-B-OoQ-BN.js";import{d as G,e as K}from"./currencyUtil-DN8BeuxT.js";var q=class{baseUrl=`/advanceLoans`;async getAdvanceLoans(e){try{let t=this.buildQueryParams(e),n=await T(`${this.baseUrl}?${t}`,{loadingMessage:`Loading advanceLoans...`,showLoading:!0});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching advanceLoans:`,e),e}}async getAdvanceLoan(e){try{let t=await T(`${this.baseUrl}/${e}`,{loadingMessage:`Loading advanceLoan...`});return t.data.data}catch(e){throw console.error(`Error fetching advanceLoan:`,e),e}}async createAdvanceLoan(e){try{let t=await D(this.baseUrl,e,{loadingMessage:`Creating advanceLoan...`,showSuccessNotification:!0,successMessage:`AdvanceLoan payment created successfully`});return t.data.data}catch(e){throw console.error(`Error creating advanceLoan:`,e),e}}async updateAdvanceLoan(e,t){try{let n=await O(`${this.baseUrl}/${e}`,t,{loadingMessage:`Updating advanceLoan...`,showSuccessNotification:!0,successMessage:`AdvanceLoan payment updated successfully`});return n.data.data}catch(e){throw console.error(`Error updating advanceLoan:`,e),e}}async deleteAdvanceLoan(e){try{await w(`${this.baseUrl}/${e}`,{loadingMessage:`Deleting advanceLoan...`,showSuccessNotification:!0,successMessage:`AdvanceLoan payment deleted successfully`})}catch(e){throw console.error(`Error deleting advanceLoan:`,e),e}}async getTrashedAdvanceLoans(e){try{let t=this.buildQueryParams(e),n=await T(`${this.baseUrl}/trashed?${t}`,{loadingMessage:`Loading trashed advanceLoans...`});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching trashed advanceLoans:`,e),e}}async restoreAdvanceLoan(e){try{let t=await E(`${this.baseUrl}/${e}/restore`,{},{loadingMessage:`Restoring advanceLoan...`,showSuccessNotification:!0,successMessage:`AdvanceLoan payment restored successfully`});return t.data.data}catch(e){throw console.error(`Error restoring advanceLoan:`,e),e}}async forceDeleteAdvanceLoan(e){try{await w(`${this.baseUrl}/${e}/force-delete`,{loadingMessage:`Permanently deleting advanceLoan...`,showSuccessNotification:!0,successMessage:`AdvanceLoan payment permanently deleted`})}catch(e){throw console.error(`Error permanently deleting advanceLoan:`,e),e}}async getAdvanceLoanStats(e){try{let t=this.buildQueryParams(e),n=await T(`${this.baseUrl}/stats?${t}`,{loadingMessage:`Loading advanceLoan statistics...`});return n.data.data}catch(e){throw console.error(`Error fetching advanceLoan statistics:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const J=new q,oe=l(`advanceLoans`,()=>{let e=F([]),t=F(null),n=F([]),r=F(null),i=F(U()),a=F(!1),o=F({}),s=m(()=>t=>e.value.filter(e=>e.date===t)),c=m(()=>t=>e.value.filter(e=>e.employee_id===t)),l=m(()=>t=>e.value.filter(e=>e.currency_id===t)),u=m(()=>t=>e.value.filter(e=>e.account_id===t)),d=m(()=>(t,n)=>e.value.filter(e=>{let r=new Date(e.date),i=new Date(t),a=new Date(n);return r>=i&&r<=a})),f=m(()=>t=>e.value.filter(e=>e.employee_id===t).reduce((e,t)=>e+parseFloat(String(t.amount)),0)),p=m(()=>t=>e.value.filter(e=>e.currency_id===t).reduce((e,t)=>e+parseFloat(String(t.amount)),0)),h=m(()=>e.value.reduce((e,t)=>e+parseFloat(String(t.amount_usd)),0)),g=m(()=>[...e.value].sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()).slice(0,10)),_=m(()=>(t,n)=>e.value.filter(e=>{let r=new Date(e.date);return r.getFullYear()===t&&r.getMonth()+1===n})),v=async t=>{try{a.value=!0,t&&(o.value={...o.value,...t});let n=await J.getAdvanceLoans(o.value);e.value=n.data,i.value=n.pagination}catch(e){throw console.error(`Error fetching advanceLoans:`,e),e}finally{a.value=!1}},y=async e=>{try{let n=await J.getAdvanceLoan(e);return t.value=n,n}catch(e){throw console.error(`Error fetching advanceLoan:`,e),e}},b=async t=>{try{let n=await J.createAdvanceLoan(t);return e.value.unshift(n),i.value.total+=1,r.value&&(r.value.total_advanceLoans+=1,r.value.total_amount_usd+=parseFloat(String(n.amount_usd))),n}catch(e){throw console.error(`Error creating advanceLoan:`,e),e}},x=async(n,r)=>{try{let i=await J.updateAdvanceLoan(n,r),a=e.value.findIndex(e=>e.id===n);return a!==-1&&(e.value[a]=i),t.value?.id===n&&(t.value=i),i}catch(e){throw console.error(`Error updating advanceLoan:`,e),e}},S=async n=>{try{await J.deleteAdvanceLoan(n);let r=e.value.findIndex(e=>e.id===n);r!==-1&&e.value.splice(r,1),--i.value.total,t.value?.id===n&&(t.value=null)}catch(e){throw console.error(`Error deleting advanceLoan:`,e),e}},C=async e=>{try{a.value=!0;let t=e||{},r=await J.getTrashedAdvanceLoans(t);n.value=r.data}catch(e){throw console.error(`Error fetching trashed advanceLoans:`,e),e}finally{a.value=!1}},w=async t=>{try{let r=await J.restoreAdvanceLoan(t),a=n.value.findIndex(e=>e.id===t);return a!==-1&&n.value.splice(a,1),e.value.unshift(r),i.value.total+=1,r}catch(e){throw console.error(`Error restoring advanceLoan:`,e),e}},T=async e=>{try{await J.forceDeleteAdvanceLoan(e);let t=n.value.findIndex(t=>t.id===e);t!==-1&&n.value.splice(t,1)}catch(e){throw console.error(`Error permanently deleting advanceLoan:`,e),e}},E=async e=>{try{let t=await J.getAdvanceLoanStats(e);return r.value=t,t}catch(e){throw console.error(`Error fetching advanceLoan statistics:`,e),e}},D=e=>{o.value={...o.value,...e}},O=()=>{o.value={}},k=()=>{t.value=null},A=()=>{e.value=[],t.value=null,n.value=[],r.value=null,i.value=U(),o.value={},a.value=!1};return{advanceLoans:e,currentAdvanceLoan:t,trashedAdvanceLoans:n,advanceLoanStats:r,pagination:i,loading:a,filters:o,advanceLoansByDate:s,advanceLoansByEmployee:c,advanceLoansByCurrency:l,advanceLoansByAccount:u,advanceLoansByDateRange:d,totalAmountByEmployee:f,totalAmountByCurrency:p,totalAmountUSD:h,recentAdvanceLoans:g,advanceLoansByMonth:_,fetchAdvanceLoans:v,fetchAdvanceLoan:y,createAdvanceLoan:b,updateAdvanceLoan:x,deleteAdvanceLoan:S,fetchTrashedAdvanceLoans:C,restoreAdvanceLoan:w,forceDeleteAdvanceLoan:T,fetchAdvanceLoanStats:E,updateFilters:D,clearFilters:O,clearCurrentAdvanceLoan:k,reset:A}}),se={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Y=[`value`],ce=[`value`],le={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},ue={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},X={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},de={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},Z={class:`flex justify-end space-x-3`},Q=[`disabled`],fe=[`disabled`];var pe=x({__name:`CreateModel`,props:{modelValue:{type:Boolean}},emits:[`update:modelValue`,`created`],setup(e,{emit:t}){let n=e,i=t,a=k(),o=oe(),s=ee(),c=F(!1),l=m(()=>s.employees),b=m(()=>s.accounts),x=m(()=>s.currencies),S=m({get:()=>n.modelValue,set:e=>i(`update:modelValue`,e)}),C=F({date:new Date().toISOString().split(`T`)[0],employee_id:0,account_id:0,currency_id:0,currency_rate:1,amount:0,amount_usd:0,note:``}),w=m(()=>{if(!C.value.currency_id)return`Select account first`;let e=x.value.find(e=>e.id===C.value.currency_id);return e?`${e.name} (${e.code})`:`-`}),T=m(()=>C.value.date&&C.value.employee_id>0&&C.value.account_id>0&&C.value.currency_id>0&&C.value.currency_rate>0&&C.value.amount>0),E=()=>{let e=b.value.find(e=>e.id===C.value.account_id);if(!e){C.value.currency_id=0,C.value.currency_rate=1;return}C.value.currency_id=e.currency_id;let t=x.value.find(t=>t.id===e.currency_id);if(!t){C.value.currency_rate=1,D();return}G(t.code)?C.value.currency_rate=1:C.value.currency_rate=t.active_rate?.rate||1,D()},D=()=>{if(!C.value.amount||!C.value.currency_rate){C.value.amount_usd=0;return}let e=x.value.find(e=>e.id===C.value.currency_id);if(!e){C.value.amount_usd=0;return}C.value.amount_usd=K(C.value.amount,C.value.currency_rate,e.calculation_type)},O=async()=>{if(!T.value){a.error(`Please fill in all required fields`);return}try{c.value=!0;let e={date:C.value.date,employee_id:C.value.employee_id,account_id:C.value.account_id,currency_id:C.value.currency_id,currency_rate:C.value.currency_rate,amount:C.value.amount,amount_usd:C.value.amount_usd,note:C.value.note||null};await o.createAdvanceLoan(e),a.success(`AdvanceLoan payment created successfully`),i(`created`),L()}catch(e){console.error(`Error creating advanceLoan:`,e),a.error(e.response?.data?.message||`Failed to create advanceLoan payment`)}finally{c.value=!1}},L=()=>{c.value||(z(),S.value=!1)},z=()=>{C.value={date:new Date().toISOString().split(`T`)[0],employee_id:0,account_id:0,currency_id:0,currency_rate:1,amount:0,amount_usd:0,note:``}};return M(S,e=>{e&&z()}),(e,t)=>(A(),g(W,{modelValue:S.value,"onUpdate:modelValue":t[6]||=e=>S.value=e,title:`Create Advance Loan`,size:`xl`,"close-on-backdrop":!1,"close-on-escape":!1,loading:c.value},{footer:N(()=>[h(`div`,Z,[h(`button`,{type:`button`,onClick:L,disabled:c.value,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Cancel `,8,Q),h(`button`,{type:`submit`,onClick:O,disabled:c.value||!T.value,class:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[c.value?(A(),g(I(r),{key:0,class:`inline-block h-4 w-4 animate-spin mr-2`})):_(``,!0),t[17]||=y(` Create AdvanceLoan `,-1)],8,fe)])]),default:N(()=>[h(`form`,{onSubmit:f(O,[`prevent`]),class:`space-y-4`},[h(`div`,null,[t[7]||=h(`label`,{for:`date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Date `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`input`,{id:`date`,"onUpdate:modelValue":t[0]||=e=>C.value.date=e,type:`date`,required:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,512),[[d,C.value.date]])]),h(`div`,se,[h(`div`,null,[t[9]||=h(`label`,{for:`employee_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Employee `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`select`,{id:`employee_id`,"onUpdate:modelValue":t[1]||=e=>C.value.employee_id=e,required:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[8]||=h(`option`,{value:``},`Select Employee`,-1),(A(!0),v(p,null,j(l.value,e=>(A(),v(`option`,{key:e.id,value:e.id},R(e.name),9,Y))),128))],512),[[u,C.value.employee_id]])]),h(`div`,null,[t[11]||=h(`label`,{for:`account_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Account `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`select`,{id:`account_id`,"onUpdate:modelValue":t[2]||=e=>C.value.account_id=e,required:``,onChange:E,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[10]||=h(`option`,{value:``},`Select Account`,-1),(A(!0),v(p,null,j(b.value,e=>(A(),v(`option`,{key:e.id,value:e.id},R(e.name),9,ce))),128))],544),[[u,C.value.account_id]])])]),h(`div`,le,[h(`div`,null,[t[12]||=h(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Currency `,-1),h(`span`,ue,R(w.value),1)]),h(`div`,null,[t[13]||=h(`label`,{for:`currency_rate`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Exchange Rate (to USD) `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`input`,{id:`currency_rate`,"onUpdate:modelValue":t[3]||=e=>C.value.currency_rate=e,type:`number`,step:`0.0001`,min:`0`,required:``,onInput:D,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,544),[[d,C.value.currency_rate,void 0,{number:!0}]])])]),h(`div`,X,[h(`div`,null,[t[14]||=h(`label`,{for:`amount`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Amount `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`input`,{id:`amount`,"onUpdate:modelValue":t[4]||=e=>C.value.amount=e,type:`number`,step:`0.01`,min:`0`,required:``,onInput:D,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,544),[[d,C.value.amount,void 0,{number:!0}]])]),h(`div`,null,[t[15]||=h(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Amount (USD) `,-1),h(`span`,de,R(C.value.amount_usd?C.value.amount_usd.toFixed(2):`0.00`),1)])]),h(`div`,null,[t[16]||=h(`label`,{for:`note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Note `,-1),P(h(`textarea`,{id:`note`,"onUpdate:modelValue":t[5]||=e=>C.value.note=e,rows:`3`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,placeholder:`Add any notes about this advanceLoan payment...`},null,512),[[d,C.value.note]])])],32)]),_:1},8,[`modelValue`,`loading`]))}}),me=pe;const he={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},ge=[`value`],_e=[`value`],ve={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},ye={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},be={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},xe={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},Se={class:`flex justify-end space-x-3`},$=[`disabled`],Ce=[`disabled`];var we=x({__name:`EditModel`,props:{modelValue:{type:Boolean},advanceLoan:{}},emits:[`update:modelValue`,`updated`],setup(e,{emit:t}){let n=e,i=t,a=k(),o=oe(),s=ee(),c=F(!1),l=m(()=>s.employees),b=m(()=>s.accounts),x=m(()=>s.currencies),S=m({get:()=>n.modelValue,set:e=>i(`update:modelValue`,e)}),C=F({date:``,employee_id:0,account_id:0,currency_id:0,currency_rate:1,amount:0,amount_usd:0,note:``}),w=m(()=>{if(!C.value.currency_id)return`Select account first`;let e=x.value.find(e=>e.id===C.value.currency_id);return e?`${e.name} (${e.code})`:`-`}),T=m(()=>C.value.date&&C.value.employee_id>0&&C.value.account_id>0&&C.value.currency_id>0&&C.value.currency_rate>0&&C.value.amount>0),E=()=>{let e=b.value.find(e=>e.id===C.value.account_id);if(!e){C.value.currency_id=0,C.value.currency_rate=1;return}C.value.currency_id=e.currency_id;let t=x.value.find(t=>t.id===e.currency_id);if(!t){C.value.currency_rate=1,D();return}G(t.code)?C.value.currency_rate=1:C.value.currency_rate=t.active_rate?.rate||1,D()},D=()=>{if(!C.value.amount||!C.value.currency_rate){C.value.amount_usd=0;return}let e=x.value.find(e=>e.id===C.value.currency_id);if(!e){C.value.amount_usd=0;return}C.value.amount_usd=K(C.value.amount,C.value.currency_rate,e.calculation_type)},O=async()=>{if(!n.advanceLoan||!T.value){a.error(`Please fill in all required fields`);return}try{c.value=!0;let e={date:C.value.date,employee_id:C.value.employee_id,account_id:C.value.account_id,currency_id:C.value.currency_id,currency_rate:C.value.currency_rate,amount:C.value.amount,amount_usd:C.value.amount_usd,note:C.value.note||null};await o.updateAdvanceLoan(n.advanceLoan.id,e),a.success(`AdvanceLoan payment updated successfully`),i(`updated`),L()}catch(e){console.error(`Error updating advanceLoan:`,e),a.error(e.response?.data?.message||`Failed to update advanceLoan payment`)}finally{c.value=!1}},L=()=>{c.value||(S.value=!1)},z=()=>{n.advanceLoan&&(C.value={date:n.advanceLoan.date.split(`T`)[0],employee_id:n.advanceLoan.employee_id||0,account_id:n.advanceLoan.account_id||0,currency_id:n.advanceLoan.currency_id||0,currency_rate:n.advanceLoan.currency_rate,amount:n.advanceLoan.amount,amount_usd:n.advanceLoan.amount_usd,note:n.advanceLoan.note||``})};return M(()=>n.modelValue,e=>{e&&n.advanceLoan&&z()}),M(()=>n.advanceLoan,e=>{e&&n.modelValue&&z()}),(e,t)=>(A(),g(W,{modelValue:S.value,"onUpdate:modelValue":t[6]||=e=>S.value=e,title:`Edit AdvanceLoan Payment`,size:`xl`,"close-on-backdrop":!1,"close-on-escape":!1,loading:c.value},{footer:N(()=>[h(`div`,Se,[h(`button`,{type:`button`,onClick:L,disabled:c.value,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Cancel `,8,$),h(`button`,{type:`submit`,onClick:O,disabled:c.value||!T.value,class:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[c.value?(A(),g(I(r),{key:0,class:`inline-block h-4 w-4 animate-spin mr-2`})):_(``,!0),t[17]||=y(` Update AdvanceLoan `,-1)],8,Ce)])]),default:N(()=>[h(`form`,{onSubmit:f(O,[`prevent`]),class:`space-y-4`},[h(`div`,null,[t[7]||=h(`label`,{for:`date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Date `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`input`,{id:`date`,"onUpdate:modelValue":t[0]||=e=>C.value.date=e,type:`date`,required:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,512),[[d,C.value.date]])]),h(`div`,he,[h(`div`,null,[t[9]||=h(`label`,{for:`employee_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Employee `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`select`,{id:`employee_id`,"onUpdate:modelValue":t[1]||=e=>C.value.employee_id=e,required:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[8]||=h(`option`,{value:``},`Select Employee`,-1),(A(!0),v(p,null,j(l.value,e=>(A(),v(`option`,{key:e.id,value:e.id},R(e.name),9,ge))),128))],512),[[u,C.value.employee_id]])]),h(`div`,null,[t[11]||=h(`label`,{for:`account_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Account `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`select`,{id:`account_id`,"onUpdate:modelValue":t[2]||=e=>C.value.account_id=e,required:``,onChange:E,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[10]||=h(`option`,{value:``},`Select Account`,-1),(A(!0),v(p,null,j(b.value,e=>(A(),v(`option`,{key:e.id,value:e.id},R(e.name),9,_e))),128))],544),[[u,C.value.account_id]])])]),h(`div`,ve,[h(`div`,null,[t[12]||=h(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Currency `,-1),h(`span`,ye,R(w.value),1)]),h(`div`,null,[t[13]||=h(`label`,{for:`currency_rate`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Exchange Rate (to USD) `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`input`,{id:`currency_rate`,"onUpdate:modelValue":t[3]||=e=>C.value.currency_rate=e,type:`number`,step:`0.0001`,min:`0`,required:``,onInput:D,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,544),[[d,C.value.currency_rate,void 0,{number:!0}]])])]),h(`div`,be,[h(`div`,null,[t[14]||=h(`label`,{for:`amount`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[y(` Amount `),h(`span`,{class:`text-red-500`},`*`)],-1),P(h(`input`,{id:`amount`,"onUpdate:modelValue":t[4]||=e=>C.value.amount=e,type:`number`,step:`0.01`,min:`0`,required:``,onInput:D,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,544),[[d,C.value.amount,void 0,{number:!0}]])]),h(`div`,null,[t[15]||=h(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Amount (USD) `,-1),h(`span`,xe,R(C.value.amount_usd?Number(C.value.amount_usd).toFixed(2):`0.00`),1)])]),h(`div`,null,[t[16]||=h(`label`,{for:`note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Note `,-1),P(h(`textarea`,{id:`note`,"onUpdate:modelValue":t[5]||=e=>C.value.note=e,rows:`3`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,placeholder:`Add any notes about this advanceLoan payment...`},null,512),[[d,C.value.note]])])],32)]),_:1},8,[`modelValue`,`loading`]))}}),Te=we;const Ee={key:0,class:`space-y-4`},De={class:`rounded-lg p-4 border-2 bg-gradient-to-r from-blue-50 to-indigo-50/50 dark:from-blue-900/20 dark:to-indigo-900/10 border-blue-200 dark:border-blue-800`},Oe={class:`flex items-center justify-between mb-3`},ke={class:`flex items-center space-x-2`},Ae={class:`text-2xl font-bold text-blue-700 dark:text-blue-300`},je={class:`space-y-2`},Me={class:`flex justify-between items-center py-2 border-t border-blue-200 dark:border-blue-700`},Ne={class:`text-sm font-medium text-gray-900 dark:text-white`},Pe={class:`flex justify-between items-center py-2 border-t border-blue-200 dark:border-blue-700`},Fe={class:`text-sm font-medium text-gray-900 dark:text-white`},Ie={class:`flex justify-between items-center py-2 border-t border-blue-200 dark:border-blue-700`},Le={class:`text-sm font-medium text-gray-900 dark:text-white`},Re={class:`flex justify-between items-center py-2 border-t border-blue-200 dark:border-blue-700`},ze={class:`text-sm font-medium text-gray-900 dark:text-white`},Be={class:`grid grid-cols-1 md:grid-cols-2 gap-3`},Ve={class:`border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-gray-50/30 dark:bg-gray-800/30`},He={class:`text-sm text-gray-500 dark:text-gray-400`},Ue={class:`mt-2 pt-2 border-t border-gray-200 dark:border-gray-700`},We={class:`text-lg font-bold text-gray-900 dark:text-white`},Ge={class:`border border-green-200 dark:border-green-800 rounded-lg p-3 bg-green-50/30 dark:bg-green-900/10`},Ke={class:`mt-2 pt-2 border-t border-green-200 dark:border-green-800`},qe={class:`text-lg font-bold text-green-600 dark:text-green-400`},Je={class:`bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 text-center`},Ye={class:`text-base font-semibold text-blue-900 dark:text-blue-100`},Xe={key:0,class:`bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4`},Ze={class:`text-sm text-gray-900 dark:text-white whitespace-pre-wrap`},Qe={class:`grid grid-cols-1 md:grid-cols-2 gap-3`},$e={class:`bg-gradient-to-r from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-800/10 rounded-lg p-3 border border-blue-200 dark:border-blue-800`},et={class:`flex items-center gap-2`},tt={class:`flex-1 min-w-0`},nt={class:`text-xs text-blue-700 dark:text-blue-300 font-semibold truncate`},rt={class:`text-xs text-blue-600 dark:text-blue-400`},it={key:0,class:`bg-gradient-to-r from-purple-50 to-purple-100/50 dark:from-purple-900/20 dark:to-purple-800/10 rounded-lg p-3 border border-purple-200 dark:border-purple-800`},at={class:`flex items-center gap-2`},ot={class:`flex-1 min-w-0`},st={class:`text-xs text-purple-700 dark:text-purple-300 font-semibold truncate`},ct={class:`text-xs text-purple-600 dark:text-purple-400`};var lt=x({__name:`ViewModel`,props:{modelValue:{type:Boolean},advanceLoan:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=m({get:()=>n.modelValue,set:e=>r(`update:modelValue`,e)}),a=m(()=>n.advanceLoan?`AdvanceLoan ${n.advanceLoan.prefix}${n.advanceLoan.code} - ${B(n.advanceLoan.date)}`:`AdvanceLoan Details`);return(e,t)=>(A(),g(W,{modelValue:i.value,"onUpdate:modelValue":t[0]||=e=>i.value=e,title:a.value,size:`lg`},{default:N(()=>[e.advanceLoan?(A(),v(`div`,Ee,[h(`div`,De,[h(`div`,Oe,[h(`div`,ke,[b(I(o),{class:`w-6 h-6 text-blue-600 dark:text-blue-400`}),t[1]||=h(`span`,{class:`text-lg font-semibold text-blue-700 dark:text-blue-300`},` AdvanceLoan Payment `,-1)]),h(`span`,Ae,R(I(H)(e.advanceLoan.amount)),1)]),h(`div`,je,[h(`div`,Me,[t[2]||=h(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Code`,-1),h(`span`,Ne,R(e.advanceLoan.prefix)+R(e.advanceLoan.code),1)]),h(`div`,Pe,[t[3]||=h(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Date`,-1),h(`span`,Fe,R(I(B)(e.advanceLoan.date)),1)]),h(`div`,Ie,[t[4]||=h(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Employee`,-1),h(`span`,Le,R(e.advanceLoan.employee?.name||`-`),1)]),h(`div`,Re,[t[5]||=h(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Account`,-1),h(`span`,ze,R(e.advanceLoan.account?.name||`-`),1)])])]),h(`div`,Be,[h(`div`,Ve,[t[6]||=h(`p`,{class:`text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2`},`AMOUNT`,-1),h(`p`,He,R(e.advanceLoan.currency?.name||`-`)+` (`+R(e.advanceLoan.currency?.code||`-`)+`)`,1),h(`div`,Ue,[h(`p`,We,R(I(H)(e.advanceLoan.amount))+` `+R(e.advanceLoan.currency?.code),1)])]),h(`div`,Ge,[t[7]||=h(`p`,{class:`text-xs font-semibold text-green-600 dark:text-green-400 mb-2`},`USD EQUIVALENT`,-1),t[8]||=h(`p`,{class:`text-sm text-gray-500 dark:text-gray-400`},`United States Dollar`,-1),h(`div`,Ke,[h(`p`,qe,R(I(H)(e.advanceLoan.amount_usd))+` USD `,1)])])]),h(`div`,Je,[t[9]||=h(`p`,{class:`text-xs text-gray-500 dark:text-gray-400 mb-1`},`Exchange Rate`,-1),h(`p`,Ye,` 1 `+R(e.advanceLoan.currency?.code)+` = `+R(I(H)(e.advanceLoan.currency_rate))+` USD `,1)]),e.advanceLoan.note?(A(),v(`div`,Xe,[t[10]||=h(`p`,{class:`text-xs font-medium text-gray-500 dark:text-gray-400 mb-2`},`Note`,-1),h(`p`,Ze,R(e.advanceLoan.note),1)])):_(``,!0),h(`div`,Qe,[h(`div`,$e,[h(`div`,et,[t[12]||=h(`div`,{class:`flex-shrink-0 w-8 h-8 bg-blue-500 dark:bg-blue-600 rounded-full flex items-center justify-center`},[h(`svg`,{class:`w-4 h-4 text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[h(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v16m8-8H4`})])],-1),h(`div`,tt,[t[11]||=h(`p`,{class:`text-xs font-medium text-blue-900 dark:text-blue-100`},`Created by`,-1),h(`p`,nt,R(e.advanceLoan.created_by_user?.name||`-`),1),h(`p`,rt,R(I(V)(e.advanceLoan.created_at)),1)])])]),e.advanceLoan.updated_by?(A(),v(`div`,it,[h(`div`,at,[t[14]||=h(`div`,{class:`flex-shrink-0 w-8 h-8 bg-purple-500 dark:bg-purple-600 rounded-full flex items-center justify-center`},[h(`svg`,{class:`w-4 h-4 text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[h(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`})])],-1),h(`div`,ot,[t[13]||=h(`p`,{class:`text-xs font-medium text-purple-900 dark:text-purple-100`},`Last updated by`,-1),h(`p`,st,R(e.advanceLoan.updated_by_user?.name||`-`),1),h(`p`,ct,R(I(V)(e.advanceLoan.updated_at)),1)])])])):_(``,!0)])])):_(``,!0)]),_:1},8,[`modelValue`,`title`]))}}),ut=lt;const dt={class:`space-y-6`},ft={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},pt={class:`grid grid-cols-1 md:grid-cols-6 gap-4`},mt=[`value`],ht=[`value`],gt=[`value`],_t={class:`relative`},vt={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},yt={key:0,class:`p-8 text-center`},bt={key:1,class:`p-8 text-center`},xt={class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},St={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},Ct={key:0,class:`mt-6`},wt={key:2,class:`overflow-x-auto`},Tt={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Et={class:`bg-gray-50 dark:bg-gray-700`},Dt={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ot={class:`flex flex-col`},kt={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},At={class:`flex flex-col`},jt={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Mt={class:`flex flex-col`},Nt={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Pt={class:`px-6 py-4 whitespace-nowrap`},Ft={class:`text-sm text-gray-900 dark:text-white`},It={class:`px-6 py-4 whitespace-nowrap`},Lt={class:`text-sm font-medium text-gray-900 dark:text-white`},Rt={class:`px-6 py-4 whitespace-nowrap`},zt={class:`text-sm text-gray-900 dark:text-white`},Bt={class:`px-6 py-4 whitespace-nowrap`},Vt={class:`text-sm text-gray-900 dark:text-white`},Ht={class:`px-6 py-4 whitespace-nowrap`},Ut={class:`text-sm font-medium text-gray-900 dark:text-white`},Wt={class:`text-xs text-gray-500 dark:text-gray-400`},Gt={class:`px-6 py-4`},Kt={class:`text-sm text-gray-900 dark:text-white max-w-xs truncate`},qt={class:`px-6 py-4 whitespace-nowrap`},Jt={class:`text-sm text-gray-900 dark:text-white`},Yt={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Xt={class:`flex items-center justify-end space-x-2`},Zt=[`onClick`],Qt=[`onClick`],$t=[`onClick`],en=[`onClick`],tn=[`onClick`],nn={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},rn={class:`flex items-center justify-between`},an={class:`flex-1 flex justify-between sm:hidden`},on=[`disabled`],sn=[`disabled`],cn={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},ln={class:`text-sm text-gray-700 dark:text-gray-300`},un={class:`font-medium`},dn={class:`font-medium`},fn={class:`font-medium`},pn={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},mn=[`disabled`],hn=[`disabled`];var gn=x({__name:`IndexPage`,setup(l){let f=k(),g=oe(),x=ee(),{isAdmin:w,isSuperAdmin:T}=re(),E=F(!1),D=F(!1),O=F(!1),M=F(!1),N=F(!1),V=F(null),U=F(null),W=F(null),G=F(!1),K=F({title:``,message:``,buttonText:``,loadingText:``,action:``}),q=m(()=>G.value?g.trashedAdvanceLoans:g.advanceLoans),J=m(()=>g.pagination),se=m(()=>g.loading),Y=m(()=>g.filters),ce=m(()=>x.employees),le=m(()=>x.accounts),ue=m(()=>x.users),X=async e=>{try{G.value?await g.fetchTrashedAdvanceLoans(e):await g.fetchAdvanceLoans(e)}catch{f.error(`Failed to load advanceLoans`,{title:`Error`})}},de=()=>{W.value&&clearTimeout(W.value),W.value=setTimeout(()=>{X()},300)},Z=e=>{let t=Y.value.sort_direction||`asc`,n=`asc`;Y.value.sort_by===e&&(n=t===`asc`?`desc`:`asc`),g.updateFilters({sort_by:e,sort_direction:n}),X()},Q=e=>{e>=1&&J.value&&e<=J.value.last_page&&(g.updateFilters({page:e}),X())},fe=()=>{O.value=!0},pe=e=>{V.value=e,M.value=!0},he=e=>{V.value=e,N.value=!0},ge=async()=>{await X()},_e=async()=>{await X()},ve=e=>{U.value=e,K.value={title:`Delete AdvanceLoan`,message:`Are you sure you want to delete advanceLoan "${e.prefix}${e.code}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,action:`delete`},D.value=!0},ye=e=>{U.value=e,K.value={title:`Restore AdvanceLoan`,message:`Are you sure you want to restore advanceLoan "${e.prefix}${e.code}"?`,buttonText:`Restore`,loadingText:`Restoring...`,action:`restore`},D.value=!0},be=e=>{U.value=e,K.value={title:`Permanently Delete AdvanceLoan`,message:`Are you sure you want to permanently delete advanceLoan "${e.prefix}${e.code}"? This action cannot be undone.`,buttonText:`Delete Permanently`,loadingText:`Deleting...`,action:`forceDelete`},D.value=!0},xe=async()=>{if(U.value)try{switch(E.value=!0,K.value.action){case`delete`:await g.deleteAdvanceLoan(U.value.id),f.success(`AdvanceLoan deleted successfully`);break;case`restore`:await g.restoreAdvanceLoan(U.value.id),f.success(`AdvanceLoan restored successfully`);break;case`forceDelete`:await g.forceDeleteAdvanceLoan(U.value.id),f.success(`AdvanceLoan permanently deleted`);break}Se(),await X()}catch{f.error(`Failed to ${K.value.action} advanceLoan`)}finally{E.value=!1}},Se=()=>{D.value=!1,U.value=null,K.value={title:``,message:``,buttonText:``,loadingText:``,action:``}},$=(e,t)=>{g.updateFilters({[e]:t===``?void 0:t,page:1}),X()},Ce=()=>{g.clearFilters(),X()};return a(async()=>{try{await x.fetchListData(`employees`),await x.fetchAccounts(),await x.fetchListData(`users`),await x.fetchListData(`currencies`),await X(g.filters)}catch(e){console.error(`Error loading initial data:`,e)}}),(a,l)=>(A(),v(`div`,dt,[b(ie,{title:`Employee Advance Loans`,description:`Manage employee advanceLoan payments`,"show-create-button":I(w),"create-button-text":`Create AdvanceLoan`,onCreate:fe},null,8,[`show-create-button`]),h(`div`,ft,[h(`div`,pt,[h(`div`,null,[l[23]||=h(`label`,{for:`date_from`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Date From `,-1),P(h(`input`,{id:`date_from`,"onUpdate:modelValue":l[0]||=e=>Y.value.date_from=e,type:`date`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:l[1]||=e=>$(`date_from`,e.target.value)},null,544),[[d,Y.value.date_from]])]),h(`div`,null,[l[24]||=h(`label`,{for:`date_to`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Date To `,-1),P(h(`input`,{id:`date_to`,"onUpdate:modelValue":l[2]||=e=>Y.value.date_to=e,type:`date`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:l[3]||=e=>$(`date_to`,e.target.value)},null,544),[[d,Y.value.date_to]])]),h(`div`,null,[l[26]||=h(`label`,{for:`employee_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Employee `,-1),P(h(`select`,{id:`employee_id`,"onUpdate:modelValue":l[4]||=e=>Y.value.employee_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:l[5]||=e=>$(`employee_id`,e.target.value)},[l[25]||=h(`option`,{value:``},`All Employees`,-1),(A(!0),v(p,null,j(ce.value,e=>(A(),v(`option`,{key:e.id,value:e.id},R(e.name),9,mt))),128))],544),[[u,Y.value.employee_id]])]),h(`div`,null,[l[28]||=h(`label`,{for:`account_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account `,-1),P(h(`select`,{id:`account_id`,"onUpdate:modelValue":l[6]||=e=>Y.value.account_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:l[7]||=e=>$(`account_id`,e.target.value)},[l[27]||=h(`option`,{value:``},`All Accounts`,-1),(A(!0),v(p,null,j(le.value,e=>(A(),v(`option`,{key:e.id,value:e.id},R(e.name),9,ht))),128))],544),[[u,Y.value.account_id]])]),h(`div`,null,[l[29]||=h(`label`,{for:`amount`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Amount `,-1),P(h(`input`,{id:`amount`,"onUpdate:modelValue":l[8]||=e=>Y.value.amount=e,type:`number`,step:`0.01`,placeholder:`Filter by amount`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:de},null,544),[[d,Y.value.amount]])]),h(`div`,null,[l[31]||=h(`label`,{for:`user_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` By `,-1),P(h(`select`,{id:`user_id`,"onUpdate:modelValue":l[9]||=e=>Y.value.user_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:l[10]||=e=>$(`user_id`,e.target.value)},[l[30]||=h(`option`,{value:``},`All Users`,-1),(A(!0),v(p,null,j(ue.value,e=>(A(),v(`option`,{key:e.id,value:e.id},R(e.name),9,gt))),128))],544),[[u,Y.value.user_id]])]),h(`div`,null,[l[32]||=h(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search `,-1),h(`div`,_t,[P(h(`input`,{id:`search`,"onUpdate:modelValue":l[11]||=e=>Y.value.search=e,type:`text`,placeholder:`Search by code or note...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:de},null,544),[[d,Y.value.search]]),b(I(ne),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),h(`div`,{class:`flex items-end`},[h(`button`,{onClick:Ce,class:`w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},` Clear Filters `)])])]),h(`div`,vt,[se.value?(A(),v(`div`,yt,[b(I(r),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),l[33]||=h(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading advanceLoans...`,-1)])):q.value.length===0?(A(),v(`div`,bt,[b(I(o),{class:`h-12 w-12 mx-auto text-gray-400`}),h(`h3`,xt,R(G.value?`No trashed advanceLoans found`:`No advanceLoans found`),1),h(`p`,St,R(Y.value.search?`Try adjusting your search criteria.`:`Get started by creating your first advanceLoan.`),1),!Y.value.search&&!G.value&&I(w)?(A(),v(`div`,Ct,[h(`button`,{onClick:fe,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[b(I(t),{class:`h-5 w-5 mr-2`}),l[34]||=y(` Create Your First AdvanceLoan `,-1)])])):_(``,!0)])):(A(),v(`div`,wt,[h(`table`,Tt,[h(`thead`,Et,[h(`tr`,null,[h(`th`,Dt,[h(`button`,{onClick:l[12]||=e=>Z(`date`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[l[35]||=h(`span`,null,`Date`,-1),h(`div`,Ot,[b(I(s),{class:L([`h-3 w-3`,Y.value.sort_by===`date`&&Y.value.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),b(I(C),{class:L([`h-3 w-3 -mt-1`,Y.value.sort_by===`date`&&Y.value.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),h(`th`,kt,[h(`button`,{onClick:l[13]||=e=>Z(`code`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[l[36]||=h(`span`,null,`Code`,-1),h(`div`,At,[b(I(s),{class:L([`h-3 w-3`,Y.value.sort_by===`code`&&Y.value.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),b(I(C),{class:L([`h-3 w-3 -mt-1`,Y.value.sort_by===`code`&&Y.value.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),l[38]||=h(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Employee `,-1),l[39]||=h(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Account `,-1),h(`th`,jt,[h(`button`,{onClick:l[14]||=e=>Z(`amount`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[l[37]||=h(`span`,null,`Amount`,-1),h(`div`,Mt,[b(I(s),{class:L([`h-3 w-3`,Y.value.sort_by===`amount`&&Y.value.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),b(I(C),{class:L([`h-3 w-3 -mt-1`,Y.value.sort_by===`amount`&&Y.value.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),l[40]||=h(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Note `,-1),l[41]||=h(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` By `,-1),l[42]||=h(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),h(`tbody`,Nt,[(A(!0),v(p,null,j(q.value,t=>(A(),v(`tr`,{key:t.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[h(`td`,Pt,[h(`div`,Ft,R(I(B)(t.date)),1)]),h(`td`,It,[h(`div`,Lt,R(t.prefix)+R(t.code),1)]),h(`td`,Rt,[h(`div`,zt,R(t.employee?.name||`-`),1)]),h(`td`,Bt,[h(`div`,Vt,R(t.account?.name||`-`),1)]),h(`td`,Ht,[h(`div`,Ut,[y(R(I(H)(t.amount))+` `,1),h(`span`,Wt,` (`+R(I(H)(t.amount_usd))+` USD) `,1)])]),h(`td`,Gt,[h(`div`,Kt,R(t.note||`-`),1)]),h(`td`,qt,[h(`div`,Jt,R(t.created_by_user?.name||`-`),1)]),h(`td`,Yt,[h(`div`,Xt,[G.value?(A(),v(p,{key:1},[I(T)?(A(),v(`button`,{key:0,onClick:e=>ye(t),class:`text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200`,title:`Restore AdvanceLoan`},[b(I(e),{class:`h-4 w-4`})],8,en)):_(``,!0),I(T)?(A(),v(`button`,{key:1,onClick:e=>be(t),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Permanently Delete`},[b(I(z),{class:`h-4 w-4`})],8,tn)):_(``,!0)],64)):(A(),v(p,{key:0},[h(`button`,{onClick:e=>he(t),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[b(I(i),{class:`w-4 h-4`})],8,Zt),I(w)?(A(),v(`button`,{key:0,onClick:e=>pe(t),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit AdvanceLoan`},[b(I(n),{class:`h-4 w-4`})],8,Qt)):_(``,!0),I(T)?(A(),v(`button`,{key:1,onClick:e=>ve(t),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Delete AdvanceLoan`},[b(I(te),{class:`h-4 w-4`})],8,$t)):_(``,!0)],64))])])]))),128))])])])),J.value&&J.value.total>0?(A(),v(`div`,nn,[h(`div`,rn,[h(`div`,an,[h(`button`,{onClick:l[15]||=e=>Q(J.value.current_page-1),disabled:J.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,on),h(`button`,{onClick:l[16]||=e=>Q(J.value.current_page+1),disabled:J.value.current_page>=J.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,sn)]),h(`div`,cn,[h(`div`,null,[h(`p`,ln,[l[43]||=y(` Showing `,-1),h(`span`,un,R(J.value.from),1),l[44]||=y(` to `,-1),h(`span`,dn,R(J.value.to),1),l[45]||=y(` of `,-1),h(`span`,fn,R(J.value.total),1),l[46]||=y(` results `,-1)])]),h(`div`,null,[h(`nav`,pn,[h(`button`,{onClick:l[17]||=e=>Q(J.value.current_page-1),disabled:J.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[b(I(S),{class:`h-5 w-5`})],8,mn),h(`button`,{onClick:l[18]||=e=>Q(J.value.current_page+1),disabled:J.value.current_page>=J.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[b(I(c),{class:`h-5 w-5`})],8,hn)])])])])])):_(``,!0)]),b(me,{modelValue:O.value,"onUpdate:modelValue":l[19]||=e=>O.value=e,onCreated:ge},null,8,[`modelValue`]),b(Te,{modelValue:M.value,"onUpdate:modelValue":l[20]||=e=>M.value=e,advanceLoan:V.value,onUpdated:_e},null,8,[`modelValue`,`advanceLoan`]),b(ut,{modelValue:N.value,"onUpdate:modelValue":l[21]||=e=>N.value=e,advanceLoan:V.value},null,8,[`modelValue`,`advanceLoan`]),b(ae,{show:D.value,"onUpdate:show":l[22]||=e=>D.value=e,type:`delete`,title:K.value.title,message:K.value.message,"confirm-text":K.value.buttonText,"loading-text":K.value.loadingText,loading:E.value,onConfirm:xe,onCancel:Se},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`])]))}}),_n=gn;export{_n as default};