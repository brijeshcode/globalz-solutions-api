import{G as e,N as t,a$ as n,aC as r,aD as i,aH as a,aJ as o,aK as s,aN as ee,aO as c,aQ as l,aR as u,aS as d,aT as f,aU as p,aW as m,aX as h,aY as te,ak as ne,ay as re,b1 as g,b2 as _,b7 as v,b9 as y,bb as b,bc as x,bf as S,c as ie,i as ae,v as oe,y as se}from"./index-D3uPKL_7.js";import"./GlobalConfig-wPgXFcZ5.js";import{f as C}from"./common-CZbH6H1Z.js";import"./tableUtils-dXs1kjAL.js";import{c as ce,d as w,e as T}from"./currencyUtil-BN7TmPM2.js";import{b as le}from"./CurrencyRateInput-BRsFhyRk.js";import{b as ue}from"./suppliersStore-CPFpRp0H.js";import{b as de}from"./PurchaseReturnStore-DrPbpmqb.js";const fe={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},pe={class:``},me={class:`mb-8`},he={class:`flex items-center space-x-4 mb-2`},ge={key:0,class:`flex justify-center items-center py-12`},_e={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},E={class:`px-6 py-8`},D={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},O={class:`grid grid-cols-1 md:grid-cols-5 gap-6`},k=[`value`],A=[`value`],j=[`value`],M={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},N={class:`grid grid-cols-1 md:grid-cols-4 gap-6`},P={for:`shipping_fee_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},F={for:`customs_fee_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},I={for:`other_fee_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},ve={for:`tax_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},ye={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},be={class:`flex items-center justify-between mb-4`},xe={class:`flex gap-4`},Se={class:`flex gap-2`},Ce={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},we={key:1,class:`w-full`},Te={key:0},Ee={key:1},De={key:2},Oe={key:3},ke={key:4},Ae={key:5},je={class:`flex`},Me=[`onClick`],Ne=[`onUpdate:modelValue`,`onInput`],Pe=[`id`,`onUpdate:modelValue`,`onChange`],Fe=[`value`],Ie=[`id`,`value`],Le=[`id`,`onUpdate:modelValue`],Re=[`id`,`onUpdate:modelValue`],ze=[`id`,`onUpdate:modelValue`],Be=[`id`,`onUpdate:modelValue`],Ve=[`value`],He={key:0},Ue=[`value`],We={key:1},Ge=[`value`],Ke={key:2},qe=[`value`],Je={key:3},Ye=[`value`],L={key:4},Xe=[`value`],Ze={key:5},Qe=[`value`],$e=[`value`],et={key:0},tt=[`value`],nt={key:1},rt=[`value`],it={key:2},at=[`value`],ot={key:3},st=[`value`],ct={key:4},lt=[`value`],ut={key:0},dt=[`value`],ft={class:`border-t-2 border-gray-300 dark:border-gray-600`},pt=[`value`],mt={key:0},ht=[`value`],gt={class:`border-t-2 border-gray-300 dark:border-gray-600`},_t=[`value`],vt={key:0},yt=[`value`],bt={key:1,colspan:`4`,class:`text-center font-bold text-lg text-green-600 dark:text-green-400`},xt={key:2},St={class:`pb-6`},Ct={class:`flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700`},wt=[`disabled`],Tt={class:`flex space-x-3`},Et=[`disabled`];var R=te({__name:`EditPage`,setup(te){let R=i(),z=r(),B=de(),V=ue(),H=ie(),{showSuccess:Dt,showError:U}=re(),W=b(!0),G=b(!1),K=b(!1),q=b({prefix:`PURTN`,date:new Date().toISOString().split(`T`)[0],supplier_id:null,warehouse_id:null,currency_id:null,currency_rate:1,supplier_purchase_return_number:null,shipping_fee_usd:0,customs_fee_usd:0,other_fee_usd:0,tax_usd:0,shipping_fee_usd_percent:0,customs_fee_usd_percent:0,other_fee_usd_percent:0,tax_usd_percent:0,sub_total:0,sub_total_usd:0,additional_charge_amount:0,additional_charge_amount_usd:0,total:0,total_usd:0,final_total:0,final_total_usd:0,note:null,items:[]}),Ot=l(()=>V.suppliers),kt=l(()=>H.warehouses),J=l(()=>H.currencies),Y=l(()=>H.items),X=l(()=>J.value.find(e=>e.id===q.value.currency_id));l(()=>X.value?.code||`USD`);let Z=()=>{R.push({name:`purchase-returns.index`})},At=()=>{let e=J.value.find(e=>e.id===q.value.currency_id);e&&w(e.code)?q.value.currency_rate=1:e&&(q.value.currency_rate=e.exchange_rate||1),$()},jt=e=>{let t=q.value.items[e],n=Y.value.find(e=>e.id===t.item_id);n&&(t.item_code=n.code)},Mt=e=>{let t=q.value.items[e],n=Y.value.find(e=>e.code===t.item_code);n&&(t.item_id=n.id)},Nt=e=>{let t=Y.value.find(t=>t.id===e);return t?.item_unit?.name||``},Pt=()=>{q.value.items.push({item_code:``,item_id:null,price:0,quantity:1,discount_percent:0,unit_discount_amount:0,discount_amount:0,total_price:0,total_price_usd:0,total_shipping_usd:0,total_customs_usd:0,total_other_usd:0,final_total_cost_usd:0,cost_per_item_usd:0,note:null})},Ft=e=>{q.value.items.splice(e,1),$()},It=()=>q.value.items.reduce((e,t)=>e+Number(t.total_shipping_usd||0),0),Lt=()=>q.value.items.reduce((e,t)=>e+Number(t.total_customs_usd||0),0),Rt=()=>q.value.items.reduce((e,t)=>e+Number(t.total_other_usd||0),0),Q=()=>q.value.items.reduce((e,t)=>e+Number(t.final_total_cost_usd||0),0),zt=e=>{if(!X.value)return;let t=Number(q.value.currency_rate)||1,n=X.value.calculation_type,r=e.price*e.quantity,i=r*(e.discount_percent/100),a=e.unit_discount_amount*e.quantity;e.discount_amount=i+a,e.total_price=r-e.discount_amount,e.total_price_usd=T(e.total_price,t,n)},$=()=>{if(!X.value)return;let e=Number(q.value.currency_rate)||1,t=X.value.calculation_type;q.value.items.forEach(e=>{zt(e)}),q.value.sub_total=q.value.items.reduce((e,t)=>e+Number(t.total_price||0),0),q.value.sub_total_usd=q.value.items.reduce((e,t)=>e+Number(t.total_price_usd||0),0),q.value.additional_charge_amount_usd=T(Number(q.value.additional_charge_amount||0),e,t),q.value.total=Number(q.value.sub_total)+Number(q.value.additional_charge_amount||0),q.value.total_usd=Number(q.value.sub_total_usd)+Number(q.value.additional_charge_amount_usd),q.value.total_usd>0?(q.value.shipping_fee_usd_percent=Number(q.value.shipping_fee_usd)/Number(q.value.total_usd)*100,q.value.customs_fee_usd_percent=Number(q.value.customs_fee_usd)/Number(q.value.total_usd)*100,q.value.other_fee_usd_percent=Number(q.value.other_fee_usd)/Number(q.value.total_usd)*100,q.value.tax_usd_percent=Number(q.value.tax_usd)/Number(q.value.total_usd)*100):(q.value.shipping_fee_usd_percent=0,q.value.customs_fee_usd_percent=0,q.value.other_fee_usd_percent=0,q.value.tax_usd_percent=0),q.value.items.forEach(e=>{if(q.value.total_usd>0){let t=Number(e.total_price_usd||0)/Number(q.value.total_usd);e.total_shipping_usd=Number(q.value.shipping_fee_usd)*t,e.total_customs_usd=Number(q.value.customs_fee_usd)*t,e.total_other_usd=Number(q.value.other_fee_usd)*t}else e.total_shipping_usd=0,e.total_customs_usd=0,e.total_other_usd=0;e.final_total_cost_usd=Number(e.total_price_usd||0)+Number(e.total_shipping_usd||0)+Number(e.total_customs_usd||0)+Number(e.total_other_usd||0),e.quantity>0?e.cost_per_item_usd=Number(e.final_total_cost_usd)/Number(e.quantity):e.cost_per_item_usd=0}),q.value.final_total_usd=Number(q.value.total_usd)+Number(q.value.shipping_fee_usd)+Number(q.value.customs_fee_usd)+Number(q.value.other_fee_usd)+Number(q.value.tax_usd),q.value.final_total=ce(q.value.final_total_usd,e,t)},Bt=async()=>{try{W.value=!0;let e=parseInt(z.params.id),t=await B.fetchPurchaseReturn(e);q.value={prefix:`PURTN`,date:t.date,supplier_id:t.supplier_id,warehouse_id:t.warehouse_id,currency_id:t.currency_id,currency_rate:t.currency_rate,supplier_purchase_return_number:t.supplier_purchase_return_number,shipping_fee_usd:t.shipping_fee_usd,customs_fee_usd:t.customs_fee_usd,other_fee_usd:t.other_fee_usd,tax_usd:t.tax_usd,shipping_fee_usd_percent:t.shipping_fee_usd_percent,customs_fee_usd_percent:t.customs_fee_usd_percent,other_fee_usd_percent:t.other_fee_usd_percent,tax_usd_percent:t.tax_usd_percent,sub_total:t.sub_total,sub_total_usd:t.sub_total_usd,additional_charge_amount:t.additional_charge_amount,additional_charge_amount_usd:t.additional_charge_amount_usd,total:t.total,total_usd:t.total_usd,final_total:t.final_total,final_total_usd:t.final_total_usd,note:t.note,items:t.items?.map(e=>({id:e.id,item_code:e.item_code,item_id:e.item_id,price:e.price,quantity:e.quantity,discount_percent:e.discount_percent,unit_discount_amount:e.unit_discount_amount,discount_amount:e.discount_amount,total_price:e.total_price,total_price_usd:e.total_price_usd,total_shipping_usd:e.total_shipping_usd,total_customs_usd:e.total_customs_usd,total_other_usd:e.total_other_usd,final_total_cost_usd:e.final_total_cost_usd,cost_per_item_usd:e.cost_per_item_usd,note:e.note}))||[]}}catch{U(`Failed to load purchase return`),R.push({name:`purchase-returns.index`})}finally{W.value=!1}},Vt=async()=>{try{if(G.value=!0,!q.value.supplier_id){U(`Please select a supplier`);return}if(!q.value.warehouse_id){U(`Please select a warehouse`);return}if(!q.value.currency_id){U(`Please select a currency`);return}if(q.value.items.length===0){U(`Please add at least one item`);return}for(let e of q.value.items)if(!e.item_id){U(`Please select an item for all rows`);return}let e=parseInt(z.params.id);await B.updatePurchaseReturn(e,q.value),Dt(`Purchase return updated successfully`),R.push({name:`purchase-returns.index`})}catch(e){U(e.message||`Failed to update purchase return`)}finally{G.value=!1}};return v(()=>q.value.items,()=>{W.value||$()},{deep:!0}),v([()=>q.value.shipping_fee_usd,()=>q.value.customs_fee_usd,()=>q.value.other_fee_usd,()=>q.value.tax_usd,()=>q.value.additional_charge_amount,()=>q.value.currency_rate],()=>{W.value||$()}),n(async()=>{try{await Promise.all([V.fetchSuppliers(),H.fetchWarehouses(),H.fetchCurrencies(),H.fetchItems(),Bt()])}catch{U(`Failed to load required data`)}}),(n,r)=>(g(),p(`div`,fe,[u(`div`,pe,[u(`div`,me,[u(`div`,he,[u(`button`,{onClick:Z,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[h(x(ne),{class:`w-5 h-5`})]),r[13]||=u(`div`,null,[u(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Purchase Return `),u(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update purchase return information `)],-1)])]),W.value?(g(),p(`div`,ge,r[14]||=[u(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600`},null,-1)])):(g(),p(`div`,_e,[u(`div`,E,[u(`form`,{onSubmit:ee(Vt,[`prevent`]),class:`space-y-6`},[u(`div`,D,[r[24]||=u(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),u(`div`,O,[u(`div`,null,[r[15]||=u(`label`,{for:`date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[m(` Return Date `),u(`span`,{class:`text-red-500 ml-1`},`*`)],-1),y(u(`input`,{id:`date`,"onUpdate:modelValue":r[0]||=e=>q.value.date=e,type:`date`,required:``,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[s,q.value.date]])]),u(`div`,null,[r[16]||=u(`label`,{for:`supplier_purchase_return_number`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Supplier Return # `,-1),y(u(`input`,{id:`supplier_purchase_return_number`,"onUpdate:modelValue":r[1]||=e=>q.value.supplier_purchase_return_number=e,type:`text`,placeholder:`Enter supplier return number`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[s,q.value.supplier_purchase_return_number]])]),u(`div`,null,[r[18]||=u(`label`,{for:`supplier_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[m(` Supplier `),u(`span`,{class:`text-red-500 ml-1`},`*`)],-1),y(u(`select`,{id:`supplier_id`,"onUpdate:modelValue":r[2]||=e=>q.value.supplier_id=e,required:``,disabled:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200 cursor-not-allowed`},[r[17]||=u(`option`,{value:``},`Select Supplier`,-1),(g(!0),p(c,null,_(Ot.value,e=>(g(),p(`option`,{key:e.id,value:e.id},S(e.code)+` - `+S(e.name),9,k))),128))],512),[[o,q.value.supplier_id]]),r[19]||=u(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},`Supplier cannot be changed after creation`,-1)]),u(`div`,null,[r[21]||=u(`label`,{for:`warehouse_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[m(` Warehouse `),u(`span`,{class:`text-red-500 ml-1`},`*`)],-1),y(u(`select`,{id:`warehouse_id`,"onUpdate:modelValue":r[3]||=e=>q.value.warehouse_id=e,required:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[r[20]||=u(`option`,{value:``},`Select Warehouse`,-1),(g(!0),p(c,null,_(kt.value,e=>(g(),p(`option`,{key:e.id,value:e.id},S(e.name),9,A))),128))],512),[[o,q.value.warehouse_id]])]),u(`div`,null,[r[23]||=u(`label`,{for:`currency_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[m(` Currency `),u(`span`,{class:`text-red-500 ml-1`},`*`)],-1),y(u(`select`,{id:`currency_id`,"onUpdate:modelValue":r[4]||=e=>q.value.currency_id=e,required:``,onChange:At,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[r[22]||=u(`option`,{value:``},`Select Currency`,-1),(g(!0),p(c,null,_(J.value,e=>(g(),p(`option`,{key:e.id,value:e.id},S(e.code)+` - `+S(e.name)+` (`+S(e.symbol)+`) `,9,j))),128))],544),[[o,q.value.currency_id]])]),X.value&&!x(w)(X.value.code)?(g(),d(le,{key:0,modelValue:q.value.currency_rate,"onUpdate:modelValue":r[5]||=e=>q.value.currency_rate=e,modelModifiers:{number:!0},required:``},null,8,[`modelValue`])):f(``,!0)])]),u(`div`,M,[r[25]||=u(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Fees and Charges (USD) `,-1),u(`div`,N,[u(`div`,null,[u(`label`,P,` Shipping Fee (USD) [`+S(q.value.shipping_fee_usd_percent.toFixed(2))+` %] `,1),y(u(`input`,{id:`shipping_fee_usd`,"onUpdate:modelValue":r[6]||=e=>q.value.shipping_fee_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[s,q.value.shipping_fee_usd,void 0,{number:!0}]])]),u(`div`,null,[u(`label`,F,` Customs Fee (USD) [`+S(q.value.customs_fee_usd_percent.toFixed(2))+`%] `,1),y(u(`input`,{id:`customs_fee_usd`,"onUpdate:modelValue":r[7]||=e=>q.value.customs_fee_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[s,q.value.customs_fee_usd,void 0,{number:!0}]])]),u(`div`,null,[u(`label`,I,` Other Fee (USD) [`+S(q.value.other_fee_usd_percent.toFixed(2))+` %] `,1),y(u(`input`,{id:`other_fee_usd`,"onUpdate:modelValue":r[8]||=e=>q.value.other_fee_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[s,q.value.other_fee_usd,void 0,{number:!0}]])]),u(`div`,null,[u(`label`,ve,` Tax (USD) [`+S(q.value.tax_usd_percent.toFixed(2))+`%] `,1),y(u(`input`,{id:`tax_usd`,"onUpdate:modelValue":r[9]||=e=>q.value.tax_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[s,q.value.tax_usd,void 0,{number:!0}]])])])]),u(`div`,ye,[u(`div`,be,[r[28]||=u(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Purchase Return Items `,-1),u(`div`,xe,[u(`label`,Se,[r[26]||=m(`Show Detail `,-1),y(u(`input`,{type:`checkbox`,"onUpdate:modelValue":r[10]||=e=>K.value=e,class:`rounded border-gray-300 dark:border-gray-600`},null,512),[[a,K.value]])]),u(`button`,{type:`button`,onClick:Pt,class:`inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[h(x(e),{class:`h-4 w-4 mr-1`}),r[27]||=m(` Add Item `,-1)])])]),q.value.items.length<1?(g(),p(`div`,Ce,[h(x(oe),{class:`mx-auto h-12 w-12 text-gray-400`}),r[29]||=u(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items added`,-1),r[30]||=u(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`Get started by adding your first return item.`,-1)])):(g(),p(`table`,we,[u(`thead`,null,[u(`tr`,null,[r[37]||=u(`th`,null,`#`,-1),r[38]||=u(`th`,null,[u(`abbr`,{title:`Item Code`},`Code`)],-1),r[39]||=u(`th`,null,`Item`,-1),r[40]||=u(`th`,null,`Unit`,-1),r[41]||=u(`th`,null,[u(`abbr`,{title:`Total Quantity`},`QTY.`)],-1),r[42]||=u(`th`,null,`Price`,-1),r[43]||=u(`th`,null,`Dis. %`,-1),r[44]||=u(`th`,null,[u(`abbr`,{title:`Unit Discount`},`U.Dis`)],-1),r[45]||=u(`th`,null,`Total`,-1),X.value&&!x(w)(X.value.code)?(g(),p(`th`,Te,r[31]||=[u(`abbr`,{title:`Total(USD)`},`USD`,-1)])):f(``,!0),K.value?(g(),p(`th`,Ee,r[32]||=[u(`abbr`,{title:`Shipping charges`},`Ship.`,-1)])):f(``,!0),K.value?(g(),p(`th`,De,r[33]||=[u(`abbr`,{title:`Custom charges`},`Cust.`,-1)])):f(``,!0),K.value?(g(),p(`th`,Oe,r[34]||=[u(`abbr`,{title:`Other fee on this item`},`Other`,-1)])):f(``,!0),K.value?(g(),p(`th`,ke,r[35]||=[u(`abbr`,{title:`Final cost price`},`Final`,-1)])):f(``,!0),K.value?(g(),p(`th`,Ae,r[36]||=[u(`abbr`,{title:`Cost per item`},`CP`,-1)])):f(``,!0)])]),u(`tbody`,null,[(g(!0),p(c,null,_(q.value.items,(e,t)=>(g(),p(`tr`,{key:t,class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},[u(`td`,je,[u(`button`,{type:`button`,onClick:e=>Ft(t),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Remove item`},[h(x(ae),{class:`h-5 w-5`})],8,Me),m(` `+S(t+1),1)]),u(`td`,null,[y(u(`input`,{"onUpdate:modelValue":t=>e.item_code=t,type:`text`,placeholder:`Item code`,onInput:e=>Mt(t),required:``,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,40,Ne),[[s,e.item_code]])]),u(`td`,null,[y(u(`select`,{id:`item_id_${t}`,"onUpdate:modelValue":t=>e.item_id=t,required:``,onChange:e=>jt(t),class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[r[46]||=u(`option`,{value:``},`Select Item`,-1),(g(!0),p(c,null,_(Y.value,e=>(g(),p(`option`,{key:e.id,value:e.id},S(e.code)+` - `+S(e.description),9,Fe))),128))],40,Pe),[[o,e.item_id]])]),u(`td`,null,[u(`input`,{id:`unit_${t}`,value:Nt(e.item_id),type:`text`,disabled:!0,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ie)]),u(`td`,null,[y(u(`input`,{id:`quantity_${t}`,"onUpdate:modelValue":t=>e.quantity=t,type:`number`,min:`1`,placeholder:`Quantity`,required:``,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,Le),[[s,e.quantity,void 0,{number:!0}]])]),u(`td`,null,[y(u(`input`,{id:`price_${t}`,"onUpdate:modelValue":t=>e.price=t,type:`number`,step:`0.01`,placeholder:`0.00`,required:``,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,Re),[[s,e.price,void 0,{number:!0}]])]),u(`td`,null,[y(u(`input`,{id:`discount_percent_${t}`,"onUpdate:modelValue":t=>e.discount_percent=t,type:`number`,step:`0.01`,min:`0`,max:`100`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,ze),[[s,e.discount_percent,void 0,{number:!0}]])]),u(`td`,null,[y(u(`input`,{id:`unit_discount_amount_${t}`,"onUpdate:modelValue":t=>e.unit_discount_amount=t,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,Be),[[s,e.unit_discount_amount,void 0,{number:!0}]])]),u(`td`,null,[u(`input`,{type:`text`,readonly:``,value:x(C)(e.total_price),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ve)]),X.value&&!x(w)(X.value.code)?(g(),p(`td`,He,[u(`input`,{type:`text`,readonly:``,value:x(C)(e.total_price_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ue)])):f(``,!0),K.value?(g(),p(`td`,We,[u(`input`,{type:`text`,readonly:``,value:x(C)(e.total_shipping_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ge)])):f(``,!0),K.value?(g(),p(`td`,Ke,[u(`input`,{type:`text`,readonly:``,value:x(C)(e.total_customs_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,qe)])):f(``,!0),K.value?(g(),p(`td`,Je,[u(`input`,{type:`text`,readonly:``,value:x(C)(e.total_other_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ye)])):f(``,!0),K.value?(g(),p(`td`,L,[u(`input`,{type:`text`,readonly:``,value:x(C)(e.final_total_cost_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Xe)])):f(``,!0),K.value?(g(),p(`td`,Ze,[u(`input`,{type:`text`,readonly:``,value:x(C)(e.cost_per_item_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Qe)])):f(``,!0)]))),128))]),u(`tfoot`,null,[u(`tr`,null,[r[47]||=u(`td`,{colspan:`7`},null,-1),r[48]||=u(`td`,{class:`text-center font-medium`},`Sub Total`,-1),u(`td`,null,[u(`input`,{type:`text`,readonly:``,value:x(C)(q.value.sub_total),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,$e)]),X.value&&!x(w)(X.value.code)?(g(),p(`td`,et,[u(`input`,{type:`text`,readonly:``,value:x(C)(q.value.sub_total_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,tt)])):f(``,!0),K.value?(g(),p(`td`,nt,[u(`input`,{type:`text`,readonly:``,value:x(C)(It()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,rt)])):f(``,!0),K.value?(g(),p(`td`,it,[u(`input`,{type:`text`,readonly:``,value:x(C)(Lt()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,at)])):f(``,!0),K.value?(g(),p(`td`,ot,[u(`input`,{type:`text`,readonly:``,value:x(C)(Rt()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,st)])):f(``,!0),K.value?(g(),p(`td`,ct,[u(`input`,{type:`text`,readonly:``,value:x(C)(Q()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,lt)])):f(``,!0),r[49]||=u(`td`,null,null,-1)]),u(`tr`,null,[r[50]||=u(`td`,{colspan:`7`},null,-1),r[51]||=u(`td`,{class:`text-center font-medium`},[u(`abbr`,{title:`Additional Charge`},` Add. Charge`)],-1),u(`td`,null,[y(u(`input`,{"onUpdate:modelValue":r[11]||=e=>q.value.additional_charge_amount=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,512),[[s,q.value.additional_charge_amount,void 0,{number:!0}]])]),X.value&&!x(w)(X.value.code)?(g(),p(`td`,ut,[u(`input`,{type:`text`,readonly:``,value:x(C)(q.value.additional_charge_amount_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,dt)])):f(``,!0),r[52]||=u(`td`,{colspan:`5`},null,-1)]),u(`tr`,ft,[r[53]||=u(`td`,{colspan:`7`},null,-1),r[54]||=u(`td`,{class:`font-bold text-lg`},`Total`,-1),u(`td`,null,[u(`input`,{type:`text`,readonly:``,value:x(C)(q.value.total),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-bold`},null,8,pt)]),X.value&&!x(w)(X.value.code)?(g(),p(`td`,mt,[u(`input`,{type:`text`,readonly:``,value:x(C)(q.value.total_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-bold`},null,8,ht)])):f(``,!0),r[55]||=u(`td`,{colspan:`5`},null,-1)]),u(`tr`,gt,[r[56]||=u(`td`,{colspan:`7`},null,-1),r[57]||=u(`td`,{class:`font-bold text-lg`},`Final Total`,-1),u(`td`,null,[u(`input`,{type:`text`,readonly:``,value:x(C)(q.value.final_total),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-green-50 dark:bg-green-900 font-bold`},null,8,_t)]),X.value&&!x(w)(X.value.code)?(g(),p(`td`,vt,[u(`input`,{type:`text`,readonly:``,value:x(C)(q.value.final_total_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-green-50 dark:bg-green-900 font-bold`},null,8,yt)])):f(``,!0),K.value?(g(),p(`td`,bt,` Total Cost: $`+S(x(C)(Q())),1)):f(``,!0),K.value?f(``,!0):(g(),p(`td`,xt))])])]))]),u(`div`,St,[r[59]||=u(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Additional Information `,-1),u(`div`,null,[r[58]||=u(`label`,{for:`note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Notes `,-1),y(u(`textarea`,{id:`note`,"onUpdate:modelValue":r[12]||=e=>q.value.note=e,rows:`3`,placeholder:`Optional notes about this purchase return...`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700 resize-vertical`},null,512),[[s,q.value.note]])])]),u(`div`,Ct,[u(`button`,{type:`button`,onClick:Z,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`,disabled:G.value},` Cancel `,8,wt),u(`div`,Tt,[u(`button`,{type:`submit`,disabled:G.value,class:`inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[G.value?(g(),d(x(t),{key:0,class:`w-4 h-4 mr-2 animate-spin`})):(g(),d(x(se),{key:1,class:`w-4 h-4 mr-2`})),m(` `+S(G.value?`Updating...`:`Update Purchase Return`),1)],8,Et)])])],32)])]))])]))}}),z=R;export{z as default};