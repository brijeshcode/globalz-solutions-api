import{M as e,a$ as t,a3 as n,a6 as ee,aG as r,aH as i,aS as te,aU as a,aV as o,aW as ne,aX as s,aY as c,a_ as l,aa as u,ao as re,b0 as ie,b3 as ae,b5 as d,b6 as f,b8 as p,bc as m,bf as h,bg as g,bj as _}from"./index-Dij-yAxd.js";import{b as oe}from"./useAuth-CjJ4dQzW.js";import"./GlobalConfig-wPgXFcZ5.js";import{c as v,d as y,f as b}from"./common-CZbH6H1Z.js";import"./tableUtils-dXs1kjAL.js";import"./Modal-DH8Z5Uu2.js";import{b as x,d as S}from"./currencyUtil-tD8MCbKo.js";import{b as C}from"./DataItems-ChdW68QR.js";import{b as w,c as T}from"./CustomerReturnMarkReceived-DU2M0q8E.js";const E={class:`max-w-7xl mx-auto sm:px-6 lg:px-8 py-6`},D={class:`mb-6`},O={class:`flex items-center justify-between`},k={key:0,class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},A={class:`flex items-center space-x-3`},j={key:0,class:`flex justify-center items-center py-8`},M={key:1,class:`space-y-6`},N={class:`flex items-center space-x-3`},P={key:0,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200`},F={key:1,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200`},I={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200`},L={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},R={class:`px-6 py-4`},z={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},B={class:`text-sm text-gray-900 dark:text-white font-mono`},V={key:0,class:`mt-6`},H={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},U={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},W={class:`px-6 py-4`},G={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},K={key:0,class:`mt-6`},q={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},se={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ce={class:`px-6 py-4`},le={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},ue={key:0,class:`mt-6`},de={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},fe={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},pe={class:`overflow-x-auto`},me={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},he={class:`bg-gray-50 dark:bg-gray-900`},ge={key:0,class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},_e={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},ve={class:`px-6 py-4 whitespace-nowrap`},ye={class:`flex items-center`},be={class:`flex-shrink-0 h-10 w-10`},xe=[`src`,`alt`],Se={key:1,class:`h-10 w-10 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center`},Ce={class:`ml-4`},we={class:`text-sm font-medium text-gray-900 dark:text-white`},Te={class:`text-sm text-gray-500 dark:text-gray-400`},Ee={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},De={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Oe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},ke={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ae={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},je={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Me={key:0,class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900 dark:text-white`},Ne={class:`px-6 py-4 text-right`},Pe={key:0,class:`px-6 py-4 text-right`},Fe={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ie={class:`px-6 py-4`},Le={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-4`};var J=ie({__name:`ViewPage`,setup(ie){let J=r(),Y=i(),X=T(),{isWarehouseManager:Re,isSuperAdmin:ze,isAdmin:Be,isSalesman:Ve}=oe(),Z=h(null),Q=h(!0),$=h(!1),He=a(()=>{if(Ve)return!1;if(Re||ze||Be)return!0}),Ue=async()=>{try{Q.value=!0;let e=parseInt(J.params.id);Z.value=await X.fetchReturn(e)}catch(e){console.error(`Error fetching customer return:`,e),Y.push({name:`customer.returns.index`})}finally{Q.value=!1}},We=e=>{Z.value=e,$.value=!1};return ae(()=>{Ue()}),(r,i)=>{let a=p(`router-link`);return d(),c(`div`,E,[o(`div`,D,[o(`div`,O,[o(`div`,null,[i[2]||=o(`h1`,{class:`text-2xl font-semibold text-gray-900 dark:text-white`},`Customer Return Details`,-1),Z.value?(d(),c(`p`,k,_(Z.value.return_code)+` " `+_(g(v)(Z.value.date)),1)):s(``,!0)]),o(`div`,A,[He.value&&Z.value&&!Z.value.is_received?(d(),c(`button`,{key:0,onClick:i[0]||=e=>$.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`},[t(g(n),{class:`h-4 w-4 mr-2`}),i[3]||=l(` Mark as Received `,-1)])):s(``,!0),t(a,{to:{name:`customer.return.index`},class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},{default:m(()=>[t(g(re),{class:`h-4 w-4 mr-2`}),i[4]||=l(` Back to List `,-1)]),_:1,__:[4]})])])]),Q.value?(d(),c(`div`,j,i[5]||=[o(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)])):Z.value?(d(),c(`div`,M,[o(`div`,N,[Z.value.is_received?(d(),c(`span`,P,[t(g(u),{class:`h-4 w-4 mr-1`}),i[6]||=l(` Received `,-1)])):(d(),c(`span`,F,[t(g(ee),{class:`h-4 w-4 mr-1`}),i[7]||=l(` Not Received `,-1)])),o(`span`,I,[t(g(u),{class:`h-4 w-4 mr-1`}),i[8]||=l(` Approved `,-1)])]),o(`div`,L,[i[9]||=o(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[o(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Information`)],-1),o(`div`,R,[o(`div`,z,[t(C,{label:`Return Code`},{default:m(()=>[o(`div`,B,_(Z.value.return_code),1)]),_:1}),t(C,{label:`Date`,value:g(v)(Z.value.date)},null,8,[`value`]),t(C,{label:`Customer`,value:Z.value.customer?.name},null,8,[`value`]),t(C,{label:`Salesperson`,value:Z.value.salesperson?.name},null,8,[`value`]),t(C,{label:`Warehouse`,value:Z.value.warehouse?.name},null,8,[`value`]),t(C,{label:`Currency`,value:Z.value.currency?.code},null,8,[`value`]),Z.value.currency_rate&&!g(S)(Z.value.currency.code)?(d(),ne(C,{key:0,label:`Exchange Rate`,value:Z.value.currency_rate},null,8,[`value`])):s(``,!0)]),Z.value.note?(d(),c(`div`,V,[t(C,{label:`Note`},{default:m(()=>[o(`div`,H,_(Z.value.note),1)]),_:1})])):s(``,!0)])]),o(`div`,U,[i[10]||=o(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[o(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),o(`div`,W,[o(`div`,G,[t(C,{label:`Approved By`,value:Z.value.approved_by_user?.name},null,8,[`value`]),t(C,{label:`Approved At`,value:g(y)(Z.value.approved_at)},null,8,[`value`])]),Z.value.approve_note?(d(),c(`div`,K,[t(C,{label:`Approval Note`},{default:m(()=>[o(`div`,q,_(Z.value.approve_note),1)]),_:1})])):s(``,!0)])]),Z.value.is_received?(d(),c(`div`,se,[i[11]||=o(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[o(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Receipt Information`)],-1),o(`div`,ce,[o(`div`,le,[t(C,{label:`Received By`,value:Z.value.return_received_by_user?.name},null,8,[`value`]),t(C,{label:`Received At`,value:g(y)(Z.value.return_received_at)},null,8,[`value`])]),Z.value.return_received_note?(d(),c(`div`,ue,[t(C,{label:`Receipt Note`},{default:m(()=>[o(`div`,de,_(Z.value.return_received_note),1)]),_:1})])):s(``,!0)])])):s(``,!0),o(`div`,fe,[i[21]||=o(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[o(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Items`)],-1),o(`div`,pe,[o(`table`,me,[o(`thead`,he,[o(`tr`,null,[i[12]||=o(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Item`,-1),i[13]||=o(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Quantity`,-1),i[14]||=o(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Unit Price`,-1),i[15]||=o(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[o(`abbr`,{title:`Discount %`},`Dis %`)],-1),i[16]||=o(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[o(`abbr`,{title:`Tax %`},`TAX %`)],-1),i[17]||=o(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[o(`abbr`,{title:`TTC price`},`TTC`)],-1),i[18]||=o(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total`,-1),g(S)(Z.value.currency.code)?s(``,!0):(d(),c(`th`,ge,`Total USD`))])]),o(`tbody`,_e,[(d(!0),c(te,null,f(Z.value.items,n=>(d(),c(`tr`,{key:n.id},[o(`td`,ve,[o(`div`,ye,[o(`div`,be,[n.item?.image?(d(),c(`img`,{key:0,src:n.item.image,alt:n.item?.description,class:`h-10 w-10 rounded object-cover`},null,8,xe)):(d(),c(`div`,Se,[t(g(e),{class:`h-6 w-6 text-gray-400`})]))]),o(`div`,Ce,[o(`div`,we,_(n.item?.description),1),o(`div`,Te,_(n.item_code),1)])])]),o(`td`,Ee,_(g(b)(n.quantity)),1),o(`td`,De,_(g(x)(n.price,!0,Z.value.currency)),1),o(`td`,Oe,_(g(b)(n.discount_percent)),1),o(`td`,ke,_(g(b)(n.tax_percent)),1),o(`td`,Ae,_(g(b)(n.ttc_price)),1),o(`td`,je,_(g(x)(n.total_price,!0,Z.value.currency)),1),g(S)(Z.value.currency.code)?s(``,!0):(d(),c(`td`,Me,_(g(x)(n.total_price_usd,!0)),1))]))),128))]),o(`tfoot`,null,[i[19]||=o(`td`,{colspan:`5`},null,-1),i[20]||=o(`td`,{class:`px-6 py-4 text-right`},`Total`,-1),o(`td`,Ne,_(g(x)(Z.value.total,!0,Z.value.currency)),1),g(S)(Z.value.currency.code)?s(``,!0):(d(),c(`td`,Pe,_(g(x)(Z.value.total_usd)),1))])])])]),o(`div`,Fe,[i[22]||=o(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[o(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Summary`)],-1),o(`div`,Ie,[o(`div`,Le,[t(C,{label:`Total Volume`,value:`${g(b)(Z.value.total_volume_cbm)} cbm`},null,8,[`value`]),t(C,{label:`Total Weight`,value:`${g(b)(Z.value.total_weight_kg)} kg`},null,8,[`value`]),t(C,{label:`Total Items`,value:Z.value.items?.length||0},null,8,[`value`])])])])])):s(``,!0),t(w,{show:$.value,"onUpdate:show":i[1]||=e=>$.value=e,"return-order":Z.value,onMarkedReceived:We},null,8,[`show`,`return-order`])])}}}),Y=J;export{Y as default};