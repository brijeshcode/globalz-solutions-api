import{a$ as e,aG as t,aN as n,aP as r,aQ as i,aS as a,aT as o,aV as s,aX as c,at as l,b0 as u,b7 as d,b9 as f,ba as p,bb as m,bc as ee,bd as h}from"./index-C_SyKoIQ.js";import{f as g}from"./common-qdv5PS_C.js";import{b as _}from"./currencyUtil-rn1oR5oW.js";var v=class{baseUrl=`/employee/business`;async getMonthlyCommission(e){try{let t=this.buildQueryParams(e),n=await l(`${this.baseUrl}/monthly/commission?${t}`,{loadingMessage:`Loading monthly commission...`,showLoading:!0});return n.data.data}catch(e){throw console.error(`Error fetching monthly commission:`,e),e}}async getEmployeeMonthlyCommission(e){try{let t=this.buildQueryParams(e),n=await l(`${this.baseUrl}/my-monthly/commission?${t}`,{loadingMessage:`Loading your monthly commission...`,showLoading:!0});return n.data.data}catch(e){throw console.error(`Error fetching employee monthly commission:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const y=new v,b={key:0,class:`rounded-lg shadow-md overflow-hidden`},x={class:`header p-2 flex justify-between`},S={class:`mr-4`},C={key:0,class:`overflow-x-auto`},w={class:`min-w-full border border-gray-300 dark:border-gray-600`},T={class:`bg-gray-100 dark:bg-gray-700 border-b-2 border-gray-300 dark:border-gray-600`},E={key:0,class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},D={key:1,class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},O={class:`bg-white dark:bg-gray-800`},k={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white capitalize border-r border-gray-200 dark:border-gray-700`},A={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},j={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},M={key:0,class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},N={key:1,class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},P={class:`flex items-center`},F={class:`mr-2`},I={class:`w-20 bg-gray-200 rounded-full h-2 dark:bg-gray-700`},L={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},R={class:`px-3 py-3 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400`},z={class:`bg-gray-100 dark:bg-gray-700 border-t-2 border-gray-300 dark:border-gray-600`},B=[`colspan`],te={class:`px-3 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400`},V={key:1,class:`text-center text-gray-500 dark:text-gray-400 py-8`};var H=c({__name:`MontlyCommissionBreakout`,props:{commissionData:{}},setup(c){let l=f({base_amount:!1,progress:!0}),p=r(()=>{let e=4;return l.value.base_amount&&e++,l.value.progress&&e++,e}),m=e=>e==null?`-`:_(e,!0);return(r,c)=>r.commissionData?(e(),o(`div`,b,[i(`div`,x,[c[4]||=i(`h2`,{class:`text-xl font-semibold mb-4 text-gray-900 dark:text-white`},`Commission Breakdown`,-1),i(`div`,null,[i(`label`,S,[d(i(`input`,{type:`checkbox`,"onUpdate:modelValue":c[0]||=e=>l.value.base_amount=e,class:`mr-1`},null,512),[[t,l.value.base_amount]]),c[2]||=s(` Base Amount `,-1)]),i(`label`,null,[d(i(`input`,{type:`checkbox`,"onUpdate:modelValue":c[1]||=e=>l.value.progress=e,class:`mr-1`},null,512),[[t,l.value.progress]]),c[3]||=s(` Progress `,-1)])])]),r.commissionData.commissions&&r.commissionData.commissions.length>0?(e(),o(`div`,C,[i(`table`,w,[i(`thead`,T,[i(`tr`,null,[c[5]||=i(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Label`,-1),c[6]||=i(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Range`,-1),c[7]||=i(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Percent`,-1),l.value.base_amount?(e(),o(`th`,E,`Base Amount`)):a(``,!0),l.value.progress?(e(),o(`th`,D,`Progress`)):a(``,!0),c[8]||=i(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Dynamic%`,-1),c[9]||=i(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider`},`Commission`,-1)])]),i(`tbody`,O,[(e(!0),o(n,null,u(r.commissionData.commissions,t=>(e(),o(`tr`,{key:t.rule_id,class:`border-b border-gray-200 dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer`},[i(`td`,k,h(t.commission_label),1),i(`td`,A,h(m(t.minimum_amount))+` - `+h(m(t.maximum_amount)),1),i(`td`,j,h(t.percent)+`%`,1),l.value.base_amount?(e(),o(`td`,M,h(m(t.base_amount)),1)):a(``,!0),l.value.progress?(e(),o(`td`,N,[i(`div`,P,[i(`span`,F,h(t.achievement_percent.toFixed(2))+`%`,1),i(`div`,I,[i(`div`,{class:`bg-blue-600 dark:bg-blue-500 h-2 rounded-full`,style:ee({width:Math.min(t.achievement_percent,100)+`%`})},null,4)])])])):a(``,!0),i(`td`,L,h(t.percent_commission)+`%`,1),i(`td`,R,h(m(t.commission_amount)),1)]))),128))]),i(`tfoot`,z,[i(`tr`,null,[i(`td`,{colspan:p.value,class:`px-3 py-4 text-right text-sm font-semibold text-gray-900 dark:text-white border-r border-gray-300 dark:border-gray-600`},`Total Commission:`,8,B),i(`td`,te,h(m(r.commissionData.total_commission)),1)])])])])):(e(),o(`div`,V,c[10]||=[i(`p`,null,`No commission rules applied for this period.`,-1)]))])):a(``,!0)}}),U=H;const W={key:0,class:`rounded-lg shadow-md overflow-hidden`},G={key:0,class:`overflow-x-auto`},K={class:`min-w-full border border-gray-300 dark:border-gray-600`},q={class:`bg-gray-100 dark:bg-gray-700 border-b-2 border-gray-300 dark:border-gray-600`},J={class:`bg-white dark:bg-gray-800`},Y={class:`px-3 py-1 whitespace-nowrap text-center text-sm font-medium text-gray-900 dark:text-white border-r border-gray-200 dark:border-gray-700`},X={class:`px-3 py-1 whitespace-nowrap text-center text-sm text-gray-900 dark:text-white bg-blue-50/50 dark:bg-blue-900/10 border-r border-gray-200 dark:border-gray-700`},Z={class:`px-3 py-1 whitespace-nowrap text-right text-sm text-gray-600 dark:text-gray-300 bg-green-50/50 dark:bg-green-900/10 border-r border-gray-200 dark:border-gray-700`},Q={class:`px-3 py-1 whitespace-nowrap text-right text-sm text-gray-600 dark:text-gray-300 bg-red-50/50 dark:bg-red-900/10 border-r border-gray-200 dark:border-gray-700`},ne={class:`bg-gray-100 dark:bg-gray-700 border-t-2 border-gray-300 dark:border-gray-600`},re={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-green-50 dark:bg-green-900 border-r border-b border-gray-300 dark:border-gray-600`},ie={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-red-50 dark:bg-red-900 border-r border-b border-gray-300 dark:border-gray-600`},ae={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-yellow-50 dark:bg-yellow-900 border-r border-b border-gray-300 dark:border-gray-600`},oe={class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},$={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-green-50 dark:bg-green-900/50 border-r border-b border-gray-300 dark:border-gray-600`},se={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-red-50 dark:bg-red-900/50 border-r border-b border-gray-300 dark:border-gray-600`},ce={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-yellow-50 dark:bg-yellow-900/50 border-r border-b border-gray-300 dark:border-gray-600`},le={class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white bg-blue-50 dark:bg-blue-900 border-r border-b border-gray-300 dark:border-gray-600`},ue={colspan:`2`,class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white bg-green-50 dark:bg-green-900 border-r border-b border-gray-300 dark:border-gray-600`},de={colspan:`2`,class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-red-100 bg-red-50 dark:bg-red-900/40 border-r border-b border-gray-300 dark:border-gray-600`},fe={colspan:`2`,class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white bg-yellow-50 dark:bg-yellow-900/80 border-r border-b border-gray-300 dark:border-gray-600`},pe={key:1,class:`text-center text-gray-500 dark:text-gray-400 py-8`};var me=c({__name:`EmployeeDailyBusinessBreadDown`,props:{commissionData:{}},setup(t){let s=t,c=new Date().getDate(),l=e=>{let t=new Date,n=t.getMonth()+1,r=t.getFullYear();return e===c&&s.commissionData.business_summary.month===n&&s.commissionData.business_summary.year===r},d=r(()=>s.commissionData.daily_business.reduce((e,t)=>{let n=t.sales.INV?.count||0,r=t.sales.INX?.count||0;return e+n+r},0)),f=r(()=>s.commissionData.business_summary.total_payments-s.commissionData.business_summary.total_sales-s.commissionData.business_summary.total_returns);return(t,r)=>t.commissionData?(e(),o(`div`,W,[r[10]||=i(`h2`,{class:`text-xl font-semibold mb-4 text-gray-900 dark:text-white`},`Daily Business`,-1),t.commissionData.daily_business&&t.commissionData.daily_business.length>0?(e(),o(`div`,G,[i(`table`,K,[i(`thead`,q,[r[2]||=i(`tr`,null,[i(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-gray-700 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`}),i(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-sky-700 dark:text-sky-300 bg-blue-50 dark:bg-blue-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`}),i(`th`,{colspan:`2`,class:`px-3 py-3 text-center text-xs font-bold text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`},`Sales`),i(`th`,{colspan:`2`,class:`px-3 py-3 text-center text-xs font-bold text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`},`Returns`),i(`th`,{colspan:`2`,class:`px-3 py-3 text-center text-xs font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-50 dark:bg-yellow-900/20 uppercase tracking-wider border-b border-r border-gray-300 dark:border-gray-600`},`Collection`)],-1),i(`tr`,null,[r[0]||=i(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-gray-700 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},`Day`,-1),r[1]||=i(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},`# Invoice`,-1),(e(!0),o(n,null,u(t.commissionData.daily_business[0].sales,(t,n)=>(e(),o(`th`,{key:n,class:`px-3 py-3 text-right text-xs font-bold text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},h(n),1))),128)),(e(!0),o(n,null,u(t.commissionData.daily_business[0].returns,(t,n)=>(e(),o(`th`,{key:n,class:`px-3 py-3 text-right text-xs font-bold text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},h(n),1))),128)),(e(!0),o(n,null,u(t.commissionData.daily_business[0].payments,(t,n)=>(e(),o(`th`,{key:n,class:`px-3 py-3 text-right text-xs font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-50 dark:bg-yellow-900/20 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},h(n),1))),128))])]),i(`tbody`,J,[(e(!0),o(n,null,u(t.commissionData.daily_business,t=>(e(),o(`tr`,{key:t.day,class:m([`border-b border-gray-200 dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer`,l(t.day)?`bg-yellow-100 dark:bg-yellow-900/30 font-semibold`:``])},[i(`td`,Y,h(t.day),1),i(`td`,X,h(t.sales.INV.count+t.sales.INX.count),1),(e(!0),o(n,null,u(t.sales,t=>(e(),o(`td`,Z,h(t.total),1))),256)),(e(!0),o(n,null,u(t.returns,t=>(e(),o(`td`,Q,h(t.total),1))),256)),(e(!0),o(n,null,u(t.payments,(n,r)=>(e(),o(`td`,{key:`pre-data`+t.day,class:`px-3 py-1 whitespace-nowrap text-right text-sm text-gray-600 dark:text-gray-300 bg-yellow-50/50 dark:bg-yellow-900/10`},h(n.total),1))),128))],2))),128))]),i(`tfoot`,ne,[i(`tr`,null,[r[3]||=i(`td`,{class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},`Total`,-1),r[4]||=i(`td`,{class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white bg-blue-50 dark:bg-blue-900 border-r border-b border-gray-300 dark:border-gray-600`},null,-1),(e(!0),o(n,null,u(t.commissionData.business_summary.sales_by_prefix,t=>(e(),o(`td`,re,h(t.total),1))),256)),(e(!0),o(n,null,u(t.commissionData.business_summary.returns_by_prefix,t=>(e(),o(`td`,ie,h(t.total),1))),256)),(e(!0),o(n,null,u(t.commissionData.business_summary.payments_by_prefix,t=>(e(),o(`td`,ae,h(t.total),1))),256))]),i(`tr`,null,[r[5]||=i(`td`,{class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},`Without VAT`,-1),i(`td`,oe,h(t.commissionData.business_summary.VAT),1),(e(!0),o(n,null,u(t.commissionData.business_summary.sales_by_prefix,t=>(e(),o(`td`,$,h(p(g)(t.after_tax_total)),1))),256)),(e(!0),o(n,null,u(t.commissionData.business_summary.returns_by_prefix,t=>(e(),o(`td`,se,h(p(g)(t.after_tax_total)),1))),256)),(e(!0),o(n,null,u(t.commissionData.business_summary.payments_by_prefix,t=>(e(),o(`td`,ce,h(p(g)(t.after_tax_total)),1))),256))]),i(`tr`,null,[r[6]||=i(`td`,{class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},`Month Total`,-1),i(`td`,le,h(d.value),1),i(`td`,ue,h(p(g)(t.commissionData.business_summary.total_sales)),1),i(`td`,de,h(p(g)(t.commissionData.business_summary.total_returns)),1),i(`td`,fe,h(p(g)(t.commissionData.business_summary.total_payments)),1)]),i(`tr`,null,[r[7]||=i(`td`,{class:`px-3 py-2 text-center text-sm font-bold bg-green-50 text-green-900 dark:bg-green-500/50 dark:text-white border-r border-b border-green-300 dark:border-green-600`},`Total Balance`,-1),i(`td`,{class:m([f.value>0?` bg-green-50 text-green-900 dark:bg-green-500/50 dark:text-white`:` bg-red-50 text-red-900 dark:bg-red-500/50 dark:text-white`,`px-3 py-2 text-center text-sm font-bold border-r border-b border-green-300 dark:border-green-600`])},h(p(g)(f.value)),3),r[8]||=i(`td`,{colspan:`6`,class:`px-3 py-2 text-center text-sm font-bold bg-green-50 text-green-900 dark:bg-green-500/50 dark:text-white border-r border-b border-green-300 dark:border-green-600`},`(total payments - total sale - total return )`,-1)])])])])):(e(),o(`div`,pe,r[9]||=[i(`p`,null,`No daily business data available for this period.`,-1)]))])):a(``,!0)}}),he=me;export{he as b,U as c,y as d};