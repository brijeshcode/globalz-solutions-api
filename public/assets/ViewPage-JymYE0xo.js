import{D as e,I as t,X as ee,a$ as n,a4 as r,aF as i,aG as a,aH as o,aI as s,aK as c,aL as l,aM as te,aO as u,aQ as d,aX as f,a_ as p,aa as ne,am as m,aq as re,ar as ie,b2 as h,m as ae,x as oe}from"./index-ZOM5R8cV.js";import{b as se}from"./useAuth-CIIjHxXI.js";import"./GlobalConfig-Dep5CV3r.js";import"./accountsStore-N8jmP92N.js";import"./tableUtils-BFc6-TYF.js";import{b as g}from"./common-CFanRh6n.js";import{b as _,d as v}from"./currencyUtil-PeHr0xlC.js";import{b as y}from"./DataItems-XsQY7pVl.js";import{b as ce}from"./customerPaymentOrdersStore-D3JS-iep.js";import"./Modal-C97FLass.js";import"./usersStore-B5P0QeKy.js";import{b}from"./CustomerPaymentApprove-Yb2hT4iz.js";const x={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},S={class:``},C={class:`mb-8`},w={class:`flex items-center justify-between`},T={class:`flex items-center space-x-4`},E={class:`text-sm text-gray-600 dark:text-gray-400`},D={key:0,class:`flex space-x-3`},O={key:0,class:`flex items-center justify-center py-12`},k={key:1,class:`space-y-6`},A={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-6`},j={class:`flex items-center justify-between`},M={class:`flex items-center space-x-4`},N={class:`flex-shrink-0`},P={class:`h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},F={class:`text-lg font-medium text-gray-900 dark:text-white`},I={class:`text-sm text-gray-500 dark:text-gray-400`},L={class:`text-right`},R={class:`mb-2`},z={key:0,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`},B={key:1,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`},V={class:`text-2xl font-bold text-gray-900 dark:text-white`},H={key:0,class:`text-sm text-gray-500 dark:text-gray-400`},U={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},W={class:`px-6 py-4`},G={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},le={class:`text-sm text-gray-900 dark:text-white`},ue={key:0,class:`text-gray-500 dark:text-gray-400`},de={class:`text-sm text-gray-900 dark:text-white`},fe={key:0,class:`text-gray-500 dark:text-gray-400`},pe={class:`text-sm text-gray-900 dark:text-white`},me={key:0,class:`text-gray-500 dark:text-gray-400`},he={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ge={class:`px-6 py-4`},_e={class:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6`},ve={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ye={class:`px-6 py-4`},be={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},xe={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Se={class:`px-6 py-4`},Ce={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},we={class:`text-sm text-gray-900 dark:text-white`},Te={class:`text-xs text-gray-500 dark:text-gray-400`},Ee={class:`text-sm text-gray-900 dark:text-white`},De={class:`text-xs text-gray-500 dark:text-gray-400`},Oe={key:2,class:`text-center py-12`};var K=te({__name:`ViewPage`,setup(te){let K=ie(),q=re(),J=m(),ke=ce(),{isAdmin:Ae,isSuperAdmin:je}=se(),Y=p(!1),X=p(null),Z=p(!1),Q=()=>{K.push({name:`customer.payment-orders.index`})},Me=()=>{X.value&&K.push({name:`customer.payment-orders.edit`,params:{id:X.value.id}})},Ne=()=>{X.value&&(Z.value=!0)},Pe=async e=>{J.success(`Payment order approved successfully`),await $(),Z.value=!1},$=async()=>{let e=Number(q.params.id);if(!e){J.error(`Invalid payment order ID`),Q();return}Y.value=!0;try{let t=await ke.fetchPaymentOrder(e);X.value=t}catch{J.error(`Failed to load payment order`),X.value=null}finally{Y.value=!1}};return u(()=>{$()}),(te,u)=>(d(),s(`div`,x,[i(`div`,S,[i(`div`,C,[i(`div`,w,[i(`div`,T,[i(`button`,{onClick:Q,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[l(n(ne),{class:`w-5 h-5`})]),i(`div`,null,[u[1]||=i(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Payment Order Details `,-1),i(`p`,E,h(X.value?`${X.value.prefix}-${X.value.code}`:`Loading...`),1)])]),X.value&&!Y.value?(d(),s(`div`,D,[!X.value.approved_at&&(n(Ae)||n(je))?(d(),s(`button`,{key:0,onClick:Ne,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[l(n(r),{class:`h-4 w-4 mr-2`}),u[2]||=c(` Approve Payment `,-1)])):o(``,!0),X.value.approved_at?o(``,!0):(d(),s(`button`,{key:1,onClick:Me,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[l(n(e),{class:`h-4 w-4 mr-2`}),u[3]||=c(` Edit Order `,-1)]))])):o(``,!0)])]),Y.value?(d(),s(`div`,O,[l(n(t),{class:`h-8 w-8 animate-spin text-blue-600`}),u[4]||=i(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment order...`,-1)])):X.value?(d(),s(`div`,k,[i(`div`,A,[i(`div`,j,[i(`div`,M,[i(`div`,N,[i(`div`,P,[l(n(oe),{class:`h-8 w-8 text-blue-600 dark:text-blue-400`})])]),i(`div`,null,[i(`h3`,F,h(X.value.prefix)+`-`+h(X.value.code),1),i(`p`,I,` Created `+h(n(g)(X.value.created_at)),1)])]),i(`div`,L,[i(`div`,R,[X.value.approved_at?(d(),s(`span`,z,[l(n(r),{class:`h-4 w-4 mr-1`}),u[5]||=c(` Approved `,-1)])):(d(),s(`span`,B,[l(n(ee),{class:`h-4 w-4 mr-1`}),u[6]||=c(` Pending Approval `,-1)]))]),i(`div`,V,h(n(_)(X.value.amount_usd,!0)),1),n(v)(X.value.currency.code)?o(``,!0):(d(),s(`div`,H,` Local: `+h(n(_)(X.value.amount,!0,X.value.currency)),1))])])]),i(`div`,U,[u[7]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Basic Information`)],-1),i(`div`,W,[i(`div`,G,[l(y,{label:`Payment Date`,value:n(g)(X.value.date)},null,8,[`value`]),l(y,{label:`Prefix`,value:X.value.prefix},null,8,[`value`]),l(y,{label:`RCT Book Number`,value:X.value.rtc_book_number},null,8,[`value`]),l(y,{label:`Customer`},{default:f(()=>[i(`div`,le,[c(h(X.value.customer?.name||`-`)+` `,1),X.value.customer?.code?(d(),s(`span`,ue,` (`+h(X.value.customer.code)+`) `,1)):o(``,!0)])]),_:1}),l(y,{label:`Currency`},{default:f(()=>[i(`div`,de,[c(h(X.value.currency?.name||`-`)+` `,1),X.value.currency?.code?(d(),s(`span`,fe,` (`+h(X.value.currency.code)+`) `,1)):o(``,!0)])]),_:1}),l(y,{label:`Payment Term`},{default:f(()=>[i(`div`,pe,[c(h(X.value.customer_payment_term?.name||`-`)+` `,1),X.value.customer_payment_term?.days?(d(),s(`span`,me,` (`+h(X.value.customer_payment_term.days)+` days) `,1)):o(``,!0)])]),_:1})])])]),n(v)(X.value.currency.code)?o(``,!0):(d(),s(`div`,he,[u[8]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Financial Details`)],-1),i(`div`,ge,[i(`div`,_e,[n(v)(X.value.currency.code)?o(``,!0):(d(),a(y,{key:0,label:`Currency Rate`,value:X.value.currency_rate*1},null,8,[`value`])),l(y,{label:`Amount`,value:n(_)(X.value.amount,!0,X.value.currency)},null,8,[`value`]),n(v)(X.value.currency.code)?o(``,!0):(d(),a(y,{key:1,label:`Amount USD`,value:n(_)(X.value.amount_usd,!0)},null,8,[`value`]))])])])),X.value.note?(d(),s(`div`,ve,[u[9]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Notes`)],-1),i(`div`,ye,[l(y,{label:`Note`},{default:f(()=>[i(`div`,be,h(X.value.note),1)]),_:1})])])):o(``,!0),i(`div`,xe,[u[10]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Audit Information`)],-1),i(`div`,Se,[i(`div`,Ce,[l(y,{label:`Created By`},{default:f(()=>[i(`div`,we,h(X.value.created_by_user?.name||`-`),1),i(`div`,Te,h(n(g)(X.value.created_at)),1)]),_:1}),l(y,{label:`Last Updated By`},{default:f(()=>[i(`div`,Ee,h(X.value.updated_by_user?.name||`-`),1),i(`div`,De,h(n(g)(X.value.updated_at)),1)]),_:1})])])])])):Y.value?o(``,!0):(d(),s(`div`,Oe,[l(n(ae),{class:`mx-auto h-12 w-12 text-red-400`}),u[11]||=i(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment order not found`,-1),u[12]||=i(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The payment order you're looking for doesn't exist or has been deleted. `,-1),i(`div`,{class:`mt-6`},[i(`button`,{onClick:Q,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payment Orders `)])]))]),l(b,{show:Z.value,"onUpdate:show":u[0]||=e=>Z.value=e,"payment-order":X.value,onApproved:Pe},null,8,[`show`,`payment-order`])]))}}),q=K;export{q as default};