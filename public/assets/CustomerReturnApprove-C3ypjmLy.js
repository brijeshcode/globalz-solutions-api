import{aK as e,aN as t,aQ as n,aR as r,aS as i,aT as a,aU as o,aW as s,aX as c,aY as l,ac as u,ay as d,b1 as f,b7 as p,b8 as m,b9 as h,bb as g,bc as _,bf as v}from"./index-C-qBHVsX.js";import{c as y}from"./common-CZbH6H1Z.js";import{b}from"./Modal--lKLMOqF.js";import{b as x,d as S}from"./currencyUtil-BtWdBgH-.js";import{b as C}from"./customerReturnOrdersStore-YVSeZUdS.js";const ee={key:0,class:`space-y-6`},te={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},ne={class:`grid grid-cols-1 md:grid-cols-2 gap-4 text-sm`},w={class:`ml-2 font-medium text-gray-900 dark:text-white`},T={class:`ml-2 font-medium text-gray-900 dark:text-white`},E={class:`ml-2 font-medium text-gray-900 dark:text-white`},D={class:`ml-2 font-medium text-gray-900 dark:text-white`},O={key:0},k={class:`ml-2 font-medium text-gray-900 dark:text-white`},A={key:1},j={class:`ml-2 font-medium text-gray-900 dark:text-white`},M={key:0,class:`mt-3`},N={class:`mt-1 text-sm text-gray-900 dark:text-white`},P=[`disabled`],F={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},I={class:`flex items-center justify-end space-x-3`},L=[`disabled`],R=[`disabled`],z={key:0,class:`flex items-center`},B={key:1,class:`flex items-center`};var V=l({__name:`CustomerReturnApprove`,props:{show:{type:Boolean},returnOrder:{}},emits:[`update:show`,`approved`],setup(l,{emit:V}){let H=l,U=V,W=C(),G=d(),K=g(!1),q=g({}),J=g({approve_note:``}),Y=n({get:()=>H.show,set:e=>U(`update:show`,e)}),X=n(()=>!0),Z=()=>{K.value||(Q(),U(`update:show`,!1))},Q=()=>{J.value={approve_note:``},q.value={}},re=()=>(q.value={},!0),$=async()=>{if(!(!H.returnOrder||!re()))try{K.value=!0;let e={approve_note:J.value.approve_note||void 0},t=await W.approveOrder(H.returnOrder.id,e);G.success(`Return order approved successfully`),U(`approved`,t),Z()}catch(e){console.error(`Error approving return order:`,e),e.response?.data?.errors?q.value=e.response.data.errors:G.error(e.response?.data?.message||`Failed to approve return order`)}finally{K.value=!1}};return p(()=>H.show,e=>{e&&Q()}),(n,l)=>(f(),i(b,{modelValue:Y.value,"onUpdate:modelValue":l[1]||=e=>Y.value=e,title:`Approve Return Order`,size:`lg`,loading:K.value,onClose:Z},{footer:m(()=>[r(`div`,I,[r(`button`,{type:`button`,onClick:Z,class:`inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`,disabled:K.value},` Cancel `,8,L),r(`button`,{type:`submit`,onClick:$,class:`inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed`,disabled:K.value||!X.value},[K.value?(f(),o(`div`,z,l[11]||=[r(`svg`,{class:`animate-spin -ml-1 mr-2 h-4 w-4 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[r(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),r(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),s(` Approving... `,-1)])):(f(),o(`div`,B,[c(_(u),{class:`h-4 w-4 mr-2`}),l[12]||=s(` Approve Return Order `,-1)]))],8,R)])]),default:m(()=>[n.returnOrder?(f(),o(`div`,ee,[r(`div`,te,[l[9]||=r(`h4`,{class:`text-sm font-medium text-gray-900 dark:text-white mb-3`},`Return Order Details`,-1),r(`div`,ne,[r(`div`,null,[l[2]||=r(`span`,{class:`text-gray-500 dark:text-gray-400`},`Return Code:`,-1),r(`span`,w,v(n.returnOrder.return_code),1)]),r(`div`,null,[l[3]||=r(`span`,{class:`text-gray-500 dark:text-gray-400`},`Date:`,-1),r(`span`,T,v(_(y)(n.returnOrder.date)),1)]),r(`div`,null,[l[4]||=r(`span`,{class:`text-gray-500 dark:text-gray-400`},`Customer:`,-1),r(`span`,E,v(n.returnOrder.customer?.name||`N/A`),1)]),r(`div`,null,[l[5]||=r(`span`,{class:`text-gray-500 dark:text-gray-400`},`Total:`,-1),r(`span`,D,v(_(x)(n.returnOrder.total,!0,n.returnOrder.currency)),1)]),_(S)(n.returnOrder.currency.code)?a(``,!0):(f(),o(`div`,O,[l[6]||=r(`span`,{class:`text-gray-500 dark:text-gray-400`},`Total USD:`,-1),r(`span`,k,v(_(x)(n.returnOrder.total_usd)),1)])),n.returnOrder.currency_rate&&!_(S)(n.returnOrder.currency.code)?(f(),o(`div`,A,[l[7]||=r(`span`,{class:`text-gray-500 dark:text-gray-400`},`Currency Rate:`,-1),r(`span`,j,v(n.returnOrder.currency_rate),1)])):a(``,!0)]),n.returnOrder.note?(f(),o(`div`,M,[l[8]||=r(`span`,{class:`text-gray-500 dark:text-gray-400`},`Note:`,-1),r(`p`,N,v(n.returnOrder.note),1)])):a(``,!0)]),r(`form`,{onSubmit:t($,[`prevent`]),class:`space-y-4`},[r(`div`,null,[l[10]||=r(`label`,{for:`approve_note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Approval Note `,-1),h(r(`textarea`,{id:`approve_note`,"onUpdate:modelValue":l[0]||=e=>J.value.approve_note=e,rows:`3`,class:`block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-400 dark:focus:ring-blue-400 sm:text-sm`,placeholder:`Optional approval note...`,disabled:K.value},null,8,P),[[e,J.value.approve_note]]),q.value.approve_note?(f(),o(`p`,F,v(q.value.approve_note),1)):a(``,!0)])],32)])):a(``,!0)]),_:1},8,[`modelValue`,`loading`]))}}),H=V;export{H as b};