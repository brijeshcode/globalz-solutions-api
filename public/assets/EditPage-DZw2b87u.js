import{C as e,J as t,aD as n,aF as r,aG as i,aJ as a,aK as o,aM as s,aN as c,aO as l,aP as u,aQ as d,aS as f,aT as p,aU as m,aW as ee,aY as h,aZ as g,ag as te,au as ne,ay as re,az as ie,b2 as _,b4 as v,b6 as y,b7 as b,ba as x,c as ae,h as oe,r as se,u as ce}from"./index-BuHiL7JP.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import{f as S}from"./common-CAcZd9q3.js";import{c as le,d as C,e as w}from"./currencyUtil-DBJZG3WY.js";import{b as ue}from"./CurrencyRateInput-DkAYna7K.js";import{b as de}from"./suppliersStore-CUdWCjwb.js";import{b as fe}from"./PurchaseReturnStore-DQQv8BsP.js";const pe={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},me={class:``},he={class:`mb-8`},ge={class:`flex items-center space-x-4 mb-2`},_e={key:0,class:`flex justify-center items-center py-12`},T={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},E={class:`px-6 py-8`},D={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},O={class:`grid grid-cols-1 md:grid-cols-5 gap-6`},k=[`value`],A=[`value`],j=[`value`],M={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},N={class:`grid grid-cols-1 md:grid-cols-4 gap-6`},P={for:`shipping_fee_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},F={for:`customs_fee_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},I={for:`other_fee_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},ve={for:`tax_usd`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},ye={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},be={class:`flex items-center justify-between mb-4`},xe={class:`flex gap-4`},Se={class:`flex gap-2`},Ce={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},we={key:1,class:`w-full`},Te={key:0},Ee={key:1},De={key:2},Oe={key:3},ke={key:4},Ae={key:5},je={class:`flex`},Me=[`onClick`],Ne=[`onUpdate:modelValue`,`onInput`],Pe=[`id`,`onUpdate:modelValue`,`onChange`],Fe=[`value`],Ie=[`id`,`value`],Le=[`id`,`onUpdate:modelValue`],Re=[`id`,`onUpdate:modelValue`],ze=[`id`,`onUpdate:modelValue`],Be=[`id`,`onUpdate:modelValue`],Ve=[`value`],He={key:0},Ue=[`value`],We={key:1},Ge=[`value`],Ke={key:2},qe=[`value`],Je={key:3},Ye=[`value`],Xe={key:4},L=[`value`],Ze={key:5},Qe=[`value`],$e=[`value`],et={key:0},tt=[`value`],nt={key:1},rt=[`value`],it={key:2},at=[`value`],ot={key:3},st=[`value`],ct={key:4},lt=[`value`],ut={key:0},dt=[`value`],ft={class:`border-t-2 border-gray-300 dark:border-gray-600`},pt=[`value`],mt={key:0},ht=[`value`],gt={class:`border-t-2 border-gray-300 dark:border-gray-600`},_t=[`value`],vt={key:0},yt=[`value`],bt={key:1,colspan:`4`,class:`text-center font-bold text-lg text-green-600 dark:text-green-400`},xt={key:2},St={class:`pb-6`},Ct={class:`flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700`},wt=[`disabled`],Tt={class:`flex space-x-3`},Et=[`disabled`];var R=m({__name:`EditPage`,setup(m){let R=ie(),z=re(),B=fe(),V=de(),H=ae(),{showSuccess:Dt,showError:U}=ne(),W=y(!0),G=y(!1),K=y(!1),q=y({prefix:`PURTN`,date:new Date().toISOString().split(`T`)[0],supplier_id:null,warehouse_id:null,currency_id:null,currency_rate:1,supplier_purchase_return_number:null,shipping_fee_usd:0,customs_fee_usd:0,other_fee_usd:0,tax_usd:0,shipping_fee_usd_percent:0,customs_fee_usd_percent:0,other_fee_usd_percent:0,tax_usd_percent:0,sub_total:0,sub_total_usd:0,additional_charge_amount:0,additional_charge_amount_usd:0,total:0,total_usd:0,final_total:0,final_total_usd:0,note:null,items:[]}),Ot=s(()=>V.suppliers),kt=s(()=>H.warehouses),J=s(()=>H.currencies),Y=s(()=>H.items),X=s(()=>J.value.find(e=>e.id===q.value.currency_id));s(()=>X.value?.code||`USD`);let Z=()=>{R.push({name:`purchase-returns.index`})},At=()=>{let e=J.value.find(e=>e.id===q.value.currency_id);e&&C(e.code)?q.value.currency_rate=1:e&&(q.value.currency_rate=e.exchange_rate||1),$()},jt=e=>{let t=q.value.items[e],n=Y.value.find(e=>e.id===t.item_id);n&&(t.item_code=n.code)},Mt=e=>{let t=q.value.items[e],n=Y.value.find(e=>e.code===t.item_code);n&&(t.item_id=n.id)},Nt=e=>{let t=Y.value.find(t=>t.id===e);return t?.item_unit?.name||``},Pt=()=>{q.value.items.push({item_code:``,item_id:null,price:0,quantity:1,discount_percent:0,unit_discount_amount:0,discount_amount:0,total_price:0,total_price_usd:0,total_shipping_usd:0,total_customs_usd:0,total_other_usd:0,final_total_cost_usd:0,cost_per_item_usd:0,note:null})},Ft=e=>{q.value.items.splice(e,1),$()},It=()=>q.value.items.reduce((e,t)=>e+Number(t.total_shipping_usd||0),0),Lt=()=>q.value.items.reduce((e,t)=>e+Number(t.total_customs_usd||0),0),Rt=()=>q.value.items.reduce((e,t)=>e+Number(t.total_other_usd||0),0),Q=()=>q.value.items.reduce((e,t)=>e+Number(t.final_total_cost_usd||0),0),zt=e=>{if(!X.value)return;let t=Number(q.value.currency_rate)||1,n=X.value.calculation_type,r=e.price*e.quantity,i=r*(e.discount_percent/100),a=e.unit_discount_amount*e.quantity;e.discount_amount=i+a,e.total_price=r-e.discount_amount,e.total_price_usd=w(e.total_price,t,n)},$=()=>{if(!X.value)return;let e=Number(q.value.currency_rate)||1,t=X.value.calculation_type;q.value.items.forEach(e=>{zt(e)}),q.value.sub_total=q.value.items.reduce((e,t)=>e+Number(t.total_price||0),0),q.value.sub_total_usd=q.value.items.reduce((e,t)=>e+Number(t.total_price_usd||0),0),q.value.additional_charge_amount_usd=w(Number(q.value.additional_charge_amount||0),e,t),q.value.total=Number(q.value.sub_total)+Number(q.value.additional_charge_amount||0),q.value.total_usd=Number(q.value.sub_total_usd)+Number(q.value.additional_charge_amount_usd),q.value.total_usd>0?(q.value.shipping_fee_usd_percent=Number(q.value.shipping_fee_usd)/Number(q.value.total_usd)*100,q.value.customs_fee_usd_percent=Number(q.value.customs_fee_usd)/Number(q.value.total_usd)*100,q.value.other_fee_usd_percent=Number(q.value.other_fee_usd)/Number(q.value.total_usd)*100,q.value.tax_usd_percent=Number(q.value.tax_usd)/Number(q.value.total_usd)*100):(q.value.shipping_fee_usd_percent=0,q.value.customs_fee_usd_percent=0,q.value.other_fee_usd_percent=0,q.value.tax_usd_percent=0),q.value.items.forEach(e=>{if(q.value.total_usd>0){let t=Number(e.total_price_usd||0)/Number(q.value.total_usd);e.total_shipping_usd=Number(q.value.shipping_fee_usd)*t,e.total_customs_usd=Number(q.value.customs_fee_usd)*t,e.total_other_usd=Number(q.value.other_fee_usd)*t}else e.total_shipping_usd=0,e.total_customs_usd=0,e.total_other_usd=0;e.final_total_cost_usd=Number(e.total_price_usd||0)+Number(e.total_shipping_usd||0)+Number(e.total_customs_usd||0)+Number(e.total_other_usd||0),e.quantity>0?e.cost_per_item_usd=Number(e.final_total_cost_usd)/Number(e.quantity):e.cost_per_item_usd=0}),q.value.final_total_usd=Number(q.value.total_usd)+Number(q.value.shipping_fee_usd)+Number(q.value.customs_fee_usd)+Number(q.value.other_fee_usd)+Number(q.value.tax_usd),q.value.final_total=le(q.value.final_total_usd,e,t)},Bt=async()=>{try{W.value=!0;let e=parseInt(z.params.id),t=await B.fetchPurchaseReturn(e);q.value={prefix:`PURTN`,date:t.date,supplier_id:t.supplier_id,warehouse_id:t.warehouse_id,currency_id:t.currency_id,currency_rate:t.currency_rate,supplier_purchase_return_number:t.supplier_purchase_return_number,shipping_fee_usd:t.shipping_fee_usd,customs_fee_usd:t.customs_fee_usd,other_fee_usd:t.other_fee_usd,tax_usd:t.tax_usd,shipping_fee_usd_percent:t.shipping_fee_usd_percent,customs_fee_usd_percent:t.customs_fee_usd_percent,other_fee_usd_percent:t.other_fee_usd_percent,tax_usd_percent:t.tax_usd_percent,sub_total:t.sub_total,sub_total_usd:t.sub_total_usd,additional_charge_amount:t.additional_charge_amount,additional_charge_amount_usd:t.additional_charge_amount_usd,total:t.total,total_usd:t.total_usd,final_total:t.final_total,final_total_usd:t.final_total_usd,note:t.note,items:t.items?.map(e=>({id:e.id,item_code:e.item_code,item_id:e.item_id,price:e.price,quantity:e.quantity,discount_percent:e.discount_percent,unit_discount_amount:e.unit_discount_amount,discount_amount:e.discount_amount,total_price:e.total_price,total_price_usd:e.total_price_usd,total_shipping_usd:e.total_shipping_usd,total_customs_usd:e.total_customs_usd,total_other_usd:e.total_other_usd,final_total_cost_usd:e.final_total_cost_usd,cost_per_item_usd:e.cost_per_item_usd,note:e.note}))||[]}}catch{U(`Failed to load purchase return`),R.push({name:`purchase-returns.index`})}finally{W.value=!1}},Vt=async()=>{try{if(G.value=!0,!q.value.supplier_id){U(`Please select a supplier`);return}if(!q.value.warehouse_id){U(`Please select a warehouse`);return}if(!q.value.currency_id){U(`Please select a currency`);return}if(q.value.items.length===0){U(`Please add at least one item`);return}for(let e of q.value.items)if(!e.item_id){U(`Please select an item for all rows`);return}let e=parseInt(z.params.id);await B.updatePurchaseReturn(e,q.value),Dt(`Purchase return updated successfully`),R.push({name:`purchase-returns.index`})}catch(e){U(e.message||`Failed to update purchase return`)}finally{G.value=!1}};return _(()=>q.value.items,()=>{W.value||$()},{deep:!0}),_([()=>q.value.shipping_fee_usd,()=>q.value.customs_fee_usd,()=>q.value.other_fee_usd,()=>q.value.tax_usd,()=>q.value.additional_charge_amount,()=>q.value.currency_rate],()=>{W.value||$()}),ee(async()=>{try{await Promise.all([V.fetchSuppliers(),H.fetchWarehouses(),H.fetchCurrencies(),H.fetchItems(),Bt()])}catch{U(`Failed to load required data`)}}),(s,m)=>(h(),d(`div`,pe,[c(`div`,me,[c(`div`,he,[c(`div`,ge,[c(`button`,{onClick:Z,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[p(b(te),{class:`w-5 h-5`})]),m[13]||=c(`div`,null,[c(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Purchase Return `),c(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update purchase return information `)],-1)])]),W.value?(h(),d(`div`,_e,m[14]||=[c(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600`},null,-1)])):(h(),d(`div`,T,[c(`div`,E,[c(`form`,{onSubmit:a(Vt,[`prevent`]),class:`space-y-6`},[c(`div`,D,[m[24]||=c(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),c(`div`,O,[c(`div`,null,[m[15]||=c(`label`,{for:`date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[f(` Return Date `),c(`span`,{class:`text-red-500 ml-1`},`*`)],-1),v(c(`input`,{id:`date`,"onUpdate:modelValue":m[0]||=e=>q.value.date=e,type:`date`,required:``,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[i,q.value.date]])]),c(`div`,null,[m[16]||=c(`label`,{for:`supplier_purchase_return_number`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Supplier Return # `,-1),v(c(`input`,{id:`supplier_purchase_return_number`,"onUpdate:modelValue":m[1]||=e=>q.value.supplier_purchase_return_number=e,type:`text`,placeholder:`Enter supplier return number`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[i,q.value.supplier_purchase_return_number]])]),c(`div`,null,[m[18]||=c(`label`,{for:`supplier_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[f(` Supplier `),c(`span`,{class:`text-red-500 ml-1`},`*`)],-1),v(c(`select`,{id:`supplier_id`,"onUpdate:modelValue":m[2]||=e=>q.value.supplier_id=e,required:``,disabled:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200 cursor-not-allowed`},[m[17]||=c(`option`,{value:``},`Select Supplier`,-1),(h(!0),d(o,null,g(Ot.value,e=>(h(),d(`option`,{key:e.id,value:e.id},x(e.code)+` - `+x(e.name),9,k))),128))],512),[[r,q.value.supplier_id]]),m[19]||=c(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},`Supplier cannot be changed after creation`,-1)]),c(`div`,null,[m[21]||=c(`label`,{for:`warehouse_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[f(` Warehouse `),c(`span`,{class:`text-red-500 ml-1`},`*`)],-1),v(c(`select`,{id:`warehouse_id`,"onUpdate:modelValue":m[3]||=e=>q.value.warehouse_id=e,required:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[m[20]||=c(`option`,{value:``},`Select Warehouse`,-1),(h(!0),d(o,null,g(kt.value,e=>(h(),d(`option`,{key:e.id,value:e.id},x(e.name),9,A))),128))],512),[[r,q.value.warehouse_id]])]),c(`div`,null,[m[23]||=c(`label`,{for:`currency_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[f(` Currency `),c(`span`,{class:`text-red-500 ml-1`},`*`)],-1),v(c(`select`,{id:`currency_id`,"onUpdate:modelValue":m[4]||=e=>q.value.currency_id=e,required:``,onChange:At,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[m[22]||=c(`option`,{value:``},`Select Currency`,-1),(h(!0),d(o,null,g(J.value,e=>(h(),d(`option`,{key:e.id,value:e.id},x(e.code)+` - `+x(e.name)+` (`+x(e.symbol)+`) `,9,j))),128))],544),[[r,q.value.currency_id]])]),X.value&&!b(C)(X.value.code)?(h(),l(ue,{key:0,modelValue:q.value.currency_rate,"onUpdate:modelValue":m[5]||=e=>q.value.currency_rate=e,modelModifiers:{number:!0},required:``},null,8,[`modelValue`])):u(``,!0)])]),c(`div`,M,[m[25]||=c(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Fees and Charges (USD) `,-1),c(`div`,N,[c(`div`,null,[c(`label`,P,` Shipping Fee (USD) [`+x(q.value.shipping_fee_usd_percent.toFixed(2))+` %] `,1),v(c(`input`,{id:`shipping_fee_usd`,"onUpdate:modelValue":m[6]||=e=>q.value.shipping_fee_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[i,q.value.shipping_fee_usd,void 0,{number:!0}]])]),c(`div`,null,[c(`label`,F,` Customs Fee (USD) [`+x(q.value.customs_fee_usd_percent.toFixed(2))+`%] `,1),v(c(`input`,{id:`customs_fee_usd`,"onUpdate:modelValue":m[7]||=e=>q.value.customs_fee_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[i,q.value.customs_fee_usd,void 0,{number:!0}]])]),c(`div`,null,[c(`label`,I,` Other Fee (USD) [`+x(q.value.other_fee_usd_percent.toFixed(2))+` %] `,1),v(c(`input`,{id:`other_fee_usd`,"onUpdate:modelValue":m[8]||=e=>q.value.other_fee_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[i,q.value.other_fee_usd,void 0,{number:!0}]])]),c(`div`,null,[c(`label`,ve,` Tax (USD) [`+x(q.value.tax_usd_percent.toFixed(2))+`%] `,1),v(c(`input`,{id:`tax_usd`,"onUpdate:modelValue":m[9]||=e=>q.value.tax_usd=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,512),[[i,q.value.tax_usd,void 0,{number:!0}]])])])]),c(`div`,ye,[c(`div`,be,[m[28]||=c(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Purchase Return Items `,-1),c(`div`,xe,[c(`label`,Se,[m[26]||=f(`Show Detail `,-1),v(c(`input`,{type:`checkbox`,"onUpdate:modelValue":m[10]||=e=>K.value=e,class:`rounded border-gray-300 dark:border-gray-600`},null,512),[[n,K.value]])]),c(`button`,{type:`button`,onClick:Pt,class:`inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[p(b(e),{class:`h-4 w-4 mr-1`}),m[27]||=f(` Add Item `,-1)])])]),q.value.items.length<1?(h(),d(`div`,Ce,[p(b(se),{class:`mx-auto h-12 w-12 text-gray-400`}),m[29]||=c(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items added`,-1),m[30]||=c(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`Get started by adding your first return item.`,-1)])):(h(),d(`table`,we,[c(`thead`,null,[c(`tr`,null,[m[37]||=c(`th`,null,`#`,-1),m[38]||=c(`th`,null,[c(`abbr`,{title:`Item Code`},`Code`)],-1),m[39]||=c(`th`,null,`Item`,-1),m[40]||=c(`th`,null,`Unit`,-1),m[41]||=c(`th`,null,[c(`abbr`,{title:`Total Quantity`},`QTY.`)],-1),m[42]||=c(`th`,null,`Price`,-1),m[43]||=c(`th`,null,`Dis. %`,-1),m[44]||=c(`th`,null,[c(`abbr`,{title:`Unit Discount`},`U.Dis`)],-1),m[45]||=c(`th`,null,`Total`,-1),X.value&&!b(C)(X.value.code)?(h(),d(`th`,Te,m[31]||=[c(`abbr`,{title:`Total(USD)`},`USD`,-1)])):u(``,!0),K.value?(h(),d(`th`,Ee,m[32]||=[c(`abbr`,{title:`Shipping charges`},`Ship.`,-1)])):u(``,!0),K.value?(h(),d(`th`,De,m[33]||=[c(`abbr`,{title:`Custom charges`},`Cust.`,-1)])):u(``,!0),K.value?(h(),d(`th`,Oe,m[34]||=[c(`abbr`,{title:`Other fee on this item`},`Other`,-1)])):u(``,!0),K.value?(h(),d(`th`,ke,m[35]||=[c(`abbr`,{title:`Final cost price`},`Final`,-1)])):u(``,!0),K.value?(h(),d(`th`,Ae,m[36]||=[c(`abbr`,{title:`Cost per item`},`CP`,-1)])):u(``,!0)])]),c(`tbody`,null,[(h(!0),d(o,null,g(q.value.items,(e,t)=>(h(),d(`tr`,{key:t,class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},[c(`td`,je,[c(`button`,{type:`button`,onClick:e=>Ft(t),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Remove item`},[p(b(oe),{class:`h-5 w-5`})],8,Me),f(` `+x(t+1),1)]),c(`td`,null,[v(c(`input`,{"onUpdate:modelValue":t=>e.item_code=t,type:`text`,placeholder:`Item code`,onInput:e=>Mt(t),required:``,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,40,Ne),[[i,e.item_code]])]),c(`td`,null,[v(c(`select`,{id:`item_id_${t}`,"onUpdate:modelValue":t=>e.item_id=t,required:``,onChange:e=>jt(t),class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[m[46]||=c(`option`,{value:``},`Select Item`,-1),(h(!0),d(o,null,g(Y.value,e=>(h(),d(`option`,{key:e.id,value:e.id},x(e.code)+` - `+x(e.description),9,Fe))),128))],40,Pe),[[r,e.item_id]])]),c(`td`,null,[c(`input`,{id:`unit_${t}`,value:Nt(e.item_id),type:`text`,disabled:!0,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ie)]),c(`td`,null,[v(c(`input`,{id:`quantity_${t}`,"onUpdate:modelValue":t=>e.quantity=t,type:`number`,min:`1`,placeholder:`Quantity`,required:``,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,Le),[[i,e.quantity,void 0,{number:!0}]])]),c(`td`,null,[v(c(`input`,{id:`price_${t}`,"onUpdate:modelValue":t=>e.price=t,type:`number`,step:`0.01`,placeholder:`0.00`,required:``,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,Re),[[i,e.price,void 0,{number:!0}]])]),c(`td`,null,[v(c(`input`,{id:`discount_percent_${t}`,"onUpdate:modelValue":t=>e.discount_percent=t,type:`number`,step:`0.01`,min:`0`,max:`100`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,ze),[[i,e.discount_percent,void 0,{number:!0}]])]),c(`td`,null,[v(c(`input`,{id:`unit_discount_amount_${t}`,"onUpdate:modelValue":t=>e.unit_discount_amount=t,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,8,Be),[[i,e.unit_discount_amount,void 0,{number:!0}]])]),c(`td`,null,[c(`input`,{type:`text`,readonly:``,value:b(S)(e.total_price),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ve)]),X.value&&!b(C)(X.value.code)?(h(),d(`td`,He,[c(`input`,{type:`text`,readonly:``,value:b(S)(e.total_price_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ue)])):u(``,!0),K.value?(h(),d(`td`,We,[c(`input`,{type:`text`,readonly:``,value:b(S)(e.total_shipping_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ge)])):u(``,!0),K.value?(h(),d(`td`,Ke,[c(`input`,{type:`text`,readonly:``,value:b(S)(e.total_customs_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,qe)])):u(``,!0),K.value?(h(),d(`td`,Je,[c(`input`,{type:`text`,readonly:``,value:b(S)(e.total_other_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Ye)])):u(``,!0),K.value?(h(),d(`td`,Xe,[c(`input`,{type:`text`,readonly:``,value:b(S)(e.final_total_cost_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,L)])):u(``,!0),K.value?(h(),d(`td`,Ze,[c(`input`,{type:`text`,readonly:``,value:b(S)(e.cost_per_item_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,Qe)])):u(``,!0)]))),128))]),c(`tfoot`,null,[c(`tr`,null,[m[47]||=c(`td`,{colspan:`7`},null,-1),m[48]||=c(`td`,{class:`text-center font-medium`},`Sub Total`,-1),c(`td`,null,[c(`input`,{type:`text`,readonly:``,value:b(S)(q.value.sub_total),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,$e)]),X.value&&!b(C)(X.value.code)?(h(),d(`td`,et,[c(`input`,{type:`text`,readonly:``,value:b(S)(q.value.sub_total_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,tt)])):u(``,!0),K.value?(h(),d(`td`,nt,[c(`input`,{type:`text`,readonly:``,value:b(S)(It()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,rt)])):u(``,!0),K.value?(h(),d(`td`,it,[c(`input`,{type:`text`,readonly:``,value:b(S)(Lt()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,at)])):u(``,!0),K.value?(h(),d(`td`,ot,[c(`input`,{type:`text`,readonly:``,value:b(S)(Rt()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,st)])):u(``,!0),K.value?(h(),d(`td`,ct,[c(`input`,{type:`text`,readonly:``,value:b(S)(Q()),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-medium`},null,8,lt)])):u(``,!0),m[49]||=c(`td`,null,null,-1)]),c(`tr`,null,[m[50]||=c(`td`,{colspan:`7`},null,-1),m[51]||=c(`td`,{class:`text-center font-medium`},[c(`abbr`,{title:`Additional Charge`},` Add. Charge`)],-1),c(`td`,null,[v(c(`input`,{"onUpdate:modelValue":m[11]||=e=>q.value.additional_charge_amount=e,type:`number`,step:`0.01`,placeholder:`0.00`,class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800`},null,512),[[i,q.value.additional_charge_amount,void 0,{number:!0}]])]),X.value&&!b(C)(X.value.code)?(h(),d(`td`,ut,[c(`input`,{type:`text`,readonly:``,value:b(S)(q.value.additional_charge_amount_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-gray-50 dark:bg-gray-600`},null,8,dt)])):u(``,!0),m[52]||=c(`td`,{colspan:`5`},null,-1)]),c(`tr`,ft,[m[53]||=c(`td`,{colspan:`7`},null,-1),m[54]||=c(`td`,{class:`font-bold text-lg`},`Total`,-1),c(`td`,null,[c(`input`,{type:`text`,readonly:``,value:b(S)(q.value.total),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-bold`},null,8,pt)]),X.value&&!b(C)(X.value.code)?(h(),d(`td`,mt,[c(`input`,{type:`text`,readonly:``,value:b(S)(q.value.total_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-blue-50 dark:bg-blue-900 font-bold`},null,8,ht)])):u(``,!0),m[55]||=c(`td`,{colspan:`5`},null,-1)]),c(`tr`,gt,[m[56]||=c(`td`,{colspan:`7`},null,-1),m[57]||=c(`td`,{class:`font-bold text-lg`},`Final Total`,-1),c(`td`,null,[c(`input`,{type:`text`,readonly:``,value:b(S)(q.value.final_total),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-green-50 dark:bg-green-900 font-bold`},null,8,_t)]),X.value&&!b(C)(X.value.code)?(h(),d(`td`,vt,[c(`input`,{type:`text`,readonly:``,value:b(S)(q.value.final_total_usd),class:`block w-full rounded-md border-0 py-1 px-1 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-green-50 dark:bg-green-900 font-bold`},null,8,yt)])):u(``,!0),K.value?(h(),d(`td`,bt,` Total Cost: $`+x(b(S)(Q())),1)):u(``,!0),K.value?u(``,!0):(h(),d(`td`,xt))])])]))]),c(`div`,St,[m[59]||=c(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Additional Information `,-1),c(`div`,null,[m[58]||=c(`label`,{for:`note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Notes `,-1),v(c(`textarea`,{id:`note`,"onUpdate:modelValue":m[12]||=e=>q.value.note=e,rows:`3`,placeholder:`Optional notes about this purchase return...`,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700 resize-vertical`},null,512),[[i,q.value.note]])])]),c(`div`,Ct,[c(`button`,{type:`button`,onClick:Z,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`,disabled:G.value},` Cancel `,8,wt),c(`div`,Tt,[c(`button`,{type:`submit`,disabled:G.value,class:`inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[G.value?(h(),l(b(t),{key:0,class:`w-4 h-4 mr-2 animate-spin`})):(h(),l(b(ce),{key:1,class:`w-4 h-4 mr-2`})),f(` `+x(G.value?`Updating...`:`Update Purchase Return`),1)],8,Et)])])],32)])]))])]))}}),z=R;export{z as default};