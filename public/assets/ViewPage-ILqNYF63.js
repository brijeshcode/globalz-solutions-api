import{C as e,I as t,N as ee,a$ as te,a3 as ne,aC as n,aD as re,aR as r,aS as i,aT as a,aU as o,aW as s,aX as c,aY as ie,ac as l,ak as ae,ay as oe,b1 as u,b8 as d,bb as f,bc as p,bf as m,o as se}from"./index-D3uPKL_7.js";import{b as ce}from"./useAuth-DVbJ9eMN.js";import"./GlobalConfig-wPgXFcZ5.js";import{c as h}from"./common-CZbH6H1Z.js";import"./tableUtils-dXs1kjAL.js";import"./Modal-Cape7EXm.js";import"./accountsStore-By1ihK7E.js";import{b as g,d as _}from"./currencyUtil-BN7TmPM2.js";import{b as v}from"./DataItems-xHgcV0ga.js";import{b as le}from"./customerPaymentOrdersStore-DeC5u1dy.js";import"./usersStore-DaoBMoxG.js";import{b as y}from"./CustomerPaymentApprove-1CfuNweg.js";const b={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},x={class:``},S={class:`mb-8`},C={class:`flex items-center justify-between`},w={class:`flex items-center space-x-4`},T={class:`text-sm text-gray-600 dark:text-gray-400`},E={key:0,class:`flex space-x-3`},D={key:0,class:`flex items-center justify-center py-12`},O={key:1,class:`space-y-6`},k={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-6`},A={class:`flex items-center justify-between`},j={class:`flex items-center space-x-4`},M={class:`flex-shrink-0`},N={class:`h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},P={class:`text-lg font-medium text-gray-900 dark:text-white`},F={class:`text-sm text-gray-500 dark:text-gray-400`},I={class:`text-right`},L={class:`mb-2`},R={key:0,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`},z={key:1,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`},B={class:`text-2xl font-bold text-gray-900 dark:text-white`},V={key:0,class:`text-sm text-gray-500 dark:text-gray-400`},H={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},U={class:`px-6 py-4`},W={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},ue={class:`text-sm text-gray-900 dark:text-white`},de={key:0,class:`text-gray-500 dark:text-gray-400`},fe={class:`text-sm text-gray-900 dark:text-white`},pe={key:0,class:`text-gray-500 dark:text-gray-400`},me={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},he={class:`px-6 py-4`},ge={class:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6`},_e={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ve={class:`px-6 py-4`},ye={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},be={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},xe={class:`px-6 py-4`},Se={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ce={class:`text-sm text-gray-900 dark:text-white`},we={class:`text-xs text-gray-500 dark:text-gray-400`},Te={class:`text-sm text-gray-900 dark:text-white`},Ee={class:`text-xs text-gray-500 dark:text-gray-400`},De={key:2,class:`text-center py-12`};var G=ie({__name:`ViewPage`,setup(ie){let G=re(),K=n(),q=oe(),Oe=le(),{isAdmin:J,isSuperAdmin:ke}=ce(),Y=f(!1),X=f(null),Z=f(!1),Q=()=>{G.push({name:`customer.payment-orders.index`})},Ae=()=>{X.value&&G.push({name:`customer.payment-orders.edit`,params:{id:X.value.id}})},je=()=>{X.value&&(Z.value=!0)},Me=async e=>{q.success(`Payment order approved successfully`),await $(),Z.value=!1},$=async()=>{let e=Number(K.params.id);if(!e){q.error(`Invalid payment order ID`),Q();return}Y.value=!0;try{let t=await Oe.fetchPaymentOrder(e);X.value=t}catch{q.error(`Failed to load payment order`),X.value=null}finally{Y.value=!1}};return te(()=>{$()}),(te,n)=>(u(),o(`div`,b,[r(`div`,x,[r(`div`,S,[r(`div`,C,[r(`div`,w,[r(`button`,{onClick:Q,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[c(p(ae),{class:`w-5 h-5`})]),r(`div`,null,[n[1]||=r(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Payment Order Details `,-1),r(`p`,T,m(X.value?`${X.value.prefix}-${X.value.code}`:`Loading...`),1)])]),X.value&&!Y.value?(u(),o(`div`,E,[!X.value.approved_at&&(p(J)||p(ke))?(u(),o(`button`,{key:0,onClick:je,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[c(p(l),{class:`h-4 w-4 mr-2`}),n[2]||=s(` Approve Payment `,-1)])):a(``,!0),X.value.approved_at?a(``,!0):(u(),o(`button`,{key:1,onClick:Ae,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[c(p(t),{class:`h-4 w-4 mr-2`}),n[3]||=s(` Edit Order `,-1)]))])):a(``,!0)])]),Y.value?(u(),o(`div`,D,[c(p(ee),{class:`h-8 w-8 animate-spin text-blue-600`}),n[4]||=r(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment order...`,-1)])):X.value?(u(),o(`div`,O,[r(`div`,k,[r(`div`,A,[r(`div`,j,[r(`div`,M,[r(`div`,N,[c(p(e),{class:`h-8 w-8 text-blue-600 dark:text-blue-400`})])]),r(`div`,null,[r(`h3`,P,m(X.value.prefix)+`-`+m(X.value.code),1),r(`p`,F,` Created `+m(p(h)(X.value.created_at)),1)])]),r(`div`,I,[r(`div`,L,[X.value.approved_at?(u(),o(`span`,R,[c(p(l),{class:`h-4 w-4 mr-1`}),n[5]||=s(` Approved `,-1)])):(u(),o(`span`,z,[c(p(ne),{class:`h-4 w-4 mr-1`}),n[6]||=s(` Pending Approval `,-1)]))]),r(`div`,B,m(p(g)(X.value.amount_usd,!0)),1),p(_)(X.value.currency.code)?a(``,!0):(u(),o(`div`,V,` Local: `+m(p(g)(X.value.amount,!0,X.value.currency)),1))])])]),r(`div`,H,[n[7]||=r(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Basic Information`)],-1),r(`div`,U,[r(`div`,W,[c(v,{label:`Payment Date`,value:p(h)(X.value.date)},null,8,[`value`]),c(v,{label:`Prefix`,value:X.value.prefix},null,8,[`value`]),c(v,{label:`RCT Book Number`,value:X.value.rtc_book_number},null,8,[`value`]),c(v,{label:`Customer`},{default:d(()=>[r(`div`,ue,[s(m(X.value.customer?.name||`-`)+` `,1),X.value.customer?.code?(u(),o(`span`,de,` (`+m(X.value.customer.code)+`) `,1)):a(``,!0)])]),_:1}),c(v,{label:`Currency`},{default:d(()=>[r(`div`,fe,[s(m(X.value.currency?.name||`-`)+` `,1),X.value.currency?.code?(u(),o(`span`,pe,` (`+m(X.value.currency.code)+`) `,1)):a(``,!0)])]),_:1})])])]),p(_)(X.value.currency.code)?a(``,!0):(u(),o(`div`,me,[n[8]||=r(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Financial Details`)],-1),r(`div`,he,[r(`div`,ge,[p(_)(X.value.currency.code)?a(``,!0):(u(),i(v,{key:0,label:`Currency Rate`,value:X.value.currency_rate*1},null,8,[`value`])),c(v,{label:`Amount`,value:p(g)(X.value.amount,!0,X.value.currency)},null,8,[`value`]),p(_)(X.value.currency.code)?a(``,!0):(u(),i(v,{key:1,label:`Amount USD`,value:p(g)(X.value.amount_usd,!0)},null,8,[`value`]))])])])),X.value.note?(u(),o(`div`,_e,[n[9]||=r(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Notes`)],-1),r(`div`,ve,[c(v,{label:`Note`},{default:d(()=>[r(`div`,ye,m(X.value.note),1)]),_:1})])])):a(``,!0),r(`div`,be,[n[10]||=r(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Audit Information`)],-1),r(`div`,xe,[r(`div`,Se,[c(v,{label:`Created By`},{default:d(()=>[r(`div`,Ce,m(X.value.created_by_user?.name||`-`),1),r(`div`,we,m(p(h)(X.value.created_at)),1)]),_:1}),c(v,{label:`Last Updated By`},{default:d(()=>[r(`div`,Te,m(X.value.updated_by_user?.name||`-`),1),r(`div`,Ee,m(p(h)(X.value.updated_at)),1)]),_:1})])])])])):Y.value?a(``,!0):(u(),o(`div`,De,[c(p(se),{class:`mx-auto h-12 w-12 text-red-400`}),n[11]||=r(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment order not found`,-1),n[12]||=r(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The payment order you're looking for doesn't exist or has been deleted. `,-1),r(`div`,{class:`mt-6`},[r(`button`,{onClick:Q,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payment Orders `)])]))]),c(y,{show:Z.value,"onUpdate:show":n[0]||=e=>Z.value=e,"payment-order":X.value,onApproved:Me},null,8,[`show`,`payment-order`])]))}}),K=G;export{K as default};