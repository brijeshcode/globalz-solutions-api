import{C as e,E as t,J as n,V as r,a$ as i,a3 as a,a4 as o,a5 as s,a6 as c,aC as l,aD as u,aG as d,aH as f,aJ as p,aK as m,aL as h,aM as g,aN as _,aP as v,aQ as y,aR as b,aT as x,aV as S,aW as C,aY as w,ad as T,am as E,an as D,ao as O,ap as k,aq as A,ar as ee,av as j,aw as M,ax as N,b0 as P,b1 as F,b3 as I,b4 as L,b5 as R,b7 as z,d as B,h as V,p as te,t as ne,w as H}from"./index-vBZhi31r.js";import{b as re}from"./useAuth-DskgwgXQ.js";import"./GlobalConfig-Dep5CV3r.js";import{b as U}from"./tableUtils-BFc6-TYF.js";import{b as ie}from"./PageHeader-FCIC-Y9H.js";import{b as ae}from"./ConfirmationModal-CXC2hr5E.js";import{c as oe,d as W,f as G}from"./common-C6Lq_4yD.js";import"./StatCard-DiOVkzOE.js";import{c as K,d as q,e as J}from"./currencyUtil-CPvVg_gg.js";import{b as Y}from"./Modal-CbehiijZ.js";var X=class{baseUrl=`/accounts/transfers`;async getAccountTransfers(e){try{let t=this.buildQueryParams(e),n=await D(`${this.baseUrl}?${t}`,{loadingMessage:`Loading account transfers...`,showLoading:!0});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching account transfers:`,e),e}}async getAccountTransfer(e){try{let t=await D(`${this.baseUrl}/${e}`,{loadingMessage:`Loading account transfer...`});return t.data.data}catch(e){throw console.error(`Error fetching account transfer:`,e),e}}async createAccountTransfer(e){try{let t=await k(this.baseUrl,e,{loadingMessage:`Creating account transfer...`,showSuccessNotification:!0,successMessage:`Account transfer created successfully`});return t.data.data}catch(e){throw console.error(`Error creating account transfer:`,e),e}}async updateAccountTransfer(e,t){try{let n=await A(`${this.baseUrl}/${e}`,t,{loadingMessage:`Updating account transfer...`,showSuccessNotification:!0,successMessage:`Account transfer updated successfully`});return n.data.data}catch(e){throw console.error(`Error updating account transfer:`,e),e}}async deleteAccountTransfer(e){try{await E(`${this.baseUrl}/${e}`,{loadingMessage:`Deleting account transfer...`,showSuccessNotification:!0,successMessage:`Account transfer deleted successfully`})}catch(e){throw console.error(`Error deleting account transfer:`,e),e}}async getTrashedAccountTransfers(e){try{let t=this.buildQueryParams(e),n=await D(`${this.baseUrl}/trashed?${t}`,{loadingMessage:`Loading trashed account transfers...`});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching trashed account transfers:`,e),e}}async restoreAccountTransfer(e){try{let t=await O(`${this.baseUrl}/${e}/restore`,{},{loadingMessage:`Restoring account transfer...`,showSuccessNotification:!0,successMessage:`Account transfer restored successfully`});return t.data.data}catch(e){throw console.error(`Error restoring account transfer:`,e),e}}async forceDeleteAccountTransfer(e){try{await E(`${this.baseUrl}/${e}/force-delete`,{loadingMessage:`Permanently deleting account transfer...`,showSuccessNotification:!0,successMessage:`Account transfer permanently deleted`})}catch(e){throw console.error(`Error permanently deleting account transfer:`,e),e}}async getAccountTransferStats(e){try{let t=this.buildQueryParams(e),n=t?`${this.baseUrl}/stats?${t}`:`${this.baseUrl}/stats`,r=await D(n,{loadingMessage:`Loading account transfer statistics...`});return r.data.data}catch(e){throw console.error(`Error fetching account transfer statistics:`,e),e}}async searchAccountTransfers(e){try{let t=await D(`${this.baseUrl}/search?query=${encodeURIComponent(e)}`,{showLoading:!1});return t.data.data}catch(e){throw console.error(`Error searching account transfers:`,e),e}}async getAccountTransfersByFromAccount(e,t){try{let n=this.buildQueryParams(t),r=await D(`${this.baseUrl}/from-account/${e}?${n}`,{loadingMessage:`Loading transfers from account...`,showLoading:!0});return{data:r.data.data,pagination:r.data.pagination}}catch(e){throw console.error(`Error fetching transfers by from account:`,e),e}}async getAccountTransfersByToAccount(e,t){try{let n=this.buildQueryParams(t),r=await D(`${this.baseUrl}/to-account/${e}?${n}`,{loadingMessage:`Loading transfers to account...`,showLoading:!0});return{data:r.data.data,pagination:r.data.pagination}}catch(e){throw console.error(`Error fetching transfers by to account:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const Z=new X,se=N(`accountTransfers`,()=>{let e=M(),t=j(),n=I([]),r=I(null),a=I([]),o=I(null),s=I(U()),c=I(!1),l=I({}),u=p(()=>e=>n.value.filter(t=>t.from_account_id===e)),d=p(()=>e=>n.value.filter(t=>t.to_account_id===e)),f=p(()=>e=>n.value.filter(t=>t.from_currency_id===e||t.to_currency_id===e)),m=p(()=>(e,t)=>n.value.filter(n=>{let r=new Date(n.date);return r>=new Date(e)&&r<=new Date(t)})),h=p(()=>n.value.map(e=>({value:e.id,label:`${e.code} - ${e.date}`,disabled:!1}))),g=p(()=>n.value.reduce((e,t)=>e+(t.sent_amount||0),0)),_=p(()=>n.value.reduce((e,t)=>e+(t.received_amount||0),0)),v=p(()=>{let e={};return Object.entries(t.query).forEach(([t,n])=>{n&&typeof n==`string`&&(e[t]=n)}),e}),y=async e=>{try{c.value=!0,e&&(l.value={...l.value,...e});let t=await Z.getAccountTransfers(l.value);n.value=t.data,s.value=t.pagination}catch(e){throw console.error(`Error fetching account transfers:`,e),e}finally{c.value=!1}},b=async e=>{try{let t=await Z.getAccountTransfer(e);return r.value=t,t}catch(e){throw console.error(`Error fetching account transfer:`,e),e}},x=async e=>{try{let t=await Z.createAccountTransfer(e);return n.value.unshift(t),s.value.total+=1,t}catch(e){throw console.error(`Error creating account transfer:`,e),e}},S=async(e,t)=>{try{let i=await Z.updateAccountTransfer(e,t),a=n.value.findIndex(t=>t.id===e);return a!==-1&&(n.value[a]=i),r.value?.id===e&&(r.value=i),i}catch(e){throw console.error(`Error updating account transfer:`,e),e}},C=async e=>{try{await Z.deleteAccountTransfer(e);let t=n.value.findIndex(t=>t.id===e);t!==-1&&n.value.splice(t,1),--s.value.total,r.value?.id===e&&(r.value=null)}catch(e){throw console.error(`Error deleting account transfer:`,e),e}},w=async e=>{try{c.value=!0;let t=e||{},n=await Z.getTrashedAccountTransfers(t);a.value=n.data}catch(e){throw console.error(`Error fetching trashed account transfers:`,e),e}finally{c.value=!1}},T=async e=>{try{let t=await Z.restoreAccountTransfer(e),r=a.value.findIndex(t=>t.id===e);return r!==-1&&a.value.splice(r,1),n.value.unshift(t),s.value.total+=1,t}catch(e){throw console.error(`Error restoring account transfer:`,e),e}},E=async e=>{try{await Z.forceDeleteAccountTransfer(e);let t=a.value.findIndex(t=>t.id===e);t!==-1&&a.value.splice(t,1)}catch(e){throw console.error(`Error permanently deleting account transfer:`,e),e}},D=async e=>{try{let t=await Z.getAccountTransferStats(e);return o.value=t,t}catch(e){throw console.error(`Error fetching account transfer statistics:`,e),e}},O=async(e,t)=>{try{c.value=!0;let r=await Z.getAccountTransfersByFromAccount(e,t);return n.value=r.data,s.value=r.pagination,r}catch(e){throw console.error(`Error fetching transfers by from account:`,e),e}finally{c.value=!1}},k=async(e,t)=>{try{c.value=!0;let r=await Z.getAccountTransfersByToAccount(e,t);return n.value=r.data,s.value=r.pagination,r}catch(e){throw console.error(`Error fetching transfers by to account:`,e),e}finally{c.value=!1}},A=async e=>{try{return await Z.searchAccountTransfers(e)}catch(e){throw console.error(`Error searching account transfers:`,e),e}},ee=e=>{l.value={...l.value,...e}},N=()=>{l.value={}},P=()=>{r.value=null},F=e=>{let t={...l.value,search:e,page:1};l.value=t,V(t),H(t,!1)},L=(e,t)=>{let n={...l.value,sort_by:e,sort_direction:t,page:1};l.value=n,V(n),H(n,!1)},R=e=>{let t={...l.value,page:e};l.value=t,V(t),H(t,!1)},z=e=>{let t={...l.value,per_page:e,page:1};l.value=t,V(t),H(t,!1)},B=(e,t)=>{let n={...l.value,date_from:e,date_to:t,page:1};l.value=n,V(n),H(n,!1)},V=(n,r=!1)=>{let i={...t.query};Object.entries(n).forEach(([e,t])=>{t!=null&&t!==``?i[e]=String(t):delete i[e]});let a=r?`replace`:`push`;e[a]({query:i})},te=()=>{e.replace({query:{}})},ne=()=>{l.value={...v.value}},H=async(e,t=!0)=>{t&&e&&V(e),await y(e)},re=()=>{n.value=[],r.value=null,a.value=[],o.value=null,s.value=U(),l.value={},c.value=!1};return i(()=>t.query,async()=>{if(ne(),t.name&&t.name.toString().includes(`transfer`))try{await y(l.value)}catch(e){console.error(`Error fetching account transfers on URL change:`,e)}},{immediate:!1,deep:!0}),{accountTransfers:n,currentAccountTransfer:r,trashedAccountTransfers:a,accountTransferStats:o,pagination:s,loading:c,filters:l,transfersByFromAccount:u,transfersByToAccount:d,transfersByCurrency:f,transfersByDateRange:m,accountTransfersForSelect:h,totalSentAmount:g,totalReceivedAmount:_,urlParams:v,fetchAccountTransfers:y,fetchAccountTransfer:b,createAccountTransfer:x,updateAccountTransfer:S,deleteAccountTransfer:C,fetchTrashedAccountTransfers:w,restoreAccountTransfer:T,forceDeleteAccountTransfer:E,fetchAccountTransferStats:D,fetchTransfersByFromAccount:O,fetchTransfersByToAccount:k,searchAccountTransfers:A,updateFilters:ee,clearFilters:N,clearCurrentAccountTransfer:P,setSearch:F,setSort:L,setPage:R,setPerPage:z,setDateRange:B,updateUrlParams:V,clearUrlParams:te,syncFiltersWithUrl:ne,fetchData:H,reset:re}}),ce={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Q={class:`grid grid-cols-1 gap-4`},le=[`value`],ue={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},de={class:`grid grid-cols-1 gap-4`},fe=[`value`],pe={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},me={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},he={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},ge={class:`flex justify-end space-x-3`},_e=[`disabled`],ve=[`disabled`];var $=b({__name:`CreateModel`,props:{modelValue:{type:Boolean}},emits:[`update:modelValue`,`created`],setup(e,{emit:t}){let r=e,a=t,o=ee(),s=se(),c=B(),b=I(!1),x=p(()=>c.accounts),T=p(()=>c.currencies),E=p(()=>O.value.from_account_id?x.value.filter(e=>e.id!==O.value.from_account_id):x.value),D=p({get:()=>r.modelValue,set:e=>a(`update:modelValue`,e)}),O=I({date:new Date().toISOString().split(`T`)[0],from_account_id:0,to_account_id:0,from_currency_id:0,to_currency_id:0,sent_amount:0,received_amount:0,currency_rate:1,note:``}),k=p(()=>{if(!O.value.from_currency_id)return`Select from account first`;let e=T.value.find(e=>e.id===O.value.from_currency_id);return e?`${e.name} (${e.code})`:`-`}),A=p(()=>{if(!O.value.to_currency_id)return`Select to account first`;let e=T.value.find(e=>e.id===O.value.to_currency_id);return e?`${e.name} (${e.code})`:`-`}),j=()=>{let e=x.value.find(e=>e.id===O.value.from_account_id);O.value.from_currency_id=e.currency_id,O.value.to_account_id=0,O.value.to_currency_id=0,O.value.sent_amount=0,O.value.received_amount=0,O.value.currency_rate=1},M=()=>{let e=x.value.find(e=>e.id===O.value.to_account_id);if(O.value.to_currency_id=e.currency_id,!O.value.from_currency_id||!O.value.to_currency_id){O.value.currency_rate=1,N();return}let t=T.value.find(e=>e.id===O.value.from_currency_id),n=T.value.find(e=>e.id===O.value.to_currency_id);if(!t||!n){O.value.currency_rate=1,N();return}if(t.id===n.id){O.value.currency_rate=1,N();return}let r=t.active_rate?.rate||1,i=n.active_rate?.rate||1,a=t.calculation_type,o=n.calculation_type,s=q(t.code),c=q(n.code),l=1;if(s&&c)l=1;else if(s||c)l=s?i:r;else{let e=J(1,r,a);l=K(e,i,o)}O.value.currency_rate=l,N()},N=()=>{if(!O.value.sent_amount){O.value.received_amount=0;return}let e=T.value.find(e=>e.id===O.value.from_currency_id),t=T.value.find(e=>e.id===O.value.to_currency_id);if(!e||!t){O.value.received_amount=0;return}if(e.id===t.id){O.value.received_amount=O.value.sent_amount;return}let n=e.active_rate?.rate||1,r=t.active_rate?.rate||1,i=e.calculation_type,a=t.calculation_type,o=q(e.code),s=q(t.code),c=0;if(o&&s)c=O.value.sent_amount;else if(o)c=K(O.value.sent_amount,r,a);else if(s)console.log(i),c=J(O.value.sent_amount,n,i);else{let e=J(O.value.sent_amount,n,i);c=K(e,r,a)}O.value.received_amount=c},R=async()=>{try{b.value=!0,await s.createAccountTransfer(O.value),o.success(`Transfer created successfully`),a(`created`),V()}catch{o.error(`Failed to create transfer`)}finally{b.value=!1}},V=()=>{D.value=!1,te()},te=()=>{O.value={date:new Date().toISOString().split(`T`)[0],from_account_id:0,to_account_id:0,from_currency_id:0,to_currency_id:0,sent_amount:0,received_amount:0,currency_rate:1,note:``}};return i(()=>r.modelValue,e=>{e&&te()}),(e,t)=>{let r=w(`Input`);return S(),h(Y,{modelValue:D.value,"onUpdate:modelValue":t[6]||=e=>D.value=e,title:`Create Transfer`,size:`xl`,"close-on-backdrop":!1,"close-on-escape":!1,loading:b.value},{footer:P(()=>[m(`div`,ge,[m(`button`,{type:`button`,onClick:V,disabled:b.value,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Cancel `,8,_e),m(`button`,{type:`submit`,onClick:R,disabled:b.value,class:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[b.value?(S(),h(L(n),{key:0,class:`inline-block h-4 w-4 animate-spin mr-2`})):g(``,!0),t[16]||=v(` Create Transfer `,-1)],8,ve)])]),default:P(()=>[m(`form`,{onSubmit:d(R,[`prevent`]),class:`space-y-4`},[m(`div`,null,[y(r,{id:`date`,modelValue:O.value.date,"onUpdate:modelValue":t[0]||=e=>O.value.date=e,type:`date`,required:``,label:`Date`},null,8,[`modelValue`])]),m(`div`,ce,[m(`div`,Q,[m(`div`,null,[t[8]||=m(`label`,{for:`from_account_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(` From Account `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`select`,{id:`from_account_id`,"onUpdate:modelValue":t[1]||=e=>O.value.from_account_id=e,required:``,onChange:j,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[7]||=m(`option`,{value:``},`Select Account`,-1),(S(!0),_(f,null,C(x.value,e=>(S(),_(`option`,{key:e.id,value:e.id},z(e.name),9,le))),128))],544),[[l,O.value.from_account_id]])]),m(`div`,null,[t[9]||=m(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` From Currency `,-1),m(`span`,ue,z(k.value),1)]),m(`div`,null,[y(r,{id:`sent_amount`,modelValue:O.value.sent_amount,"onUpdate:modelValue":t[2]||=e=>O.value.sent_amount=e,type:`number`,step:`0.01`,min:`0`,required:``,label:`Transfer Amount`,onInput:N},null,8,[`modelValue`])])]),m(`div`,de,[m(`div`,null,[t[11]||=m(`label`,{for:`to_account_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(` To Account `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`select`,{id:`to_account_id`,"onUpdate:modelValue":t[3]||=e=>O.value.to_account_id=e,required:``,onChange:M,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[10]||=m(`option`,{value:``},`Select Account`,-1),(S(!0),_(f,null,C(E.value,e=>(S(),_(`option`,{key:e.id,value:e.id},z(e.name),9,fe))),128))],544),[[l,O.value.to_account_id]])]),m(`div`,null,[t[12]||=m(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Received Currency `,-1),m(`span`,pe,z(A.value),1)]),m(`div`,me,[m(`div`,null,[t[13]||=m(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Received Amount `,-1),m(`span`,he,z(O.value.received_amount?O.value.received_amount.toFixed(2):`0.00`),1)]),m(`div`,null,[t[14]||=m(`label`,{for:`currency_rate`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(`Exchange Rate `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`input`,{id:`currency_rate`,"onUpdate:modelValue":t[4]||=e=>O.value.currency_rate=e,type:`number`,step:`0.0001`,min:`0`,required:``,onInput:N,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,544),[[u,O.value.currency_rate,void 0,{number:!0}]])])])])]),m(`div`,null,[t[15]||=m(`label`,{for:`note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Note `,-1),F(m(`textarea`,{id:`note`,"onUpdate:modelValue":t[5]||=e=>O.value.note=e,rows:`3`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,placeholder:`Add any notes about this transfer...`},null,512),[[u,O.value.note]])])],32)]),_:1},8,[`modelValue`,`loading`])}}}),ye=$;const be={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},xe={class:`grid grid-cols-1 gap-4`},Se=[`value`],Ce={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},we={class:`grid grid-cols-1 gap-4`},Te=[`value`],Ee={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},De={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Oe={class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white sm:text-sm cursor-not-allowed`},ke={class:`flex justify-end space-x-3`},Ae=[`disabled`],je=[`disabled`];var Me=b({__name:`EditModel`,props:{modelValue:{type:Boolean},transfer:{}},emits:[`update:modelValue`,`updated`],setup(e,{emit:t}){let r=e,a=t,o=ee(),s=se(),c=B(),y=I(!1),b=p(()=>c.accounts),x=p(()=>c.currencies),w=p(()=>E.value.from_account_id?b.value.filter(e=>e.id!==E.value.from_account_id):b.value),T=p({get:()=>r.modelValue,set:e=>a(`update:modelValue`,e)}),E=I({date:``,from_account_id:0,to_account_id:0,from_currency_id:0,to_currency_id:0,sent_amount:0,received_amount:0,currency_rate:1,note:``}),D=p(()=>{if(!E.value.from_currency_id)return`Select from account first`;let e=x.value.find(e=>e.id===E.value.from_currency_id);return e?`${e.name} (${e.code})`:`-`}),O=p(()=>{if(!E.value.to_currency_id)return`Select to account first`;let e=x.value.find(e=>e.id===E.value.to_currency_id);return e?`${e.name} (${e.code})`:`-`}),k=()=>{let e=b.value.find(e=>e.id===E.value.from_account_id);e&&(E.value.from_currency_id=e.currency_id)},A=()=>{let e=b.value.find(e=>e.id===E.value.to_account_id);if(e){if(E.value.to_currency_id=e.currency_id,!E.value.from_currency_id||!E.value.to_currency_id){E.value.currency_rate=1,j();return}let t=x.value.find(e=>e.id===E.value.from_currency_id),n=x.value.find(e=>e.id===E.value.to_currency_id);if(!t||!n){E.value.currency_rate=1,j();return}if(t.id===n.id){E.value.currency_rate=1,j();return}let r=t.active_rate?.rate||1,i=n.active_rate?.rate||1,a=t.calculation_type,o=n.calculation_type,s=q(t.code),c=q(n.code),l=1;if(s&&c)l=1;else if(s||c)l=s?i:r;else{let e=J(1,r,a);l=K(e,i,o)}E.value.currency_rate=l,j()}},j=()=>{if(!E.value.sent_amount){E.value.received_amount=0;return}let e=x.value.find(e=>e.id===E.value.from_currency_id),t=x.value.find(e=>e.id===E.value.to_currency_id);if(!e||!t){E.value.received_amount=0;return}if(e.id===t.id){E.value.received_amount=E.value.sent_amount;return}let n=e.active_rate?.rate||1,r=t.active_rate?.rate||1,i=e.calculation_type,a=t.calculation_type,o=q(e.code),s=q(t.code),c=0;if(o&&s)c=E.value.sent_amount;else if(o)c=K(E.value.sent_amount,r,a);else if(s)c=J(E.value.sent_amount,n,i);else{let e=J(E.value.sent_amount,n,i);c=K(e,r,a)}E.value.received_amount=c},M=async()=>{if(r.transfer)try{y.value=!0,await s.updateAccountTransfer(r.transfer.id,E.value),o.success(`Transfer updated successfully`),a(`updated`),N()}catch{o.error(`Failed to update transfer`)}finally{y.value=!1}},N=()=>{T.value=!1},R=()=>{r.transfer&&(E.value={date:r.transfer.date.split(` `)[0],from_account_id:r.transfer.from_account_id,to_account_id:r.transfer.to_account_id,from_currency_id:r.transfer.from_currency_id,to_currency_id:r.transfer.to_currency_id,sent_amount:r.transfer.sent_amount,received_amount:r.transfer.received_amount,currency_rate:r.transfer.currency_rate,note:r.transfer.note||``})};return i(()=>r.modelValue,e=>{e&&r.transfer&&R()}),i(()=>r.transfer,e=>{e&&r.modelValue&&R()}),(e,t)=>(S(),h(Y,{modelValue:T.value,"onUpdate:modelValue":t[6]||=e=>T.value=e,title:`Edit Transfer`,size:`xl`,"close-on-backdrop":!1,"close-on-escape":!1,loading:y.value},{footer:P(()=>[m(`div`,ke,[m(`button`,{type:`button`,onClick:N,disabled:y.value,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Cancel `,8,Ae),m(`button`,{type:`submit`,onClick:M,disabled:y.value,class:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[y.value?(S(),h(L(n),{key:0,class:`inline-block h-4 w-4 animate-spin mr-2`})):g(``,!0),t[18]||=v(` Update Transfer `,-1)],8,je)])]),default:P(()=>[m(`form`,{onSubmit:d(M,[`prevent`]),class:`space-y-4`},[m(`div`,null,[t[7]||=m(`label`,{for:`date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(` Date `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`input`,{id:`date`,"onUpdate:modelValue":t[0]||=e=>E.value.date=e,type:`date`,required:``,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,512),[[u,E.value.date]])]),m(`div`,be,[m(`div`,xe,[m(`div`,null,[t[9]||=m(`label`,{for:`from_account_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(` From Account `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`select`,{id:`from_account_id`,"onUpdate:modelValue":t[1]||=e=>E.value.from_account_id=e,required:``,onChange:k,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[8]||=m(`option`,{value:``},`Select Account`,-1),(S(!0),_(f,null,C(b.value,e=>(S(),_(`option`,{key:e.id,value:e.id},z(e.name),9,Se))),128))],544),[[l,E.value.from_account_id]])]),m(`div`,null,[t[10]||=m(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` From Currency `,-1),m(`span`,Ce,z(D.value),1)]),m(`div`,null,[t[11]||=m(`label`,{for:`sent_amount`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(` Transfer Amount `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`input`,{id:`sent_amount`,"onUpdate:modelValue":t[2]||=e=>E.value.sent_amount=e,type:`number`,step:`0.01`,min:`0`,required:``,onInput:j,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,544),[[u,E.value.sent_amount,void 0,{number:!0}]])])]),m(`div`,we,[m(`div`,null,[t[13]||=m(`label`,{for:`to_account_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(` To Account `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`select`,{id:`to_account_id`,"onUpdate:modelValue":t[3]||=e=>E.value.to_account_id=e,required:``,onChange:A,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[t[12]||=m(`option`,{value:``},`Select Account`,-1),(S(!0),_(f,null,C(w.value,e=>(S(),_(`option`,{key:e.id,value:e.id},z(e.name),9,Te))),128))],544),[[l,E.value.to_account_id]])]),m(`div`,null,[t[14]||=m(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Received Currency `,-1),m(`span`,Ee,z(O.value),1)]),m(`div`,De,[m(`div`,null,[t[15]||=m(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Received Amount `,-1),m(`span`,Oe,z(E.value.received_amount?Number(E.value.received_amount).toFixed(2):`0.00`),1)]),m(`div`,null,[t[16]||=m(`label`,{for:`currency_rate`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},[v(` Exchange Rate `),m(`span`,{class:`text-red-500`},`*`)],-1),F(m(`input`,{id:`currency_rate`,"onUpdate:modelValue":t[4]||=e=>E.value.currency_rate=e,type:`number`,step:`0.0001`,min:`0`,required:``,onInput:j,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},null,544),[[u,E.value.currency_rate,void 0,{number:!0}]])])])])]),m(`div`,null,[t[17]||=m(`label`,{for:`note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Note `,-1),F(m(`textarea`,{id:`note`,"onUpdate:modelValue":t[5]||=e=>E.value.note=e,rows:`3`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,placeholder:`Add any notes about this transfer...`},null,512),[[u,E.value.note]])])],32)]),_:1},8,[`modelValue`,`loading`]))}}),Ne=Me;const Pe={key:0,class:`space-y-3`},Fe={class:`grid grid-cols-1 md:grid-cols-2 gap-3`},Ie={class:`border border-red-200 dark:border-red-800 rounded-lg p-3 bg-red-50/30 dark:bg-red-900/10`},Le={class:`text-sm font-medium text-gray-900 dark:text-white`},Re={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},ze={class:`mt-2 pt-2 border-t border-red-200 dark:border-red-800`},Be={class:`text-lg font-bold text-red-600 dark:text-red-400`},Ve={class:`border border-green-200 dark:border-green-800 rounded-lg p-3 bg-green-50/30 dark:bg-green-900/10`},He={class:`text-sm font-medium text-gray-900 dark:text-white`},Ue={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},We={class:`mt-2 pt-2 border-t border-green-200 dark:border-green-800`},Ge={class:`text-lg font-bold text-green-600 dark:text-green-400`},Ke={class:`bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 text-center`},qe={class:`text-base font-semibold text-blue-900 dark:text-blue-100`},Je={key:0,class:`bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3`},Ye={class:`text-sm text-gray-900 dark:text-white whitespace-pre-wrap`},Xe={class:`grid grid-cols-1 md:grid-cols-2 gap-2`},Ze={class:`bg-gradient-to-r from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-800/10 rounded-lg p-2.5 border border-blue-200 dark:border-blue-800`},Qe={class:`flex items-center gap-2`},$e={class:`flex-1 min-w-0`},et={class:`text-xs text-blue-700 dark:text-blue-300 font-semibold truncate`},tt={class:`text-xs text-blue-600 dark:text-blue-400`},nt={key:0,class:`bg-gradient-to-r from-purple-50 to-purple-100/50 dark:from-purple-900/20 dark:to-purple-800/10 rounded-lg p-2.5 border border-purple-200 dark:border-purple-800`},rt={class:`flex items-center gap-2`},it={class:`flex-1 min-w-0`},at={class:`text-xs text-purple-700 dark:text-purple-300 font-semibold truncate`},ot={class:`text-xs text-purple-600 dark:text-purple-400`};var st=b({__name:`ViewModel`,props:{modelValue:{type:Boolean},transfer:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=p({get:()=>n.modelValue,set:e=>r(`update:modelValue`,e)}),a=p(()=>n.transfer?`Transfer ${n.transfer.prefix}${n.transfer.code} - ${W(n.transfer.date)}`:`Transfer Details`);return(e,t)=>(S(),h(Y,{modelValue:i.value,"onUpdate:modelValue":t[0]||=e=>i.value=e,title:a.value,size:`lg`},{default:P(()=>[e.transfer?(S(),_(`div`,Pe,[m(`div`,Fe,[m(`div`,Ie,[t[2]||=m(`p`,{class:`text-xs font-semibold text-red-600 dark:text-red-400 mb-2`},`FROM ACCOUNT`,-1),m(`p`,Le,z(e.transfer.from_account?.name||`-`),1),m(`p`,Re,z(e.transfer.from_currency?.name)+` (`+z(e.transfer.from_currency?.code)+`)`,1),m(`div`,ze,[t[1]||=m(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Sent Amount`,-1),m(`p`,Be,z(L(G)(e.transfer.sent_amount))+` `+z(e.transfer.from_currency?.code),1)])]),m(`div`,Ve,[t[4]||=m(`p`,{class:`text-xs font-semibold text-green-600 dark:text-green-400 mb-2`},`TO ACCOUNT`,-1),m(`p`,He,z(e.transfer.to_account?.name||`-`),1),m(`p`,Ue,z(e.transfer.to_currency?.name)+` (`+z(e.transfer.to_currency?.code)+`)`,1),m(`div`,We,[t[3]||=m(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Received Amount`,-1),m(`p`,Ge,z(L(G)(e.transfer.received_amount))+` `+z(e.transfer.to_currency?.code),1)])])]),m(`div`,Ke,[t[5]||=m(`p`,{class:`text-xs text-gray-500 dark:text-gray-400 mb-1`},`Exchange Rate`,-1),m(`p`,qe,` 1 `+z(e.transfer.from_currency?.code)+` = `+z(L(G)(e.transfer.currency_rate))+` `+z(e.transfer.to_currency?.code),1)]),e.transfer.note?(S(),_(`div`,Je,[t[6]||=m(`p`,{class:`text-xs text-gray-500 dark:text-gray-400 mb-1`},`Note`,-1),m(`p`,Ye,z(e.transfer.note),1)])):g(``,!0),m(`div`,Xe,[m(`div`,Ze,[m(`div`,Qe,[t[8]||=m(`div`,{class:`flex-shrink-0 w-7 h-7 bg-blue-500 dark:bg-blue-600 rounded-full flex items-center justify-center`},[m(`svg`,{class:`w-4 h-4 text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v16m8-8H4`})])],-1),m(`div`,$e,[t[7]||=m(`p`,{class:`text-xs font-medium text-blue-900 dark:text-blue-100`},`Created by`,-1),m(`p`,et,z(e.transfer.created_by?.name||`-`),1),m(`p`,tt,z(L(W)(e.transfer.created_at)),1)])])]),e.transfer.updated_by?(S(),_(`div`,nt,[m(`div`,rt,[t[10]||=m(`div`,{class:`flex-shrink-0 w-7 h-7 bg-purple-500 dark:bg-purple-600 rounded-full flex items-center justify-center`},[m(`svg`,{class:`w-4 h-4 text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[m(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15`})])],-1),m(`div`,it,[t[9]||=m(`p`,{class:`text-xs font-medium text-purple-900 dark:text-purple-100`},`Last updated by`,-1),m(`p`,at,z(e.transfer.updated_by?.name||`-`),1),m(`p`,ot,z(L(W)(e.transfer.updated_at)),1)])])])):g(``,!0)])])):g(``,!0)]),_:1},8,[`modelValue`,`title`]))}}),ct=st;const lt={class:`space-y-6`},ut={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},dt={class:`grid grid-cols-1 md:grid-cols-8 gap-4`},ft={class:`md:col-span-2`},pt={class:`relative`},mt=[`value`],ht=[`value`],gt={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},_t={key:0,class:`p-8 text-center`},vt={key:1,class:`p-8 text-center`},yt={class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},bt={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},xt={key:0,class:`mt-6`},St={key:2,class:`overflow-x-auto`},Ct={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},wt={class:`bg-gray-50 dark:bg-gray-700`},Tt={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Et={class:`flex flex-col`},Dt={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Ot={class:`px-6 py-4 whitespace-nowrap`},kt={class:`text-sm text-gray-900 dark:text-white`},At={class:`px-6 py-4 whitespace-nowrap`},jt={class:`text-sm font-medium text-gray-900 dark:text-white`},Mt={class:`px-6 py-4 whitespace-nowrap`},Nt={class:`text-sm text-gray-900 dark:text-white`},Pt={class:`px-6 py-4 whitespace-nowrap`},Ft={class:`text-sm text-red-600 dark:text-red-400`},It={class:`px-6 py-4 whitespace-nowrap`},Lt={class:`text-sm font-medium text-gray-900 dark:text-white`},Rt={class:`px-6 py-4 whitespace-nowrap`},zt={class:`text-sm text-gray-900 dark:text-white`},Bt={class:`px-6 py-4 whitespace-nowrap`},Vt={class:`text-sm text-green-600 dark:text-green-400`},Ht={class:`px-6 py-4 whitespace-nowrap`},Ut={class:`text-sm font-medium text-gray-900 dark:text-white`},Wt={class:`px-6 py-4 whitespace-nowrap`},Gt={class:`text-sm text-gray-900 dark:text-white`},Kt={class:`px-6 py-4 whitespace-nowrap`},qt={class:`text-sm text-gray-900 dark:text-white`},Jt={class:`px-6 py-4 whitespace-nowrap`},Yt={class:`text-sm text-gray-900 dark:text-white`},Xt={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Zt={class:`flex items-center justify-end space-x-2`},Qt=[`onClick`],$t=[`onClick`],en=[`onClick`],tn=[`onClick`],nn=[`onClick`],rn={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},an={class:`flex items-center justify-between`},on={class:`flex-1 flex justify-between sm:hidden`},sn=[`disabled`],cn=[`disabled`],ln={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},un={class:`text-sm text-gray-700 dark:text-gray-300`},dn={class:`font-medium`},fn={class:`font-medium`},pn={class:`font-medium`},mn={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},hn=[`disabled`],gn=[`disabled`];var _n=b({__name:`IndexPage`,setup(i){let d=ee(),h=se(),b=B(),{isSuperAdmin:w}=re(),E=I(!1),D=I(!1),O=I(!1),k=I(!1),A=I(!1),j=I(null),M=I(null),N=I(null),P=I(!1),U=I({title:``,message:``,buttonText:``,loadingText:``,action:``}),W=p(()=>P.value?h.trashedAccountTransfers:h.accountTransfers),K=p(()=>h.pagination),q=p(()=>h.loading),J=p(()=>h.filters),Y=p(()=>b.accounts),X=async e=>{try{P.value?await h.fetchTrashedAccountTransfers(e):await h.fetchAccountTransfers(e)}catch{d.error(`Failed to load transfers`,{title:`Error`})}},Z=()=>{N.value&&clearTimeout(N.value),N.value=setTimeout(()=>{h.setSearch(J.value.search||``)},300)},ce=e=>{let t=J.value.sort_direction||`asc`,n=`asc`;J.value.sort_by===e&&(n=t===`asc`?`desc`:`asc`),h.setSort(e,n)},Q=e=>{e>=1&&K.value&&e<=K.value.last_page&&h.setPage(e)},le=()=>{O.value=!0},ue=e=>{j.value=e,k.value=!0},de=e=>{j.value=e,A.value=!0},fe=async()=>{await X()},pe=async()=>{await X()},me=e=>{M.value=e,U.value={title:`Delete Transfer`,message:`Are you sure you want to delete transfer "${e.code}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,action:`delete`},D.value=!0},he=e=>{M.value=e,U.value={title:`Restore Transfer`,message:`Are you sure you want to restore transfer "${e.code}"?`,buttonText:`Restore`,loadingText:`Restoring...`,action:`restore`},D.value=!0},ge=e=>{M.value=e,U.value={title:`Permanently Delete Transfer`,message:`Are you sure you want to permanently delete transfer "${e.code}"? This action cannot be undone.`,buttonText:`Delete Permanently`,loadingText:`Deleting...`,action:`forceDelete`},D.value=!0},_e=async()=>{if(M.value)try{switch(E.value=!0,U.value.action){case`delete`:await h.deleteAccountTransfer(M.value.id),d.success(`Transfer deleted successfully`);break;case`restore`:await h.restoreAccountTransfer(M.value.id),d.success(`Transfer restored successfully`);break;case`forceDelete`:await h.forceDeleteAccountTransfer(M.value.id),d.success(`Transfer permanently deleted`);break}ve(),await X()}catch{d.error(`Failed to ${U.value.action} transfer`)}finally{E.value=!1}},ve=()=>{D.value=!1,M.value=null,U.value={title:``,message:``,buttonText:``,loadingText:``,action:``}},$=(e,t)=>{h.updateUrlParams({[e]:t===``?void 0:t,page:1})},be=()=>{h.updateUrlParams({search:void 0,from_account_id:void 0,to_account_id:void 0,date_from:void 0,date_to:void 0,sent_amount:void 0,received_amount:void 0,page:1})};return x(async()=>{try{await Promise.all([b.fetchAccounts(),b.fetchCurrencies()]),h.syncFiltersWithUrl(),await X(h.filters)}catch(e){console.error(`Error loading initial data:`,e)}}),(i,d)=>(S(),_(`div`,lt,[y(ie,{title:`Account Transfers`,description:`Manage transfers between accounts`,"show-create-button":L(w),"create-button-text":`Create Transfer`,onCreate:le},null,8,[`show-create-button`]),m(`div`,ut,[m(`div`,dt,[m(`div`,null,[d[22]||=m(`label`,{for:`date_from`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Date From `,-1),F(m(`input`,{id:`date_from`,"onUpdate:modelValue":d[0]||=e=>J.value.date_from=e,type:`date`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:d[1]||=e=>$(`date_from`,e.target.value)},null,544),[[u,J.value.date_from]])]),m(`div`,null,[d[23]||=m(`label`,{for:`date_to`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Date To `,-1),F(m(`input`,{id:`date_to`,"onUpdate:modelValue":d[2]||=e=>J.value.date_to=e,type:`date`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:d[3]||=e=>$(`date_to`,e.target.value)},null,544),[[u,J.value.date_to]])]),m(`div`,ft,[d[24]||=m(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search `,-1),m(`div`,pt,[F(m(`input`,{id:`search`,"onUpdate:modelValue":d[4]||=e=>J.value.search=e,type:`text`,placeholder:`Search by code, note, or transaction ID...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:Z},null,544),[[u,J.value.search]]),y(L(ne),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),m(`div`,null,[d[26]||=m(`label`,{for:`from_account`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` From Account `,-1),F(m(`select`,{id:`from_account`,"onUpdate:modelValue":d[5]||=e=>J.value.from_account_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:d[6]||=e=>$(`from_account_id`,e.target.value)},[d[25]||=m(`option`,{value:``},`All Accounts`,-1),(S(!0),_(f,null,C(Y.value,e=>(S(),_(`option`,{key:e.id,value:e.id},z(e.name),9,mt))),128))],544),[[l,J.value.from_account_id]])]),m(`div`,null,[d[28]||=m(`label`,{for:`to_account`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` To Account `,-1),F(m(`select`,{id:`to_account`,"onUpdate:modelValue":d[7]||=e=>J.value.to_account_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:d[8]||=e=>$(`to_account_id`,e.target.value)},[d[27]||=m(`option`,{value:``},`All Accounts`,-1),(S(!0),_(f,null,C(Y.value,e=>(S(),_(`option`,{key:e.id,value:e.id},z(e.name),9,ht))),128))],544),[[l,J.value.to_account_id]])]),m(`div`,null,[d[29]||=m(`label`,{for:`sent_amount`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Sent Amount `,-1),F(m(`input`,{id:`sent_amount`,"onUpdate:modelValue":d[9]||=e=>J.value.sent_amount=e,type:`number`,step:`0.01`,placeholder:`Filter by amount`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onChange:d[10]||=e=>$(`sent_amount`,e.target.value)},null,544),[[u,J.value.sent_amount,void 0,{number:!0}]])]),m(`div`,null,[d[30]||=m(`label`,{for:`received_amount`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Received Amount `,-1),F(m(`input`,{id:`received_amount`,"onUpdate:modelValue":d[11]||=e=>J.value.received_amount=e,type:`number`,step:`0.01`,placeholder:`Filter by amount`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onChange:d[12]||=e=>$(`received_amount`,e.target.value)},null,544),[[u,J.value.received_amount,void 0,{number:!0}]])]),m(`div`,{class:`flex items-end`},[m(`button`,{onClick:be,class:`w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`},` Clear Filters `)])])]),m(`div`,gt,[q.value?(S(),_(`div`,_t,[y(L(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),d[31]||=m(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading transfers...`,-1)])):W.value.length===0?(S(),_(`div`,vt,[y(L(T),{class:`h-12 w-12 mx-auto text-gray-400`}),m(`h3`,yt,z(P.value?`No trashed transfers found`:`No transfers found`),1),m(`p`,bt,z(J.value.search?`Try adjusting your search criteria.`:`Get started by creating your first transfer.`),1),!J.value.search&&!P.value&&L(w)?(S(),_(`div`,xt,[m(`button`,{onClick:le,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[y(L(e),{class:`h-5 w-5 mr-2`}),d[32]||=v(` Create Your First Transfer `,-1)])])):g(``,!0)])):(S(),_(`div`,St,[m(`table`,Ct,[m(`thead`,wt,[m(`tr`,null,[m(`th`,Tt,[m(`button`,{onClick:d[13]||=e=>ce(`date`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[d[33]||=m(`span`,null,`Date`,-1),m(`div`,Et,[y(L(a),{class:R([`h-3 w-3`,J.value.sort_by===`date`&&J.value.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),y(L(c),{class:R([`h-3 w-3 -mt-1`,J.value.sort_by===`date`&&J.value.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),d[34]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Code `,-1),d[35]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` From Account `,-1),d[36]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Sent Amount `,-1),d[37]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` From Currency `,-1),d[38]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` To Account `,-1),d[39]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[m(`abbr`,{title:`Received Amount`},`Rvc. Amt`)],-1),d[40]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[m(`abbr`,{title:`Received Currency`},`Rvc. Curr`)],-1),d[41]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Rate `,-1),d[42]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` By `,-1),d[43]||=m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Note `,-1),d[44]||=m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),m(`tbody`,Dt,[(S(!0),_(f,null,C(W.value,e=>(S(),_(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[m(`td`,Ot,[m(`div`,kt,z(L(oe)(e.date)),1)]),m(`td`,At,[m(`div`,jt,z(e.prefix)+z(e.code),1)]),m(`td`,Mt,[m(`div`,Nt,z(e.from_account?.name||`-`),1),d[45]||=m(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},null,-1)]),m(`td`,Pt,[m(`div`,Ft,z(L(G)(e.sent_amount)),1)]),m(`td`,It,[m(`div`,Lt,z(e.from_currency?.code||``),1)]),m(`td`,Rt,[m(`div`,zt,z(e.to_account?.name||`-`),1)]),m(`td`,Bt,[m(`div`,Vt,z(L(G)(e.received_amount)),1)]),m(`td`,Ht,[m(`div`,Ut,z(e.to_currency?.code||``),1)]),m(`td`,Wt,[m(`div`,Gt,z(L(G)(e.currency_rate)),1)]),m(`td`,Kt,[m(`div`,qt,[m(`pre`,null,z(e.created_by.name),1)])]),m(`td`,Jt,[m(`div`,Yt,z(e.note),1)]),m(`td`,Xt,[m(`div`,Zt,[P.value?(S(),_(f,{key:1},[L(w)?(S(),_(`button`,{key:0,onClick:t=>he(e),class:`text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200`,title:`Restore Transfer`},[y(L(H),{class:`h-4 w-4`})],8,tn)):g(``,!0),L(w)?(S(),_(`button`,{key:1,onClick:t=>ge(e),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Permanently Delete`},[y(L(V),{class:`h-4 w-4`})],8,nn)):g(``,!0)],64)):(S(),_(f,{key:0},[m(`button`,{onClick:t=>de(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[y(L(r),{class:`w-4 h-4`})],8,Qt),L(w)?(S(),_(`button`,{key:0,onClick:t=>ue(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Transfer`},[y(L(t),{class:`h-4 w-4`})],8,$t)):g(``,!0),L(w)?(S(),_(`button`,{key:1,onClick:t=>me(e),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Delete Transfer`},[y(L(te),{class:`h-4 w-4`})],8,en)):g(``,!0)],64))])])]))),128))])])])),K.value&&K.value.total>0?(S(),_(`div`,rn,[m(`div`,an,[m(`div`,on,[m(`button`,{onClick:d[14]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,sn),m(`button`,{onClick:d[15]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,cn)]),m(`div`,ln,[m(`div`,null,[m(`p`,un,[d[46]||=v(` Showing `,-1),m(`span`,dn,z(K.value.from),1),d[47]||=v(` to `,-1),m(`span`,fn,z(K.value.to),1),d[48]||=v(` of `,-1),m(`span`,pn,z(K.value.total),1),d[49]||=v(` results `,-1)])]),m(`div`,null,[m(`nav`,mn,[m(`button`,{onClick:d[16]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[y(L(s),{class:`h-5 w-5`})],8,hn),m(`button`,{onClick:d[17]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[y(L(o),{class:`h-5 w-5`})],8,gn)])])])])])):g(``,!0)]),y(ye,{modelValue:O.value,"onUpdate:modelValue":d[18]||=e=>O.value=e,onCreated:fe},null,8,[`modelValue`]),y(Ne,{modelValue:k.value,"onUpdate:modelValue":d[19]||=e=>k.value=e,transfer:j.value,onUpdated:pe},null,8,[`modelValue`,`transfer`]),y(ct,{modelValue:A.value,"onUpdate:modelValue":d[20]||=e=>A.value=e,transfer:j.value},null,8,[`modelValue`,`transfer`]),y(ae,{show:D.value,"onUpdate:show":d[21]||=e=>D.value=e,type:`delete`,title:U.value.title,message:U.value.message,"confirm-text":U.value.buttonText,"loading-text":U.value.loadingText,loading:E.value,onConfirm:_e,onCancel:ve},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`])]))}}),vn=_n;export{vn as default};