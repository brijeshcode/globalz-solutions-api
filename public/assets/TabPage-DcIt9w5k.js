import{H as e,J as t,O as n,R as r,V as i,W as a,_ as o,a8 as s,a9 as c,aE as l,aF as u,aI as d,aK as f,aL as p,aO as m,aP as h,aR as g,aS as _,aT as v,aU as y,aV as b,aX as x,aY as S,aZ as C,aa as w,ab as T,ac as E,al as D,au as O,av as k,aw as A,ax as j,ay as M,az as N,b0 as P,b2 as F,b3 as I,b8 as L,b9 as R,ba as z,bb as ee,bc as B,bd as V,be as H,bg as U,g as W,l as G,p as te,s as ne,y as re}from"./index-C0meH5qn.js";import"./GlobalConfig-wPgXFcZ5.js";import{d as ie}from"./common-CZbH6H1Z.js";import{b as K}from"./tableUtils-dXs1kjAL.js";import{b as ae}from"./PageHeader-BL74d-wS.js";import{b as oe}from"./ConfirmationModal-BlfKGQuh.js";import{b as q}from"./accountTypesStore-B3MFzcDz.js";import{b as se}from"./StatusBadge-CsBaFcfa.js";import"./currencyUtil-zVdizVpl.js";import{b as J}from"./expenseCategoriesStore-DTRYdC8u.js";import{b as Y}from"./Tabs-CvA9wzyE.js";import{b as ce}from"./DetailsModal-DICORX6-.js";const le={class:`space-y-6`},ue={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},X={class:`grid grid-cols-1 md:grid-cols-4 gap-4`},Z={class:`md:col-span-2`},de={class:`relative`},fe={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},pe={key:0,class:`p-8 text-center`},me={key:1,class:`p-8 text-center`},he={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},ge={key:0,class:`mt-6`},_e={key:2,class:`overflow-x-auto`},ve={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},ye={class:`bg-gray-50 dark:bg-gray-700`},be={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},xe={class:`flex flex-col`},Se={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ce={class:`flex flex-col`},we={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Te={class:`flex flex-col`},Ee={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},De={class:`px-6 py-4 whitespace-nowrap`},Oe={class:`flex items-center`},ke={class:`flex-shrink-0 h-10 w-10`},Ae={class:`h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},je={class:`ml-4`},Me={class:`text-sm font-medium text-gray-900 dark:text-white`},Ne={class:`text-sm text-gray-500 dark:text-gray-400`},Pe={class:`px-6 py-4`},Fe={class:`text-sm text-gray-900 dark:text-white`},Ie={class:`px-6 py-4 whitespace-nowrap`},Le={class:`px-6 py-4 whitespace-nowrap`},Re={class:`text-sm text-gray-900 dark:text-white`},ze={class:`text-sm text-gray-600 dark:text-gray-400`},Be={class:`text-xs text-gray-500 dark:text-gray-500`},Ve={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},He={class:`flex items-center justify-end space-x-2`},Ue=[`onClick`],We=[`onClick`],Ge=[`onClick`],Ke={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},qe={class:`flex items-center justify-between`},Je={class:`flex-1 flex justify-between sm:hidden`},Ye=[`disabled`],Xe=[`disabled`],Ze={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Qe={class:`text-sm text-gray-700 dark:text-gray-300`},$e={class:`font-medium`},et={class:`font-medium`},tt={class:`font-medium`},nt={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},rt=[`disabled`],it=[`disabled`];var at=C({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:i,emit:a}){l();let s=N(),u=q(),d=a,m=B(!1),v=B(!1),C=B(null),D=B(null),O=B(null),k=B(!1),A=ee({search:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),j=B({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),M=g(()=>u.accountTypes),R=g(()=>u.pagination),W=g(()=>u.loading),te=g(()=>[{key:`name`,label:`Account Type Name`,type:`text`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...A}),e=>{let{page:t,...n}=e;u.updateFilters(n)},{deep:!0});let K=async(e=1)=>{try{let t={...A,page:e};await u.fetchAccountTypes(t)}catch{s.error(`Failed to load account types`,{title:`Error`})}},J=()=>{K(A.page||1)},Y=()=>{D.value&&clearTimeout(D.value),D.value=setTimeout(()=>{K(1)},300)},at=e=>{A.sort_by===e?A.sort_direction=A.sort_direction===`asc`?`desc`:`asc`:(A.sort_by=e,A.sort_direction=`asc`),K(1)},Q=e=>{e>=1&&R.value&&e<=R.value.last_page&&(A.page=e,K(e))},ot=e=>{O.value=e,k.value=!0},st=e=>{C.value=e,j.value={title:`Delete Account Type`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},v.value=!0},ct=async()=>{C.value&&(await u.deleteAccountType(C.value.id),lt())},lt=()=>{v.value=!1,C.value=null,j.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},ut=()=>{d(`create`)},dt=e=>{d(`edit`,e)};return P(()=>{K()}),i({refreshData:J}),(r,i)=>(F(),b(`div`,le,[S(ae,{title:`Account Types`,description:`Manage account types and classifications`,"create-button-text":`Create New Account Type`,onCreate:ut}),_(`div`,ue,[_(`div`,X,[_(`div`,Z,[i[12]||=_(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Account Types `,-1),_(`div`,de,[z(_(`input`,{id:`search`,"onUpdate:modelValue":i[0]||=e=>A.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:Y},null,544),[[p,A.search]]),S(V(re),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),_(`div`,null,[i[14]||=_(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(_(`select`,{id:`status`,"onUpdate:modelValue":i[1]||=e=>A.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:K},i[13]||=[_(`option`,{value:``},`All Status`,-1),_(`option`,{value:`true`},`Active`,-1),_(`option`,{value:`false`},`Inactive`,-1)],544),[[f,A.is_active]])]),_(`div`,null,[i[16]||=_(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(_(`select`,{id:`per-page`,"onUpdate:modelValue":i[2]||=e=>A.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:K},i[15]||=[_(`option`,{value:15},`15`,-1),_(`option`,{value:25},`25`,-1),_(`option`,{value:50},`50`,-1),_(`option`,{value:100},`100`,-1)],544),[[f,A.per_page]])])])]),_(`div`,fe,[W.value?(F(),b(`div`,pe,[S(V(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),i[17]||=_(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading account types...`,-1)])):M.value.length===0?(F(),b(`div`,me,[S(V(G),{class:`h-12 w-12 mx-auto text-gray-400`}),i[19]||=_(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No account types found `,-1),_(`p`,he,U(A.search?`Try adjusting your search criteria.`:`Get started by creating your first account type.`),1),A.search?y(``,!0):(F(),b(`div`,ge,[_(`button`,{onClick:ut,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[S(V(e),{class:`h-5 w-5 mr-2`}),i[18]||=x(` Add Your First Account Type `,-1)])]))])):(F(),b(`div`,_e,[_(`table`,ve,[_(`thead`,ye,[_(`tr`,null,[_(`th`,be,[_(`button`,{onClick:i[3]||=e=>at(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[20]||=_(`span`,null,`Account Type`,-1),_(`div`,xe,[S(V(c),{class:H([`h-3 w-3`,A.sort_by===`name`&&A.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,A.sort_by===`name`&&A.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),i[23]||=_(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),_(`th`,Se,[_(`button`,{onClick:i[4]||=e=>at(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[21]||=_(`span`,null,`Status`,-1),_(`div`,Ce,[S(V(c),{class:H([`h-3 w-3`,A.sort_by===`is_active`&&A.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,A.sort_by===`is_active`&&A.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),_(`th`,we,[_(`button`,{onClick:i[5]||=e=>at(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[22]||=_(`span`,null,`Created`,-1),_(`div`,Te,[S(V(c),{class:H([`h-3 w-3`,A.sort_by===`created_at`&&A.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,A.sort_by===`created_at`&&A.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),i[24]||=_(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),_(`tbody`,Ee,[(F(!0),b(h,null,I(M.value,e=>(F(),b(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[_(`td`,De,[_(`div`,Oe,[_(`div`,ke,[_(`div`,Ae,[S(V(G),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})])]),_(`div`,je,[_(`div`,Me,U(e.name),1),_(`div`,Ne,` ID: `+U(e.id),1)])])]),_(`td`,Pe,[_(`div`,Fe,U(e.description||`No description provided`),1)]),_(`td`,Ie,[S(se,{active:e.is_active},null,8,[`active`])]),_(`td`,Le,[_(`div`,Re,[_(`div`,ze,U(e.created_by?.name||`-`),1),_(`div`,Be,U(V(ie)(e.created_at)),1)])]),_(`td`,Ve,[_(`div`,He,[_(`button`,{onClick:t=>ot(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[S(V(o),{class:`w-4 h-4`})],8,Ue),_(`button`,{onClick:t=>dt(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Account Type`},[S(V(t),{class:`h-4 w-4`})],8,We),_(`button`,{onClick:t=>st(e),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Delete Account Type`},[S(V(ne),{class:`h-4 w-4`})],8,Ge)])])]))),128))])])])),R.value&&R.value.total>0?(F(),b(`div`,Ke,[_(`div`,qe,[_(`div`,Je,[_(`button`,{onClick:i[6]||=e=>Q(R.value.current_page-1),disabled:R.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,Ye),_(`button`,{onClick:i[7]||=e=>Q(R.value.current_page+1),disabled:R.value.current_page>=R.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Xe)]),_(`div`,Ze,[_(`div`,null,[_(`p`,Qe,[i[25]||=x(` Showing `,-1),_(`span`,$e,U(R.value.from),1),i[26]||=x(` to `,-1),_(`span`,et,U(R.value.to),1),i[27]||=x(` of `,-1),_(`span`,tt,U(R.value.total),1),i[28]||=x(` results `,-1)])]),_(`div`,null,[_(`nav`,nt,[_(`button`,{onClick:i[8]||=e=>Q(R.value.current_page-1),disabled:R.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(V(T),{class:`h-5 w-5`})],8,rt),_(`button`,{onClick:i[9]||=e=>Q(R.value.current_page+1),disabled:R.value.current_page>=R.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(V(w),{class:`h-5 w-5`})],8,it)])])])])])):y(``,!0)]),S(oe,{show:v.value,"onUpdate:show":i[10]||=e=>v.value=e,type:`delete`,title:j.value.title,message:j.value.message,"confirm-text":j.value.buttonText,"loading-text":j.value.loadingText,loading:m.value,onConfirm:ct,onCancel:lt},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),S(ce,{show:k.value,"onUpdate:show":i[11]||=e=>k.value=e,item:O.value,title:`Account Type Details`,"display-fields":te.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),Q=at;function ot(){let e=B({}),t=g(()=>Object.keys(e.value).length>0),n=t=>e.value[t]?.[0],r=n=>{let r={};return!n.name||n.name.trim().length===0?r.name=[`Account type name is required`]:n.name.trim().length>255&&(r.name=[`Account type name must not exceed 255 characters`]),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Account type description must not exceed 1000 characters`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},i=n=>{let r={};return n.name!==void 0&&(!n.name||n.name.trim().length===0?r.name=[`Account type name is required`]:n.name.trim().length>255&&(r.name=[`Account type name must not exceed 255 characters`])),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Account type description must not exceed 1000 characters`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},a=()=>{e.value={}},o=t=>{e.value[t]&&delete e.value[t]},s=t=>{e.value=t};return{errors:e,hasErrors:t,getFieldError:n,validateCreateRequest:r,validateUpdateRequest:i,clearErrors:a,clearFieldError:o,setServerErrors:s}}const st={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},ct={class:`max-w-4xl mx-auto`},lt={class:`mb-8`},ut={class:`flex items-center space-x-4 mb-2`},dt={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ft={class:`px-6 py-8`},pt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},mt={class:`md:col-span-2`},ht={key:0,class:`mt-1 text-xs text-gray-500`},gt={class:`md:col-span-2`},_t={class:`flex items-start`},vt={class:`flex items-center h-5`},yt=[`disabled`],bt=[`disabled`],xt={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},St={key:1,class:`mt-1 text-xs text-gray-500`},Ct={key:0,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},wt={class:`space-y-2`},Tt={class:`text-sm text-blue-700 dark:text-blue-400`},Et={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},Dt={class:`text-sm text-blue-700 dark:text-blue-400`},Ot={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},kt=[`disabled`],At=[`disabled`],jt={key:0,class:`flex items-center justify-center`},Mt={key:1};var Nt=C({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,r=q(),{errors:i,hasErrors:a,getFieldError:o,validateCreateRequest:s,clearFieldError:c,setServerErrors:l,clearErrors:u}=ot(),f=B(!1),h=B({name:``,description:``,is_active:!0}),v=g(()=>h.value.name.trim().length>0&&h.value.name.length<=255&&(!h.value.description||h.value.description.length<=1e3)),C=()=>{h.value={name:``,description:``,is_active:!0},u()},w=async()=>{if(u(),s(h.value))try{f.value=!0;let e={name:h.value.name.trim(),is_active:h.value.is_active,description:h.value.description?.trim()??``};await r.createAccountType(e),C(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&l(e.response.data.errors)}finally{f.value=!1}},T=()=>{C(),n(`cancel`)},E=()=>{n(`back`)};return P(()=>{C()}),(e,t)=>(F(),b(`div`,st,[_(`div`,ct,[_(`div`,lt,[_(`div`,ut,[_(`button`,{onClick:E,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(V(D),{class:`w-5 h-5`})]),t[5]||=_(`div`,null,[_(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Account Type `),_(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new account type classification `)],-1)])]),_(`div`,dt,[_(`div`,ft,[_(`form`,{onSubmit:m(w,[`prevent`]),class:`space-y-8`},[_(`div`,null,[t[7]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),_(`div`,pt,[_(`div`,mt,[S(W,{type:`text`,maxlength:255,disabled:f.value,onBlur:t[0]||=()=>V(c)(`name`),modelValue:h.value.name,"onUpdate:modelValue":t[1]||=e=>h.value.name=e,placeholder:`Enter account type name (e.g., Retail, Wholesale, Corporate)`,error:V(o)(`name`),required:``,label:`Account Type Name`},null,8,[`disabled`,`modelValue`,`error`]),h.value.name.length>0?(F(),b(`p`,ht,U(h.value.name.length)+`/255 characters `,1)):y(``,!0)]),_(`div`,gt,[_(`div`,_t,[_(`div`,vt,[z(_(`input`,{id:`is_active`,"onUpdate:modelValue":t[2]||=e=>h.value.is_active=e,type:`checkbox`,disabled:f.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,yt),[[d,h.value.is_active]])]),t[6]||=_(`div`,{class:`ml-3`},[_(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),_(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this account type will be available for selection `)],-1)])])])]),_(`div`,null,[t[9]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),_(`div`,null,[t[8]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account Type Description `,-1),z(_(`textarea`,{"onUpdate:modelValue":t[3]||=e=>h.value.description=e,disabled:f.value,maxlength:1e3,rows:`4`,placeholder:`Enter account type description and characteristics (optional)`,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,V(o)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[4]||=()=>V(c)(`description`)},null,42,bt),[[p,h.value.description]]),V(o)(`description`)?(F(),b(`p`,xt,U(V(o)(`description`)),1)):y(``,!0),h.value.description&&h.value.description.length>0?(F(),b(`p`,St,U(h.value.description.length)+`/1000 characters `,1)):y(``,!0)])]),h.value.name?(F(),b(`div`,Ct,[t[13]||=_(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Account Type Preview`,-1),_(`div`,wt,[_(`p`,Tt,[t[10]||=_(`strong`,null,`Name:`,-1),x(` `+U(h.value.name),1)]),h.value.description?(F(),b(`p`,Et,[t[11]||=_(`strong`,null,`Description:`,-1),x(` `+U(h.value.description),1)])):y(``,!0),_(`p`,Dt,[t[12]||=_(`strong`,null,`Status:`,-1),_(`span`,{class:H(h.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},U(h.value.is_active?`Active`:`Inactive`),3)])])])):y(``,!0),_(`div`,Ot,[_(`button`,{type:`button`,onClick:T,disabled:f.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,kt),_(`button`,{type:`submit`,disabled:f.value||V(a)||!v.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[f.value?(F(),b(`div`,jt,t[14]||=[_(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Creating... `,-1)])):(F(),b(`span`,Mt,`Create Account Type`))],8,At)])],32)])])])]))}}),Pt=Nt;const Ft={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},It={class:`max-w-4xl mx-auto`},Lt={class:`mb-8`},Rt={class:`flex items-center space-x-4 mb-2`},zt={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Bt={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Vt={class:`px-6 py-8`},Ht={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ut={class:`md:col-span-2`},Wt={key:0,class:`mt-1 text-xs text-gray-500`},Gt={class:`md:col-span-2`},Kt={class:`flex items-start`},qt={class:`flex items-center h-5`},Jt=[`disabled`],Yt={class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},Xt=[`disabled`],Zt={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Qt={key:1,class:`mt-1 text-xs text-gray-500`},$t={key:0,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},en={class:`space-y-2`},tn={class:`text-sm text-blue-700 dark:text-blue-400`},nn={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},rn={class:`text-sm text-blue-700 dark:text-blue-400`},an={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},on=[`disabled`],sn=[`disabled`],cn={key:0,class:`flex items-center justify-center`},ln={key:1},un={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},dn={class:`flex flex-col items-center`};var fn=C({__name:`EditPage`,props:{id:{},accountType:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=q(),{errors:a,hasErrors:o,getFieldError:c,validateUpdateRequest:l,clearFieldError:u,setServerErrors:f,clearErrors:h}=ot(),v=B(!1),C=B(!1),w=B({name:``,description:``,is_active:!0}),T=B({name:``,description:``,is_active:!0}),E=g(()=>w.value.name.trim().length>0&&w.value.name.length<=255&&(!w.value.description||w.value.description.length<=1e3)),O=async()=>{try{C.value=!0;let e=n.accountType||await i.fetchAccountType(n.id);e&&(w.value={name:e.name,description:e.description||``,is_active:e.is_active},T.value={name:e.name,description:e.description||``,is_active:e.is_active},h())}catch(e){console.error(`Error loading account type:`,e)}finally{C.value=!1}},k=async()=>{if(h(),l(w.value))try{v.value=!0;let e={name:w.value.name.trim(),is_active:w.value.is_active,description:w.value.description?.trim()??``};await i.updateAccountType(n.id,e),T.value={...w.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&f(e.response.data.errors)}finally{v.value=!1}},A=()=>{r(`cancel`)},j=()=>{r(`back`)};return P(()=>{O()}),L(()=>n.id,()=>{n.id&&O()}),(e,t)=>(F(),b(`div`,Ft,[_(`div`,It,[_(`div`,Lt,[_(`div`,Rt,[_(`button`,{onClick:j,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(V(D),{class:`w-5 h-5`})]),t[5]||=_(`div`,null,[_(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Account Type `),_(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update account type information and settings `)],-1)])]),C.value?(F(),b(`div`,zt,t[6]||=[_(`div`,{class:`flex items-center justify-center`},[_(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),_(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading account type...`)],-1)])):w.value?(F(),b(`div`,Bt,[_(`div`,Vt,[_(`form`,{onSubmit:m(k,[`prevent`]),class:`space-y-8`},[_(`div`,null,[t[8]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),_(`div`,Ht,[_(`div`,Ut,[S(W,{type:`text`,maxlength:255,disabled:v.value,onBlur:t[0]||=()=>V(u)(`name`),modelValue:w.value.name,"onUpdate:modelValue":t[1]||=e=>w.value.name=e,placeholder:`Enter account type name (e.g., Retail, Wholesale, Corporate)`,error:V(c)(`name`),required:``,label:`Account Type Name`},null,8,[`disabled`,`modelValue`,`error`]),w.value.name.length>0?(F(),b(`p`,Wt,U(w.value.name.length)+`/255 characters `,1)):y(``,!0)]),_(`div`,Gt,[_(`div`,Kt,[_(`div`,qt,[z(_(`input`,{id:`is_active`,"onUpdate:modelValue":t[2]||=e=>w.value.is_active=e,type:`checkbox`,disabled:v.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Jt),[[d,w.value.is_active]])]),t[7]||=_(`div`,{class:`ml-3`},[_(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),_(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this account type will be available for selection `)],-1)])])])]),_(`div`,null,[_(`h3`,Yt,` Description `+U(w.value.description),1),_(`div`,null,[t[9]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account Type Description `,-1),z(_(`textarea`,{"onUpdate:modelValue":t[3]||=e=>w.value.description=e,disabled:v.value,maxlength:1e3,rows:`4`,placeholder:`Enter account type description and characteristics (optional)`,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,V(c)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[4]||=()=>V(u)(`description`)},null,42,Xt),[[p,w.value.description]]),V(c)(`description`)?(F(),b(`p`,Zt,U(V(c)(`description`)),1)):y(``,!0),w.value.description&&w.value.description.length>0?(F(),b(`p`,Qt,U(w.value.description.length)+`/1000 characters `,1)):y(``,!0)])]),w.value.name?(F(),b(`div`,$t,[t[13]||=_(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Account Type Preview`,-1),_(`div`,en,[_(`p`,tn,[t[10]||=_(`strong`,null,`Name:`,-1),x(` `+U(w.value.name),1)]),w.value.description?(F(),b(`p`,nn,[t[11]||=_(`strong`,null,`Description:`,-1),x(` `+U(w.value.description),1)])):y(``,!0),_(`p`,rn,[t[12]||=_(`strong`,null,`Status:`,-1),_(`span`,{class:H(w.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},U(w.value.is_active?`Active`:`Inactive`),3)])])])):y(``,!0),_(`div`,an,[_(`button`,{type:`button`,onClick:A,disabled:v.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,on),_(`button`,{type:`submit`,disabled:v.value||V(o)||!E.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[v.value?(F(),b(`div`,cn,t[14]||=[_(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Updating... `,-1)])):(F(),b(`span`,ln,`Update Account Type`))],8,sn)])],32)])])):(F(),b(`div`,un,[_(`div`,dn,[S(V(s),{class:`w-12 h-12 text-red-400 mb-4`}),t[15]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Account Type Not Found `,-1),t[16]||=_(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The account type you're trying to edit could not be found. `,-1),_(`button`,{onClick:j,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` â† Back to Account Types `)])]))])]))}}),pn=fn;const mn={class:`space-y-6`},hn={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},gn={class:`grid grid-cols-1 md:grid-cols-5 gap-4`},_n={class:`md:col-span-2`},vn={class:`relative`},yn=[`value`],bn={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},xn={key:0,class:`p-8 text-center`},Sn={key:1,class:`p-8 text-center`},Cn={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},wn={key:0,class:`mt-6`},Tn={key:2,class:`overflow-x-auto`},En={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Dn={class:`bg-gray-50 dark:bg-gray-700`},On={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},kn={class:`flex flex-col`},An={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},jn={class:`flex flex-col`},Mn={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Nn={class:`flex flex-col`},Pn={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Fn={class:`px-6 py-4 whitespace-nowrap`},In={class:`flex items-center`},Ln={class:`flex-shrink-0 h-10 w-10`},Rn={class:`h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center`},zn={class:`ml-4`},Bn={class:`text-sm font-medium text-gray-900 dark:text-white`},Vn={class:`text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2`},Hn={key:0,class:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`},Un={class:`px-6 py-4 whitespace-nowrap`},Wn={class:`text-sm text-gray-900 dark:text-white`},Gn={class:`px-6 py-4`},Kn={class:`text-sm text-gray-900 dark:text-white`},qn={class:`px-6 py-4 whitespace-nowrap`},Jn={class:`text-sm text-gray-900 dark:text-white`},Yn={key:0,class:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200`},Xn={key:1,class:`text-gray-500 dark:text-gray-400`},Zn={class:`px-6 py-4 whitespace-nowrap`},Qn={class:`px-6 py-4 whitespace-nowrap`},$n={class:`text-sm text-gray-900 dark:text-white`},er={class:`text-sm text-gray-600 dark:text-gray-400`},tr={class:`text-xs text-gray-500 dark:text-gray-500`},nr={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},rr={class:`flex items-center justify-end space-x-2`},ir=[`onClick`],ar=[`onClick`],or=[`onClick`,`disabled`,`title`],sr={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},cr={class:`flex items-center justify-between`},lr={class:`flex-1 flex justify-between sm:hidden`},ur=[`disabled`],dr=[`disabled`],fr={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},pr={class:`text-sm text-gray-700 dark:text-gray-300`},mr={class:`font-medium`},hr={class:`font-medium`},gr={class:`font-medium`},_r={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},vr=[`disabled`],yr=[`disabled`];var br=C({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:s,emit:u}){l();let d=N(),m=J(),v=u,C=B(!1),D=B(!1),O=B(null),k=B(null),A=B(null),j=B(!1),M=ee({search:``,parent_id:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),R=B({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),W=g(()=>m.expenseCategories),G=g(()=>m.pagination),te=g(()=>m.loading),K=g(()=>m.rootExpenseCategories),q=g(()=>[{key:`name`,label:`Category Name`,type:`text`},{key:`parent.name`,label:`Parent Category`,type:`text`,fallback:`Root Category`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_root`,label:`Category Type`,type:`custom`,customRender:e=>e?`Root Category`:`Sub Category`},{key:`has_children`,label:`Has Children`,type:`custom`,customRender:e=>e?`Yes`:`No`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...M}),e=>{let{page:t,...n}=e;m.updateFilters(n)},{deep:!0});let Y=async(e=1)=>{try{let t={...M,page:e};await m.fetchExpenseCategories(t)}catch{d.error(`Failed to load expense categories`,{title:`Error`})}},le=()=>{Y(M.page||1)},ue=()=>{k.value&&clearTimeout(k.value),k.value=setTimeout(()=>{Y(1)},300)},X=e=>{M.sort_by===e?M.sort_direction=M.sort_direction===`asc`?`desc`:`asc`:(M.sort_by=e,M.sort_direction=`asc`),Y(1)},Z=e=>{e>=1&&G.value&&e<=G.value.last_page&&(M.page=e,Y(e))},de=e=>{A.value=e,j.value=!0},fe=e=>{if(e.has_children){d.warning(`Cannot delete category that has children`);return}O.value=e,R.value={title:`Delete Expense Category`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},D.value=!0},pe=async()=>{O.value&&(await m.deleteExpenseCategory(O.value.id),me())},me=()=>{D.value=!1,O.value=null,R.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},he=()=>{v(`create`)},ge=e=>{v(`edit`,e)};return P(async()=>{await m.fetchRootExpenseCategories(),Y()}),s({refreshData:le}),(r,s)=>(F(),b(`div`,mn,[S(ae,{title:`Expense Categories`,description:`Manage expense categories and classifications`,"create-button-text":`Create New Expense Category`,onCreate:he}),_(`div`,hn,[_(`div`,gn,[_(`div`,_n,[s[13]||=_(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Expense Categories `,-1),_(`div`,vn,[z(_(`input`,{id:`search`,"onUpdate:modelValue":s[0]||=e=>M.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:ue},null,544),[[p,M.search]]),S(V(re),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),_(`div`,null,[s[16]||=_(`label`,{for:`parent_category`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(_(`select`,{id:`parent_category`,"onUpdate:modelValue":s[1]||=e=>M.parent_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},[s[14]||=_(`option`,{value:``},`All Categories`,-1),s[15]||=_(`option`,{value:`null`},`Root Categories Only`,-1),(F(!0),b(h,null,I(K.value,e=>(F(),b(`option`,{key:e.id,value:e.id},U(e.name),9,yn))),128))],544),[[f,M.parent_id]])]),_(`div`,null,[s[18]||=_(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(_(`select`,{id:`status`,"onUpdate:modelValue":s[2]||=e=>M.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},s[17]||=[_(`option`,{value:``},`All Status`,-1),_(`option`,{value:`true`},`Active`,-1),_(`option`,{value:`false`},`Inactive`,-1)],544),[[f,M.is_active]])]),_(`div`,null,[s[20]||=_(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(_(`select`,{id:`per-page`,"onUpdate:modelValue":s[3]||=e=>M.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},s[19]||=[_(`option`,{value:15},`15`,-1),_(`option`,{value:25},`25`,-1),_(`option`,{value:50},`50`,-1),_(`option`,{value:100},`100`,-1)],544),[[f,M.per_page]])])])]),_(`div`,bn,[te.value?(F(),b(`div`,xn,[S(V(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),s[21]||=_(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading expense categories...`,-1)])):W.value.length===0?(F(),b(`div`,Sn,[S(V(i),{class:`h-12 w-12 mx-auto text-gray-400`}),s[23]||=_(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No expense categories found `,-1),_(`p`,Cn,U(M.search?`Try adjusting your search criteria.`:`Get started by creating your first expense category.`),1),M.search?y(``,!0):(F(),b(`div`,wn,[_(`button`,{onClick:he,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[S(V(e),{class:`h-5 w-5 mr-2`}),s[22]||=x(` Add Your First Expense Category `,-1)])]))])):(F(),b(`div`,Tn,[_(`table`,En,[_(`thead`,Dn,[_(`tr`,null,[_(`th`,On,[_(`button`,{onClick:s[4]||=e=>X(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[24]||=_(`span`,null,`Category Name`,-1),_(`div`,kn,[S(V(c),{class:H([`h-3 w-3`,M.sort_by===`name`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,M.sort_by===`name`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[27]||=_(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Parent Category `,-1),s[28]||=_(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),s[29]||=_(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Children `,-1),_(`th`,An,[_(`button`,{onClick:s[5]||=e=>X(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[25]||=_(`span`,null,`Status`,-1),_(`div`,jn,[S(V(c),{class:H([`h-3 w-3`,M.sort_by===`is_active`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,M.sort_by===`is_active`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),_(`th`,Mn,[_(`button`,{onClick:s[6]||=e=>X(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[26]||=_(`span`,null,`Created`,-1),_(`div`,Nn,[S(V(c),{class:H([`h-3 w-3`,M.sort_by===`created_at`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,M.sort_by===`created_at`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[30]||=_(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),_(`tbody`,Pn,[(F(!0),b(h,null,I(W.value,e=>(F(),b(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[_(`td`,Fn,[_(`div`,In,[_(`div`,Ln,[_(`div`,Rn,[S(V(i),{class:`h-5 w-5 text-green-600 dark:text-green-400`})])]),_(`div`,zn,[_(`div`,Bn,U(e.name),1),_(`div`,Vn,[_(`span`,null,`ID: `+U(e.id),1),e.is_root?(F(),b(`span`,Hn,` Root `)):y(``,!0)])])])]),_(`td`,Un,[_(`div`,Wn,U(e.parent?.name||`-`),1)]),_(`td`,Gn,[_(`div`,Kn,U(e.description||`No description provided`),1)]),_(`td`,qn,[_(`div`,Jn,[e.has_children?(F(),b(`span`,Yn,[S(V(a),{class:`w-3 h-3 mr-1`}),s[31]||=x(` Has Children `,-1)])):(F(),b(`span`,Xn,`-`))])]),_(`td`,Zn,[S(se,{active:e.is_active},null,8,[`active`])]),_(`td`,Qn,[_(`div`,$n,[_(`div`,er,U(e.created_by?.name||`-`),1),_(`div`,tr,U(V(ie)(e.created_at)),1)])]),_(`td`,nr,[_(`div`,rr,[_(`button`,{onClick:t=>de(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[S(V(o),{class:`w-4 h-4`})],8,ir),_(`button`,{onClick:t=>ge(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Expense Category`},[S(V(t),{class:`h-4 w-4`})],8,ar),_(`button`,{onClick:t=>fe(e),disabled:e.has_children,class:H([`transition-colors duration-200`,e.has_children?`text-gray-400 dark:text-gray-600 cursor-not-allowed`:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300`]),title:e.has_children?`Cannot delete category with children`:`Delete Expense Category`},[S(V(ne),{class:`h-4 w-4`})],10,or)])])]))),128))])])])),G.value&&G.value.total>0?(F(),b(`div`,sr,[_(`div`,cr,[_(`div`,lr,[_(`button`,{onClick:s[7]||=e=>Z(G.value.current_page-1),disabled:G.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,ur),_(`button`,{onClick:s[8]||=e=>Z(G.value.current_page+1),disabled:G.value.current_page>=G.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,dr)]),_(`div`,fr,[_(`div`,null,[_(`p`,pr,[s[32]||=x(` Showing `,-1),_(`span`,mr,U(G.value.from),1),s[33]||=x(` to `,-1),_(`span`,hr,U(G.value.to),1),s[34]||=x(` of `,-1),_(`span`,gr,U(G.value.total),1),s[35]||=x(` results `,-1)])]),_(`div`,null,[_(`nav`,_r,[_(`button`,{onClick:s[9]||=e=>Z(G.value.current_page-1),disabled:G.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(V(T),{class:`h-5 w-5`})],8,vr),_(`button`,{onClick:s[10]||=e=>Z(G.value.current_page+1),disabled:G.value.current_page>=G.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(V(w),{class:`h-5 w-5`})],8,yr)])])])])])):y(``,!0)]),S(oe,{show:D.value,"onUpdate:show":s[11]||=e=>D.value=e,type:`delete`,title:R.value.title,message:R.value.message,"confirm-text":R.value.buttonText,"loading-text":R.value.loadingText,loading:C.value,onConfirm:pe,onCancel:me},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),S(ce,{show:j.value,"onUpdate:show":s[12]||=e=>j.value=e,item:A.value,title:`Expense Category Details`,"display-fields":q.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),xr=br;const Sr={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Cr={class:`max-w-4xl mx-auto`},wr={class:`mb-8`},Tr={class:`flex items-center space-x-4 mb-2`},Er={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Dr={class:`px-6 py-8`},Or={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},kr={class:`md:col-span-2`},Ar={key:0,class:`mt-1 text-xs text-gray-500`},jr={class:`md:col-span-2`},Mr=[`disabled`],Nr=[`value`],Pr={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Fr={class:`md:col-span-2`},Ir={class:`flex items-start`},Lr={class:`flex items-center h-5`},Rr=[`disabled`],zr=[`disabled`],Br={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Vr={key:1,class:`mt-1 text-xs text-gray-500`},Hr={class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},Ur={class:`flex`},Wr={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},Gr={class:`space-y-2`},Kr={class:`text-sm text-green-700 dark:text-green-400`},qr={class:`text-sm text-green-700 dark:text-green-400`},Jr={key:0,class:`text-sm text-green-700 dark:text-green-400`},Yr={class:`text-sm text-green-700 dark:text-green-400`},Xr={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Zr=[`disabled`],Qr=[`disabled`],$r={key:0,class:`flex items-center justify-center`},ei={key:1};var ti=C({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,i=J(),a=B({}),o=g(()=>Object.keys(a.value).length>0),s=e=>a.value[e]?.[0],c=e=>{a.value[e]&&delete a.value[e]},l=e=>{a.value={...e}},u=()=>{a.value={}},v=e=>{u();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},C=B(!1),w=B({name:``,parent_id:void 0,description:``,is_active:!0}),T=g(()=>w.value.name.trim().length>0&&w.value.name.length<=255&&(!w.value.description||w.value.description.length<=1e3)),E=g(()=>i.rootCategoriesOnly),O=e=>{if(!e)return``;let t=E.value.find(t=>t.id===Number(e));return t?.name||``},k=()=>{w.value={name:``,parent_id:void 0,description:``,is_active:!0},u()},A=async()=>{if(u(),v(w.value))try{C.value=!0;let e={name:w.value.name.trim(),is_active:w.value.is_active,parent_id:w.value.parent_id?Number(w.value.parent_id):null,description:w.value.description?.trim()??``};await i.createExpenseCategory(e),k(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&l(e.response.data.errors)}finally{C.value=!1}},j=()=>{k(),n(`cancel`)},M=()=>{n(`back`)};return P(async()=>{await i.fetchExpenseCategories({is_active:!0}),k()}),(e,t)=>(F(),b(`div`,Sr,[_(`div`,Cr,[_(`div`,wr,[_(`div`,Tr,[_(`button`,{onClick:M,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(V(D),{class:`w-5 h-5`})]),t[7]||=_(`div`,null,[_(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Expense Category `),_(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new expense category classification `)],-1)])]),_(`div`,Er,[_(`div`,Dr,[_(`form`,{onSubmit:m(A,[`prevent`]),class:`space-y-8`},[_(`div`,null,[t[12]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),_(`div`,Or,[_(`div`,kr,[S(W,{type:`text`,maxlength:255,disabled:C.value,onBlur:t[0]||=()=>c(`name`),modelValue:w.value.name,"onUpdate:modelValue":t[1]||=e=>w.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:s(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),w.value.name.length>0?(F(),b(`p`,Ar,U(w.value.name.length)+`/255 characters `,1)):y(``,!0)]),_(`div`,jr,[t[9]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(_(`select`,{"onUpdate:modelValue":t[2]||=e=>w.value.parent_id=e,disabled:C.value,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,s(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>c(`parent_id`)},[t[8]||=_(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),b(h,null,I(E.value,e=>(F(),b(`option`,{key:e.id,value:e.id},U(e.name),9,Nr))),128))],42,Mr),[[f,w.value.parent_id]]),s(`parent_id`)?(F(),b(`p`,Pr,U(s(`parent_id`)),1)):y(``,!0),t[10]||=_(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),_(`div`,Fr,[_(`div`,Ir,[_(`div`,Lr,[z(_(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>w.value.is_active=e,type:`checkbox`,disabled:C.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Rr),[[d,w.value.is_active]])]),t[11]||=_(`div`,{class:`ml-3`},[_(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),_(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this expense category will be available for selection `)],-1)])])])]),_(`div`,null,[t[14]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),_(`div`,null,[t[13]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(_(`textarea`,{"onUpdate:modelValue":t[5]||=e=>w.value.description=e,disabled:C.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,s(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>c(`description`)},null,42,zr),[[p,w.value.description]]),s(`description`)?(F(),b(`p`,Br,U(s(`description`)),1)):y(``,!0),w.value.description&&w.value.description.length>0?(F(),b(`p`,Vr,U(w.value.description.length)+`/1000 characters `,1)):y(``,!0)])]),_(`div`,Hr,[_(`div`,Ur,[S(V(r),{class:`h-5 w-5 text-blue-400 mr-2 mt-0.5`}),t[15]||=_(`div`,null,[_(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-1`},` About Category Hierarchy `),_(`div`,{class:`text-sm text-blue-700 dark:text-blue-400 space-y-1`},[_(`p`,null,[_(`strong`,null,`Root Categories:`),x(` Top-level categories that can contain sub-categories`)]),_(`p`,null,[_(`strong`,null,`Sub-categories:`),x(` Categories that belong to a parent category for better organization`)]),_(`p`,null,[_(`strong`,null,`Examples:`),x(` Travel ï¿½ Flights, Hotels, Meals | Office ï¿½ Supplies, Equipment, Software`)])])],-1)])]),w.value.name?(F(),b(`div`,Wr,[t[20]||=_(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),_(`div`,Gr,[_(`p`,Kr,[t[16]||=_(`strong`,null,`Name:`,-1),x(` `+U(w.value.name),1)]),_(`p`,qr,[t[17]||=_(`strong`,null,`Type:`,-1),x(` `+U(w.value.parent_id?`Sub-category of "${O(w.value.parent_id)}"`:`Root Category`),1)]),w.value.description?(F(),b(`p`,Jr,[t[18]||=_(`strong`,null,`Description:`,-1),x(` `+U(w.value.description),1)])):y(``,!0),_(`p`,Yr,[t[19]||=_(`strong`,null,`Status:`,-1),_(`span`,{class:H(w.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},U(w.value.is_active?`Active`:`Inactive`),3)])])])):y(``,!0),_(`div`,Xr,[_(`button`,{type:`button`,onClick:j,disabled:C.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Zr),_(`button`,{type:`submit`,disabled:C.value||o.value||!T.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[C.value?(F(),b(`div`,$r,t[21]||=[_(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Creating... `,-1)])):(F(),b(`span`,ei,`Create Expense Category`))],8,Qr)])],32)])])])]))}}),ni=ti;const ri={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},ii={class:`max-w-4xl mx-auto`},ai={class:`mb-8`},oi={class:`flex items-center space-x-4 mb-2`},si={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},ci={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},li={class:`px-6 py-8`},ui={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},di={class:`md:col-span-2`},fi={key:0,class:`mt-1 text-xs text-gray-500`},pi={class:`md:col-span-2`},mi=[`disabled`],hi=[`value`],gi={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},_i={class:`md:col-span-2`},vi={class:`flex items-start`},yi={class:`flex items-center h-5`},bi=[`disabled`],xi=[`disabled`],Si={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Ci={key:1,class:`mt-1 text-xs text-gray-500`},wi={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},Ti={class:`space-y-2`},Ei={class:`text-sm text-green-700 dark:text-green-400`},Di={class:`text-sm text-green-700 dark:text-green-400`},Oi={key:0,class:`text-sm text-green-700 dark:text-green-400`},ki={class:`text-sm text-green-700 dark:text-green-400`},Ai={key:1,class:`p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg`},ji={class:`flex`},Mi={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Ni=[`disabled`],Pi=[`disabled`],Fi={key:0,class:`flex items-center justify-center`},Ii={key:1},Li={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Ri={class:`flex flex-col items-center`};var zi=C({__name:`EditPage`,props:{id:{},expenseCategory:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=J(),a=B({}),o=g(()=>Object.keys(a.value).length>0),c=e=>a.value[e]?.[0],l=e=>{a.value[e]&&delete a.value[e]},u=e=>{a.value={...e}},v=()=>{a.value={}},C=e=>{v();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},w=B(!1),T=B(!1),E=B(null),O=B({name:``,parent_id:``,description:``,is_active:!0}),k=B({name:``,parent_id:``,description:``,is_active:!0}),A=g(()=>O.value.name.trim().length>0&&O.value.name.length<=255&&(!O.value.description||O.value.description.length<=1e3)),j=g(()=>i.rootCategoriesOnly.filter(e=>e.id!==n.id)),M=e=>{if(!e)return``;let t=j.value.find(t=>t.id===Number(e));return t?.name||``},N=async()=>{try{T.value=!0;let e=n.expenseCategory||await i.fetchExpenseCategory(n.id);e&&(E.value=e,O.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},k.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},v())}catch(e){console.error(`Error loading expense category:`,e)}finally{T.value=!1}},R=async()=>{if(v(),C(O.value))try{w.value=!0;let e={name:O.value.name.trim(),is_active:O.value.is_active,parent_id:O.value.parent_id?Number(O.value.parent_id):null,description:O.value.description?.trim()??``};await i.updateExpenseCategory(n.id,e),k.value={...O.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{w.value=!1}},ee=()=>{r(`cancel`)},G=()=>{r(`back`)};return P(async()=>{await i.fetchExpenseCategories({is_active:!0}),N()}),L(()=>n.id,()=>{n.id&&N()}),(e,t)=>(F(),b(`div`,ri,[_(`div`,ii,[_(`div`,ai,[_(`div`,oi,[_(`button`,{onClick:G,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(V(D),{class:`w-5 h-5`})]),t[7]||=_(`div`,null,[_(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Expense Category `),_(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update expense category information and settings `)],-1)])]),T.value?(F(),b(`div`,si,t[8]||=[_(`div`,{class:`flex items-center justify-center`},[_(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),_(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading expense category...`)],-1)])):O.value?(F(),b(`div`,ci,[_(`div`,li,[_(`form`,{onSubmit:m(R,[`prevent`]),class:`space-y-8`},[_(`div`,null,[t[13]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),_(`div`,ui,[_(`div`,di,[S(W,{type:`text`,maxlength:255,disabled:w.value,onBlur:t[0]||=()=>l(`name`),modelValue:O.value.name,"onUpdate:modelValue":t[1]||=e=>O.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:c(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),O.value.name.length>0?(F(),b(`p`,fi,U(O.value.name.length)+`/255 characters `,1)):y(``,!0)]),_(`div`,pi,[t[10]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(_(`select`,{"onUpdate:modelValue":t[2]||=e=>O.value.parent_id=e,disabled:w.value,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>l(`parent_id`)},[t[9]||=_(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),b(h,null,I(j.value,e=>(F(),b(`option`,{key:e.id,value:e.id},U(e.name),9,hi))),128))],42,mi),[[f,O.value.parent_id]]),c(`parent_id`)?(F(),b(`p`,gi,U(c(`parent_id`)),1)):y(``,!0),t[11]||=_(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),_(`div`,_i,[_(`div`,vi,[_(`div`,yi,[z(_(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>O.value.is_active=e,type:`checkbox`,disabled:w.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,bi),[[d,O.value.is_active]])]),t[12]||=_(`div`,{class:`ml-3`},[_(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),_(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this expense category will be available for selection `)],-1)])])])]),_(`div`,null,[t[15]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),_(`div`,null,[t[14]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(_(`textarea`,{"onUpdate:modelValue":t[5]||=e=>O.value.description=e,disabled:w.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>l(`description`)},null,42,xi),[[p,O.value.description]]),c(`description`)?(F(),b(`p`,Si,U(c(`description`)),1)):y(``,!0),O.value.description&&O.value.description.length>0?(F(),b(`p`,Ci,U(O.value.description.length)+`/1000 characters `,1)):y(``,!0)])]),O.value.name?(F(),b(`div`,wi,[t[20]||=_(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),_(`div`,Ti,[_(`p`,Ei,[t[16]||=_(`strong`,null,`Name:`,-1),x(` `+U(O.value.name),1)]),_(`p`,Di,[t[17]||=_(`strong`,null,`Type:`,-1),x(` `+U(O.value.parent_id?`Sub-category of "${M(O.value.parent_id)}"`:`Root Category`),1)]),O.value.description?(F(),b(`p`,Oi,[t[18]||=_(`strong`,null,`Description:`,-1),x(` `+U(O.value.description),1)])):y(``,!0),_(`p`,ki,[t[19]||=_(`strong`,null,`Status:`,-1),_(`span`,{class:H(O.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},U(O.value.is_active?`Active`:`Inactive`),3)])])])):y(``,!0),E.value?.has_children&&O.value.parent_id?(F(),b(`div`,Ai,[_(`div`,ji,[S(V(te),{class:`h-5 w-5 text-amber-400 mr-2 mt-0.5`}),t[21]||=_(`div`,null,[_(`h4`,{class:`text-sm font-medium text-amber-800 dark:text-amber-300 mb-1`},` Warning: Category has sub-categories `),_(`p`,{class:`text-sm text-amber-700 dark:text-amber-400`},` This category has sub-categories. Changing its parent will affect the entire hierarchy structure. `)],-1)])])):y(``,!0),_(`div`,Mi,[_(`button`,{type:`button`,onClick:ee,disabled:w.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Ni),_(`button`,{type:`submit`,disabled:w.value||o.value||!A.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[w.value?(F(),b(`div`,Fi,t[22]||=[_(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Updating... `,-1)])):(F(),b(`span`,Ii,`Update Expense Category`))],8,Pi)])],32)])])):(F(),b(`div`,Li,[_(`div`,Ri,[S(V(s),{class:`w-12 h-12 text-red-400 mb-4`}),t[23]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Expense Category Not Found `,-1),t[24]||=_(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The expense category you're trying to edit could not be found. `,-1),_(`button`,{onClick:G,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ï¿½ Back to Expense Categories `)])]))])]))}}),Bi=zi,Vi=class{baseUrl=`/setups/incomes/categories`;async getIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await k(`${this.baseUrl}?${t}`,{loadingMessage:`Loading income categories...`,showLoading:!0});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching income categories:`,e),e}}async getIncomeCategory(e){try{let t=await k(`${this.baseUrl}/${e}`,{loadingMessage:`Loading income category...`});return t.data.data}catch(e){throw console.error(`Error fetching income category:`,e),e}}async createIncomeCategory(e){try{let t=await j(this.baseUrl,e,{loadingMessage:`Creating income category...`,showSuccessNotification:!0,successMessage:`Income category created successfully`});return t.data.data}catch(e){throw console.error(`Error creating income category:`,e),e}}async updateIncomeCategory(e,t){try{let n=await M(`${this.baseUrl}/${e}`,t,{loadingMessage:`Updating income category...`,showSuccessNotification:!0,successMessage:`Income category updated successfully`});return n.data.data}catch(e){throw console.error(`Error updating income category:`,e),e}}async deleteIncomeCategory(e){try{await O(`${this.baseUrl}/${e}`,{loadingMessage:`Deleting income category...`,showSuccessNotification:!0,successMessage:`Income category deleted successfully`})}catch(e){throw console.error(`Error deleting income category:`,e),e}}async getTrashedIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await k(`${this.baseUrl}/trashed?${t}`,{loadingMessage:`Loading trashed income categories...`});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching trashed income categories:`,e),e}}async restoreIncomeCategory(e){try{let t=await A(`${this.baseUrl}/${e}/restore`,{},{loadingMessage:`Restoring income category...`,showSuccessNotification:!0,successMessage:`Income category restored successfully`});return t.data.data}catch(e){throw console.error(`Error restoring income category:`,e),e}}async forceDeleteIncomeCategory(e){try{await O(`${this.baseUrl}/${e}/force-delete`,{loadingMessage:`Permanently deleting income category...`,showSuccessNotification:!0,successMessage:`Income category permanently deleted`})}catch(e){throw console.error(`Error permanently deleting income category:`,e),e}}async getIncomeCategoriesForSelect(){try{let e=await k(`${this.baseUrl}`,{showLoading:!1}),t=e.data.data;return t.filter(e=>e.is_active).map(e=>({value:e.id,label:e.name,disabled:!1,parent_id:e.parent_id,level:0}))}catch(e){throw console.error(`Error fetching income categories for select:`,e),e}}async getIncomeCategoryHierarchy(){try{let e=await k(`${this.baseUrl}/hierarchy`,{loadingMessage:`Loading income category hierarchy...`});return e.data.data}catch(e){throw console.error(`Error fetching income category hierarchy:`,e),e}}async getRootIncomeCategories(){try{let e=await k(`${this.baseUrl}/roots`,{loadingMessage:`Loading root income categories...`});return e.data.data}catch(e){throw console.error(`Error fetching root income categories:`,e),e}}async getIncomeCategoryChildren(e){try{let t=await k(`${this.baseUrl}/${e}/children`,{loadingMessage:`Loading income category children...`});return t.data.data}catch(e){throw console.error(`Error fetching income category children:`,e),e}}async getIncomeCategoryStats(){try{let e=await k(`${this.baseUrl}/stats`,{loadingMessage:`Loading income category statistics...`});return e.data.data}catch(e){throw console.error(`Error fetching income category statistics:`,e),e}}async exportIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await k(`${this.baseUrl}/export?${t}`,{loadingMessage:`Exporting income categories...`,responseType:`blob`});return n.data.data}catch(e){throw console.error(`Error exporting income categories:`,e),e}}async searchIncomeCategories(e){try{let t=await k(`${this.baseUrl}/search?q=${encodeURIComponent(e)}`,{showLoading:!1});return t.data.data}catch(e){throw console.error(`Error searching income categories:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const $=new Vi,Hi=u(`incomeCategories`,()=>{let e=B([]),t=B(null),n=B([]),r=B([]),i=B([]),a=B(null),o=B(K()),s=B(!1),c=B({}),l=g(()=>e.value.filter(e=>e.is_active)),u=g(()=>e.value.filter(e=>!e.is_active)),d=g(()=>e.value.filter(e=>e.is_root)),f=g(()=>e.value.filter(e=>e.has_children)),p=g(()=>l.value.map(e=>({value:e.id,label:e.name,disabled:!1,parent_id:e.parent_id,level:0}))),m=g(()=>t=>t===null?e.value.filter(e=>e.parent_id===null):e.value.filter(e=>e.parent_id===t)),h=async t=>{try{s.value=!0,t&&(c.value={...c.value,...t});let n=await $.getIncomeCategories(c.value);e.value=n.data,o.value=n.pagination}catch(e){throw console.error(`Error fetching income categories:`,e),e}finally{s.value=!1}},_=async e=>{try{let n=await $.getIncomeCategory(e);return t.value=n,n}catch(e){throw console.error(`Error fetching income category:`,e),e}},v=async t=>{try{let n=await $.createIncomeCategory(t);return e.value.unshift(n),o.value.total+=1,n.is_root&&i.value.unshift(n),n}catch(e){throw console.error(`Error creating income category:`,e),e}},y=async(n,r)=>{try{let a=await $.updateIncomeCategory(n,r),o=e.value.findIndex(e=>e.id===n);o!==-1&&(e.value[o]=a);let s=i.value.findIndex(e=>e.id===n);return s===-1?a.is_root&&i.value.unshift(a):a.is_root?i.value[s]=a:i.value.splice(s,1),t.value?.id===n&&(t.value=a),a}catch(e){throw console.error(`Error updating income category:`,e),e}},b=async n=>{try{await $.deleteIncomeCategory(n);let r=e.value.findIndex(e=>e.id===n);r!==-1&&e.value.splice(r,1);let a=i.value.findIndex(e=>e.id===n);a!==-1&&i.value.splice(a,1),--o.value.total,t.value?.id===n&&(t.value=null)}catch(e){throw console.error(`Error deleting income category:`,e),e}},x=async e=>{try{s.value=!0;let t=e||{},r=await $.getTrashedIncomeCategories(t);n.value=r.data}catch(e){throw console.error(`Error fetching trashed income categories:`,e),e}finally{s.value=!1}},S=async t=>{try{let r=await $.restoreIncomeCategory(t),a=n.value.findIndex(e=>e.id===t);return a!==-1&&n.value.splice(a,1),e.value.unshift(r),o.value.total+=1,r.is_root&&i.value.unshift(r),r}catch(e){throw console.error(`Error restoring income category:`,e),e}},C=async e=>{try{await $.forceDeleteIncomeCategory(e);let t=n.value.findIndex(t=>t.id===e);t!==-1&&n.value.splice(t,1)}catch(e){throw console.error(`Error permanently deleting income category:`,e),e}},w=async()=>{try{s.value=!0;let e=await $.getIncomeCategoryHierarchy();return r.value=e,e}catch(e){throw console.error(`Error fetching income category hierarchy:`,e),e}finally{s.value=!1}},T=async()=>{try{let e=await $.getRootIncomeCategories();return i.value=e,e}catch(e){throw console.error(`Error fetching root income categories:`,e),e}},E=async e=>{try{return await $.getIncomeCategoryChildren(e)}catch(e){throw console.error(`Error fetching income category children:`,e),e}},D=async()=>{try{let e=await $.getIncomeCategoryStats();return a.value=e,e}catch(e){throw console.error(`Error fetching income category statistics:`,e),e}},O=async e=>{try{return await $.exportIncomeCategories(e)}catch(e){throw console.error(`Error exporting income categories:`,e),e}},k=async e=>{try{return await $.searchIncomeCategories(e)}catch(e){throw console.error(`Error searching income categories:`,e),e}},A=e=>{c.value={...c.value,...e}},j=()=>{c.value={}},M=()=>{t.value=null},N=()=>{e.value=[],t.value=null,n.value=[],r.value=[],i.value=[],a.value=null,o.value=K(),c.value={},s.value=!1},P=async()=>{try{return await $.getIncomeCategoriesForSelect()}catch(e){return console.error(`Error fetching income categories for select:`,e),[]}},F=(e,t=null)=>e.filter(e=>e.parent_id===t).map(t=>({...t,children:F(e,t.id)})),I=g(()=>F(e.value));return{incomeCategories:e,currentIncomeCategory:t,trashedIncomeCategories:n,hierarchyIncomeCategories:r,rootIncomeCategories:i,incomeCategoryStats:a,pagination:o,loading:s,filters:c,activeIncomeCategories:l,inactiveIncomeCategories:u,rootCategoriesOnly:d,categoriesWithChildren:f,incomeCategoriesForSelect:p,incomeCategoriesByParent:m,incomeCategoryTree:I,fetchIncomeCategories:h,fetchIncomeCategory:_,createIncomeCategory:v,updateIncomeCategory:y,deleteIncomeCategory:b,fetchTrashedIncomeCategories:x,restoreIncomeCategory:S,forceDeleteIncomeCategory:C,fetchIncomeCategoryHierarchy:w,fetchRootIncomeCategories:T,fetchIncomeCategoryChildren:E,fetchIncomeCategoryStats:D,exportIncomeCategories:O,searchIncomeCategories:k,updateFilters:A,clearFilters:j,clearCurrentIncomeCategory:M,reset:N,fetchIncomeCategoriesForSelect:P,buildTree:F}}),Ui={class:`space-y-6`},Wi={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},Gi={class:`grid grid-cols-1 md:grid-cols-5 gap-4`},Ki={class:`md:col-span-2`},qi={class:`relative`},Ji=[`value`],Yi={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},Xi={key:0,class:`p-8 text-center`},Zi={key:1,class:`p-8 text-center`},Qi={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},$i={key:0,class:`mt-6`},ea={key:2,class:`overflow-x-auto`},ta={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},na={class:`bg-gray-50 dark:bg-gray-700`},ra={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ia={class:`flex flex-col`},aa={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},oa={class:`flex flex-col`},sa={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ca={class:`flex flex-col`},la={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},ua={class:`px-6 py-4 whitespace-nowrap`},da={class:`flex items-center`},fa={class:`flex-shrink-0 h-10 w-10`},pa={class:`h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center`},ma={class:`ml-4`},ha={class:`text-sm font-medium text-gray-900 dark:text-white`},ga={class:`text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2`},_a={key:0,class:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`},va={class:`px-6 py-4 whitespace-nowrap`},ya={class:`text-sm text-gray-900 dark:text-white`},ba={class:`px-6 py-4`},xa={class:`text-sm text-gray-900 dark:text-white`},Sa={class:`px-6 py-4 whitespace-nowrap`},Ca={class:`text-sm text-gray-900 dark:text-white`},wa={key:0,class:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200`},Ta={key:1,class:`text-gray-500 dark:text-gray-400`},Ea={class:`px-6 py-4 whitespace-nowrap`},Da={class:`px-6 py-4 whitespace-nowrap`},Oa={class:`text-sm text-gray-900 dark:text-white`},ka={class:`text-sm text-gray-600 dark:text-gray-400`},Aa={class:`text-xs text-gray-500 dark:text-gray-500`},ja={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Ma={class:`flex items-center justify-end space-x-2`},Na=[`onClick`],Pa=[`onClick`],Fa=[`onClick`,`disabled`,`title`],Ia={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},La={class:`flex items-center justify-between`},Ra={class:`flex-1 flex justify-between sm:hidden`},za=[`disabled`],Ba=[`disabled`],Va={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Ha={class:`text-sm text-gray-700 dark:text-gray-300`},Ua={class:`font-medium`},Wa={class:`font-medium`},Ga={class:`font-medium`},Ka={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},qa=[`disabled`],Ja=[`disabled`];var Ya=C({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:s,emit:u}){l();let d=N(),m=Hi(),v=u,C=B(!1),D=B(!1),O=B(null),k=B(null),A=B(null),j=B(!1),M=ee({search:``,parent_id:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),R=B({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),W=g(()=>m.incomeCategories),G=g(()=>m.pagination),te=g(()=>m.loading),K=g(()=>m.rootIncomeCategories),q=g(()=>[{key:`name`,label:`Category Name`,type:`text`},{key:`parent.name`,label:`Parent Category`,type:`text`,fallback:`Root Category`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_root`,label:`Category Type`,type:`custom`,customRender:e=>e?`Root Category`:`Sub Category`},{key:`has_children`,label:`Has Children`,type:`custom`,customRender:e=>e?`Yes`:`No`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...M}),e=>{let{page:t,...n}=e;m.updateFilters(n)},{deep:!0});let J=async(e=1)=>{try{let t={...M,page:e};await m.fetchIncomeCategories(t)}catch{d.error(`Failed to load income categories`,{title:`Error`})}},Y=()=>{J(M.page||1)},le=()=>{k.value&&clearTimeout(k.value),k.value=setTimeout(()=>{J(1)},300)},ue=e=>{M.sort_by===e?M.sort_direction=M.sort_direction===`asc`?`desc`:`asc`:(M.sort_by=e,M.sort_direction=`asc`),J(1)},X=e=>{e>=1&&G.value&&e<=G.value.last_page&&(M.page=e,J(e))},Z=e=>{A.value=e,j.value=!0},de=e=>{if(e.has_children){d.warning(`Cannot delete category that has children`);return}O.value=e,R.value={title:`Delete Income Category`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},D.value=!0},fe=async()=>{O.value&&(await m.deleteIncomeCategory(O.value.id),pe())},pe=()=>{D.value=!1,O.value=null,R.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},me=()=>{v(`create`)},he=e=>{v(`edit`,e)};return P(async()=>{await m.fetchRootIncomeCategories(),J()}),s({refreshData:Y}),(r,s)=>(F(),b(`div`,Ui,[S(ae,{title:`Income Categories`,description:`Manage income categories and classifications`,"create-button-text":`Create New Income Category`,onCreate:me}),_(`div`,Wi,[_(`div`,Gi,[_(`div`,Ki,[s[13]||=_(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Income Categories `,-1),_(`div`,qi,[z(_(`input`,{id:`search`,"onUpdate:modelValue":s[0]||=e=>M.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:le},null,544),[[p,M.search]]),S(V(re),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),_(`div`,null,[s[16]||=_(`label`,{for:`parent_category`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(_(`select`,{id:`parent_category`,"onUpdate:modelValue":s[1]||=e=>M.parent_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},[s[14]||=_(`option`,{value:``},`All Categories`,-1),s[15]||=_(`option`,{value:`null`},`Root Categories Only`,-1),(F(!0),b(h,null,I(K.value,e=>(F(),b(`option`,{key:e.id,value:e.id},U(e.name),9,Ji))),128))],544),[[f,M.parent_id]])]),_(`div`,null,[s[18]||=_(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(_(`select`,{id:`status`,"onUpdate:modelValue":s[2]||=e=>M.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},s[17]||=[_(`option`,{value:``},`All Status`,-1),_(`option`,{value:`true`},`Active`,-1),_(`option`,{value:`false`},`Inactive`,-1)],544),[[f,M.is_active]])]),_(`div`,null,[s[20]||=_(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(_(`select`,{id:`per-page`,"onUpdate:modelValue":s[3]||=e=>M.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},s[19]||=[_(`option`,{value:15},`15`,-1),_(`option`,{value:25},`25`,-1),_(`option`,{value:50},`50`,-1),_(`option`,{value:100},`100`,-1)],544),[[f,M.per_page]])])])]),_(`div`,Yi,[te.value?(F(),b(`div`,Xi,[S(V(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),s[21]||=_(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading income categories...`,-1)])):W.value.length===0?(F(),b(`div`,Zi,[S(V(i),{class:`h-12 w-12 mx-auto text-gray-400`}),s[23]||=_(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No income categories found `,-1),_(`p`,Qi,U(M.search?`Try adjusting your search criteria.`:`Get started by creating your first income category.`),1),M.search?y(``,!0):(F(),b(`div`,$i,[_(`button`,{onClick:me,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[S(V(e),{class:`h-5 w-5 mr-2`}),s[22]||=x(` Add Your First Income Category `,-1)])]))])):(F(),b(`div`,ea,[_(`table`,ta,[_(`thead`,na,[_(`tr`,null,[_(`th`,ra,[_(`button`,{onClick:s[4]||=e=>ue(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[24]||=_(`span`,null,`Category Name`,-1),_(`div`,ia,[S(V(c),{class:H([`h-3 w-3`,M.sort_by===`name`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,M.sort_by===`name`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[27]||=_(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Parent Category `,-1),s[28]||=_(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),s[29]||=_(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Children `,-1),_(`th`,aa,[_(`button`,{onClick:s[5]||=e=>ue(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[25]||=_(`span`,null,`Status`,-1),_(`div`,oa,[S(V(c),{class:H([`h-3 w-3`,M.sort_by===`is_active`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,M.sort_by===`is_active`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),_(`th`,sa,[_(`button`,{onClick:s[6]||=e=>ue(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[26]||=_(`span`,null,`Created`,-1),_(`div`,ca,[S(V(c),{class:H([`h-3 w-3`,M.sort_by===`created_at`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(V(E),{class:H([`h-3 w-3 -mt-1`,M.sort_by===`created_at`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[30]||=_(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),_(`tbody`,la,[(F(!0),b(h,null,I(W.value,e=>(F(),b(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[_(`td`,ua,[_(`div`,da,[_(`div`,fa,[_(`div`,pa,[S(V(i),{class:`h-5 w-5 text-green-600 dark:text-green-400`})])]),_(`div`,ma,[_(`div`,ha,U(e.name),1),_(`div`,ga,[_(`span`,null,`ID: `+U(e.id),1),e.is_root?(F(),b(`span`,_a,` Root `)):y(``,!0)])])])]),_(`td`,va,[_(`div`,ya,U(e.parent?.name||`-`),1)]),_(`td`,ba,[_(`div`,xa,U(e.description||`No description provided`),1)]),_(`td`,Sa,[_(`div`,Ca,[e.has_children?(F(),b(`span`,wa,[S(V(a),{class:`w-3 h-3 mr-1`}),s[31]||=x(` Has Children `,-1)])):(F(),b(`span`,Ta,`-`))])]),_(`td`,Ea,[S(se,{active:e.is_active},null,8,[`active`])]),_(`td`,Da,[_(`div`,Oa,[_(`div`,ka,U(e.created_by?.name||`-`),1),_(`div`,Aa,U(V(ie)(e.created_at)),1)])]),_(`td`,ja,[_(`div`,Ma,[_(`button`,{onClick:t=>Z(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[S(V(o),{class:`w-4 h-4`})],8,Na),_(`button`,{onClick:t=>he(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Income Category`},[S(V(t),{class:`h-4 w-4`})],8,Pa),_(`button`,{onClick:t=>de(e),disabled:e.has_children,class:H([`transition-colors duration-200`,e.has_children?`text-gray-400 dark:text-gray-600 cursor-not-allowed`:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300`]),title:e.has_children?`Cannot delete category with children`:`Delete Income Category`},[S(V(ne),{class:`h-4 w-4`})],10,Fa)])])]))),128))])])])),G.value&&G.value.total>0?(F(),b(`div`,Ia,[_(`div`,La,[_(`div`,Ra,[_(`button`,{onClick:s[7]||=e=>X(G.value.current_page-1),disabled:G.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,za),_(`button`,{onClick:s[8]||=e=>X(G.value.current_page+1),disabled:G.value.current_page>=G.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Ba)]),_(`div`,Va,[_(`div`,null,[_(`p`,Ha,[s[32]||=x(` Showing `,-1),_(`span`,Ua,U(G.value.from),1),s[33]||=x(` to `,-1),_(`span`,Wa,U(G.value.to),1),s[34]||=x(` of `,-1),_(`span`,Ga,U(G.value.total),1),s[35]||=x(` results `,-1)])]),_(`div`,null,[_(`nav`,Ka,[_(`button`,{onClick:s[9]||=e=>X(G.value.current_page-1),disabled:G.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(V(T),{class:`h-5 w-5`})],8,qa),_(`button`,{onClick:s[10]||=e=>X(G.value.current_page+1),disabled:G.value.current_page>=G.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(V(w),{class:`h-5 w-5`})],8,Ja)])])])])])):y(``,!0)]),S(oe,{show:D.value,"onUpdate:show":s[11]||=e=>D.value=e,type:`delete`,title:R.value.title,message:R.value.message,"confirm-text":R.value.buttonText,"loading-text":R.value.loadingText,loading:C.value,onConfirm:fe,onCancel:pe},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),S(ce,{show:j.value,"onUpdate:show":s[12]||=e=>j.value=e,item:A.value,title:`Income Category Details`,"display-fields":q.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),Xa=Ya;const Za={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Qa={class:`max-w-4xl mx-auto`},$a={class:`mb-8`},eo={class:`flex items-center space-x-4 mb-2`},to={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},no={class:`px-6 py-8`},ro={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},io={class:`md:col-span-2`},ao={key:0,class:`mt-1 text-xs text-gray-500`},oo={class:`md:col-span-2`},so=[`disabled`],co=[`value`],lo={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},uo={class:`md:col-span-2`},fo={class:`flex items-start`},po={class:`flex items-center h-5`},mo=[`disabled`],ho=[`disabled`],go={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},_o={key:1,class:`mt-1 text-xs text-gray-500`},vo={class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},yo={class:`flex`},bo={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},xo={class:`space-y-2`},So={class:`text-sm text-green-700 dark:text-green-400`},Co={class:`text-sm text-green-700 dark:text-green-400`},wo={key:0,class:`text-sm text-green-700 dark:text-green-400`},To={class:`text-sm text-green-700 dark:text-green-400`},Eo={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Do=[`disabled`],Oo=[`disabled`],ko={key:0,class:`flex items-center justify-center`},Ao={key:1};var jo=C({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,i=Hi(),a=B({}),o=g(()=>Object.keys(a.value).length>0),s=e=>a.value[e]?.[0],c=e=>{a.value[e]&&delete a.value[e]},l=e=>{a.value={...e}},u=()=>{a.value={}},v=e=>{u();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},C=B(!1),w=B({name:``,parent_id:void 0,description:``,is_active:!0}),T=g(()=>w.value.name.trim().length>0&&w.value.name.length<=255&&(!w.value.description||w.value.description.length<=1e3)),E=g(()=>i.rootCategoriesOnly),O=e=>{if(!e)return``;let t=E.value.find(t=>t.id===Number(e));return t?.name||``},k=()=>{w.value={name:``,parent_id:void 0,description:``,is_active:!0},u()},A=async()=>{if(u(),v(w.value))try{C.value=!0;let e={name:w.value.name.trim(),is_active:w.value.is_active,parent_id:w.value.parent_id?Number(w.value.parent_id):null,description:w.value.description?.trim()??``};await i.createIncomeCategory(e),k(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&l(e.response.data.errors)}finally{C.value=!1}},j=()=>{k(),n(`cancel`)},M=()=>{n(`back`)};return P(async()=>{await i.fetchIncomeCategories({is_active:!0}),k()}),(e,t)=>(F(),b(`div`,Za,[_(`div`,Qa,[_(`div`,$a,[_(`div`,eo,[_(`button`,{onClick:M,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(V(D),{class:`w-5 h-5`})]),t[7]||=_(`div`,null,[_(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Income Category `),_(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new income category classification `)],-1)])]),_(`div`,to,[_(`div`,no,[_(`form`,{onSubmit:m(A,[`prevent`]),class:`space-y-8`},[_(`div`,null,[t[12]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),_(`div`,ro,[_(`div`,io,[S(W,{type:`text`,maxlength:255,disabled:C.value,onBlur:t[0]||=()=>c(`name`),modelValue:w.value.name,"onUpdate:modelValue":t[1]||=e=>w.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:s(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),w.value.name.length>0?(F(),b(`p`,ao,U(w.value.name.length)+`/255 characters `,1)):y(``,!0)]),_(`div`,oo,[t[9]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(_(`select`,{"onUpdate:modelValue":t[2]||=e=>w.value.parent_id=e,disabled:C.value,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,s(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>c(`parent_id`)},[t[8]||=_(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),b(h,null,I(E.value,e=>(F(),b(`option`,{key:e.id,value:e.id},U(e.name),9,co))),128))],42,so),[[f,w.value.parent_id]]),s(`parent_id`)?(F(),b(`p`,lo,U(s(`parent_id`)),1)):y(``,!0),t[10]||=_(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),_(`div`,uo,[_(`div`,fo,[_(`div`,po,[z(_(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>w.value.is_active=e,type:`checkbox`,disabled:C.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,mo),[[d,w.value.is_active]])]),t[11]||=_(`div`,{class:`ml-3`},[_(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),_(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this income category will be available for selection `)],-1)])])])]),_(`div`,null,[t[14]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),_(`div`,null,[t[13]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(_(`textarea`,{"onUpdate:modelValue":t[5]||=e=>w.value.description=e,disabled:C.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,s(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>c(`description`)},null,42,ho),[[p,w.value.description]]),s(`description`)?(F(),b(`p`,go,U(s(`description`)),1)):y(``,!0),w.value.description&&w.value.description.length>0?(F(),b(`p`,_o,U(w.value.description.length)+`/1000 characters `,1)):y(``,!0)])]),_(`div`,vo,[_(`div`,yo,[S(V(r),{class:`h-5 w-5 text-blue-400 mr-2 mt-0.5`}),t[15]||=_(`div`,null,[_(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-1`},` About Category Hierarchy `),_(`div`,{class:`text-sm text-blue-700 dark:text-blue-400 space-y-1`},[_(`p`,null,[_(`strong`,null,`Root Categories:`),x(` Top-level categories that can contain sub-categories`)]),_(`p`,null,[_(`strong`,null,`Sub-categories:`),x(` Categories that belong to a parent category for better organization`)]),_(`p`,null,[_(`strong`,null,`Examples:`),x(` Travel ï¿½ Flights, Hotels, Meals | Office ï¿½ Supplies, Equipment, Software`)])])],-1)])]),w.value.name?(F(),b(`div`,bo,[t[20]||=_(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),_(`div`,xo,[_(`p`,So,[t[16]||=_(`strong`,null,`Name:`,-1),x(` `+U(w.value.name),1)]),_(`p`,Co,[t[17]||=_(`strong`,null,`Type:`,-1),x(` `+U(w.value.parent_id?`Sub-category of "${O(w.value.parent_id)}"`:`Root Category`),1)]),w.value.description?(F(),b(`p`,wo,[t[18]||=_(`strong`,null,`Description:`,-1),x(` `+U(w.value.description),1)])):y(``,!0),_(`p`,To,[t[19]||=_(`strong`,null,`Status:`,-1),_(`span`,{class:H(w.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},U(w.value.is_active?`Active`:`Inactive`),3)])])])):y(``,!0),_(`div`,Eo,[_(`button`,{type:`button`,onClick:j,disabled:C.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Do),_(`button`,{type:`submit`,disabled:C.value||o.value||!T.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[C.value?(F(),b(`div`,ko,t[21]||=[_(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Creating... `,-1)])):(F(),b(`span`,Ao,`Create Income Category`))],8,Oo)])],32)])])])]))}}),Mo=jo;const No={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Po={class:`max-w-4xl mx-auto`},Fo={class:`mb-8`},Io={class:`flex items-center space-x-4 mb-2`},Lo={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Ro={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},zo={class:`px-6 py-8`},Bo={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Vo={class:`md:col-span-2`},Ho={key:0,class:`mt-1 text-xs text-gray-500`},Uo={class:`md:col-span-2`},Wo=[`disabled`],Go=[`value`],Ko={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},qo={class:`md:col-span-2`},Jo={class:`flex items-start`},Yo={class:`flex items-center h-5`},Xo=[`disabled`],Zo=[`disabled`],Qo={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},$o={key:1,class:`mt-1 text-xs text-gray-500`},es={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},ts={class:`space-y-2`},ns={class:`text-sm text-green-700 dark:text-green-400`},rs={class:`text-sm text-green-700 dark:text-green-400`},os={key:0,class:`text-sm text-green-700 dark:text-green-400`},ss={class:`text-sm text-green-700 dark:text-green-400`},cs={key:1,class:`p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg`},ls={class:`flex`},us={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},ds=[`disabled`],fs=[`disabled`],ps={key:0,class:`flex items-center justify-center`},ms={key:1},hs={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},gs={class:`flex flex-col items-center`};var _s=C({__name:`EditPage`,props:{id:{},incomeCategory:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=Hi(),a=B({}),o=g(()=>Object.keys(a.value).length>0),c=e=>a.value[e]?.[0],l=e=>{a.value[e]&&delete a.value[e]},u=e=>{a.value={...e}},v=()=>{a.value={}},C=e=>{v();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},w=B(!1),T=B(!1),E=B(null),O=B({name:``,parent_id:``,description:``,is_active:!0}),k=B({name:``,parent_id:``,description:``,is_active:!0}),A=g(()=>O.value.name.trim().length>0&&O.value.name.length<=255&&(!O.value.description||O.value.description.length<=1e3)),j=g(()=>i.rootCategoriesOnly.filter(e=>e.id!==n.id)),M=e=>{if(!e)return``;let t=j.value.find(t=>t.id===Number(e));return t?.name||``},N=async()=>{try{T.value=!0;let e=n.incomeCategory||await i.fetchIncomeCategory(n.id);e&&(E.value=e,O.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},k.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},v())}catch(e){console.error(`Error loading income category:`,e)}finally{T.value=!1}},R=async()=>{if(v(),C(O.value))try{w.value=!0;let e={name:O.value.name.trim(),is_active:O.value.is_active,parent_id:O.value.parent_id?Number(O.value.parent_id):null,description:O.value.description?.trim()??``};await i.updateIncomeCategory(n.id,e),k.value={...O.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{w.value=!1}},ee=()=>{r(`cancel`)},G=()=>{r(`back`)};return P(async()=>{await i.fetchIncomeCategories({is_active:!0}),N()}),L(()=>n.id,()=>{n.id&&N()}),(e,t)=>(F(),b(`div`,No,[_(`div`,Po,[_(`div`,Fo,[_(`div`,Io,[_(`button`,{onClick:G,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(V(D),{class:`w-5 h-5`})]),t[7]||=_(`div`,null,[_(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Income Category `),_(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update income category information and settings `)],-1)])]),T.value?(F(),b(`div`,Lo,t[8]||=[_(`div`,{class:`flex items-center justify-center`},[_(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),_(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading income category...`)],-1)])):O.value?(F(),b(`div`,Ro,[_(`div`,zo,[_(`form`,{onSubmit:m(R,[`prevent`]),class:`space-y-8`},[_(`div`,null,[t[13]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),_(`div`,Bo,[_(`div`,Vo,[S(W,{type:`text`,maxlength:255,disabled:w.value,onBlur:t[0]||=()=>l(`name`),modelValue:O.value.name,"onUpdate:modelValue":t[1]||=e=>O.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:c(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),O.value.name.length>0?(F(),b(`p`,Ho,U(O.value.name.length)+`/255 characters `,1)):y(``,!0)]),_(`div`,Uo,[t[10]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(_(`select`,{"onUpdate:modelValue":t[2]||=e=>O.value.parent_id=e,disabled:w.value,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>l(`parent_id`)},[t[9]||=_(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),b(h,null,I(j.value,e=>(F(),b(`option`,{key:e.id,value:e.id},U(e.name),9,Go))),128))],42,Wo),[[f,O.value.parent_id]]),c(`parent_id`)?(F(),b(`p`,Ko,U(c(`parent_id`)),1)):y(``,!0),t[11]||=_(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),_(`div`,qo,[_(`div`,Jo,[_(`div`,Yo,[z(_(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>O.value.is_active=e,type:`checkbox`,disabled:w.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Xo),[[d,O.value.is_active]])]),t[12]||=_(`div`,{class:`ml-3`},[_(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),_(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this income category will be available for selection `)],-1)])])])]),_(`div`,null,[t[15]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),_(`div`,null,[t[14]||=_(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(_(`textarea`,{"onUpdate:modelValue":t[5]||=e=>O.value.description=e,disabled:w.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:H([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>l(`description`)},null,42,Zo),[[p,O.value.description]]),c(`description`)?(F(),b(`p`,Qo,U(c(`description`)),1)):y(``,!0),O.value.description&&O.value.description.length>0?(F(),b(`p`,$o,U(O.value.description.length)+`/1000 characters `,1)):y(``,!0)])]),O.value.name?(F(),b(`div`,es,[t[20]||=_(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),_(`div`,ts,[_(`p`,ns,[t[16]||=_(`strong`,null,`Name:`,-1),x(` `+U(O.value.name),1)]),_(`p`,rs,[t[17]||=_(`strong`,null,`Type:`,-1),x(` `+U(O.value.parent_id?`Sub-category of "${M(O.value.parent_id)}"`:`Root Category`),1)]),O.value.description?(F(),b(`p`,os,[t[18]||=_(`strong`,null,`Description:`,-1),x(` `+U(O.value.description),1)])):y(``,!0),_(`p`,ss,[t[19]||=_(`strong`,null,`Status:`,-1),_(`span`,{class:H(O.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},U(O.value.is_active?`Active`:`Inactive`),3)])])])):y(``,!0),E.value?.has_children&&O.value.parent_id?(F(),b(`div`,cs,[_(`div`,ls,[S(V(te),{class:`h-5 w-5 text-amber-400 mr-2 mt-0.5`}),t[21]||=_(`div`,null,[_(`h4`,{class:`text-sm font-medium text-amber-800 dark:text-amber-300 mb-1`},` Warning: Category has sub-categories `),_(`p`,{class:`text-sm text-amber-700 dark:text-amber-400`},` This category has sub-categories. Changing its parent will affect the entire hierarchy structure. `)],-1)])])):y(``,!0),_(`div`,us,[_(`button`,{type:`button`,onClick:ee,disabled:w.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,ds),_(`button`,{type:`submit`,disabled:w.value||o.value||!A.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[w.value?(F(),b(`div`,ps,t[22]||=[_(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Updating... `,-1)])):(F(),b(`span`,ms,`Update Income Category`))],8,fs)])],32)])])):(F(),b(`div`,hs,[_(`div`,gs,[S(V(s),{class:`w-12 h-12 text-red-400 mb-4`}),t[23]||=_(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Income Category Not Found `,-1),t[24]||=_(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The income category you're trying to edit could not be found. `,-1),_(`button`,{onClick:G,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ï¿½ Back to Income Categories `)])]))])]))}}),vs=_s;const ys={class:`min-h-screen`};var bs=C({__name:`TabPage`,setup(e){let t=B([{id:`account-types`,label:`Account Types`,icon:{type:`lucide`,name:`users`},color:`blue`},{id:`expense-categories`,label:`Expense Categories`,icon:{type:`lucide`,name:`FolderTree`},color:`red`},{id:`income-categories`,label:`Income Categories`,icon:{type:`lucide`,name:`FolderTree`},color:`green`}]),n=B(`account-types`),r=B(`accounttypeindex`),i=B(null),a=B(),o=B(),s=B(),c={"account-types":{index:`accounttypeindex`,create:`accounttypecreate`,edit:`accounttypeedit`},"income-categories":{index:`incomecategoriesindex`,create:`incomecategoriescreate`,edit:`incomecategoriesedit`},"expense-categories":{index:`expensecategoriesindex`,create:`expensecategoriescreate`,edit:`expensecategoriesedit`}},l=e=>{let t=c[e];t&&(r.value=t.create)},u=(e,t)=>{let n=c[e];n&&(i.value={type:e,id:t.id,data:t},r.value=n.edit)},d=e=>{let t=c[e];t&&(r.value=t.index,i.value=null)},f=e=>{let t=c[e];if(t){r.value=t.index,i.value=null;let n={"account-types":a,"expense-categories":o,"income-categories":s},c=n[e];c?.value?.refreshData&&c.value.refreshData()}},p=(e,t)=>{n.value=e;let a={"account-types":`accounttypeindex`,"expense-categories":`expensecategoriesindex`,"income-categories":`incomecategoriesindex`},o=a[e];o&&(r.value=o,i.value=null),console.log(`Switched to tab: ${e}`,t)};return(e,n)=>(F(),b(`div`,ys,[S(Y,{title:``,tabs:t.value,"default-tab":`account-types`,onTabChange:p},{"account-types":R(()=>[r.value===`accounttypeindex`?(F(),v(Q,{key:0,onCreate:n[0]||=e=>l(`account-types`),onEdit:n[1]||=e=>u(`account-types`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):y(``,!0),r.value===`accounttypecreate`?(F(),v(Pt,{key:1,onBack:n[2]||=e=>d(`account-types`),onSuccess:n[3]||=e=>f(`account-types`),onCancel:n[4]||=e=>d(`account-types`)})):y(``,!0),r.value===`accounttypeedit`?(F(),v(pn,{key:2,onBack:n[5]||=e=>d(`account-types`),onSuccess:n[6]||=e=>f(`account-types`),onCancel:n[7]||=e=>d(`account-types`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):y(``,!0)]),"expense-categories":R(()=>[r.value===`expensecategoriesindex`?(F(),v(xr,{key:0,onCreate:n[8]||=e=>l(`expense-categories`),onEdit:n[9]||=e=>u(`expense-categories`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):y(``,!0),r.value===`expensecategoriescreate`?(F(),v(ni,{key:1,onBack:n[10]||=e=>d(`expense-categories`),onSuccess:n[11]||=e=>f(`expense-categories`),onCancel:n[12]||=e=>d(`expense-categories`)})):y(``,!0),r.value===`expensecategoriesedit`?(F(),v(Bi,{key:2,onBack:n[13]||=e=>d(`expense-categories`),onSuccess:n[14]||=e=>f(`expense-categories`),onCancel:n[15]||=e=>d(`expense-categories`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):y(``,!0)]),"income-categories":R(()=>[r.value===`incomecategoriesindex`?(F(),v(Xa,{key:0,onCreate:n[16]||=e=>l(`income-categories`),onEdit:n[17]||=e=>u(`income-categories`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):y(``,!0),r.value===`incomecategoriescreate`?(F(),v(Mo,{key:1,onBack:n[18]||=e=>d(`income-categories`),onSuccess:n[19]||=e=>f(`income-categories`),onCancel:n[20]||=e=>d(`income-categories`)})):y(``,!0),r.value===`incomecategoriesedit`?(F(),v(vs,{key:2,onBack:n[21]||=e=>d(`income-categories`),onSuccess:n[22]||=e=>f(`income-categories`),onCancel:n[23]||=e=>d(`income-categories`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):y(``,!0)]),_:1},8,[`tabs`])]))}}),xs=bs;export{xs as default};