import{G as e,Q as t,a$ as n,aC as r,aG as i,aH as a,aU as ee,aV as o,aX as s,aY as c,a_ as l,ao as te,as as u,b0 as d,b3 as f,b5 as p,bf as m,bg as h,bj as g}from"./index-BogmXPcL.js";import"./GlobalConfig-wPgXFcZ5.js";import{c as _}from"./common-CZbH6H1Z.js";import"./tableUtils-dXs1kjAL.js";import{b as v}from"./currencyUtil-Bk2vDNVl.js";import{b as y}from"./companyStore-Cy32E7N5.js";import{b}from"./customerPaymentsStore-BXSunYwk.js";const x={class:`max-w-4xl mx-auto p-8 bg-white text-gray-900 print:h-full print:p-0 print:max-w-none print:mx-0`},S={class:`header`},C={class:`flex justify-between items-start mb-10 pb-6 border-b-2 border-blue-600 print:border-black print:mb-6`},w={class:`flex-1`},T={class:`flex items-center mb-3`},E=[`src`,`alt`],D={key:1,class:`text-3xl font-bold text-blue-600 print:text-black print:text-2xl`},O={key:0},k={class:`text-sm print:text-xs print:text-black`},A={class:`text-right flex-1 mt-4`},j={class:`text-lg font-semibold text-gray-600 print:text-black print:text-base`},M={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 print:grid-cols-2 print:gap-6 print:mb-6`},N={class:`space-y-2 print:space-y-1`},P={class:`flex justify-between`},F={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},I={key:0,class:`flex justify-between`},L={class:`text-gray-900 print:text-black print:text-xs`},R={class:`space-y-2 print:space-y-1`},z={class:`flex justify-between`},B={class:`text-gray-900 print:text-black print:text-xs`},V={class:`flex justify-between`},H={class:`text-gray-900 print:text-black print:text-xs`},U={class:`flex justify-between`},W={class:`text-gray-900 print:text-black print:text-xs`},G={class:`body`},K={class:`mb-8 print:mb-6`},q={class:`bg-green-50 dark:bg-green-900/20 border-2 border-green-500 rounded-lg p-6 print:p-4 print:bg-white print:border-black`},J={class:`grid grid-cols-1 md:grid-cols-2 gap-6 print:grid-cols-2 print:gap-4`},Y={class:`space-y-1`},X={class:`flex justify-between`},Z={class:`text-sm font-medium text-gray-900 print:text-black print:text-xs`},Q={class:`flex justify-between`},ne={class:`text-sm font-medium text-gray-900 print:text-black print:text-xs`},re={class:`space-y-1`},ie={class:`flex justify-between`},ae={class:`text-sm text-gray-600 print:text-black print:text-xs`},oe={class:`text-lg font-bold text-gray-900 print:text-black print:text-base`},se={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 print:grid-cols-2 print:gap-6 print:mb-6`},ce={key:0,class:`mb-8 print:mb-6`},le={class:`grid grid-cols-1 md:grid-cols-2 gap-6 print:grid-cols-2 print:gap-4`},ue={key:0},de={class:`bg-gray-50 p-3 rounded-md text-sm text-gray-900 print:bg-white print:border print:border-black print:text-xs print:text-black`},fe={class:`flex justify-between items-center mb-8 print:mb-4 mt-12 print:mt-8`},pe={class:`print:block hidden print:fixed print:bottom-0 print:left-0 print:right-0`},me={class:`border-t-2 border-gray-300 print:border-black pt-3 pb-2 print:bg-white`},he={class:`mt-1`},ge={class:`flex flex-wrap gap-2 text-sm text-gray-600 print:text-black print:text-xs justify-between px-4`},_e={key:0,class:`flex-1`},ve={key:1,class:`flex-1 text-center`},ye={key:2,class:`flex-1 text-center`},be={key:3,class:`flex-1 text-right`};var xe=d({__name:`PaymentReceipt`,props:{payment:{default:null}},setup(e,{expose:t}){let n=y();f(async()=>{try{n.company.name||await n.fetchCompany()}catch(e){console.error(`Failed to fetch company data:`,e)}});let r=()=>{window.print()};return t({printReceipt:r}),(e,t)=>(p(),c(`div`,x,[o(`section`,S,[o(`div`,C,[o(`div`,w,[o(`div`,T,[h(n).company.logo?.preview_url?(p(),c(`img`,{key:0,src:h(n).company.logo.preview_url,alt:h(n).company.name||`Company Logo`,class:`h-24 w-auto mr-4 print:h-16`},null,8,E)):s(``,!0),h(n).company.logo?.preview_url?s(``,!0):(p(),c(`div`,D,g(h(n).company.name),1))]),h(n).company.tax_number?(p(),c(`div`,O,[o(`p`,k,[o(`b`,null,`Tax Registration #: `+g(h(n).company.tax_number),1)])])):s(``,!0)]),o(`div`,A,[t[0]||=o(`h1`,{class:`text-3xl font-bold text-blue-600 mb-2 print:text-black print:text-2xl`},`PAYMENT RECEIPT`,-1),o(`div`,j,g(e.payment?.prefix)+`-`+g(e.payment?.code),1)])]),o(`div`,M,[o(`div`,null,[t[3]||=o(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Customer Information `,-1),o(`div`,N,[o(`div`,P,[t[1]||=o(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Customer:`,-1),o(`span`,F,g(e.payment?.customer?.name||`-`),1)]),e.payment?.customer?.code?(p(),c(`div`,I,[t[2]||=o(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Customer Code:`,-1),o(`span`,L,g(e.payment.customer.code),1)])):s(``,!0)])]),o(`div`,null,[t[7]||=o(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Payment Details `,-1),o(`div`,R,[o(`div`,z,[t[4]||=o(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Payment Date:`,-1),o(`span`,B,g(h(_)(e.payment?.date)),1)]),o(`div`,V,[t[5]||=o(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`RCT Book Number:`,-1),o(`span`,H,g(e.payment?.rtc_book_number||`-`),1)]),o(`div`,U,[t[6]||=o(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Print Date:`,-1),o(`span`,W,g(h(_)(new Date().toISOString())),1)])])])])]),o(`section`,G,[o(`div`,K,[o(`div`,q,[o(`div`,J,[o(`div`,null,[t[10]||=o(`h3`,{class:`text-sm font-semibold text-gray-700 mb-2 print:text-black print:text-xs`},`Received Currency Information`,-1),o(`div`,Y,[o(`div`,X,[t[8]||=o(`span`,{class:`text-sm text-gray-600 print:text-black print:text-xs`},`Currency:`,-1),o(`span`,Z,g(e.payment?.currency?.name||`-`)+` (`+g(e.payment?.currency?.code||`-`)+`) `,1)]),o(`div`,Q,[t[9]||=o(`span`,{class:`text-sm text-gray-600 print:text-black print:text-xs`},`Currency Rate:`,-1),o(`span`,ne,g(e.payment?.currency_rate?(e.payment.currency_rate*1).toFixed(4):`-`),1)])])]),o(`div`,null,[t[12]||=o(`h3`,{class:`text-sm font-semibold text-gray-700 mb-2 print:text-black print:text-xs`},`Payment Amount`,-1),o(`div`,re,[o(`div`,ie,[o(`span`,ae,`Received Amount (`+g(e.payment?.currency?.code)+`):`,1),o(`span`,oe,g(h(v)(e.payment.amount,e.payment.currency.code)),1)]),s(``,!0)])])])])]),o(`div`,se,[s(``,!0)]),e.payment?.note?(p(),c(`div`,ce,[t[18]||=o(`h3`,{class:`text-lg font-bold text-gray-900 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Notes `,-1),o(`div`,le,[e.payment?.note?(p(),c(`div`,ue,[t[17]||=o(`p`,{class:`text-xs font-semibold text-gray-600 mb-1 print:text-black`},`Payment Notes:`,-1),o(`div`,de,g(e.payment.note),1)])):s(``,!0)])])):s(``,!0),o(`div`,fe,[t[20]||=o(`div`,{class:`flex-1 text-center`},[o(`p`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Received By`),o(`div`,{class:`border-b-2 border-gray-400 print:border-black mt-12 print:mt-8 mx-8`}),o(`p`,{class:`text-xs text-gray-500 mt-2 print:text-black print:mt-1`},`Signature & Date`)],-1),s(``,!0)])]),o(`section`,pe,[o(`footer`,me,[o(`div`,he,[o(`div`,ge,[h(n).company.address?(p(),c(`p`,_e,g(h(n).company.address),1)):s(``,!0),h(n).company.phone?(p(),c(`p`,ve,`Tel: `+g(h(n).company.phone),1)):s(``,!0),h(n).company.email?(p(),c(`p`,ye,`Email: `+g(h(n).company.email),1)):s(``,!0),h(n).company.website?(p(),c(`p`,be,g(h(n).company.website),1)):s(``,!0)])])])])]))}}),Se=u(xe,[[`__scopeId`,`data-v-d008f671`]]);const Ce={class:`min-h-screen bg-gray-50 print:bg-white`},we={class:`bg-white shadow-sm border-b print:hidden`},Te={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`},Ee={class:`flex items-center justify-between h-16`},De={class:`flex items-center space-x-4`},$={class:`text-sm text-gray-500`},Oe={class:`flex items-center space-x-3`},ke={key:0,class:`flex items-center justify-center min-h-screen`},Ae={class:`text-center`},je={key:1,class:`py-8 print:py-0`},Me={class:`max-w-6xl mx-auto print:max-w-none`};var Ne=d({__name:`PreviewPage`,setup(s){let u=a(),d=i(),_=r(),v=b(),y=ee(()=>parseInt(d.params.id)),x=m(!0),S=m(null),C=m(null),w=()=>{u.back()},T=async()=>{if(C.value)try{await C.value.printReceipt()}catch(e){console.error(`Failed to print receipt:`,e),_.error(`Failed to print receipt`)}},E=async()=>{try{let e=await v.fetchPayment(y.value);S.value=e}catch(e){_.error(`Failed to load payment details`,{title:`Error`}),console.error(`Error fetching payment:`,e),u.push({name:`customer.payments.index`})}};return f(async()=>{try{x.value=!0,await E()}catch(e){console.error(`Error initializing payment preview:`,e)}finally{x.value=!1}}),(r,i)=>(p(),c(`div`,Ce,[o(`div`,we,[o(`div`,Te,[o(`div`,Ee,[o(`div`,De,[o(`button`,{onClick:w,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 transition-colors`},[n(h(te),{class:`w-5 h-5`})]),o(`div`,null,[i[0]||=o(`h1`,{class:`text-lg font-semibold text-gray-900`},`Payment Receipt Preview`,-1),o(`p`,$,g(S.value?.prefix)+`-`+g(S.value?.code),1)])]),o(`div`,Oe,[o(`button`,{onClick:T,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},[n(h(e),{class:`w-4 h-4 mr-2`}),i[1]||=l(` Print Receipt `,-1)])])])])]),x.value?(p(),c(`div`,ke,[o(`div`,Ae,[n(h(t),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),i[2]||=o(`p`,{class:`mt-2 text-gray-600`},`Loading payment receipt...`,-1)])])):(p(),c(`div`,je,[o(`div`,Me,[n(Se,{ref_key:`paymentReceiptRef`,ref:C,payment:S.value},null,8,[`payment`])])]))]))}}),Pe=Ne;export{Pe as default};