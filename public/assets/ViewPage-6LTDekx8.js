import{K as e,U as t,a9 as n,aA as ee,aO as r,aP as i,aQ as a,aR as o,aT as s,aU as c,aV as l,aX as te,aZ as u,ah as d,av as ne,az as re,b4 as f,b7 as p,b8 as m,bb as h,m as ie}from"./index-KopOJhzy.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import{c as g}from"./common-CAcZd9q3.js";import{b as _,d as v}from"./currencyUtil-4fjG38Kn.js";import{b as y}from"./DataItems-C4aSNbit.js";import{b as ae}from"./customerPaymentsStore-Cm4se1zK.js";const b={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},x={class:``},S={class:`mb-8`},C={class:`flex items-center justify-between`},w={class:`flex items-center space-x-4`},T={class:`text-sm text-gray-600 dark:text-gray-400`},E={key:0,class:`flex space-x-3`},D={key:0,class:`flex items-center justify-center py-12`},O={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},k={class:`px-6 py-8`},A={class:`mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md`},j={class:`flex items-center justify-between`},M={class:`flex`},N={class:`ml-3`},P={class:`mt-1 text-sm text-green-700 dark:text-green-300`},F={class:`text-right`},I={class:`text-lg font-bold text-green-900 dark:text-green-100`},L={class:`space-y-8`},R={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},z={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},oe={class:`text-sm text-gray-900 dark:text-white`},B={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},V={class:`text-sm text-gray-900 dark:text-white`},H={class:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6`},U={class:`text-lg font-semibold text-gray-900 dark:text-white`},W={class:`text-lg font-semibold text-green-600 dark:text-green-400`},G={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},K={class:`text-sm text-gray-900 dark:text-white`},q={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},se={class:`text-sm text-gray-900 dark:text-white`},ce={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},le={key:0},ue={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},de={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},fe={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},pe={class:`flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700`},me={key:2,class:`text-center py-12`};var J=l({__name:`ViewPage`,setup(l){let J=ee(),Y=re(),X=ne(),he=ae(),Z=p(!1),Q=p(null),$=()=>{J.push({name:`customer.payments.index`})},ge=()=>{J.push({name:`customer.payments.preview`,params:{id:Y.params.id}})},_e=async()=>{let e=Number(Y.params.id);if(!e){X.error(`Invalid payment ID`),$();return}Z.value=!0;try{let t=await he.fetchPayment(e);Q.value=t}catch{X.error(`Failed to load payment`),Q.value=null}finally{Z.value=!1}};return te(async()=>{await _e()}),(ee,l)=>(u(),o(`div`,b,[r(`div`,x,[r(`div`,S,[r(`div`,C,[r(`div`,w,[r(`button`,{onClick:$,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[c(m(d),{class:`w-5 h-5`})]),r(`div`,null,[l[0]||=r(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Payment Details `,-1),r(`p`,T,h(Q.value?`${Q.value.prefix}-${Q.value.code}`:`Loading...`),1)])]),Q.value&&!Z.value?(u(),o(`div`,E,[r(`button`,{onClick:ge,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[c(m(t),{class:`h-4 w-4 mr-2`}),l[1]||=s(` Preview Receipt `,-1)])])):a(``,!0)])]),Z.value?(u(),o(`div`,D,[c(m(e),{class:`h-8 w-8 animate-spin text-blue-600`}),l[2]||=r(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment details...`,-1)])):Q.value?(u(),o(`div`,O,[r(`div`,k,[r(`div`,A,[r(`div`,j,[r(`div`,M,[c(m(n),{class:`h-5 w-5 text-green-400`}),r(`div`,N,[l[3]||=r(`h3`,{class:`text-sm font-medium text-green-800 dark:text-green-200`},` Payment Approved `,-1),r(`div`,P,[r(`p`,null,`Approved by `+h(Q.value.approved_by_user?.name||`N/A`)+` on `+h(m(g)(Q.value.approved_at)),1)])])]),r(`div`,F,[l[4]||=r(`div`,{class:`text-sm font-medium text-green-800 dark:text-green-200`},`Total Amount`,-1),r(`div`,I,h(m(_)(Q.value.amount_usd,!0)),1)])])]),r(`div`,L,[r(`div`,null,[l[5]||=r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Basic Information `,-1),r(`div`,R,[c(y,{label:`Payment Code`,value:`${Q.value.prefix}-${Q.value.code}`},null,8,[`value`]),c(y,{label:`Payment Date`,value:m(g)(Q.value.date)},null,8,[`value`]),c(y,{label:`RCT Book Number`,value:Q.value.rtc_book_number},null,8,[`value`])])]),r(`div`,null,[l[6]||=r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Customer Information `,-1),r(`div`,z,[c(y,{label:`Customer Name`},{default:f(()=>[r(`div`,oe,h(Q.value.customer?.name||`-`),1),Q.value.customer?.code?(u(),o(`div`,B,` Code: `+h(Q.value.customer.code),1)):a(``,!0)]),_:1}),c(y,{label:`Payment Term`},{default:f(()=>[r(`div`,V,h(Q.value.customer_payment_term?`${Q.value.customer_payment_term.name} (${Q.value.customer_payment_term.days} days)`:`-`),1)]),_:1})])]),r(`div`,null,[l[7]||=r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Payment Details `,-1),r(`div`,H,[c(y,{label:`Currency`,value:Q.value.currency?.name?`${Q.value.currency.name} (${Q.value.currency.code})`:`-`},null,8,[`value`]),m(v)(Q.value.currency.code)?a(``,!0):(u(),i(y,{key:0,label:`Currency Rate`,value:Q.value.currency_rate*1},null,8,[`value`])),c(y,{label:`Amount (Customer)`},{default:f(()=>[r(`div`,U,h(m(_)(Q.value.amount,!0,Q.value.currency)),1)]),_:1}),m(v)(Q.value.currency.code)?a(``,!0):(u(),i(y,{key:1,label:`Amount (USD)`},{default:f(()=>[r(`div`,W,h(m(_)(Q.value.amount_usd,!0)),1)]),_:1}))])]),r(`div`,null,[l[8]||=r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Approval Details `,-1),r(`div`,G,[c(y,{label:`Account`},{default:f(()=>[r(`div`,K,h(Q.value.account?.name||`-`),1),Q.value.account?.account_number?(u(),o(`div`,q,` Account Number: `+h(Q.value.account.account_number),1)):a(``,!0)]),_:1}),c(y,{label:`Approved By`},{default:f(()=>[r(`div`,se,h(Q.value.approved_by_user?.name||`-`),1),Q.value.approved_by_user?.email?(u(),o(`div`,ce,h(Q.value.approved_by_user.email),1)):a(``,!0)]),_:1}),c(y,{label:`Approval Date`,value:m(g)(Q.value.approved_at)},null,8,[`value`])])]),Q.value.note||Q.value.approve_note?(u(),o(`div`,le,[l[9]||=r(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Notes `,-1),r(`div`,ue,[Q.value.note?(u(),i(y,{key:0,label:`Payment Notes`},{default:f(()=>[r(`div`,de,h(Q.value.note),1)]),_:1})):a(``,!0),Q.value.approve_note?(u(),i(y,{key:1,label:`Approval Notes`},{default:f(()=>[r(`div`,fe,h(Q.value.approve_note),1)]),_:1})):a(``,!0)])])):a(``,!0),r(`div`,pe,[r(`button`,{type:`button`,onClick:$,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[c(m(d),{class:`h-4 w-4 mr-2`}),l[10]||=s(` Back to Payments `,-1)])])])])])):Z.value?a(``,!0):(u(),o(`div`,me,[c(m(ie),{class:`mx-auto h-12 w-12 text-red-400`}),l[11]||=r(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment not found`,-1),l[12]||=r(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The payment you're looking for doesn't exist or has been deleted. `,-1),r(`div`,{class:`mt-6`},[r(`button`,{onClick:$,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payments `)])]))])]))}}),Y=J;export{Y as default};