import{C as e,R as t,U as ee,W as n,a$ as r,a7 as te,aB as ne,aC as i,aE as a,aF as o,aH as s,aI as c,aJ as l,aL as u,aN as d,aO as f,aQ as p,aU as m,aX as h,aY as g,an as re,ao as ie,az as ae}from"./index-BAD4uQTp.js";import{b as oe}from"./useAuth-B5lgoxLT.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import{b as _,c as v,d as y,f as b}from"./common-DPsEy-Xi.js";import"./Modal-Ck7_9jbA.js";import{b as x,c as S}from"./CustomerReturnMarkReceived-BEqeIAYW.js";const C={class:`max-w-7xl mx-auto sm:px-6 lg:px-8 py-6`},w={class:`mb-6`},T={class:`flex items-center justify-between`},E={key:0,class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},D={class:`flex items-center space-x-3`},O={key:0,class:`flex justify-center items-center py-8`},k={key:1,class:`space-y-6`},A={class:`flex items-center space-x-3`},j={key:0,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200`},M={key:1,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200`},N={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200`},P={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},F={class:`px-6 py-4`},I={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},L={class:`mt-1 text-sm text-gray-900 dark:text-white font-mono`},R={class:`mt-1 text-sm text-gray-900 dark:text-white`},z={class:`mt-1 text-sm text-gray-900 dark:text-white`},B={class:`mt-1 text-sm text-gray-900 dark:text-white`},V={class:`mt-1 text-sm text-gray-900 dark:text-white`},H={class:`mt-1 text-sm text-gray-900 dark:text-white`},U={key:0},W={class:`mt-1 text-sm text-gray-900 dark:text-white`},G={key:0,class:`mt-6`},K={class:`mt-1 text-sm text-gray-900 dark:text-white`},q={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},se={class:`px-6 py-4`},ce={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},le={class:`mt-1 text-sm text-gray-900 dark:text-white`},ue={class:`mt-1 text-sm text-gray-900 dark:text-white`},de={key:0,class:`mt-6`},fe={class:`mt-1 text-sm text-gray-900 dark:text-white`},pe={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},me={class:`px-6 py-4`},he={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},ge={class:`mt-1 text-sm text-gray-900 dark:text-white`},_e={class:`mt-1 text-sm text-gray-900 dark:text-white`},ve={key:0,class:`mt-6`},ye={class:`mt-1 text-sm text-gray-900 dark:text-white`},be={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},xe={class:`overflow-x-auto`},Se={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Ce={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},we={class:`px-6 py-4 whitespace-nowrap`},Te={class:`flex items-center`},Ee={class:`flex-shrink-0 h-10 w-10`},De=[`src`,`alt`],Oe={key:1,class:`h-10 w-10 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center`},ke={class:`ml-4`},Ae={class:`text-sm font-medium text-gray-900 dark:text-white`},je={class:`text-sm text-gray-500 dark:text-gray-400`},Me={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ne={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Pe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Fe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ie={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Le={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Re={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900 dark:text-white`},ze={class:`px-6 py-4 text-right`},Be={key:0,class:`px-6 py-4 text-right`},Ve={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},He={class:`px-6 py-4`},Ue={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-4`},We={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ge={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ke={class:`mt-1 text-sm text-gray-900 dark:text-white`};var J=l({__name:`ViewPage`,setup(l){let J=re(),Y=ie(),qe=S(),{isWarehouseManager:X,isSuperAdmin:Je,isAdmin:Ye,isSalesman:Xe}=oe(),Z=h(null),Q=h(!0),$=h(!1),Ze=ne(()=>{if(Xe)return!1;if(X||Je||Ye)return!0}),Qe=async()=>{try{Q.value=!0;let e=parseInt(J.params.id);Z.value=await qe.fetchReturn(e)}catch(e){console.error(`Error fetching customer return:`,e),Y.push({name:`customer.returns.index`})}finally{Q.value=!1}},$e=e=>{Z.value=e,$.value=!1};return u(()=>{Qe()}),(ne,l)=>{let u=p(`router-link`);return d(),o(`div`,C,[i(`div`,w,[i(`div`,T,[i(`div`,null,[l[2]||=i(`h1`,{class:`text-2xl font-semibold text-gray-900 dark:text-white`},`Customer Return Details`,-1),Z.value?(d(),o(`p`,E,r(Z.value.return_code)+` " `+r(g(v)(Z.value.date)),1)):a(``,!0)]),i(`div`,D,[Ze.value&&Z.value&&!Z.value.is_received?(d(),o(`button`,{key:0,onClick:l[0]||=e=>$.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`},[c(g(t),{class:`h-4 w-4 mr-2`}),l[3]||=s(` Mark as Received `,-1)])):a(``,!0),c(u,{to:{name:`customer.return.index`},class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},{default:m(()=>[c(g(te),{class:`h-4 w-4 mr-2`}),l[4]||=s(` Back to List `,-1)]),_:1,__:[4]})])])]),Q.value?(d(),o(`div`,O,l[5]||=[i(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)])):Z.value?(d(),o(`div`,k,[i(`div`,A,[Z.value.is_received?(d(),o(`span`,j,[c(g(n),{class:`h-4 w-4 mr-1`}),l[6]||=s(` Received `,-1)])):(d(),o(`span`,M,[c(g(ee),{class:`h-4 w-4 mr-1`}),l[7]||=s(` Not Received `,-1)])),i(`span`,N,[c(g(n),{class:`h-4 w-4 mr-1`}),l[8]||=s(` Approved `,-1)])]),i(`div`,P,[l[17]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Information`)],-1),i(`div`,F,[i(`dl`,I,[i(`div`,null,[l[9]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Return Code`,-1),i(`dd`,L,r(Z.value.return_code),1)]),i(`div`,null,[l[10]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Date`,-1),i(`dd`,R,r(g(v)(Z.value.date)),1)]),i(`div`,null,[l[11]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),i(`dd`,z,r(Z.value.customer?.name),1)]),i(`div`,null,[l[12]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),i(`dd`,B,r(Z.value.salesperson?.name),1)]),i(`div`,null,[l[13]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),i(`dd`,V,r(Z.value.warehouse?.name),1)]),i(`div`,null,[l[14]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),i(`dd`,H,r(Z.value.currency?.code),1)]),Z.value.currency_rate?(d(),o(`div`,U,[l[15]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Exchange Rate`,-1),i(`dd`,W,r(Z.value.currency_rate),1)])):a(``,!0)]),Z.value.note?(d(),o(`div`,G,[l[16]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Note`,-1),i(`dd`,K,r(Z.value.note),1)])):a(``,!0)])]),i(`div`,q,[l[21]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),i(`div`,se,[i(`dl`,ce,[i(`div`,null,[l[18]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved By`,-1),i(`dd`,le,r(Z.value.approved_by_user?.name),1)]),i(`div`,null,[l[19]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved At`,-1),i(`dd`,ue,r(g(y)(Z.value.approved_at)),1)])]),Z.value.approve_note?(d(),o(`div`,de,[l[20]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approval Note`,-1),i(`dd`,fe,r(Z.value.approve_note),1)])):a(``,!0)])]),Z.value.is_received?(d(),o(`div`,pe,[l[25]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Receipt Information`)],-1),i(`div`,me,[i(`dl`,he,[i(`div`,null,[l[22]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received By`,-1),i(`dd`,ge,r(Z.value.return_received_by_user?.name),1)]),i(`div`,null,[l[23]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received At`,-1),i(`dd`,_e,r(g(y)(Z.value.return_received_at)),1)])]),Z.value.return_received_note?(d(),o(`div`,ve,[l[24]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Receipt Note`,-1),i(`dd`,ye,r(Z.value.return_received_note),1)])):a(``,!0)])])):a(``,!0),i(`div`,be,[l[29]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Items`)],-1),i(`div`,xe,[i(`table`,Se,[l[28]||=i(`thead`,{class:`bg-gray-50 dark:bg-gray-900`},[i(`tr`,null,[i(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Item`),i(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Quantity`),i(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Unit Price`),i(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[i(`abbr`,{title:`Discount %`},`Dis %`)]),i(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[i(`abbr`,{title:`Tax %`},`TAX %`)]),i(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[i(`abbr`,{title:`TTC price`},`TTC`)]),i(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total`),i(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total USD`)])],-1),i(`tbody`,Ce,[(d(!0),o(ae,null,f(Z.value.items,t=>(d(),o(`tr`,{key:t.id},[i(`td`,we,[i(`div`,Te,[i(`div`,Ee,[t.item?.image?(d(),o(`img`,{key:0,src:t.item.image,alt:t.item?.description,class:`h-10 w-10 rounded object-cover`},null,8,De)):(d(),o(`div`,Oe,[c(g(e),{class:`h-6 w-6 text-gray-400`})]))]),i(`div`,ke,[i(`div`,Ae,r(t.item?.description),1),i(`div`,je,r(t.item_code),1)])])]),i(`td`,Me,r(g(b)(t.quantity)),1),i(`td`,Ne,r(g(_)(t.price,Z.value.currency?.code)),1),i(`td`,Pe,r(g(b)(t.discount_percent)),1),i(`td`,Fe,r(g(b)(t.tax_percent)),1),i(`td`,Ie,r(g(b)(t.ttc_price)),1),i(`td`,Le,r(g(_)(t.total_price,Z.value.currency?.code)),1),i(`td`,Re,r(g(_)(t.total_price_usd,`USD`)),1)]))),128))]),i(`tfoot`,null,[l[26]||=i(`td`,{colspan:`5`},null,-1),l[27]||=i(`td`,{class:`px-6 py-4 text-right`},`Total`,-1),i(`td`,ze,r(g(_)(Z.value.total,Z.value.currency?.code)),1),Z.value.currency?.code===`USD`?a(``,!0):(d(),o(`td`,Be,r(g(_)(Z.value.total_usd,`USD`)),1))])])])]),i(`div`,Ve,[l[33]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Summary`)],-1),i(`div`,He,[i(`dl`,Ue,[i(`div`,null,[l[30]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Volume`,-1),i(`dd`,We,r(g(b)(Z.value.total_volume_cbm))+` cbm`,1)]),i(`div`,null,[l[31]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Weight`,-1),i(`dd`,Ge,r(g(b)(Z.value.total_weight_kg))+` kg`,1)]),i(`div`,null,[l[32]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Items`,-1),i(`dd`,Ke,r(Z.value.items?.length||0),1)])])])])])):a(``,!0),c(x,{show:$.value,"onUpdate:show":l[1]||=e=>$.value=e,"return-order":Z.value,onMarkedReceived:$e},null,8,[`show`,`return-order`])])}}}),Y=J;export{Y as default};