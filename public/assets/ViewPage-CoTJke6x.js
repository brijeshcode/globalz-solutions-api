import{E as e,G as t,J as ee,aH as te,aJ as ne,aK as n,aM as r,aN as i,aP as a,aQ as o,aR as s,aT as re,aV as c,aW as ie,ae,ar as oe,av as se,aw as ce,b3 as l,b4 as u,b7 as d,p as le}from"./index-CZa1HfCv.js";import{b as ue}from"./useAuth-BrCftVS8.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-BFc6-TYF.js";import{b as de}from"./ConfirmationModal-BppNsFRK.js";import{b as fe}from"./itemTransferStore-Cxql3FsK.js";const pe={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},me={class:``},f={class:`mb-8`},p={class:`flex items-center space-x-4 mb-2`},m={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},h={class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},g={class:`flex items-center justify-between`},_={class:`text-lg font-medium text-gray-900 dark:text-white`},v={class:`text-sm text-gray-500 dark:text-gray-400`},y={class:`flex space-x-3`},b={class:`px-6 py-8`},x={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},S={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},C={class:`mt-1 text-sm text-gray-900 dark:text-white`},w={class:`mt-1 text-sm text-gray-900 dark:text-white`},T={class:`mt-1 text-sm text-gray-900 dark:text-white`},E={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},D={class:`flex items-center justify-between mb-4`},O={class:`text-sm text-gray-600 dark:text-gray-400`},k={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},A={key:1,class:`overflow-x-auto`},j={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},M={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},N={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},P={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},F={class:`px-6 py-4 text-sm text-gray-900 dark:text-white`},I={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white`},L={class:`px-6 py-4 text-sm text-gray-500 dark:text-gray-400`},R={class:`bg-gray-50 dark:bg-gray-700`},z={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},he={key:0,class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},ge={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},_e={class:`text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap`},ve={class:`pt-6 border-t border-gray-200 dark:border-gray-700`},B={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},ye={key:0},be={class:`mt-1 text-sm text-gray-900 dark:text-white`},xe={key:1},Se={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ce={key:2},we={class:`mt-1 text-sm text-gray-900 dark:text-white`},Te={key:3},Ee={class:`mt-1 text-sm text-gray-900 dark:text-white`},De={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Oe={class:`px-6 py-8 text-center`};var V=s({__name:`ViewPage`,setup(s){let V=ce(),H=se(),U=oe(),W=fe(),{isSuperAdmin:ke,isAdmin:Ae}=ue(),G=parseInt(H.params.id),K=l(!0),q=l({}),J=l(!1),Y=l(!1),X=ne(()=>ke.value||Ae.value),Z=()=>{V.push({name:`item-transfers.index`})},je=()=>{V.push({name:`item-transfers.edit`,params:{id:G.toString()}})},Me=()=>{J.value=!0},Q=()=>{J.value=!1,Y.value=!1},Ne=async()=>{Y.value=!0;try{await W.deleteItemTransfer(G),U.success(`Item transfer deleted successfully`),V.push({name:`item-transfers.index`})}catch(e){console.error(`Error deleting item transfer:`,e),U.error(`Failed to delete item transfer`)}finally{Y.value=!1,Q()}},Pe=()=>q.value.items?q.value.items.reduce((e,t)=>e+(t.quantity||0),0):0,Fe=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`})},$=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})},Ie=async()=>{K.value=!0;try{let e=await W.fetchItemTransfer(G);q.value=e}catch(e){console.error(`Error loading item transfer:`,e),U.error(`Failed to load item transfer`),Z()}finally{K.value=!1}};return re(async()=>{await Ie()}),(ne,s)=>(c(),i(`div`,pe,[n(`div`,me,[n(`div`,f,[n(`div`,p,[n(`button`,{onClick:Z,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[o(u(ae),{class:`w-5 h-5`})]),s[1]||=n(`div`,null,[n(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Item Transfer Details `),n(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` View item transfer information `)],-1)])]),K.value?(c(),i(`div`,De,[n(`div`,Oe,[o(u(ee),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),s[20]||=n(`p`,{class:`mt-2 text-gray-600 dark:text-gray-400`},`Loading item transfer details...`,-1)])])):(c(),i(`div`,m,[n(`div`,h,[n(`div`,g,[n(`div`,null,[n(`h3`,_,d(q.value.prefix)+d(q.value.code),1),n(`p`,v,` Item Transfer ID: `+d(q.value.id),1)]),n(`div`,y,[X.value?(c(),i(`button`,{key:0,onClick:je,class:`inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[o(u(e),{class:`w-4 h-4 mr-2`}),s[2]||=a(` Edit `,-1)])):r(``,!0),X.value?(c(),i(`button`,{key:1,onClick:Me,class:`inline-flex items-center px-3 py-2 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200`},[o(u(le),{class:`w-4 h-4 mr-2`}),s[3]||=a(` Delete `,-1)])):r(``,!0)])])]),n(`div`,b,[n(`div`,x,[s[7]||=n(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),n(`div`,S,[n(`div`,null,[s[4]||=n(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Transfer Date`,-1),n(`dd`,C,d(Fe(q.value.date)),1)]),n(`div`,null,[s[5]||=n(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`From Warehouse`,-1),n(`dd`,w,d(q.value.from_warehouse?.name||`-`),1)]),n(`div`,null,[s[6]||=n(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`To Warehouse`,-1),n(`dd`,T,d(q.value.to_warehouse?.name||`-`),1)])])]),n(`div`,E,[n(`div`,D,[s[8]||=n(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Transfer Items `,-1),n(`div`,O,` Total Items: `+d(q.value.total_items_count||0)+` | Total Quantity: `+d(q.value.total_quantity||0),1)]),!q.value.items||q.value.items.length===0?(c(),i(`div`,k,[o(u(t),{class:`mx-auto h-12 w-12 text-gray-400`}),s[9]||=n(`h5`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items found`,-1),s[10]||=n(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`This item transfer has no items.`,-1)])):(c(),i(`div`,A,[n(`table`,j,[s[13]||=n(`thead`,{class:`bg-gray-50 dark:bg-gray-700`},[n(`tr`,null,[n(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`#`),n(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Item Code`),n(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Description`),n(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Quantity`),n(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Note`)])],-1),n(`tbody`,M,[(c(!0),i(te,null,ie(q.value.items,(e,t)=>(c(),i(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[n(`td`,N,d(t+1),1),n(`td`,P,d(e.item_code),1),n(`td`,F,d(e.item?.short_name||e.item?.description||`-`),1),n(`td`,I,d(e.quantity),1),n(`td`,L,d(e.note||`-`),1)]))),128))]),n(`tfoot`,R,[n(`tr`,null,[s[11]||=n(`td`,{colspan:`4`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Total Quantity:`,-1),n(`td`,z,d(Pe()),1),s[12]||=n(`td`,null,null,-1)])])])]))]),q.value.note?(c(),i(`div`,he,[s[14]||=n(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Notes `,-1),n(`div`,ge,[n(`p`,_e,d(q.value.note),1)])])):r(``,!0),n(`div`,ve,[s[19]||=n(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Audit Information `,-1),n(`div`,B,[q.value.created_by?(c(),i(`div`,ye,[s[15]||=n(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created By`,-1),n(`dd`,be,d(q.value.created_by.name),1)])):r(``,!0),q.value.created_at?(c(),i(`div`,xe,[s[16]||=n(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created At`,-1),n(`dd`,Se,d($(q.value.created_at)),1)])):r(``,!0),q.value.updated_by?(c(),i(`div`,Ce,[s[17]||=n(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Updated By`,-1),n(`dd`,we,d(q.value.updated_by.name),1)])):r(``,!0),q.value.updated_at?(c(),i(`div`,Te,[s[18]||=n(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated`,-1),n(`dd`,Ee,d($(q.value.updated_at)),1)])):r(``,!0)])])])]))]),o(de,{show:J.value,"onUpdate:show":s[0]||=e=>J.value=e,type:`delete`,title:`Delete Item Transfer ${q.value.code}`,message:`Are you sure you want to delete item transfer '${q.value.code}'? This action can be undone by restoring from trash.`,"confirm-text":`Delete Item Transfer`,"loading-text":`Deleting...`,loading:Y.value,onConfirm:Ne,onCancel:Q},null,8,[`show`,`title`,`message`,`loading`])]))}}),H=V;export{H as default};