import{$ as e,A as t,O as ee,W as n,aA as r,aB as te,aD as i,aF as a,aP as o,aQ as s,aT as c,ac as ne,ag as re,ah as ie,au as l,aw as u,ax as d,az as f,i as ae,r as oe,s as se,w as ce}from"./index-DxFhYz3N.js";import{b as le}from"./useAuth-CJHqS6uE.js";import"./GlobalConfig-Dep5CV3r.js";import"./accountsStore-7UqNtbMX.js";import"./tableUtils-jdfVzp2e.js";import{b as p,c as m}from"./common-Cukj2-S-.js";import{b as h}from"./customerPaymentOrdersStore-CyHruR6e.js";import"./Modal-BNF2z9X9.js";import"./usersStore-DWNFwcAa.js";import{b as g}from"./CustomerPaymentApprove-jqTz95_U.js";const _={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},v={class:``},y={class:`mb-8`},b={class:`flex items-center justify-between`},x={class:`flex items-center space-x-4`},S={class:`text-sm text-gray-600 dark:text-gray-400`},C={key:0,class:`flex space-x-3`},w={key:0,class:`flex items-center justify-center py-12`},T={key:1,class:`space-y-6`},E={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-6`},D={class:`flex items-center justify-between`},O={class:`flex items-center space-x-4`},k={class:`flex-shrink-0`},A={class:`h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},j={class:`text-lg font-medium text-gray-900 dark:text-white`},M={class:`text-sm text-gray-500 dark:text-gray-400`},N={class:`text-right`},P={class:`mb-2`},F={key:0,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`},I={key:1,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`},L={class:`text-2xl font-bold text-gray-900 dark:text-white`},R={class:`text-sm text-gray-500 dark:text-gray-400`},z={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},B={class:`px-6 py-4`},V={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},H={class:`mt-1 text-sm text-gray-900 dark:text-white`},U={class:`mt-1 text-sm text-gray-900 dark:text-white`},W={class:`mt-1 text-sm text-gray-900 dark:text-white`},ue={class:`mt-1 text-sm text-gray-900 dark:text-white`},de={key:0,class:`text-gray-500 dark:text-gray-400`},fe={class:`mt-1 text-sm text-gray-900 dark:text-white`},pe={key:0,class:`text-gray-500 dark:text-gray-400`},me={class:`mt-1 text-sm text-gray-900 dark:text-white`},he={key:0,class:`text-gray-500 dark:text-gray-400`},ge={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},_e={class:`px-6 py-4`},ve={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},ye={class:`mt-1 text-sm text-gray-900 dark:text-white`},be={class:`mt-1 text-sm text-gray-900 dark:text-white`},xe={class:`mt-1 text-sm text-gray-900 dark:text-white`},Se={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ce={class:`mt-1 text-sm text-gray-900 dark:text-white`},we={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Te={class:`px-6 py-4`},Ee={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},De={class:`mt-1 text-sm text-gray-900 dark:text-white`},Oe={class:`mt-1 text-sm text-gray-900 dark:text-white`},ke={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ae={key:0,class:`md:col-span-2 lg:col-span-3`},je={class:`mt-1 text-sm text-gray-900 dark:text-white`},Me={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ne={class:`px-6 py-4`},Pe={class:`text-sm text-gray-900 dark:text-white`},Fe={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ie={class:`px-6 py-4`},Le={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Re={class:`mt-1 text-sm text-gray-900 dark:text-white`},ze={class:`text-xs text-gray-500 dark:text-gray-400`},Be={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ve={class:`text-xs text-gray-500 dark:text-gray-400`},He={key:2,class:`text-center py-12`};var G=te({__name:`ViewPage`,setup(te){let G=ie(),K=re(),q=ne(),J=h(),{isAdmin:Ue,isSuperAdmin:We}=le(),Y=o(!1),X=o(null),Z=o(!1),Q=()=>{G.push({name:`customer.payment-orders.index`})},Ge=()=>{X.value&&G.push({name:`customer.payment-orders.edit`,params:{id:X.value.id}})},Ke=()=>{window.print()},qe=()=>{X.value&&(Z.value=!0)},Je=async e=>{q.success(`Payment order approved successfully`),await $(),Z.value=!1},$=async()=>{let e=Number(K.params.id);if(!e){q.error(`Invalid payment order ID`),Q();return}Y.value=!0;try{let t=await J.fetchPaymentOrder(e);X.value=t}catch{q.error(`Failed to load payment order`),X.value=null}finally{Y.value=!1}};return i(()=>{$()}),(te,i)=>(a(),d(`div`,_,[l(`div`,v,[l(`div`,y,[l(`div`,b,[l(`div`,x,[l(`button`,{onClick:Q,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[r(s(e),{class:`w-5 h-5`})]),l(`div`,null,[i[1]||=l(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Payment Order Details `,-1),l(`p`,S,c(X.value?`${X.value.prefix}-${X.value.code}`:`Loading...`),1)])]),X.value&&!Y.value?(a(),d(`div`,C,[!X.value.approved_at&&(s(Ue)||s(We))?(a(),d(`button`,{key:0,onClick:qe,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[r(s(n),{class:`h-4 w-4 mr-2`}),i[2]||=f(` Approve Payment `,-1)])):u(``,!0),X.value.approved_at?u(``,!0):(a(),d(`button`,{key:1,onClick:Ge,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[r(s(ce),{class:`h-4 w-4 mr-2`}),i[3]||=f(` Edit Order `,-1)])),l(`button`,{onClick:Ke,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[r(s(se),{class:`h-4 w-4 mr-2`}),i[4]||=f(` Print `,-1)])])):u(``,!0)])]),Y.value?(a(),d(`div`,w,[r(s(t),{class:`h-8 w-8 animate-spin text-blue-600`}),i[5]||=l(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment order...`,-1)])):X.value?(a(),d(`div`,T,[l(`div`,E,[l(`div`,D,[l(`div`,O,[l(`div`,k,[l(`div`,A,[r(s(oe),{class:`h-8 w-8 text-blue-600 dark:text-blue-400`})])]),l(`div`,null,[l(`h3`,j,c(X.value.prefix)+`-`+c(X.value.code),1),l(`p`,M,` Created `+c(s(m)(X.value.created_at)),1)])]),l(`div`,N,[l(`div`,P,[X.value.approved_at?(a(),d(`span`,F,[r(s(n),{class:`h-4 w-4 mr-1`}),i[6]||=f(` Approved `,-1)])):(a(),d(`span`,I,[r(s(ee),{class:`h-4 w-4 mr-1`}),i[7]||=f(` Pending Approval `,-1)]))]),l(`div`,L,c(s(p)(X.value.amount_usd)),1),l(`div`,R,` Local: `+c(s(p)(X.value.amount)),1)])])]),l(`div`,z,[i[14]||=l(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[l(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Basic Information`)],-1),l(`div`,B,[l(`dl`,V,[l(`div`,null,[i[8]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Payment Date`,-1),l(`dd`,H,c(s(m)(X.value.date)),1)]),l(`div`,null,[i[9]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Prefix`,-1),l(`dd`,U,c(X.value.prefix),1)]),l(`div`,null,[i[10]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`RTC Book Number`,-1),l(`dd`,W,c(X.value.rtc_book_number),1)]),l(`div`,null,[i[11]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),l(`dd`,ue,[f(c(X.value.customer?.name||`-`)+` `,1),X.value.customer?.code?(a(),d(`span`,de,` (`+c(X.value.customer.code)+`) `,1)):u(``,!0)])]),l(`div`,null,[i[12]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),l(`dd`,fe,[f(c(X.value.currency?.name||`-`)+` `,1),X.value.currency?.code?(a(),d(`span`,pe,` (`+c(X.value.currency.code)+`) `,1)):u(``,!0)])]),l(`div`,null,[i[13]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Payment Term`,-1),l(`dd`,me,[f(c(X.value.customer_payment_term?.name||`-`)+` `,1),X.value.customer_payment_term?.days?(a(),d(`span`,he,` (`+c(X.value.customer_payment_term.days)+` days) `,1)):u(``,!0)])])])])]),l(`div`,ge,[i[20]||=l(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[l(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Financial Details`)],-1),l(`div`,_e,[l(`dl`,ve,[l(`div`,null,[i[15]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency Rate`,-1),l(`dd`,ye,c(X.value.currency_rate),1)]),l(`div`,null,[i[16]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Amount`,-1),l(`dd`,be,c(s(p)(X.value.amount)),1)]),l(`div`,null,[i[17]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Amount USD`,-1),l(`dd`,xe,c(s(p)(X.value.amount_usd)),1)]),l(`div`,null,[i[18]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Credit Limit`,-1),l(`dd`,Se,c(s(p)(X.value.credit_limit)),1)]),l(`div`,null,[i[19]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Payment Amount`,-1),l(`dd`,Ce,c(s(p)(X.value.last_payment_amount)),1)])])])]),X.value.approved_at?(a(),d(`div`,we,[i[25]||=l(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[l(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),l(`div`,Te,[l(`dl`,Ee,[l(`div`,null,[i[21]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved By`,-1),l(`dd`,De,c(X.value.approved_by_user?.name||`-`),1)]),l(`div`,null,[i[22]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved At`,-1),l(`dd`,Oe,c(s(m)(X.value.approved_at)),1)]),l(`div`,null,[i[23]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Account`,-1),l(`dd`,ke,c(X.value.account?.name||`-`),1)]),X.value.approve_note?(a(),d(`div`,Ae,[i[24]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approval Note`,-1),l(`dd`,je,c(X.value.approve_note),1)])):u(``,!0)])])])):u(``,!0),X.value.note?(a(),d(`div`,Me,[i[26]||=l(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[l(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Notes`)],-1),l(`div`,Ne,[l(`p`,Pe,c(X.value.note),1)])])):u(``,!0),l(`div`,Fe,[i[29]||=l(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[l(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Audit Information`)],-1),l(`div`,Ie,[l(`dl`,Le,[l(`div`,null,[i[27]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created By`,-1),l(`dd`,Re,c(X.value.created_by_user?.name||`-`),1),l(`dd`,ze,c(s(m)(X.value.created_at)),1)]),l(`div`,null,[i[28]||=l(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated By`,-1),l(`dd`,Be,c(X.value.updated_by_user?.name||`-`),1),l(`dd`,Ve,c(s(m)(X.value.updated_at)),1)])])])])])):Y.value?u(``,!0):(a(),d(`div`,He,[r(s(ae),{class:`mx-auto h-12 w-12 text-red-400`}),i[30]||=l(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment order not found`,-1),i[31]||=l(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The payment order you're looking for doesn't exist or has been deleted. `,-1),l(`div`,{class:`mt-6`},[l(`button`,{onClick:Q,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payment Orders `)])]))]),r(g,{show:Z.value,"onUpdate:show":i[0]||=e=>Z.value=e,"payment-order":X.value,onApproved:Je},null,8,[`show`,`payment-order`])]))}}),K=G;export{K as default};