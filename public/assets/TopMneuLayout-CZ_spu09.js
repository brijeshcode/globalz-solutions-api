import{a2 as e,a3 as t,aA as n,aC as r,aD as i,aE as a,aF as o,aL as s,aM as c,aO as l,aP as u,aQ as d,aS as f,ac as p,ad as m,ae as h,ag as ee,ai as g,an as _,aq as v,as as y,at as b,au as x,aw as S,ay as C,az as w,b as te}from"./index-stkS_7oq.js";import{b as ne}from"./useAuth-DETex2od.js";import{b as re}from"./GlobalConfig-BnwaQAhg.js";const T=[`title`],E={key:0,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},D={key:1,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`};var O=n({__name:`DarkModeToggle`,setup(e){let t=p(),{isDarkMode:n}=g(t),{toggleDarkMode:i}=t;return r(()=>{t.initializeDarkMode()}),(e,t)=>(a(),S(`button`,{onClick:t[0]||=(...e)=>u(i)&&u(i)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`,title:u(n)?`Switch to Light Mode`:`Switch to Dark Mode`},[u(n)?(a(),S(`svg`,E,t[1]||=[b(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)])):(a(),S(`svg`,D,t[2]||=[b(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]))],8,T))}}),ie=O;const ae={class:`bg-white dark:bg-gray-800 shadow flex justify-between items-center px-4 py-2 transition-colors duration-200 print:hidden`},oe={class:`flex items-center space-x-2 md:space-x-4`},se={class:`font-bold text-lg`},ce={class:`hidden md:flex space-x-4`},le={key:0,class:`relative`},ue=[`onClick`],de={class:`absolute bg-white dark:bg-gray-700 border dark:border-gray-600 mt-2 shadow-md z-20 min-w-48 rounded-md transition-all duration-200`},fe={class:`flex items-center space-x-2 md:space-x-4`},pe={class:`hidden md:flex items-center space-x-4`},k={key:0,class:`relative`},A=[`onClick`],j={class:`absolute right-0 bg-white dark:bg-gray-700 border dark:border-gray-600 mt-2 shadow-md z-20 min-w-48 rounded-md transition-all duration-200`},M={class:`md:hidden bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-lg transition-all duration-200 print:hidden`},N={class:`px-4 py-2 space-y-2`},P={key:0},F=[`onClick`],I={class:`ml-4 mt-1 space-y-1`},L={class:`md:hidden absolute right-4 top-16 bg-white dark:bg-gray-700 border dark:border-gray-600 shadow-md z-20 min-w-48 rounded-md transition-all duration-200 print:hidden`},R={key:0},z={class:`px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border-b dark:border-gray-600`},me={class:`flex-1 py-4 px-7 print:px-0 print:py-0 bg-gray-200 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200`},he={class:`bg-white dark:bg-gray-800 border-t dark:border-gray-700 px-4 py-3 text-center text-sm text-gray-600 dark:text-gray-400 transition-colors duration-200 print:hidden`};var B=n({__name:`TopMneuLayout`,setup(n){let T=te(),E=ee(),D=p(),{userRole:O}=ne(),{isDarkMode:B}=g(D),V=y(()=>T.user?.name?T.user.name:T.user?.username?T.user.username:T.user?.email?T.user.email.split(`@`)[0]:`Guest`),H=l(!1),U=l({left:null,right:null,mobileLeft:null}),ge=y(()=>new Date().getFullYear()),W=y(()=>O.value?e.value.filter(e=>e.role.length===0||e.role.includes(O.value)).map(e=>({...e,subMenu:e.subMenu?e.subMenu.filter(e=>e.role.length===0||e.role.includes(O.value)):void 0})):[]),G=y(()=>O.value?t.value.map(e=>({...e,subMenu:e.subMenu?e.subMenu.filter(e=>e.role.length===0||e.role.includes(O.value)):void 0})):t.value),K=async()=>{try{await T.logoutUser(),X(),H.value=!1,E.push({name:`login`})}catch(e){console.error(`Logout error:`,e),await T.logoutUser(),E.push({name:`login`})}},q=()=>{H.value=!H.value,H.value&&X()},J=()=>{H.value=!1,U.value.mobileLeft=null},Y=(e,t)=>{let n=e===`mobile-left`?`mobileLeft`:e;U.value[n]===t?U.value[n]=null:(Object.keys(U.value).forEach(e=>{e!==n&&(U.value[e]=null)}),U.value[n]=t),e===`right`&&(H.value=!1)},X=()=>{U.value={left:null,right:null,mobileLeft:null}},Z=e=>e.replace(`{username}`,V.value),Q=e=>{let t=e.target;!t.closest(`.relative`)&&!t.closest(`button`)&&(X(),H.value=!1)},$=e=>{e.key===`Escape`&&(X(),H.value=!1)};return r(()=>{T.loadFromStorage(),document.addEventListener(`click`,Q),document.addEventListener(`keydown`,$)}),i(()=>{document.removeEventListener(`click`,Q),document.removeEventListener(`keydown`,$)}),(e,t)=>(a(),S(`div`,{class:d([`min-h-screen flex flex-col`,{dark:u(B)}])},[b(`header`,ae,[b(`div`,oe,[b(`button`,{onClick:q,class:`md:hidden p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},t[1]||=[b(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[b(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 6h16M4 12h16M4 18h16`})],-1)]),b(`div`,se,[w(u(m),{to:{name:`dashboard`},class:`block px-2 py-1 rounded text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},{default:s(()=>[C(f(u(re).appname),1)]),_:1})]),b(`nav`,ce,[(a(!0),S(v,null,o(W.value,e=>(a(),S(v,{key:e.title},[e.subMenu?(a(),S(`div`,le,[b(`button`,{onClick:t=>Y(`left`,e.title),class:`text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white transition-colors duration-200 flex items-center space-x-1`},[b(`span`,null,f(e.title),1),(a(),S(`svg`,{class:d([`w-4 h-4 transform transition-transform duration-200`,{"rotate-180":U.value.left===e.title}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},t[2]||=[b(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))],8,ue),c(b(`div`,de,[(a(!0),S(v,null,o(e.subMenu,e=>(a(),x(u(m),{key:e.title,to:{name:e.route},onClick:X,class:`block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 first:rounded-t-md last:rounded-b-md`},{default:s(()=>[C(f(e.title),1)]),_:2},1032,[`to`]))),128))],512),[[_,U.value.left===e.title]])])):(a(),x(u(m),{key:1,to:{name:e.route},class:`text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:s(()=>[C(f(e.title),1)]),_:2},1032,[`to`]))],64))),128))])]),b(`div`,fe,[w(ie),b(`div`,pe,[(a(!0),S(v,null,o(G.value,e=>(a(),S(v,{key:e.title},[e.subMenu?(a(),S(`div`,k,[b(`button`,{onClick:t=>Y(`right`,e.title),class:`text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 flex items-center space-x-1`},[b(`span`,null,f(Z(e.title)),1),(a(),S(`svg`,{class:d([`w-4 h-4 transform transition-transform duration-200`,{"rotate-180":U.value.right===e.title}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},t[3]||=[b(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))],8,A),c(b(`div`,j,[(a(!0),S(v,null,o(e.subMenu,e=>(a(),S(v,{key:e.title},[e.route===`logout`?(a(),S(`button`,{key:0,onClick:K,class:`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 first:rounded-t-md last:rounded-b-md`},f(e.title),1)):(a(),x(u(m),{key:1,to:{name:e.route},onClick:X,class:`block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 first:rounded-t-md last:rounded-b-md`},{default:s(()=>[C(f(e.title),1)]),_:2},1032,[`to`]))],64))),128))],512),[[_,U.value.right===e.title]])])):(a(),x(u(m),{key:1,to:{name:e.route},class:`text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:s(()=>[C(f(Z(e.title)),1)]),_:2},1032,[`to`]))],64))),128))]),b(`button`,{onClick:t[0]||=e=>Y(`right`,`mobile-user`),class:`md:hidden p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},t[4]||=[b(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[b(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z`})],-1)])])]),c(b(`div`,M,[b(`nav`,N,[(a(!0),S(v,null,o(W.value,e=>(a(),S(v,{key:e.title},[e.subMenu?(a(),S(`div`,P,[b(`button`,{onClick:t=>Y(`mobile-left`,e.title),class:`w-full text-left px-2 py-2 text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200 flex items-center justify-between`},[b(`span`,null,f(e.title),1),(a(),S(`svg`,{class:d([`w-4 h-4 transform transition-transform duration-200`,{"rotate-180":U.value.mobileLeft===e.title}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},t[5]||=[b(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))],8,F),c(b(`div`,I,[(a(!0),S(v,null,o(e.subMenu,e=>(a(),x(u(m),{key:e.title,to:{name:e.route},onClick:J,class:`block px-2 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200`},{default:s(()=>[C(f(e.title),1)]),_:2},1032,[`to`]))),128))],512),[[_,U.value.mobileLeft===e.title]])])):(a(),x(u(m),{key:1,to:{name:e.route},onClick:J,class:`block px-2 py-2 text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200`},{default:s(()=>[C(f(e.title),1)]),_:2},1032,[`to`]))],64))),128))])],512),[[_,H.value]]),c(b(`div`,L,[(a(!0),S(v,null,o(G.value,e=>(a(),S(v,{key:e.title},[e.subMenu?(a(),S(`div`,R,[b(`div`,z,f(Z(e.title)),1),(a(!0),S(v,null,o(e.subMenu,e=>(a(),S(v,{key:e.title},[e.route===`logout`?(a(),S(`button`,{key:0,onClick:K,class:`w-full text-left px-6 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},f(e.title),1)):(a(),x(u(m),{key:1,to:{name:e.route},onClick:X,class:`block px-6 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:s(()=>[C(f(e.title),1)]),_:2},1032,[`to`]))],64))),128))])):(a(),x(u(m),{key:1,to:{name:e.route},onClick:X,class:`block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:s(()=>[C(f(Z(e.title)),1)]),_:2},1032,[`to`]))],64))),128))],512),[[_,U.value.right===`mobile-user`]]),b(`main`,me,[w(u(h))]),b(`footer`,he,[b(`p`,null,`All rights reserved © `+f(ge.value),1)])],2))}}),V=B;export{V as default};