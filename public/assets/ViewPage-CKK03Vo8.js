import{D as e,M as t,_ as ee,a4 as n,aB as r,aC as i,aE as a,aF as o,aG as te,aI as s,aK as c,aU as l,aV as u,aY as d,ag as f,ak as ne,al as re,az as p,j as ie,u as ae}from"./index-7Ssl74Yp.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import{b as m,c as h}from"./common-DPsEy-Xi.js";import{b as oe}from"./customerPaymentsStore-Q5zajcNv.js";const g={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},_={class:``},v={class:`mb-8`},y={class:`flex items-center justify-between`},b={class:`flex items-center space-x-4`},x={class:`text-sm text-gray-600 dark:text-gray-400`},S={key:0,class:`flex space-x-3`},C={key:0,class:`flex items-center justify-center py-12`},w={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},T={class:`px-6 py-8`},E={class:`mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md`},D={class:`flex items-center justify-between`},O={class:`flex`},k={class:`ml-3`},A={class:`mt-1 text-sm text-green-700 dark:text-green-300`},j={class:`text-right`},M={class:`text-lg font-bold text-green-900 dark:text-green-100`},N={class:`space-y-8`},P={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},F={class:`text-sm text-gray-900 dark:text-white font-medium`},I={class:`text-sm text-gray-900 dark:text-white`},L={class:`text-sm text-gray-900 dark:text-white`},R={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},z={class:`text-sm text-gray-900 dark:text-white`},B={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},V={class:`text-sm text-gray-900 dark:text-white`},H={class:`text-sm text-gray-900 dark:text-white`},se={class:`text-sm text-gray-900 dark:text-white`},U={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},W={class:`text-sm text-gray-900 dark:text-white`},G={class:`text-sm text-gray-900 dark:text-white`},K={class:`text-lg font-semibold text-gray-900 dark:text-white`},ce={class:`text-lg font-semibold text-green-600 dark:text-green-400`},le={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},ue={class:`text-sm text-gray-900 dark:text-white`},de={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},fe={class:`text-sm text-gray-900 dark:text-white`},pe={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},me={class:`text-sm text-gray-900 dark:text-white`},he={key:0},ge={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},_e={key:0},ve={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},ye={key:1},be={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},xe={class:`flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700`},Se={key:2,class:`text-center py-12`};var q=te({__name:`ViewPage`,setup(te){let q=re(),J=ne(),Y=f(),X=oe(),Z=l(!1),Q=l(null),$=()=>{q.push({name:`customer.payments.index`})},Ce=()=>{q.push({name:`customer.payments.preview`,params:{id:J.params.id}})},we=()=>{window.print()},Te=async()=>{let e=Number(J.params.id);if(!e){Y.error(`Invalid payment ID`),$();return}Z.value=!0;try{let t=await X.fetchPayment(e);Q.value=t}catch{Y.error(`Failed to load payment`),Q.value=null}finally{Z.value=!1}};return s(async()=>{await Te()}),(te,s)=>(c(),i(`div`,g,[p(`div`,_,[p(`div`,v,[p(`div`,y,[p(`div`,b,[p(`button`,{onClick:$,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[o(u(n),{class:`w-5 h-5`})]),p(`div`,null,[s[0]||=p(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Payment Details `,-1),p(`p`,x,d(Q.value?`${Q.value.prefix}-${Q.value.code}`:`Loading...`),1)])]),Q.value&&!Z.value?(c(),i(`div`,S,[p(`button`,{onClick:Ce,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[o(u(t),{class:`h-4 w-4 mr-2`}),s[1]||=a(` Preview Receipt `,-1)]),p(`button`,{onClick:we,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[o(u(ae),{class:`h-4 w-4 mr-2`}),s[2]||=a(` Print `,-1)])])):r(``,!0)])]),Z.value?(c(),i(`div`,C,[o(u(e),{class:`h-8 w-8 animate-spin text-blue-600`}),s[3]||=p(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment details...`,-1)])):Q.value?(c(),i(`div`,w,[p(`div`,T,[p(`div`,E,[p(`div`,D,[p(`div`,O,[o(u(ee),{class:`h-5 w-5 text-green-400`}),p(`div`,k,[s[4]||=p(`h3`,{class:`text-sm font-medium text-green-800 dark:text-green-200`},` Payment Approved `,-1),p(`div`,A,[p(`p`,null,`Approved by `+d(Q.value.approved_by_user?.name||`N/A`)+` on `+d(u(h)(Q.value.approved_at)),1)])])]),p(`div`,j,[s[5]||=p(`div`,{class:`text-sm font-medium text-green-800 dark:text-green-200`},`Total Amount`,-1),p(`div`,M,d(u(m)(Q.value.amount_usd)),1)])])]),p(`div`,N,[p(`div`,null,[s[9]||=p(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Basic Information `,-1),p(`div`,P,[p(`div`,null,[s[6]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Payment Code `,-1),p(`div`,F,d(Q.value.prefix)+`-`+d(Q.value.code),1)]),p(`div`,null,[s[7]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Payment Date `,-1),p(`div`,I,d(u(h)(Q.value.date)),1)]),p(`div`,null,[s[8]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` RTC Book Number `,-1),p(`div`,L,d(Q.value.rtc_book_number),1)])])]),p(`div`,null,[s[14]||=p(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Customer Information `,-1),p(`div`,R,[p(`div`,null,[s[10]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Customer Name `,-1),p(`div`,z,d(Q.value.customer?.name||`-`),1),Q.value.customer?.code?(c(),i(`div`,B,` Code: `+d(Q.value.customer.code),1)):r(``,!0)]),p(`div`,null,[s[11]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Payment Term `,-1),p(`div`,V,d(Q.value.customer_payment_term?`${Q.value.customer_payment_term.name} (${Q.value.customer_payment_term.days} days)`:`-`),1)]),p(`div`,null,[s[12]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Credit Limit `,-1),p(`div`,H,d(u(m)(Q.value.credit_limit)),1)]),p(`div`,null,[s[13]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Last Payment Amount `,-1),p(`div`,se,d(u(m)(Q.value.last_payment_amount)),1)])])]),p(`div`,null,[s[19]||=p(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Payment Details `,-1),p(`div`,U,[p(`div`,null,[s[15]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Currency `,-1),p(`div`,W,d(Q.value.currency?.name?`${Q.value.currency.name} (${Q.value.currency.code})`:`-`),1)]),p(`div`,null,[s[16]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Currency Rate `,-1),p(`div`,G,d(Q.value.currency_rate*1),1)]),p(`div`,null,[s[17]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Amount (Customer) `,-1),p(`div`,K,d(u(m)(Q.value.amount,Q.value.currency.code)),1)]),p(`div`,null,[s[18]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Amount (USD) `,-1),p(`div`,ce,d(u(m)(Q.value.amount_usd)),1)])])]),p(`div`,null,[s[23]||=p(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Approval Details `,-1),p(`div`,le,[p(`div`,null,[s[20]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account `,-1),p(`div`,ue,d(Q.value.account?.name||`-`),1),Q.value.account?.account_number?(c(),i(`div`,de,` Account Number: `+d(Q.value.account.account_number),1)):r(``,!0)]),p(`div`,null,[s[21]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Approved By `,-1),p(`div`,fe,d(Q.value.approved_by_user?.name||`-`),1),Q.value.approved_by_user?.email?(c(),i(`div`,pe,d(Q.value.approved_by_user.email),1)):r(``,!0)]),p(`div`,null,[s[22]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Approval Date `,-1),p(`div`,me,d(u(h)(Q.value.approved_at)),1)])])]),Q.value.note||Q.value.approve_note?(c(),i(`div`,he,[s[26]||=p(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Notes `,-1),p(`div`,ge,[Q.value.note?(c(),i(`div`,_e,[s[24]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Payment Notes `,-1),p(`div`,ve,d(Q.value.note),1)])):r(``,!0),Q.value.approve_note?(c(),i(`div`,ye,[s[25]||=p(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Approval Notes `,-1),p(`div`,be,d(Q.value.approve_note),1)])):r(``,!0)])])):r(``,!0),p(`div`,xe,[p(`button`,{type:`button`,onClick:$,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[o(u(n),{class:`h-4 w-4 mr-2`}),s[27]||=a(` Back to Payments `,-1)])])])])])):Z.value?r(``,!0):(c(),i(`div`,Se,[o(u(ie),{class:`mx-auto h-12 w-12 text-red-400`}),s[28]||=p(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment not found`,-1),s[29]||=p(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The payment you're looking for doesn't exist or has been deleted. `,-1),p(`div`,{class:`mt-6`},[p(`button`,{onClick:$,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payments `)])]))])]))}}),J=q;export{J as default};