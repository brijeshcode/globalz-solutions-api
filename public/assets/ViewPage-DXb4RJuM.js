import{C as e,R as t,W as n,a$ as r,a7 as ee,aB as i,aC as a,aD as te,aE as o,aF as s,aH as c,aI as l,aJ as u,aL as d,aN as f,aO as p,aQ as ne,aU as m,aX as h,aY as g,an as re,ao as ie,az as ae,m as oe}from"./index-BwKalbrN.js";import{b as se}from"./useAuth-BsIXqvhY.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import"./StatusBadge-D0dUjMk7.js";import{b as _,c as v,d as y,f as b}from"./common-DPsEy-Xi.js";import"./Modal-Dyb5s5Dj.js";import{b as x}from"./CustomerReturnMarkReceived-CEDQ4icA.js";import{b as S}from"./customerReturnOrdersStore-A9NERqrJ.js";import{b as C}from"./CustomerReturnApprove-BTsTJ9W-.js";const w={class:`max-w-7xl mx-auto sm:px-6 lg:px-8 py-6`},T={class:`mb-6`},E={class:`flex items-center justify-between`},D={key:0,class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},O={class:`flex items-center space-x-3`},k={key:0,class:`flex justify-center items-center py-8`},A={key:1,class:`space-y-6`},j={class:`flex items-center space-x-3`},M={key:0,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200`},N={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},P={class:`px-6 py-4`},F={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},I={class:`mt-1 text-sm text-gray-900 dark:text-white font-mono`},L={class:`mt-1 text-sm text-gray-900 dark:text-white`},R={class:`mt-1 text-sm text-gray-900 dark:text-white`},z={class:`mt-1 text-sm text-gray-900 dark:text-white`},B={class:`mt-1 text-sm text-gray-900 dark:text-white`},V={class:`mt-1 text-sm text-gray-900 dark:text-white`},H={key:0},U={class:`mt-1 text-sm text-gray-900 dark:text-white`},W={key:0,class:`mt-6`},G={class:`mt-1 text-sm text-gray-900 dark:text-white`},K={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ce={class:`px-6 py-4`},q={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},le={class:`mt-1 text-sm text-gray-900 dark:text-white`},ue={class:`mt-1 text-sm text-gray-900 dark:text-white`},de={key:0,class:`mt-6`},fe={class:`mt-1 text-sm text-gray-900 dark:text-white`},pe={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},me={class:`px-6 py-4`},he={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},ge={class:`mt-1 text-sm text-gray-900 dark:text-white`},_e={class:`mt-1 text-sm text-gray-900 dark:text-white`},ve={key:0,class:`mt-6`},ye={class:`mt-1 text-sm text-gray-900 dark:text-white`},be={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},xe={class:`overflow-x-auto`},Se={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Ce={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},we={class:`px-6 py-4 whitespace-nowrap`},Te={class:`flex items-center`},Ee={class:`flex-shrink-0 h-10 w-10`},De=[`src`,`alt`],Oe={key:1,class:`h-10 w-10 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center`},ke={class:`ml-4`},Ae={class:`text-sm font-medium text-gray-900 dark:text-white`},je={class:`text-sm text-gray-500 dark:text-gray-400`},Me={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ne={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Pe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Fe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ie={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Le={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Re={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900 dark:text-white`},ze={class:`px-6 py-4 text-right`},Be={key:0,class:`px-6 py-4 text-right`},Ve={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},He={class:`px-6 py-4`},Ue={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-4`},We={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ge={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ke={class:`mt-1 text-sm text-gray-900 dark:text-white`};var J=u({__name:`ViewPage`,setup(u){let J=re(),Y=ie(),qe=S(),{isAdmin:Je,isWarehouseManager:Ye,hasAnyRole:Xe}=se(),X=h(null),Z=h(!0),Q=h(!1),$=h(!1),Ze=i(()=>Xe([`admin`,`salesman`])),Qe=i(()=>!0),$e=async()=>{try{Z.value=!0;let e=parseInt(J.params.id);X.value=await qe.fetchReturnOrder(e)}catch(e){console.error(`Error fetching return order:`,e),Y.push({name:`customer.return-orders.index`})}finally{Z.value=!1}},et=e=>{X.value=e,Q.value=!1},tt=e=>{X.value=e,$.value=!1};return d(()=>{$e()}),(i,u)=>{let d=ne(`router-link`);return f(),s(`div`,w,[a(`div`,T,[a(`div`,E,[a(`div`,null,[u[4]||=a(`h1`,{class:`text-2xl font-semibold text-gray-900 dark:text-white`},`Return Order Details`,-1),X.value?(f(),s(`p`,D,r(X.value.return_code)+` " `+r(g(v)(X.value.date)),1)):o(``,!0)]),a(`div`,O,[X.value&&!X.value.is_approved&&Ze.value?(f(),te(d,{key:0,to:{name:`customer.return-orders.edit`,params:{id:X.value?.id}},class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},{default:m(()=>[l(g(oe),{class:`h-4 w-4 mr-2`}),u[5]||=c(` Edit `,-1)]),_:1,__:[5]},8,[`to`])):o(``,!0),X.value&&X.value.is_pending&&g(Je)?(f(),s(`button`,{key:1,onClick:u[0]||=e=>Q.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`},[l(g(n),{class:`h-4 w-4 mr-2`}),u[6]||=c(` Approve `,-1)])):o(``,!0),X.value&&X.value.is_approved&&!X.value.is_received&&Qe.value?(f(),s(`button`,{key:2,onClick:u[1]||=e=>$.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`},[l(g(t),{class:`h-4 w-4 mr-2`}),u[7]||=c(` Mark as Received `,-1)])):o(``,!0),l(d,{to:{name:`customer.return-orders.index`},class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},{default:m(()=>[l(g(ee),{class:`h-4 w-4 mr-2`}),u[8]||=c(` Back to List `,-1)]),_:1,__:[8]})])])]),Z.value?(f(),s(`div`,k,u[9]||=[a(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)])):X.value?(f(),s(`div`,A,[a(`div`,j,[X.value.is_received?(f(),s(`span`,M,[l(g(n),{class:`h-4 w-4 mr-1`}),u[10]||=c(` Received `,-1)])):o(``,!0)]),a(`div`,N,[u[19]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Order Information`)],-1),a(`div`,P,[a(`dl`,F,[a(`div`,null,[u[11]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Return Code`,-1),a(`dd`,I,r(X.value.return_code),1)]),a(`div`,null,[u[12]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Date`,-1),a(`dd`,L,r(g(v)(X.value.date)),1)]),a(`div`,null,[u[13]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),a(`dd`,R,r(X.value.customer?.name),1)]),a(`div`,null,[u[14]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),a(`dd`,z,r(X.value.salesperson?.name),1)]),a(`div`,null,[u[15]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),a(`dd`,B,r(X.value.warehouse?.name),1)]),a(`div`,null,[u[16]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),a(`dd`,V,r(X.value.currency?.code),1)]),X.value.currency_rate?(f(),s(`div`,H,[u[17]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Exchange Rate`,-1),a(`dd`,U,r(X.value.currency_rate),1)])):o(``,!0)]),X.value.note?(f(),s(`div`,W,[u[18]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Note`,-1),a(`dd`,G,r(X.value.note),1)])):o(``,!0)])]),X.value.is_approved?(f(),s(`div`,K,[u[23]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),a(`div`,ce,[a(`dl`,q,[a(`div`,null,[u[20]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved By`,-1),a(`dd`,le,r(X.value.approved_by_user?.name),1)]),a(`div`,null,[u[21]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved At`,-1),a(`dd`,ue,r(g(y)(X.value.approved_at)),1)])]),X.value.approve_note?(f(),s(`div`,de,[u[22]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approval Note`,-1),a(`dd`,fe,r(X.value.approve_note),1)])):o(``,!0)])])):o(``,!0),X.value.is_received?(f(),s(`div`,pe,[u[27]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Receipt Information`)],-1),a(`div`,me,[a(`dl`,he,[a(`div`,null,[u[24]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received By`,-1),a(`dd`,ge,r(X.value.return_received_by_user?.name),1)]),a(`div`,null,[u[25]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received At`,-1),a(`dd`,_e,r(g(y)(X.value.return_received_at)),1)])]),X.value.return_received_note?(f(),s(`div`,ve,[u[26]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Receipt Note`,-1),a(`dd`,ye,r(X.value.return_received_note),1)])):o(``,!0)])])):o(``,!0),a(`div`,be,[u[31]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Items`)],-1),a(`div`,xe,[a(`table`,Se,[u[30]||=a(`thead`,{class:`bg-gray-50 dark:bg-gray-900`},[a(`tr`,null,[a(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`item`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Quantity`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Unit Price`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[a(`abbr`,{title:`Discount %`},`Dis %`)]),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[a(`abbr`,{title:`Tax %`},`TAX %`)]),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[a(`abbr`,{title:`ttc price`},`TTC`)]),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total USD`)])],-1),a(`tbody`,Ce,[(f(!0),s(ae,null,p(X.value.items,t=>(f(),s(`tr`,{key:t.id},[a(`td`,we,[a(`div`,Te,[a(`div`,Ee,[t.item?.image?(f(),s(`img`,{key:0,src:t.item.image,alt:t.item.name,class:`h-10 w-10 rounded object-cover`},null,8,De)):(f(),s(`div`,Oe,[l(g(e),{class:`h-6 w-6 text-gray-400`})]))]),a(`div`,ke,[a(`div`,Ae,r(t.item?.name),1),a(`div`,je,r(t.item_code),1)])])]),a(`td`,Me,r(g(b)(t.quantity)),1),a(`td`,Ne,r(g(_)(t.price,X.value.currency?.code)),1),a(`td`,Pe,r(g(b)(t.discount_percent)),1),a(`td`,Fe,r(g(b)(t.tax_percent)),1),a(`td`,Ie,r(g(b)(t.ttc_price)),1),a(`td`,Le,r(g(_)(t.total_price,X.value.currency?.code)),1),a(`td`,Re,r(g(_)(t.total_price_usd,`usd`)),1)]))),128))]),a(`tfoot`,null,[u[28]||=a(`td`,{colspan:`5`},null,-1),u[29]||=a(`td`,{class:`px-6 py-4 text-right`},`Total`,-1),a(`td`,ze,r(g(_)(X.value.total,X.value.currency?.code)),1),X.value.currency?.code===`USD`?o(``,!0):(f(),s(`td`,Be,r(g(_)(X.value.total_usd,`usd`)),1))])])])]),a(`div`,Ve,[u[35]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Summary`)],-1),a(`div`,He,[a(`dl`,Ue,[a(`div`,null,[u[32]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Volume`,-1),a(`dd`,We,r(g(b)(X.value.total_volume_cbm)),1)]),a(`div`,null,[u[33]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Weight`,-1),a(`dd`,Ge,r(g(b)(X.value.total_weight_kg))+` kg`,1)]),a(`div`,null,[u[34]||=a(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Items`,-1),a(`dd`,Ke,r(X.value.items?.length||0),1)])])])])])):o(``,!0),l(C,{show:Q.value,"onUpdate:show":u[2]||=e=>Q.value=e,"return-order":X.value,onApproved:et},null,8,[`show`,`return-order`]),l(x,{show:$.value,"onUpdate:show":u[3]||=e=>$.value=e,"return-order":X.value,onMarkedReceived:tt},null,8,[`show`,`return-order`])])}}}),Y=J;export{Y as default};