import{F as e,U as t,X as n,Z as r,a$ as i,aC as ee,aE as te,aF as a,aG as o,aH as s,aI as c,aK as l,aL as u,aM as d,aO as f,aQ as p,aR as ne,aT as re,aX as m,a_ as h,aa as ie,aq as ae,ar as oe,b2 as g}from"./index--pi_6MVY.js";import{b as _}from"./useAuth-CraJi6K1.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-BFc6-TYF.js";import{b as v,c as y,d as b,f as x}from"./common-DNevajli.js";import{b as S}from"./DataItems-D-y3rgaf.js";import"./Modal-BtkOgg2_.js";import{b as C,c as w}from"./CustomerReturnMarkReceived-C4M24m6u.js";const T={class:`max-w-7xl mx-auto sm:px-6 lg:px-8 py-6`},E={class:`mb-6`},D={class:`flex items-center justify-between`},O={key:0,class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},k={class:`flex items-center space-x-3`},A={key:0,class:`flex justify-center items-center py-8`},j={key:1,class:`space-y-6`},M={class:`flex items-center space-x-3`},N={key:0,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200`},P={key:1,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200`},F={class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200`},I={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},L={class:`px-6 py-4`},R={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},z={class:`text-sm text-gray-900 dark:text-white font-mono`},B={key:0,class:`mt-6`},V={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},H={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},U={class:`px-6 py-4`},W={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},G={key:0,class:`mt-6`},K={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},q={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},se={class:`px-6 py-4`},ce={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},le={key:0,class:`mt-6`},ue={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},de={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},J={class:`overflow-x-auto`},fe={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},pe={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},me={class:`px-6 py-4 whitespace-nowrap`},he={class:`flex items-center`},ge={class:`flex-shrink-0 h-10 w-10`},_e=[`src`,`alt`],ve={key:1,class:`h-10 w-10 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center`},ye={class:`ml-4`},be={class:`text-sm font-medium text-gray-900 dark:text-white`},xe={class:`text-sm text-gray-500 dark:text-gray-400`},Se={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ce={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},we={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Te={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ee={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},De={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Oe={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900 dark:text-white`},ke={class:`px-6 py-4 text-right`},Ae={key:0,class:`px-6 py-4 text-right`},je={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Me={class:`px-6 py-4`},Ne={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-4`};var Y=d({__name:`ViewPage`,setup(d){let Y=ae(),X=oe(),Pe=w(),{isWarehouseManager:Fe,isSuperAdmin:Ie,isAdmin:Le,isSalesman:Re}=_(),Z=h(null),Q=h(!0),$=h(!1),ze=te(()=>{if(Re)return!1;if(Fe||Ie||Le)return!0}),Be=async()=>{try{Q.value=!0;let e=parseInt(Y.params.id);Z.value=await Pe.fetchReturn(e)}catch(e){console.error(`Error fetching customer return:`,e),X.push({name:`customer.returns.index`})}finally{Q.value=!1}},Ve=e=>{Z.value=e,$.value=!1};return f(()=>{Be()}),(te,d)=>{let f=re(`router-link`);return p(),c(`div`,T,[a(`div`,E,[a(`div`,D,[a(`div`,null,[d[2]||=a(`h1`,{class:`text-2xl font-semibold text-gray-900 dark:text-white`},`Customer Return Details`,-1),Z.value?(p(),c(`p`,O,g(Z.value.return_code)+` " `+g(i(y)(Z.value.date)),1)):s(``,!0)]),a(`div`,k,[ze.value&&Z.value&&!Z.value.is_received?(p(),c(`button`,{key:0,onClick:d[0]||=e=>$.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`},[u(i(t),{class:`h-4 w-4 mr-2`}),d[3]||=l(` Mark as Received `,-1)])):s(``,!0),u(f,{to:{name:`customer.return.index`},class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},{default:m(()=>[u(i(ie),{class:`h-4 w-4 mr-2`}),d[4]||=l(` Back to List `,-1)]),_:1,__:[4]})])])]),Q.value?(p(),c(`div`,A,d[5]||=[a(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)])):Z.value?(p(),c(`div`,j,[a(`div`,M,[Z.value.is_received?(p(),c(`span`,N,[u(i(r),{class:`h-4 w-4 mr-1`}),d[6]||=l(` Received `,-1)])):(p(),c(`span`,P,[u(i(n),{class:`h-4 w-4 mr-1`}),d[7]||=l(` Not Received `,-1)])),a(`span`,F,[u(i(r),{class:`h-4 w-4 mr-1`}),d[8]||=l(` Approved `,-1)])]),a(`div`,I,[d[9]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Information`)],-1),a(`div`,L,[a(`div`,R,[u(S,{label:`Return Code`},{default:m(()=>[a(`div`,z,g(Z.value.return_code),1)]),_:1}),u(S,{label:`Date`,value:i(y)(Z.value.date)},null,8,[`value`]),u(S,{label:`Customer`,value:Z.value.customer?.name},null,8,[`value`]),u(S,{label:`Salesperson`,value:Z.value.salesperson?.name},null,8,[`value`]),u(S,{label:`Warehouse`,value:Z.value.warehouse?.name},null,8,[`value`]),u(S,{label:`Currency`,value:Z.value.currency?.code},null,8,[`value`]),Z.value.currency_rate?(p(),o(S,{key:0,label:`Exchange Rate`,value:Z.value.currency_rate},null,8,[`value`])):s(``,!0)]),Z.value.note?(p(),c(`div`,B,[u(S,{label:`Note`},{default:m(()=>[a(`div`,V,g(Z.value.note),1)]),_:1})])):s(``,!0)])]),a(`div`,H,[d[10]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),a(`div`,U,[a(`div`,W,[u(S,{label:`Approved By`,value:Z.value.approved_by_user?.name},null,8,[`value`]),u(S,{label:`Approved At`,value:i(b)(Z.value.approved_at)},null,8,[`value`])]),Z.value.approve_note?(p(),c(`div`,G,[u(S,{label:`Approval Note`},{default:m(()=>[a(`div`,K,g(Z.value.approve_note),1)]),_:1})])):s(``,!0)])]),Z.value.is_received?(p(),c(`div`,q,[d[11]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Receipt Information`)],-1),a(`div`,se,[a(`div`,ce,[u(S,{label:`Received By`,value:Z.value.return_received_by_user?.name},null,8,[`value`]),u(S,{label:`Received At`,value:i(b)(Z.value.return_received_at)},null,8,[`value`])]),Z.value.return_received_note?(p(),c(`div`,le,[u(S,{label:`Receipt Note`},{default:m(()=>[a(`div`,ue,g(Z.value.return_received_note),1)]),_:1})])):s(``,!0)])])):s(``,!0),a(`div`,de,[d[15]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Items`)],-1),a(`div`,J,[a(`table`,fe,[d[14]||=a(`thead`,{class:`bg-gray-50 dark:bg-gray-900`},[a(`tr`,null,[a(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Item`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Quantity`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Unit Price`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[a(`abbr`,{title:`Discount %`},`Dis %`)]),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[a(`abbr`,{title:`Tax %`},`TAX %`)]),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[a(`abbr`,{title:`TTC price`},`TTC`)]),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total`),a(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total USD`)])],-1),a(`tbody`,pe,[(p(!0),c(ee,null,ne(Z.value.items,t=>(p(),c(`tr`,{key:t.id},[a(`td`,me,[a(`div`,he,[a(`div`,ge,[t.item?.image?(p(),c(`img`,{key:0,src:t.item.image,alt:t.item?.description,class:`h-10 w-10 rounded object-cover`},null,8,_e)):(p(),c(`div`,ve,[u(i(e),{class:`h-6 w-6 text-gray-400`})]))]),a(`div`,ye,[a(`div`,be,g(t.item?.description),1),a(`div`,xe,g(t.item_code),1)])])]),a(`td`,Se,g(i(x)(t.quantity)),1),a(`td`,Ce,g(i(v)(t.price,Z.value.currency?.code)),1),a(`td`,we,g(i(x)(t.discount_percent)),1),a(`td`,Te,g(i(x)(t.tax_percent)),1),a(`td`,Ee,g(i(x)(t.ttc_price)),1),a(`td`,De,g(i(v)(t.total_price,Z.value.currency?.code)),1),a(`td`,Oe,g(i(v)(t.total_price_usd,`USD`)),1)]))),128))]),a(`tfoot`,null,[d[12]||=a(`td`,{colspan:`5`},null,-1),d[13]||=a(`td`,{class:`px-6 py-4 text-right`},`Total`,-1),a(`td`,ke,g(i(v)(Z.value.total,Z.value.currency?.code)),1),Z.value.currency?.code===`USD`?s(``,!0):(p(),c(`td`,Ae,g(i(v)(Z.value.total_usd,`USD`)),1))])])])]),a(`div`,je,[d[16]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Summary`)],-1),a(`div`,Me,[a(`div`,Ne,[u(S,{label:`Total Volume`,value:`${i(x)(Z.value.total_volume_cbm)} cbm`},null,8,[`value`]),u(S,{label:`Total Weight`,value:`${i(x)(Z.value.total_weight_kg)} kg`},null,8,[`value`]),u(S,{label:`Total Items`,value:Z.value.items?.length||0},null,8,[`value`])])])])])):s(``,!0),u(C,{show:$.value,"onUpdate:show":d[1]||=e=>$.value=e,"return-order":Z.value,onMarkedReceived:Ve},null,8,[`show`,`return-order`])])}}}),X=Y;export{X as default};