import{a$ as e,aA as t,aD as n,aF as r,aG as i,aH as a,aJ as o,aL as s,aM as c,aN as l,aP as u,aQ as ee,aR as d,aS as f,aY as p,aZ as m,ae as h,af as g,ao as _,ap as v,aq as te,as as ne,au as y,b as re,b0 as b,b1 as x,b3 as S}from"./index-SuqZNcqO.js";import{b as C}from"./useAuth-CHvb-9io.js";import{b as ie}from"./GlobalConfig-Dep5CV3r.js";const w=[`title`],T={key:0,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},E={key:1,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`};var D=l({__name:`DarkModeToggle`,setup(e){let t=_(),{isDarkMode:n}=y(t),{toggleDarkMode:r}=t;return u(()=>{t.initializeDarkMode()}),(e,t)=>(d(),o(`button`,{onClick:t[0]||=(...e)=>b(r)&&b(r)(...e),class:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200`,title:b(n)?`Switch to Light Mode`:`Switch to Dark Mode`},[b(n)?(d(),o(`svg`,T,t[1]||=[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z`},null,-1)])):(d(),o(`svg`,E,t[2]||=[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`},null,-1)]))],8,w))}}),ae=D;const oe={class:`bg-white dark:bg-gray-800 shadow flex justify-between items-center px-4 py-2 transition-colors duration-200 print:hidden`},se={class:`flex items-center space-x-2 md:space-x-4`},ce={class:`font-bold text-lg`},le={class:`hidden md:flex space-x-4`},ue={key:0,class:`relative`},de=[`onClick`],fe={class:`absolute bg-white dark:bg-gray-700 border dark:border-gray-600 mt-2 shadow-md z-20 min-w-48 rounded-md transition-all duration-200`},O={class:`flex items-center space-x-2 md:space-x-4`},k={class:`hidden md:flex items-center space-x-4`},A={key:0,class:`relative`},j=[`onClick`],M={class:`absolute right-0 bg-white dark:bg-gray-700 border dark:border-gray-600 mt-2 shadow-md z-20 min-w-48 rounded-md transition-all duration-200`},N={class:`md:hidden bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-lg transition-all duration-200 print:hidden`},P={class:`px-4 py-2 space-y-2`},F={key:0},I=[`onClick`],L={class:`ml-4 mt-1 space-y-1`},R={class:`md:hidden absolute right-4 top-16 bg-white dark:bg-gray-700 border dark:border-gray-600 shadow-md z-20 min-w-48 rounded-md transition-all duration-200 print:hidden`},z={key:0},B={class:`px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border-b dark:border-gray-600`},pe={class:`flex-1 py-4 px-7 print:px-0 print:py-0 bg-gray-200 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200`},me={class:`bg-white dark:bg-gray-800 border-t dark:border-gray-700 px-4 py-3 text-center text-sm text-gray-600 dark:text-gray-400 transition-colors duration-200 print:hidden`};var V=l({__name:`TopMneuLayout`,setup(l){let w=re(),T=ne(),E=_(),{userRole:D}=C(),{isDarkMode:V}=y(E),H=r(()=>w.user?.name?w.user.name:w.user?.username?w.user.username:w.user?.email?w.user.email.split(`@`)[0]:`Guest`),U=e(!1),W=e({left:null,right:null,mobileLeft:null}),he=r(()=>new Date().getFullYear()),G=r(()=>D.value?h.value.filter(e=>e.role.length===0||e.role.includes(D.value)).map(e=>({...e,subMenu:e.subMenu?e.subMenu.filter(e=>e.role.length===0||e.role.includes(D.value)):void 0})):[]),K=r(()=>D.value?g.value.map(e=>({...e,subMenu:e.subMenu?e.subMenu.filter(e=>e.role.length===0||e.role.includes(D.value)):void 0})):g.value),q=async()=>{try{await w.logoutUser(),X(),U.value=!1,T.push({name:`login`})}catch(e){console.error(`Logout error:`,e),await w.logoutUser(),T.push({name:`login`})}},ge=()=>{U.value=!U.value,U.value&&X()},J=()=>{U.value=!1,W.value.mobileLeft=null},Y=(e,t)=>{let n=e===`mobile-left`?`mobileLeft`:e;W.value[n]===t?W.value[n]=null:(Object.keys(W.value).forEach(e=>{e!==n&&(W.value[e]=null)}),W.value[n]=t),e===`right`&&(U.value=!1)},X=()=>{W.value={left:null,right:null,mobileLeft:null}},Z=e=>e.replace(`{username}`,H.value),Q=e=>{let t=e.target;!t.closest(`.relative`)&&!t.closest(`button`)&&(X(),U.value=!1)},$=e=>{e.key===`Escape`&&(X(),U.value=!1)};return u(()=>{w.loadFromStorage(),document.addEventListener(`click`,Q),document.addEventListener(`keydown`,$)}),ee(()=>{document.removeEventListener(`click`,Q),document.removeEventListener(`keydown`,$)}),(e,r)=>(d(),o(`div`,{class:x([`min-h-screen flex flex-col`,{dark:b(V)}])},[i(`header`,oe,[i(`div`,se,[i(`button`,{onClick:ge,class:`md:hidden p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},r[1]||=[i(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 6h16M4 12h16M4 18h16`})],-1)]),i(`div`,ce,[c(b(v),{to:{name:`dashboard`},class:`block px-2 py-1 rounded text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},{default:p(()=>[s(S(b(ie).appname),1)]),_:1})]),i(`nav`,le,[(d(!0),o(n,null,f(G.value,e=>(d(),o(n,{key:e.title},[e.subMenu?(d(),o(`div`,ue,[i(`button`,{onClick:t=>Y(`left`,e.title),class:`text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white transition-colors duration-200 flex items-center space-x-1`},[i(`span`,null,S(e.title),1),(d(),o(`svg`,{class:x([`w-4 h-4 transform transition-transform duration-200`,{"rotate-180":W.value.left===e.title}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},r[2]||=[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))],8,de),m(i(`div`,fe,[(d(!0),o(n,null,f(e.subMenu,e=>(d(),a(b(v),{key:e.title,to:{name:e.route},onClick:X,class:`block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 first:rounded-t-md last:rounded-b-md`},{default:p(()=>[s(S(e.title),1)]),_:2},1032,[`to`]))),128))],512),[[t,W.value.left===e.title]])])):(d(),a(b(v),{key:1,to:{name:e.route},class:`text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:p(()=>[s(S(e.title),1)]),_:2},1032,[`to`]))],64))),128))])]),i(`div`,O,[c(ae),i(`div`,k,[(d(!0),o(n,null,f(K.value,e=>(d(),o(n,{key:e.title},[e.subMenu?(d(),o(`div`,A,[i(`button`,{onClick:t=>Y(`right`,e.title),class:`text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 flex items-center space-x-1`},[i(`span`,null,S(Z(e.title)),1),(d(),o(`svg`,{class:x([`w-4 h-4 transform transition-transform duration-200`,{"rotate-180":W.value.right===e.title}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},r[3]||=[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))],8,j),m(i(`div`,M,[(d(!0),o(n,null,f(e.subMenu,e=>(d(),o(n,{key:e.title},[e.route===`logout`?(d(),o(`button`,{key:0,onClick:q,class:`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 first:rounded-t-md last:rounded-b-md`},S(e.title),1)):(d(),a(b(v),{key:1,to:{name:e.route},onClick:X,class:`block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200 first:rounded-t-md last:rounded-b-md`},{default:p(()=>[s(S(e.title),1)]),_:2},1032,[`to`]))],64))),128))],512),[[t,W.value.right===e.title]])])):(d(),a(b(v),{key:1,to:{name:e.route},class:`text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:p(()=>[s(S(Z(e.title)),1)]),_:2},1032,[`to`]))],64))),128))]),i(`button`,{onClick:r[0]||=e=>Y(`right`,`mobile-user`),class:`md:hidden p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200`},r[4]||=[i(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z`})],-1)])])]),m(i(`div`,N,[i(`nav`,P,[(d(!0),o(n,null,f(G.value,e=>(d(),o(n,{key:e.title},[e.subMenu?(d(),o(`div`,F,[i(`button`,{onClick:t=>Y(`mobile-left`,e.title),class:`w-full text-left px-2 py-2 text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200 flex items-center justify-between`},[i(`span`,null,S(e.title),1),(d(),o(`svg`,{class:x([`w-4 h-4 transform transition-transform duration-200`,{"rotate-180":W.value.mobileLeft===e.title}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},r[5]||=[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))],8,I),m(i(`div`,L,[(d(!0),o(n,null,f(e.subMenu,e=>(d(),a(b(v),{key:e.title,to:{name:e.route},onClick:J,class:`block px-2 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200`},{default:p(()=>[s(S(e.title),1)]),_:2},1032,[`to`]))),128))],512),[[t,W.value.mobileLeft===e.title]])])):(d(),a(b(v),{key:1,to:{name:e.route},onClick:J,class:`block px-2 py-2 text-gray-700 dark:text-gray-300 font-medium hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200`},{default:p(()=>[s(S(e.title),1)]),_:2},1032,[`to`]))],64))),128))])],512),[[t,U.value]]),m(i(`div`,R,[(d(!0),o(n,null,f(K.value,e=>(d(),o(n,{key:e.title},[e.subMenu?(d(),o(`div`,z,[i(`div`,B,S(Z(e.title)),1),(d(!0),o(n,null,f(e.subMenu,e=>(d(),o(n,{key:e.title},[e.route===`logout`?(d(),o(`button`,{key:0,onClick:q,class:`w-full text-left px-6 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},S(e.title),1)):(d(),a(b(v),{key:1,to:{name:e.route},onClick:X,class:`block px-6 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:p(()=>[s(S(e.title),1)]),_:2},1032,[`to`]))],64))),128))])):(d(),a(b(v),{key:1,to:{name:e.route},onClick:X,class:`block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white transition-colors duration-200`},{default:p(()=>[s(S(Z(e.title)),1)]),_:2},1032,[`to`]))],64))),128))],512),[[t,W.value.right===`mobile-user`]]),i(`main`,pe,[c(b(te))]),i(`footer`,me,[i(`p`,null,`All rights reserved Â© `+S(he.value),1)])],2))}}),H=V;export{H as default};