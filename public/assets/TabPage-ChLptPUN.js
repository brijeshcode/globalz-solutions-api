import{F as e,H as t,M as n,P as r,T as i,U as a,Y as o,a$ as s,a6 as c,a7 as l,a8 as u,a9 as d,aC as f,aD as p,aG as m,aI as h,aJ as g,aM as _,aN as v,aP as y,aQ as b,aR as x,aS as S,aT as C,aV as w,aW as T,aX as E,aZ as D,aa as O,aj as k,as as A,at as j,au as M,av as N,aw as P,ax as F,b0 as I,b5 as L,b6 as R,b7 as z,b8 as B,b9 as V,ba as H,bb as U,bd as W,f as G,k as K,o as ee,r as te,w as ne}from"./index-C_SyKoIQ.js";import"./GlobalConfig-wPgXFcZ5.js";import{b as q}from"./tableUtils-ylneqlK-.js";import{b as re}from"./PageHeader-tqubLDhO.js";import{b as ie}from"./ConfirmationModal-DAm13_us.js";import{d as ae}from"./common-qdv5PS_C.js";import{b as oe}from"./accountTypesStore-eEnP_aYf.js";import{b as se}from"./StatusBadge-BjBkrgVw.js";import"./currencyUtil-rn1oR5oW.js";import{b as J}from"./expenseCategoriesStore-Zd-hGK9J.js";import{b as Y}from"./Tabs-DzgAgPY0.js";import{b as ce}from"./DetailsModal-DkpiRQeK.js";const le={class:`space-y-6`},X={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},Z={class:`grid grid-cols-1 md:grid-cols-4 gap-4`},Q={class:`md:col-span-2`},ue={class:`relative`},de={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},fe={key:0,class:`p-8 text-center`},pe={key:1,class:`p-8 text-center`},me={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},he={key:0,class:`mt-6`},ge={key:2,class:`overflow-x-auto`},_e={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},ve={class:`bg-gray-50 dark:bg-gray-700`},ye={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},be={class:`flex flex-col`},xe={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Se={class:`flex flex-col`},Ce={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},we={class:`flex flex-col`},Te={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Ee={class:`px-6 py-4 whitespace-nowrap`},De={class:`flex items-center`},Oe={class:`flex-shrink-0 h-10 w-10`},ke={class:`h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},Ae={class:`ml-4`},je={class:`text-sm font-medium text-gray-900 dark:text-white`},Me={class:`text-sm text-gray-500 dark:text-gray-400`},Ne={class:`px-6 py-4`},Pe={class:`text-sm text-gray-900 dark:text-white`},Fe={class:`px-6 py-4 whitespace-nowrap`},Ie={class:`px-6 py-4 whitespace-nowrap`},Le={class:`text-sm text-gray-900 dark:text-white`},Re={class:`text-sm text-gray-600 dark:text-gray-400`},ze={class:`text-xs text-gray-500 dark:text-gray-500`},Be={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Ve={class:`flex items-center justify-end space-x-2`},He=[`onClick`],Ue=[`onClick`],We=[`onClick`],Ge={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},Ke={class:`flex items-center justify-between`},qe={class:`flex-1 flex justify-between sm:hidden`},Je=[`disabled`],Ye=[`disabled`],Xe={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Ze={class:`text-sm text-gray-700 dark:text-gray-300`},Qe={class:`font-medium`},$e={class:`font-medium`},et={class:`font-medium`},tt={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},nt=[`disabled`],rt=[`disabled`];var it=E({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:i,emit:a}){f();let c=F(),p=oe(),m=a,_=V(!1),x=V(!1),E=V(null),k=V(null),A=V(null),j=V(!1),M=B({search:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),N=V({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),P=y(()=>p.accountTypes),R=y(()=>p.pagination),G=y(()=>p.loading),ee=y(()=>[{key:`name`,label:`Account Type Name`,type:`text`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...M}),e=>{let{page:t,...n}=e;p.updateFilters(n)},{deep:!0});let q=async(e=1)=>{try{let t={...M,page:e};await p.fetchAccountTypes(t)}catch{c.error(`Failed to load account types`,{title:`Error`})}},J=()=>{q(M.page||1)},Y=()=>{k.value&&clearTimeout(k.value),k.value=setTimeout(()=>{q(1)},300)},it=e=>{M.sort_by===e?M.sort_direction=M.sort_direction===`asc`?`desc`:`asc`:(M.sort_by=e,M.sort_direction=`asc`),q(1)},at=e=>{e>=1&&R.value&&e<=R.value.last_page&&(M.page=e,q(e))},ot=e=>{A.value=e,j.value=!0},st=e=>{E.value=e,N.value={title:`Delete Account Type`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},x.value=!0},ct=async()=>{E.value&&(await p.deleteAccountType(E.value.id),lt())},lt=()=>{x.value=!1,E.value=null,N.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},ut=()=>{m(`create`)},dt=e=>{m(`edit`,e)};return D(()=>{q()}),i({refreshData:J}),(r,i)=>(s(),C(`div`,le,[T(re,{title:`Account Types`,description:`Manage account types and classifications`,"create-button-text":`Create New Account Type`,onCreate:ut}),b(`div`,X,[b(`div`,Z,[b(`div`,Q,[i[12]||=b(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Account Types `,-1),b(`div`,ue,[z(b(`input`,{id:`search`,"onUpdate:modelValue":i[0]||=e=>M.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:Y},null,544),[[g,M.search]]),T(H(ne),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),b(`div`,null,[i[14]||=b(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(b(`select`,{id:`status`,"onUpdate:modelValue":i[1]||=e=>M.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:q},i[13]||=[b(`option`,{value:``},`All Status`,-1),b(`option`,{value:`true`},`Active`,-1),b(`option`,{value:`false`},`Inactive`,-1)],544),[[h,M.is_active]])]),b(`div`,null,[i[16]||=b(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(b(`select`,{id:`per-page`,"onUpdate:modelValue":i[2]||=e=>M.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:q},i[15]||=[b(`option`,{value:15},`15`,-1),b(`option`,{value:25},`25`,-1),b(`option`,{value:50},`50`,-1),b(`option`,{value:100},`100`,-1)],544),[[h,M.per_page]])])])]),b(`div`,de,[G.value?(s(),C(`div`,fe,[T(H(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),i[17]||=b(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading account types...`,-1)])):P.value.length===0?(s(),C(`div`,pe,[T(H(K),{class:`h-12 w-12 mx-auto text-gray-400`}),i[19]||=b(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No account types found `,-1),b(`p`,me,W(M.search?`Try adjusting your search criteria.`:`Get started by creating your first account type.`),1),M.search?S(``,!0):(s(),C(`div`,he,[b(`button`,{onClick:ut,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[T(H(e),{class:`h-5 w-5 mr-2`}),i[18]||=w(` Add Your First Account Type `,-1)])]))])):(s(),C(`div`,ge,[b(`table`,_e,[b(`thead`,ve,[b(`tr`,null,[b(`th`,ye,[b(`button`,{onClick:i[3]||=e=>it(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[20]||=b(`span`,null,`Account Type`,-1),b(`div`,be,[T(H(l),{class:U([`h-3 w-3`,M.sort_by===`name`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,M.sort_by===`name`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),i[23]||=b(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),b(`th`,xe,[b(`button`,{onClick:i[4]||=e=>it(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[21]||=b(`span`,null,`Status`,-1),b(`div`,Se,[T(H(l),{class:U([`h-3 w-3`,M.sort_by===`is_active`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,M.sort_by===`is_active`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),b(`th`,Ce,[b(`button`,{onClick:i[5]||=e=>it(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[22]||=b(`span`,null,`Created`,-1),b(`div`,we,[T(H(l),{class:U([`h-3 w-3`,M.sort_by===`created_at`&&M.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,M.sort_by===`created_at`&&M.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),i[24]||=b(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),b(`tbody`,Te,[(s(!0),C(v,null,I(P.value,e=>(s(),C(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[b(`td`,Ee,[b(`div`,De,[b(`div`,Oe,[b(`div`,ke,[T(H(K),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})])]),b(`div`,Ae,[b(`div`,je,W(e.name),1),b(`div`,Me,` ID: `+W(e.id),1)])])]),b(`td`,Ne,[b(`div`,Pe,W(e.description||`No description provided`),1)]),b(`td`,Fe,[T(se,{active:e.is_active},null,8,[`active`])]),b(`td`,Ie,[b(`div`,Le,[b(`div`,Re,W(e.created_by?.name||`-`),1),b(`div`,ze,W(H(ae)(e.created_at)),1)])]),b(`td`,Be,[b(`div`,Ve,[b(`button`,{onClick:t=>ot(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[T(H(o),{class:`w-4 h-4`})],8,He),b(`button`,{onClick:t=>dt(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Account Type`},[T(H(t),{class:`h-4 w-4`})],8,Ue),b(`button`,{onClick:t=>st(e),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Delete Account Type`},[T(H(te),{class:`h-4 w-4`})],8,We)])])]))),128))])])])),R.value&&R.value.total>0?(s(),C(`div`,Ge,[b(`div`,Ke,[b(`div`,qe,[b(`button`,{onClick:i[6]||=e=>at(R.value.current_page-1),disabled:R.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,Je),b(`button`,{onClick:i[7]||=e=>at(R.value.current_page+1),disabled:R.value.current_page>=R.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Ye)]),b(`div`,Xe,[b(`div`,null,[b(`p`,Ze,[i[25]||=w(` Showing `,-1),b(`span`,Qe,W(R.value.from),1),i[26]||=w(` to `,-1),b(`span`,$e,W(R.value.to),1),i[27]||=w(` of `,-1),b(`span`,et,W(R.value.total),1),i[28]||=w(` results `,-1)])]),b(`div`,null,[b(`nav`,tt,[b(`button`,{onClick:i[8]||=e=>at(R.value.current_page-1),disabled:R.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[T(H(d),{class:`h-5 w-5`})],8,nt),b(`button`,{onClick:i[9]||=e=>at(R.value.current_page+1),disabled:R.value.current_page>=R.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[T(H(u),{class:`h-5 w-5`})],8,rt)])])])])])):S(``,!0)]),T(ie,{show:x.value,"onUpdate:show":i[10]||=e=>x.value=e,type:`delete`,title:N.value.title,message:N.value.message,"confirm-text":N.value.buttonText,"loading-text":N.value.loadingText,loading:_.value,onConfirm:ct,onCancel:lt},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),T(ce,{show:j.value,"onUpdate:show":i[11]||=e=>j.value=e,item:A.value,title:`Account Type Details`,"display-fields":ee.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),at=it;function ot(){let e=V({}),t=y(()=>Object.keys(e.value).length>0),n=t=>e.value[t]?.[0],r=n=>{let r={};return!n.name||n.name.trim().length===0?r.name=[`Account type name is required`]:n.name.trim().length>255&&(r.name=[`Account type name must not exceed 255 characters`]),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Account type description must not exceed 1000 characters`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},i=n=>{let r={};return n.name!==void 0&&(!n.name||n.name.trim().length===0?r.name=[`Account type name is required`]:n.name.trim().length>255&&(r.name=[`Account type name must not exceed 255 characters`])),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Account type description must not exceed 1000 characters`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},a=()=>{e.value={}},o=t=>{e.value[t]&&delete e.value[t]},s=t=>{e.value=t};return{errors:e,hasErrors:t,getFieldError:n,validateCreateRequest:r,validateUpdateRequest:i,clearErrors:a,clearFieldError:o,setServerErrors:s}}const st={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},ct={class:`max-w-4xl mx-auto`},lt={class:`mb-8`},ut={class:`flex items-center space-x-4 mb-2`},dt={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ft={class:`px-6 py-8`},pt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},mt={class:`md:col-span-2`},ht={key:0,class:`mt-1 text-xs text-gray-500`},gt={class:`md:col-span-2`},_t={class:`flex items-start`},vt={class:`flex items-center h-5`},yt=[`disabled`],bt=[`disabled`],xt={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},St={key:1,class:`mt-1 text-xs text-gray-500`},Ct={key:0,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},wt={class:`space-y-2`},Tt={class:`text-sm text-blue-700 dark:text-blue-400`},Et={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},Dt={class:`text-sm text-blue-700 dark:text-blue-400`},Ot={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},kt=[`disabled`],At=[`disabled`],jt={key:0,class:`flex items-center justify-center`},Mt={key:1};var Nt=E({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,r=oe(),{errors:i,hasErrors:a,getFieldError:o,validateCreateRequest:c,clearFieldError:l,setServerErrors:u,clearErrors:d}=ot(),f=V(!1),p=V({name:``,description:``,is_active:!0}),h=y(()=>p.value.name.trim().length>0&&p.value.name.length<=255&&(!p.value.description||p.value.description.length<=1e3)),v=()=>{p.value={name:``,description:``,is_active:!0},d()},x=async()=>{if(d(),c(p.value))try{f.value=!0;let e={name:p.value.name.trim(),is_active:p.value.is_active,description:p.value.description?.trim()??``};await r.createAccountType(e),v(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{f.value=!1}},E=()=>{v(),n(`cancel`)},O=()=>{n(`back`)};return D(()=>{v()}),(e,t)=>(s(),C(`div`,st,[b(`div`,ct,[b(`div`,lt,[b(`div`,ut,[b(`button`,{onClick:O,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[T(H(k),{class:`w-5 h-5`})]),t[5]||=b(`div`,null,[b(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Account Type `),b(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new account type classification `)],-1)])]),b(`div`,dt,[b(`div`,ft,[b(`form`,{onSubmit:_(x,[`prevent`]),class:`space-y-8`},[b(`div`,null,[t[7]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),b(`div`,pt,[b(`div`,mt,[T(G,{type:`text`,maxlength:255,disabled:f.value,onBlur:t[0]||=()=>H(l)(`name`),modelValue:p.value.name,"onUpdate:modelValue":t[1]||=e=>p.value.name=e,placeholder:`Enter account type name (e.g., Retail, Wholesale, Corporate)`,error:H(o)(`name`),required:``,label:`Account Type Name`},null,8,[`disabled`,`modelValue`,`error`]),p.value.name.length>0?(s(),C(`p`,ht,W(p.value.name.length)+`/255 characters `,1)):S(``,!0)]),b(`div`,gt,[b(`div`,_t,[b(`div`,vt,[z(b(`input`,{id:`is_active`,"onUpdate:modelValue":t[2]||=e=>p.value.is_active=e,type:`checkbox`,disabled:f.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,yt),[[m,p.value.is_active]])]),t[6]||=b(`div`,{class:`ml-3`},[b(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),b(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this account type will be available for selection `)],-1)])])])]),b(`div`,null,[t[9]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),b(`div`,null,[t[8]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account Type Description `,-1),z(b(`textarea`,{"onUpdate:modelValue":t[3]||=e=>p.value.description=e,disabled:f.value,maxlength:1e3,rows:`4`,placeholder:`Enter account type description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,H(o)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[4]||=()=>H(l)(`description`)},null,42,bt),[[g,p.value.description]]),H(o)(`description`)?(s(),C(`p`,xt,W(H(o)(`description`)),1)):S(``,!0),p.value.description&&p.value.description.length>0?(s(),C(`p`,St,W(p.value.description.length)+`/1000 characters `,1)):S(``,!0)])]),p.value.name?(s(),C(`div`,Ct,[t[13]||=b(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Account Type Preview`,-1),b(`div`,wt,[b(`p`,Tt,[t[10]||=b(`strong`,null,`Name:`,-1),w(` `+W(p.value.name),1)]),p.value.description?(s(),C(`p`,Et,[t[11]||=b(`strong`,null,`Description:`,-1),w(` `+W(p.value.description),1)])):S(``,!0),b(`p`,Dt,[t[12]||=b(`strong`,null,`Status:`,-1),b(`span`,{class:U(p.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(p.value.is_active?`Active`:`Inactive`),3)])])])):S(``,!0),b(`div`,Ot,[b(`button`,{type:`button`,onClick:E,disabled:f.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,kt),b(`button`,{type:`submit`,disabled:f.value||H(a)||!h.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[f.value?(s(),C(`div`,jt,t[14]||=[b(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),w(` Creating... `,-1)])):(s(),C(`span`,Mt,`Create Account Type`))],8,At)])],32)])])])]))}}),Pt=Nt;const Ft={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},It={class:`max-w-4xl mx-auto`},Lt={class:`mb-8`},Rt={class:`flex items-center space-x-4 mb-2`},zt={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Bt={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Vt={class:`px-6 py-8`},Ht={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ut={class:`md:col-span-2`},Wt={key:0,class:`mt-1 text-xs text-gray-500`},Gt={class:`md:col-span-2`},Kt={class:`flex items-start`},qt={class:`flex items-center h-5`},Jt=[`disabled`],Yt={class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},Xt=[`disabled`],Zt={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Qt={key:1,class:`mt-1 text-xs text-gray-500`},$t={key:0,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},en={class:`space-y-2`},tn={class:`text-sm text-blue-700 dark:text-blue-400`},nn={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},rn={class:`text-sm text-blue-700 dark:text-blue-400`},an={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},on=[`disabled`],sn=[`disabled`],cn={key:0,class:`flex items-center justify-center`},ln={key:1},un={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},dn={class:`flex flex-col items-center`};var fn=E({__name:`EditPage`,props:{id:{},accountType:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=oe(),{errors:a,hasErrors:o,getFieldError:l,validateUpdateRequest:u,clearFieldError:d,setServerErrors:f,clearErrors:p}=ot(),h=V(!1),v=V(!1),x=V({name:``,description:``,is_active:!0}),E=V({name:``,description:``,is_active:!0}),O=y(()=>x.value.name.trim().length>0&&x.value.name.length<=255&&(!x.value.description||x.value.description.length<=1e3)),A=async()=>{try{v.value=!0;let e=n.accountType||await i.fetchAccountType(n.id);e&&(x.value={name:e.name,description:e.description||``,is_active:e.is_active},E.value={name:e.name,description:e.description||``,is_active:e.is_active},p())}catch(e){console.error(`Error loading account type:`,e)}finally{v.value=!1}},j=async()=>{if(p(),u(x.value))try{h.value=!0;let e={name:x.value.name.trim(),is_active:x.value.is_active,description:x.value.description?.trim()??``};await i.updateAccountType(n.id,e),E.value={...x.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&f(e.response.data.errors)}finally{h.value=!1}},M=()=>{r(`cancel`)},N=()=>{r(`back`)};return D(()=>{A()}),L(()=>n.id,()=>{n.id&&A()}),(e,t)=>(s(),C(`div`,Ft,[b(`div`,It,[b(`div`,Lt,[b(`div`,Rt,[b(`button`,{onClick:N,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[T(H(k),{class:`w-5 h-5`})]),t[5]||=b(`div`,null,[b(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Account Type `),b(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update account type information and settings `)],-1)])]),v.value?(s(),C(`div`,zt,t[6]||=[b(`div`,{class:`flex items-center justify-center`},[b(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),b(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading account type...`)],-1)])):x.value?(s(),C(`div`,Bt,[b(`div`,Vt,[b(`form`,{onSubmit:_(j,[`prevent`]),class:`space-y-8`},[b(`div`,null,[t[8]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),b(`div`,Ht,[b(`div`,Ut,[T(G,{type:`text`,maxlength:255,disabled:h.value,onBlur:t[0]||=()=>H(d)(`name`),modelValue:x.value.name,"onUpdate:modelValue":t[1]||=e=>x.value.name=e,placeholder:`Enter account type name (e.g., Retail, Wholesale, Corporate)`,error:H(l)(`name`),required:``,label:`Account Type Name`},null,8,[`disabled`,`modelValue`,`error`]),x.value.name.length>0?(s(),C(`p`,Wt,W(x.value.name.length)+`/255 characters `,1)):S(``,!0)]),b(`div`,Gt,[b(`div`,Kt,[b(`div`,qt,[z(b(`input`,{id:`is_active`,"onUpdate:modelValue":t[2]||=e=>x.value.is_active=e,type:`checkbox`,disabled:h.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Jt),[[m,x.value.is_active]])]),t[7]||=b(`div`,{class:`ml-3`},[b(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),b(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this account type will be available for selection `)],-1)])])])]),b(`div`,null,[b(`h3`,Yt,` Description `+W(x.value.description),1),b(`div`,null,[t[9]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account Type Description `,-1),z(b(`textarea`,{"onUpdate:modelValue":t[3]||=e=>x.value.description=e,disabled:h.value,maxlength:1e3,rows:`4`,placeholder:`Enter account type description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,H(l)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[4]||=()=>H(d)(`description`)},null,42,Xt),[[g,x.value.description]]),H(l)(`description`)?(s(),C(`p`,Zt,W(H(l)(`description`)),1)):S(``,!0),x.value.description&&x.value.description.length>0?(s(),C(`p`,Qt,W(x.value.description.length)+`/1000 characters `,1)):S(``,!0)])]),x.value.name?(s(),C(`div`,$t,[t[13]||=b(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Account Type Preview`,-1),b(`div`,en,[b(`p`,tn,[t[10]||=b(`strong`,null,`Name:`,-1),w(` `+W(x.value.name),1)]),x.value.description?(s(),C(`p`,nn,[t[11]||=b(`strong`,null,`Description:`,-1),w(` `+W(x.value.description),1)])):S(``,!0),b(`p`,rn,[t[12]||=b(`strong`,null,`Status:`,-1),b(`span`,{class:U(x.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(x.value.is_active?`Active`:`Inactive`),3)])])])):S(``,!0),b(`div`,an,[b(`button`,{type:`button`,onClick:M,disabled:h.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,on),b(`button`,{type:`submit`,disabled:h.value||H(o)||!O.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[h.value?(s(),C(`div`,cn,t[14]||=[b(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),w(` Updating... `,-1)])):(s(),C(`span`,ln,`Update Account Type`))],8,sn)])],32)])])):(s(),C(`div`,un,[b(`div`,dn,[T(H(c),{class:`w-12 h-12 text-red-400 mb-4`}),t[15]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Account Type Not Found `,-1),t[16]||=b(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The account type you're trying to edit could not be found. `,-1),b(`button`,{onClick:N,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` â† Back to Account Types `)])]))])]))}}),pn=fn;const mn={class:`space-y-6`},hn={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},gn={class:`grid grid-cols-1 md:grid-cols-5 gap-4`},_n={class:`md:col-span-2`},vn={class:`relative`},yn=[`value`],bn={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},xn={key:0,class:`p-8 text-center`},Sn={key:1,class:`p-8 text-center`},Cn={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},wn={key:0,class:`mt-6`},Tn={key:2,class:`overflow-x-auto`},En={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Dn={class:`bg-gray-50 dark:bg-gray-700`},On={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},kn={class:`flex flex-col`},An={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},jn={class:`flex flex-col`},Mn={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Nn={class:`flex flex-col`},Pn={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Fn={class:`px-6 py-4 whitespace-nowrap`},In={class:`flex items-center`},Ln={class:`flex-shrink-0 h-10 w-10`},Rn={class:`h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center`},zn={class:`ml-4`},Bn={class:`text-sm font-medium text-gray-900 dark:text-white`},Vn={class:`text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2`},Hn={key:0,class:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`},Un={class:`px-6 py-4 whitespace-nowrap`},Wn={class:`text-sm text-gray-900 dark:text-white`},Gn={class:`px-6 py-4`},Kn={class:`text-sm text-gray-900 dark:text-white`},qn={class:`px-6 py-4 whitespace-nowrap`},Jn={class:`text-sm text-gray-900 dark:text-white`},Yn={key:0,class:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200`},Xn={key:1,class:`text-gray-500 dark:text-gray-400`},Zn={class:`px-6 py-4 whitespace-nowrap`},Qn={class:`px-6 py-4 whitespace-nowrap`},$n={class:`text-sm text-gray-900 dark:text-white`},er={class:`text-sm text-gray-600 dark:text-gray-400`},tr={class:`text-xs text-gray-500 dark:text-gray-500`},nr={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},rr={class:`flex items-center justify-end space-x-2`},ir=[`onClick`],ar=[`onClick`],or=[`onClick`,`disabled`,`title`],sr={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},cr={class:`flex items-center justify-between`},lr={class:`flex-1 flex justify-between sm:hidden`},ur=[`disabled`],dr=[`disabled`],fr={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},pr={class:`text-sm text-gray-700 dark:text-gray-300`},mr={class:`font-medium`},hr={class:`font-medium`},gr={class:`font-medium`},_r={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},vr=[`disabled`],yr=[`disabled`];var br=E({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:c,emit:p}){f();let m=F(),_=J(),x=p,E=V(!1),k=V(!1),A=V(null),j=V(null),M=V(null),N=V(!1),P=B({search:``,parent_id:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),R=V({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),G=y(()=>_.expenseCategories),K=y(()=>_.pagination),ee=y(()=>_.loading),q=y(()=>_.rootExpenseCategories),oe=y(()=>[{key:`name`,label:`Category Name`,type:`text`},{key:`parent.name`,label:`Parent Category`,type:`text`,fallback:`Root Category`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_root`,label:`Category Type`,type:`custom`,customRender:e=>e?`Root Category`:`Sub Category`},{key:`has_children`,label:`Has Children`,type:`custom`,customRender:e=>e?`Yes`:`No`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...P}),e=>{let{page:t,...n}=e;_.updateFilters(n)},{deep:!0});let Y=async(e=1)=>{try{let t={...P,page:e};await _.fetchExpenseCategories(t)}catch{m.error(`Failed to load expense categories`,{title:`Error`})}},le=()=>{Y(P.page||1)},X=()=>{j.value&&clearTimeout(j.value),j.value=setTimeout(()=>{Y(1)},300)},Z=e=>{P.sort_by===e?P.sort_direction=P.sort_direction===`asc`?`desc`:`asc`:(P.sort_by=e,P.sort_direction=`asc`),Y(1)},Q=e=>{e>=1&&K.value&&e<=K.value.last_page&&(P.page=e,Y(e))},ue=e=>{M.value=e,N.value=!0},de=e=>{if(e.has_children){m.warning(`Cannot delete category that has children`);return}A.value=e,R.value={title:`Delete Expense Category`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},k.value=!0},fe=async()=>{A.value&&(await _.deleteExpenseCategory(A.value.id),pe())},pe=()=>{k.value=!1,A.value=null,R.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},me=()=>{x(`create`)},he=e=>{x(`edit`,e)};return D(async()=>{await _.fetchRootExpenseCategories(),Y()}),c({refreshData:le}),(r,c)=>(s(),C(`div`,mn,[T(re,{title:`Expense Categories`,description:`Manage expense categories and classifications`,"create-button-text":`Create New Expense Category`,onCreate:me}),b(`div`,hn,[b(`div`,gn,[b(`div`,_n,[c[13]||=b(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Expense Categories `,-1),b(`div`,vn,[z(b(`input`,{id:`search`,"onUpdate:modelValue":c[0]||=e=>P.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:X},null,544),[[g,P.search]]),T(H(ne),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),b(`div`,null,[c[16]||=b(`label`,{for:`parent_category`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(b(`select`,{id:`parent_category`,"onUpdate:modelValue":c[1]||=e=>P.parent_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},[c[14]||=b(`option`,{value:``},`All Categories`,-1),c[15]||=b(`option`,{value:`null`},`Root Categories Only`,-1),(s(!0),C(v,null,I(q.value,e=>(s(),C(`option`,{key:e.id,value:e.id},W(e.name),9,yn))),128))],544),[[h,P.parent_id]])]),b(`div`,null,[c[18]||=b(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(b(`select`,{id:`status`,"onUpdate:modelValue":c[2]||=e=>P.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},c[17]||=[b(`option`,{value:``},`All Status`,-1),b(`option`,{value:`true`},`Active`,-1),b(`option`,{value:`false`},`Inactive`,-1)],544),[[h,P.is_active]])]),b(`div`,null,[c[20]||=b(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(b(`select`,{id:`per-page`,"onUpdate:modelValue":c[3]||=e=>P.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},c[19]||=[b(`option`,{value:15},`15`,-1),b(`option`,{value:25},`25`,-1),b(`option`,{value:50},`50`,-1),b(`option`,{value:100},`100`,-1)],544),[[h,P.per_page]])])])]),b(`div`,bn,[ee.value?(s(),C(`div`,xn,[T(H(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),c[21]||=b(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading expense categories...`,-1)])):G.value.length===0?(s(),C(`div`,Sn,[T(H(i),{class:`h-12 w-12 mx-auto text-gray-400`}),c[23]||=b(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No expense categories found `,-1),b(`p`,Cn,W(P.search?`Try adjusting your search criteria.`:`Get started by creating your first expense category.`),1),P.search?S(``,!0):(s(),C(`div`,wn,[b(`button`,{onClick:me,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[T(H(e),{class:`h-5 w-5 mr-2`}),c[22]||=w(` Add Your First Expense Category `,-1)])]))])):(s(),C(`div`,Tn,[b(`table`,En,[b(`thead`,Dn,[b(`tr`,null,[b(`th`,On,[b(`button`,{onClick:c[4]||=e=>Z(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[c[24]||=b(`span`,null,`Category Name`,-1),b(`div`,kn,[T(H(l),{class:U([`h-3 w-3`,P.sort_by===`name`&&P.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,P.sort_by===`name`&&P.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),c[27]||=b(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Parent Category `,-1),c[28]||=b(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),c[29]||=b(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Children `,-1),b(`th`,An,[b(`button`,{onClick:c[5]||=e=>Z(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[c[25]||=b(`span`,null,`Status`,-1),b(`div`,jn,[T(H(l),{class:U([`h-3 w-3`,P.sort_by===`is_active`&&P.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,P.sort_by===`is_active`&&P.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),b(`th`,Mn,[b(`button`,{onClick:c[6]||=e=>Z(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[c[26]||=b(`span`,null,`Created`,-1),b(`div`,Nn,[T(H(l),{class:U([`h-3 w-3`,P.sort_by===`created_at`&&P.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,P.sort_by===`created_at`&&P.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),c[30]||=b(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),b(`tbody`,Pn,[(s(!0),C(v,null,I(G.value,e=>(s(),C(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[b(`td`,Fn,[b(`div`,In,[b(`div`,Ln,[b(`div`,Rn,[T(H(i),{class:`h-5 w-5 text-green-600 dark:text-green-400`})])]),b(`div`,zn,[b(`div`,Bn,W(e.name),1),b(`div`,Vn,[b(`span`,null,`ID: `+W(e.id),1),e.is_root?(s(),C(`span`,Hn,` Root `)):S(``,!0)])])])]),b(`td`,Un,[b(`div`,Wn,W(e.parent?.name||`-`),1)]),b(`td`,Gn,[b(`div`,Kn,W(e.description||`No description provided`),1)]),b(`td`,qn,[b(`div`,Jn,[e.has_children?(s(),C(`span`,Yn,[T(H(a),{class:`w-3 h-3 mr-1`}),c[31]||=w(` Has Children `,-1)])):(s(),C(`span`,Xn,`-`))])]),b(`td`,Zn,[T(se,{active:e.is_active},null,8,[`active`])]),b(`td`,Qn,[b(`div`,$n,[b(`div`,er,W(e.created_by?.name||`-`),1),b(`div`,tr,W(H(ae)(e.created_at)),1)])]),b(`td`,nr,[b(`div`,rr,[b(`button`,{onClick:t=>ue(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[T(H(o),{class:`w-4 h-4`})],8,ir),b(`button`,{onClick:t=>he(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Expense Category`},[T(H(t),{class:`h-4 w-4`})],8,ar),b(`button`,{onClick:t=>de(e),disabled:e.has_children,class:U([`transition-colors duration-200`,e.has_children?`text-gray-400 dark:text-gray-600 cursor-not-allowed`:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300`]),title:e.has_children?`Cannot delete category with children`:`Delete Expense Category`},[T(H(te),{class:`h-4 w-4`})],10,or)])])]))),128))])])])),K.value&&K.value.total>0?(s(),C(`div`,sr,[b(`div`,cr,[b(`div`,lr,[b(`button`,{onClick:c[7]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,ur),b(`button`,{onClick:c[8]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,dr)]),b(`div`,fr,[b(`div`,null,[b(`p`,pr,[c[32]||=w(` Showing `,-1),b(`span`,mr,W(K.value.from),1),c[33]||=w(` to `,-1),b(`span`,hr,W(K.value.to),1),c[34]||=w(` of `,-1),b(`span`,gr,W(K.value.total),1),c[35]||=w(` results `,-1)])]),b(`div`,null,[b(`nav`,_r,[b(`button`,{onClick:c[9]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[T(H(d),{class:`h-5 w-5`})],8,vr),b(`button`,{onClick:c[10]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[T(H(u),{class:`h-5 w-5`})],8,yr)])])])])])):S(``,!0)]),T(ie,{show:k.value,"onUpdate:show":c[11]||=e=>k.value=e,type:`delete`,title:R.value.title,message:R.value.message,"confirm-text":R.value.buttonText,"loading-text":R.value.loadingText,loading:E.value,onConfirm:fe,onCancel:pe},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),T(ce,{show:N.value,"onUpdate:show":c[12]||=e=>N.value=e,item:M.value,title:`Expense Category Details`,"display-fields":oe.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),xr=br;const Sr={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Cr={class:`max-w-4xl mx-auto`},wr={class:`mb-8`},Tr={class:`flex items-center space-x-4 mb-2`},Er={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Dr={class:`px-6 py-8`},Or={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},kr={class:`md:col-span-2`},Ar={key:0,class:`mt-1 text-xs text-gray-500`},jr={class:`md:col-span-2`},Mr=[`disabled`],Nr=[`value`],Pr={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Fr={class:`md:col-span-2`},Ir={class:`flex items-start`},Lr={class:`flex items-center h-5`},Rr=[`disabled`],zr=[`disabled`],Br={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Vr={key:1,class:`mt-1 text-xs text-gray-500`},Hr={class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},Ur={class:`flex`},Wr={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},Gr={class:`space-y-2`},Kr={class:`text-sm text-green-700 dark:text-green-400`},qr={class:`text-sm text-green-700 dark:text-green-400`},Jr={key:0,class:`text-sm text-green-700 dark:text-green-400`},Yr={class:`text-sm text-green-700 dark:text-green-400`},Xr={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Zr=[`disabled`],Qr=[`disabled`],$r={key:0,class:`flex items-center justify-center`},ei={key:1};var ti=E({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,i=J(),a=V({}),o=y(()=>Object.keys(a.value).length>0),c=e=>a.value[e]?.[0],l=e=>{a.value[e]&&delete a.value[e]},u=e=>{a.value={...e}},d=()=>{a.value={}},f=e=>{d();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},p=V(!1),x=V({name:``,parent_id:void 0,description:``,is_active:!0}),E=y(()=>x.value.name.trim().length>0&&x.value.name.length<=255&&(!x.value.description||x.value.description.length<=1e3)),O=y(()=>i.rootCategoriesOnly),A=e=>{if(!e)return``;let t=O.value.find(t=>t.id===Number(e));return t?.name||``},j=()=>{x.value={name:``,parent_id:void 0,description:``,is_active:!0},d()},M=async()=>{if(d(),f(x.value))try{p.value=!0;let e={name:x.value.name.trim(),is_active:x.value.is_active,parent_id:x.value.parent_id?Number(x.value.parent_id):null,description:x.value.description?.trim()??``};await i.createExpenseCategory(e),j(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{p.value=!1}},N=()=>{j(),n(`cancel`)},P=()=>{n(`back`)};return D(async()=>{await i.fetchExpenseCategories({is_active:!0}),j()}),(e,t)=>(s(),C(`div`,Sr,[b(`div`,Cr,[b(`div`,wr,[b(`div`,Tr,[b(`button`,{onClick:P,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[T(H(k),{class:`w-5 h-5`})]),t[7]||=b(`div`,null,[b(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Expense Category `),b(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new expense category classification `)],-1)])]),b(`div`,Er,[b(`div`,Dr,[b(`form`,{onSubmit:_(M,[`prevent`]),class:`space-y-8`},[b(`div`,null,[t[12]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),b(`div`,Or,[b(`div`,kr,[T(G,{type:`text`,maxlength:255,disabled:p.value,onBlur:t[0]||=()=>l(`name`),modelValue:x.value.name,"onUpdate:modelValue":t[1]||=e=>x.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:c(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),x.value.name.length>0?(s(),C(`p`,Ar,W(x.value.name.length)+`/255 characters `,1)):S(``,!0)]),b(`div`,jr,[t[9]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(b(`select`,{"onUpdate:modelValue":t[2]||=e=>x.value.parent_id=e,disabled:p.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>l(`parent_id`)},[t[8]||=b(`option`,{value:``},`Root Category (No Parent)`,-1),(s(!0),C(v,null,I(O.value,e=>(s(),C(`option`,{key:e.id,value:e.id},W(e.name),9,Nr))),128))],42,Mr),[[h,x.value.parent_id]]),c(`parent_id`)?(s(),C(`p`,Pr,W(c(`parent_id`)),1)):S(``,!0),t[10]||=b(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),b(`div`,Fr,[b(`div`,Ir,[b(`div`,Lr,[z(b(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>x.value.is_active=e,type:`checkbox`,disabled:p.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Rr),[[m,x.value.is_active]])]),t[11]||=b(`div`,{class:`ml-3`},[b(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),b(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this expense category will be available for selection `)],-1)])])])]),b(`div`,null,[t[14]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),b(`div`,null,[t[13]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(b(`textarea`,{"onUpdate:modelValue":t[5]||=e=>x.value.description=e,disabled:p.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>l(`description`)},null,42,zr),[[g,x.value.description]]),c(`description`)?(s(),C(`p`,Br,W(c(`description`)),1)):S(``,!0),x.value.description&&x.value.description.length>0?(s(),C(`p`,Vr,W(x.value.description.length)+`/1000 characters `,1)):S(``,!0)])]),b(`div`,Hr,[b(`div`,Ur,[T(H(r),{class:`h-5 w-5 text-blue-400 mr-2 mt-0.5`}),t[15]||=b(`div`,null,[b(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-1`},` About Category Hierarchy `),b(`div`,{class:`text-sm text-blue-700 dark:text-blue-400 space-y-1`},[b(`p`,null,[b(`strong`,null,`Root Categories:`),w(` Top-level categories that can contain sub-categories`)]),b(`p`,null,[b(`strong`,null,`Sub-categories:`),w(` Categories that belong to a parent category for better organization`)]),b(`p`,null,[b(`strong`,null,`Examples:`),w(` Travel ï¿½ Flights, Hotels, Meals | Office ï¿½ Supplies, Equipment, Software`)])])],-1)])]),x.value.name?(s(),C(`div`,Wr,[t[20]||=b(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),b(`div`,Gr,[b(`p`,Kr,[t[16]||=b(`strong`,null,`Name:`,-1),w(` `+W(x.value.name),1)]),b(`p`,qr,[t[17]||=b(`strong`,null,`Type:`,-1),w(` `+W(x.value.parent_id?`Sub-category of "${A(x.value.parent_id)}"`:`Root Category`),1)]),x.value.description?(s(),C(`p`,Jr,[t[18]||=b(`strong`,null,`Description:`,-1),w(` `+W(x.value.description),1)])):S(``,!0),b(`p`,Yr,[t[19]||=b(`strong`,null,`Status:`,-1),b(`span`,{class:U(x.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(x.value.is_active?`Active`:`Inactive`),3)])])])):S(``,!0),b(`div`,Xr,[b(`button`,{type:`button`,onClick:N,disabled:p.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Zr),b(`button`,{type:`submit`,disabled:p.value||o.value||!E.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[p.value?(s(),C(`div`,$r,t[21]||=[b(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),w(` Creating... `,-1)])):(s(),C(`span`,ei,`Create Expense Category`))],8,Qr)])],32)])])])]))}}),ni=ti;const ri={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},ii={class:`max-w-4xl mx-auto`},ai={class:`mb-8`},oi={class:`flex items-center space-x-4 mb-2`},si={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},ci={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},li={class:`px-6 py-8`},ui={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},di={class:`md:col-span-2`},fi={key:0,class:`mt-1 text-xs text-gray-500`},pi={class:`md:col-span-2`},mi=[`disabled`],hi=[`value`],gi={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},_i={class:`md:col-span-2`},vi={class:`flex items-start`},yi={class:`flex items-center h-5`},bi=[`disabled`],xi=[`disabled`],Si={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Ci={key:1,class:`mt-1 text-xs text-gray-500`},wi={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},Ti={class:`space-y-2`},Ei={class:`text-sm text-green-700 dark:text-green-400`},Di={class:`text-sm text-green-700 dark:text-green-400`},Oi={key:0,class:`text-sm text-green-700 dark:text-green-400`},ki={class:`text-sm text-green-700 dark:text-green-400`},Ai={key:1,class:`p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg`},ji={class:`flex`},Mi={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Ni=[`disabled`],Pi=[`disabled`],Fi={key:0,class:`flex items-center justify-center`},Ii={key:1},Li={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Ri={class:`flex flex-col items-center`};var zi=E({__name:`EditPage`,props:{id:{},expenseCategory:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=J(),a=V({}),o=y(()=>Object.keys(a.value).length>0),l=e=>a.value[e]?.[0],u=e=>{a.value[e]&&delete a.value[e]},d=e=>{a.value={...e}},f=()=>{a.value={}},p=e=>{f();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},x=V(!1),E=V(!1),O=V(null),A=V({name:``,parent_id:``,description:``,is_active:!0}),j=V({name:``,parent_id:``,description:``,is_active:!0}),M=y(()=>A.value.name.trim().length>0&&A.value.name.length<=255&&(!A.value.description||A.value.description.length<=1e3)),N=y(()=>i.rootCategoriesOnly.filter(e=>e.id!==n.id)),P=e=>{if(!e)return``;let t=N.value.find(t=>t.id===Number(e));return t?.name||``},F=async()=>{try{E.value=!0;let e=n.expenseCategory||await i.fetchExpenseCategory(n.id);e&&(O.value=e,A.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},j.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},f())}catch(e){console.error(`Error loading expense category:`,e)}finally{E.value=!1}},R=async()=>{if(f(),p(A.value))try{x.value=!0;let e={name:A.value.name.trim(),is_active:A.value.is_active,parent_id:A.value.parent_id?Number(A.value.parent_id):null,description:A.value.description?.trim()??``};await i.updateExpenseCategory(n.id,e),j.value={...A.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&d(e.response.data.errors)}finally{x.value=!1}},B=()=>{r(`cancel`)},K=()=>{r(`back`)};return D(async()=>{await i.fetchExpenseCategories({is_active:!0}),F()}),L(()=>n.id,()=>{n.id&&F()}),(e,t)=>(s(),C(`div`,ri,[b(`div`,ii,[b(`div`,ai,[b(`div`,oi,[b(`button`,{onClick:K,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[T(H(k),{class:`w-5 h-5`})]),t[7]||=b(`div`,null,[b(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Expense Category `),b(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update expense category information and settings `)],-1)])]),E.value?(s(),C(`div`,si,t[8]||=[b(`div`,{class:`flex items-center justify-center`},[b(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),b(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading expense category...`)],-1)])):A.value?(s(),C(`div`,ci,[b(`div`,li,[b(`form`,{onSubmit:_(R,[`prevent`]),class:`space-y-8`},[b(`div`,null,[t[13]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),b(`div`,ui,[b(`div`,di,[T(G,{type:`text`,maxlength:255,disabled:x.value,onBlur:t[0]||=()=>u(`name`),modelValue:A.value.name,"onUpdate:modelValue":t[1]||=e=>A.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:l(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),A.value.name.length>0?(s(),C(`p`,fi,W(A.value.name.length)+`/255 characters `,1)):S(``,!0)]),b(`div`,pi,[t[10]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(b(`select`,{"onUpdate:modelValue":t[2]||=e=>A.value.parent_id=e,disabled:x.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>u(`parent_id`)},[t[9]||=b(`option`,{value:``},`Root Category (No Parent)`,-1),(s(!0),C(v,null,I(N.value,e=>(s(),C(`option`,{key:e.id,value:e.id},W(e.name),9,hi))),128))],42,mi),[[h,A.value.parent_id]]),l(`parent_id`)?(s(),C(`p`,gi,W(l(`parent_id`)),1)):S(``,!0),t[11]||=b(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),b(`div`,_i,[b(`div`,vi,[b(`div`,yi,[z(b(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>A.value.is_active=e,type:`checkbox`,disabled:x.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,bi),[[m,A.value.is_active]])]),t[12]||=b(`div`,{class:`ml-3`},[b(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),b(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this expense category will be available for selection `)],-1)])])])]),b(`div`,null,[t[15]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),b(`div`,null,[t[14]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(b(`textarea`,{"onUpdate:modelValue":t[5]||=e=>A.value.description=e,disabled:x.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>u(`description`)},null,42,xi),[[g,A.value.description]]),l(`description`)?(s(),C(`p`,Si,W(l(`description`)),1)):S(``,!0),A.value.description&&A.value.description.length>0?(s(),C(`p`,Ci,W(A.value.description.length)+`/1000 characters `,1)):S(``,!0)])]),A.value.name?(s(),C(`div`,wi,[t[20]||=b(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),b(`div`,Ti,[b(`p`,Ei,[t[16]||=b(`strong`,null,`Name:`,-1),w(` `+W(A.value.name),1)]),b(`p`,Di,[t[17]||=b(`strong`,null,`Type:`,-1),w(` `+W(A.value.parent_id?`Sub-category of "${P(A.value.parent_id)}"`:`Root Category`),1)]),A.value.description?(s(),C(`p`,Oi,[t[18]||=b(`strong`,null,`Description:`,-1),w(` `+W(A.value.description),1)])):S(``,!0),b(`p`,ki,[t[19]||=b(`strong`,null,`Status:`,-1),b(`span`,{class:U(A.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(A.value.is_active?`Active`:`Inactive`),3)])])])):S(``,!0),O.value?.has_children&&A.value.parent_id?(s(),C(`div`,Ai,[b(`div`,ji,[T(H(ee),{class:`h-5 w-5 text-amber-400 mr-2 mt-0.5`}),t[21]||=b(`div`,null,[b(`h4`,{class:`text-sm font-medium text-amber-800 dark:text-amber-300 mb-1`},` Warning: Category has sub-categories `),b(`p`,{class:`text-sm text-amber-700 dark:text-amber-400`},` This category has sub-categories. Changing its parent will affect the entire hierarchy structure. `)],-1)])])):S(``,!0),b(`div`,Mi,[b(`button`,{type:`button`,onClick:B,disabled:x.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Ni),b(`button`,{type:`submit`,disabled:x.value||o.value||!M.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[x.value?(s(),C(`div`,Fi,t[22]||=[b(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),w(` Updating... `,-1)])):(s(),C(`span`,Ii,`Update Expense Category`))],8,Pi)])],32)])])):(s(),C(`div`,Li,[b(`div`,Ri,[T(H(c),{class:`w-12 h-12 text-red-400 mb-4`}),t[23]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Expense Category Not Found `,-1),t[24]||=b(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The expense category you're trying to edit could not be found. `,-1),b(`button`,{onClick:K,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ï¿½ Back to Expense Categories `)])]))])]))}}),Bi=zi,Vi=class{baseUrl=`/setups/incomes/categories`;async getIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await j(`${this.baseUrl}?${t}`,{loadingMessage:`Loading income categories...`,showLoading:!0});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching income categories:`,e),e}}async getIncomeCategory(e){try{let t=await j(`${this.baseUrl}/${e}`,{loadingMessage:`Loading income category...`});return t.data.data}catch(e){throw console.error(`Error fetching income category:`,e),e}}async createIncomeCategory(e){try{let t=await N(this.baseUrl,e,{loadingMessage:`Creating income category...`,showSuccessNotification:!0,successMessage:`Income category created successfully`});return t.data.data}catch(e){throw console.error(`Error creating income category:`,e),e}}async updateIncomeCategory(e,t){try{let n=await P(`${this.baseUrl}/${e}`,t,{loadingMessage:`Updating income category...`,showSuccessNotification:!0,successMessage:`Income category updated successfully`});return n.data.data}catch(e){throw console.error(`Error updating income category:`,e),e}}async deleteIncomeCategory(e){try{await A(`${this.baseUrl}/${e}`,{loadingMessage:`Deleting income category...`,showSuccessNotification:!0,successMessage:`Income category deleted successfully`})}catch(e){throw console.error(`Error deleting income category:`,e),e}}async getTrashedIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await j(`${this.baseUrl}/trashed?${t}`,{loadingMessage:`Loading trashed income categories...`});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching trashed income categories:`,e),e}}async restoreIncomeCategory(e){try{let t=await M(`${this.baseUrl}/${e}/restore`,{},{loadingMessage:`Restoring income category...`,showSuccessNotification:!0,successMessage:`Income category restored successfully`});return t.data.data}catch(e){throw console.error(`Error restoring income category:`,e),e}}async forceDeleteIncomeCategory(e){try{await A(`${this.baseUrl}/${e}/force-delete`,{loadingMessage:`Permanently deleting income category...`,showSuccessNotification:!0,successMessage:`Income category permanently deleted`})}catch(e){throw console.error(`Error permanently deleting income category:`,e),e}}async getIncomeCategoriesForSelect(){try{let e=await j(`${this.baseUrl}`,{showLoading:!1}),t=e.data.data;return t.filter(e=>e.is_active).map(e=>({value:e.id,label:e.name,disabled:!1,parent_id:e.parent_id,level:0}))}catch(e){throw console.error(`Error fetching income categories for select:`,e),e}}async getIncomeCategoryHierarchy(){try{let e=await j(`${this.baseUrl}/hierarchy`,{loadingMessage:`Loading income category hierarchy...`});return e.data.data}catch(e){throw console.error(`Error fetching income category hierarchy:`,e),e}}async getRootIncomeCategories(){try{let e=await j(`${this.baseUrl}/roots`,{loadingMessage:`Loading root income categories...`});return e.data.data}catch(e){throw console.error(`Error fetching root income categories:`,e),e}}async getIncomeCategoryChildren(e){try{let t=await j(`${this.baseUrl}/${e}/children`,{loadingMessage:`Loading income category children...`});return t.data.data}catch(e){throw console.error(`Error fetching income category children:`,e),e}}async getIncomeCategoryStats(){try{let e=await j(`${this.baseUrl}/stats`,{loadingMessage:`Loading income category statistics...`});return e.data.data}catch(e){throw console.error(`Error fetching income category statistics:`,e),e}}async exportIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await j(`${this.baseUrl}/export?${t}`,{loadingMessage:`Exporting income categories...`,responseType:`blob`});return n.data.data}catch(e){throw console.error(`Error exporting income categories:`,e),e}}async searchIncomeCategories(e){try{let t=await j(`${this.baseUrl}/search?q=${encodeURIComponent(e)}`,{showLoading:!1});return t.data.data}catch(e){throw console.error(`Error searching income categories:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const $=new Vi,Hi=p(`incomeCategories`,()=>{let e=V([]),t=V(null),n=V([]),r=V([]),i=V([]),a=V(null),o=V(q()),s=V(!1),c=V({}),l=y(()=>e.value.filter(e=>e.is_active)),u=y(()=>e.value.filter(e=>!e.is_active)),d=y(()=>e.value.filter(e=>e.is_root)),f=y(()=>e.value.filter(e=>e.has_children)),p=y(()=>l.value.map(e=>({value:e.id,label:e.name,disabled:!1,parent_id:e.parent_id,level:0}))),m=y(()=>t=>t===null?e.value.filter(e=>e.parent_id===null):e.value.filter(e=>e.parent_id===t)),h=async t=>{try{s.value=!0,t&&(c.value={...c.value,...t});let n=await $.getIncomeCategories(c.value);e.value=n.data,o.value=n.pagination}catch(e){throw console.error(`Error fetching income categories:`,e),e}finally{s.value=!1}},g=async e=>{try{let n=await $.getIncomeCategory(e);return t.value=n,n}catch(e){throw console.error(`Error fetching income category:`,e),e}},_=async t=>{try{let n=await $.createIncomeCategory(t);return e.value.unshift(n),o.value.total+=1,n.is_root&&i.value.unshift(n),n}catch(e){throw console.error(`Error creating income category:`,e),e}},v=async(n,r)=>{try{let a=await $.updateIncomeCategory(n,r),o=e.value.findIndex(e=>e.id===n);o!==-1&&(e.value[o]=a);let s=i.value.findIndex(e=>e.id===n);return s===-1?a.is_root&&i.value.unshift(a):a.is_root?i.value[s]=a:i.value.splice(s,1),t.value?.id===n&&(t.value=a),a}catch(e){throw console.error(`Error updating income category:`,e),e}},b=async n=>{try{await $.deleteIncomeCategory(n);let r=e.value.findIndex(e=>e.id===n);r!==-1&&e.value.splice(r,1);let a=i.value.findIndex(e=>e.id===n);a!==-1&&i.value.splice(a,1),--o.value.total,t.value?.id===n&&(t.value=null)}catch(e){throw console.error(`Error deleting income category:`,e),e}},x=async e=>{try{s.value=!0;let t=e||{},r=await $.getTrashedIncomeCategories(t);n.value=r.data}catch(e){throw console.error(`Error fetching trashed income categories:`,e),e}finally{s.value=!1}},S=async t=>{try{let r=await $.restoreIncomeCategory(t),a=n.value.findIndex(e=>e.id===t);return a!==-1&&n.value.splice(a,1),e.value.unshift(r),o.value.total+=1,r.is_root&&i.value.unshift(r),r}catch(e){throw console.error(`Error restoring income category:`,e),e}},C=async e=>{try{await $.forceDeleteIncomeCategory(e);let t=n.value.findIndex(t=>t.id===e);t!==-1&&n.value.splice(t,1)}catch(e){throw console.error(`Error permanently deleting income category:`,e),e}},w=async()=>{try{s.value=!0;let e=await $.getIncomeCategoryHierarchy();return r.value=e,e}catch(e){throw console.error(`Error fetching income category hierarchy:`,e),e}finally{s.value=!1}},T=async()=>{try{let e=await $.getRootIncomeCategories();return i.value=e,e}catch(e){throw console.error(`Error fetching root income categories:`,e),e}},E=async e=>{try{return await $.getIncomeCategoryChildren(e)}catch(e){throw console.error(`Error fetching income category children:`,e),e}},D=async()=>{try{let e=await $.getIncomeCategoryStats();return a.value=e,e}catch(e){throw console.error(`Error fetching income category statistics:`,e),e}},O=async e=>{try{return await $.exportIncomeCategories(e)}catch(e){throw console.error(`Error exporting income categories:`,e),e}},k=async e=>{try{return await $.searchIncomeCategories(e)}catch(e){throw console.error(`Error searching income categories:`,e),e}},A=e=>{c.value={...c.value,...e}},j=()=>{c.value={}},M=()=>{t.value=null},N=()=>{e.value=[],t.value=null,n.value=[],r.value=[],i.value=[],a.value=null,o.value=q(),c.value={},s.value=!1},P=async()=>{try{return await $.getIncomeCategoriesForSelect()}catch(e){return console.error(`Error fetching income categories for select:`,e),[]}},F=(e,t=null)=>e.filter(e=>e.parent_id===t).map(t=>({...t,children:F(e,t.id)})),I=y(()=>F(e.value));return{incomeCategories:e,currentIncomeCategory:t,trashedIncomeCategories:n,hierarchyIncomeCategories:r,rootIncomeCategories:i,incomeCategoryStats:a,pagination:o,loading:s,filters:c,activeIncomeCategories:l,inactiveIncomeCategories:u,rootCategoriesOnly:d,categoriesWithChildren:f,incomeCategoriesForSelect:p,incomeCategoriesByParent:m,incomeCategoryTree:I,fetchIncomeCategories:h,fetchIncomeCategory:g,createIncomeCategory:_,updateIncomeCategory:v,deleteIncomeCategory:b,fetchTrashedIncomeCategories:x,restoreIncomeCategory:S,forceDeleteIncomeCategory:C,fetchIncomeCategoryHierarchy:w,fetchRootIncomeCategories:T,fetchIncomeCategoryChildren:E,fetchIncomeCategoryStats:D,exportIncomeCategories:O,searchIncomeCategories:k,updateFilters:A,clearFilters:j,clearCurrentIncomeCategory:M,reset:N,fetchIncomeCategoriesForSelect:P,buildTree:F}}),Ui={class:`space-y-6`},Wi={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},Gi={class:`grid grid-cols-1 md:grid-cols-5 gap-4`},Ki={class:`md:col-span-2`},qi={class:`relative`},Ji=[`value`],Yi={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},Xi={key:0,class:`p-8 text-center`},Zi={key:1,class:`p-8 text-center`},Qi={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},$i={key:0,class:`mt-6`},ea={key:2,class:`overflow-x-auto`},ta={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},na={class:`bg-gray-50 dark:bg-gray-700`},ra={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ia={class:`flex flex-col`},aa={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},oa={class:`flex flex-col`},sa={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ca={class:`flex flex-col`},la={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},ua={class:`px-6 py-4 whitespace-nowrap`},da={class:`flex items-center`},fa={class:`flex-shrink-0 h-10 w-10`},pa={class:`h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center`},ma={class:`ml-4`},ha={class:`text-sm font-medium text-gray-900 dark:text-white`},ga={class:`text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2`},_a={key:0,class:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`},va={class:`px-6 py-4 whitespace-nowrap`},ya={class:`text-sm text-gray-900 dark:text-white`},ba={class:`px-6 py-4`},xa={class:`text-sm text-gray-900 dark:text-white`},Sa={class:`px-6 py-4 whitespace-nowrap`},Ca={class:`text-sm text-gray-900 dark:text-white`},wa={key:0,class:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200`},Ta={key:1,class:`text-gray-500 dark:text-gray-400`},Ea={class:`px-6 py-4 whitespace-nowrap`},Da={class:`px-6 py-4 whitespace-nowrap`},Oa={class:`text-sm text-gray-900 dark:text-white`},ka={class:`text-sm text-gray-600 dark:text-gray-400`},Aa={class:`text-xs text-gray-500 dark:text-gray-500`},ja={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Ma={class:`flex items-center justify-end space-x-2`},Na=[`onClick`],Pa=[`onClick`],Fa=[`onClick`,`disabled`,`title`],Ia={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},La={class:`flex items-center justify-between`},Ra={class:`flex-1 flex justify-between sm:hidden`},za=[`disabled`],Ba=[`disabled`],Va={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Ha={class:`text-sm text-gray-700 dark:text-gray-300`},Ua={class:`font-medium`},Wa={class:`font-medium`},Ga={class:`font-medium`},Ka={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},qa=[`disabled`],Ja=[`disabled`];var Ya=E({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:c,emit:p}){f();let m=F(),_=Hi(),x=p,E=V(!1),k=V(!1),A=V(null),j=V(null),M=V(null),N=V(!1),P=B({search:``,parent_id:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),R=V({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),G=y(()=>_.incomeCategories),K=y(()=>_.pagination),ee=y(()=>_.loading),q=y(()=>_.rootIncomeCategories),oe=y(()=>[{key:`name`,label:`Category Name`,type:`text`},{key:`parent.name`,label:`Parent Category`,type:`text`,fallback:`Root Category`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_root`,label:`Category Type`,type:`custom`,customRender:e=>e?`Root Category`:`Sub Category`},{key:`has_children`,label:`Has Children`,type:`custom`,customRender:e=>e?`Yes`:`No`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...P}),e=>{let{page:t,...n}=e;_.updateFilters(n)},{deep:!0});let J=async(e=1)=>{try{let t={...P,page:e};await _.fetchIncomeCategories(t)}catch{m.error(`Failed to load income categories`,{title:`Error`})}},Y=()=>{J(P.page||1)},le=()=>{j.value&&clearTimeout(j.value),j.value=setTimeout(()=>{J(1)},300)},X=e=>{P.sort_by===e?P.sort_direction=P.sort_direction===`asc`?`desc`:`asc`:(P.sort_by=e,P.sort_direction=`asc`),J(1)},Z=e=>{e>=1&&K.value&&e<=K.value.last_page&&(P.page=e,J(e))},Q=e=>{M.value=e,N.value=!0},ue=e=>{if(e.has_children){m.warning(`Cannot delete category that has children`);return}A.value=e,R.value={title:`Delete Income Category`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},k.value=!0},de=async()=>{A.value&&(await _.deleteIncomeCategory(A.value.id),fe())},fe=()=>{k.value=!1,A.value=null,R.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},pe=()=>{x(`create`)},me=e=>{x(`edit`,e)};return D(async()=>{await _.fetchRootIncomeCategories(),J()}),c({refreshData:Y}),(r,c)=>(s(),C(`div`,Ui,[T(re,{title:`Income Categories`,description:`Manage income categories and classifications`,"create-button-text":`Create New Income Category`,onCreate:pe}),b(`div`,Wi,[b(`div`,Gi,[b(`div`,Ki,[c[13]||=b(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Income Categories `,-1),b(`div`,qi,[z(b(`input`,{id:`search`,"onUpdate:modelValue":c[0]||=e=>P.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:le},null,544),[[g,P.search]]),T(H(ne),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),b(`div`,null,[c[16]||=b(`label`,{for:`parent_category`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(b(`select`,{id:`parent_category`,"onUpdate:modelValue":c[1]||=e=>P.parent_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},[c[14]||=b(`option`,{value:``},`All Categories`,-1),c[15]||=b(`option`,{value:`null`},`Root Categories Only`,-1),(s(!0),C(v,null,I(q.value,e=>(s(),C(`option`,{key:e.id,value:e.id},W(e.name),9,Ji))),128))],544),[[h,P.parent_id]])]),b(`div`,null,[c[18]||=b(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(b(`select`,{id:`status`,"onUpdate:modelValue":c[2]||=e=>P.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},c[17]||=[b(`option`,{value:``},`All Status`,-1),b(`option`,{value:`true`},`Active`,-1),b(`option`,{value:`false`},`Inactive`,-1)],544),[[h,P.is_active]])]),b(`div`,null,[c[20]||=b(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(b(`select`,{id:`per-page`,"onUpdate:modelValue":c[3]||=e=>P.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},c[19]||=[b(`option`,{value:15},`15`,-1),b(`option`,{value:25},`25`,-1),b(`option`,{value:50},`50`,-1),b(`option`,{value:100},`100`,-1)],544),[[h,P.per_page]])])])]),b(`div`,Yi,[ee.value?(s(),C(`div`,Xi,[T(H(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),c[21]||=b(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading income categories...`,-1)])):G.value.length===0?(s(),C(`div`,Zi,[T(H(i),{class:`h-12 w-12 mx-auto text-gray-400`}),c[23]||=b(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No income categories found `,-1),b(`p`,Qi,W(P.search?`Try adjusting your search criteria.`:`Get started by creating your first income category.`),1),P.search?S(``,!0):(s(),C(`div`,$i,[b(`button`,{onClick:pe,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[T(H(e),{class:`h-5 w-5 mr-2`}),c[22]||=w(` Add Your First Income Category `,-1)])]))])):(s(),C(`div`,ea,[b(`table`,ta,[b(`thead`,na,[b(`tr`,null,[b(`th`,ra,[b(`button`,{onClick:c[4]||=e=>X(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[c[24]||=b(`span`,null,`Category Name`,-1),b(`div`,ia,[T(H(l),{class:U([`h-3 w-3`,P.sort_by===`name`&&P.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,P.sort_by===`name`&&P.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),c[27]||=b(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Parent Category `,-1),c[28]||=b(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),c[29]||=b(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Children `,-1),b(`th`,aa,[b(`button`,{onClick:c[5]||=e=>X(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[c[25]||=b(`span`,null,`Status`,-1),b(`div`,oa,[T(H(l),{class:U([`h-3 w-3`,P.sort_by===`is_active`&&P.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,P.sort_by===`is_active`&&P.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),b(`th`,sa,[b(`button`,{onClick:c[6]||=e=>X(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[c[26]||=b(`span`,null,`Created`,-1),b(`div`,ca,[T(H(l),{class:U([`h-3 w-3`,P.sort_by===`created_at`&&P.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),T(H(O),{class:U([`h-3 w-3 -mt-1`,P.sort_by===`created_at`&&P.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),c[30]||=b(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),b(`tbody`,la,[(s(!0),C(v,null,I(G.value,e=>(s(),C(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[b(`td`,ua,[b(`div`,da,[b(`div`,fa,[b(`div`,pa,[T(H(i),{class:`h-5 w-5 text-green-600 dark:text-green-400`})])]),b(`div`,ma,[b(`div`,ha,W(e.name),1),b(`div`,ga,[b(`span`,null,`ID: `+W(e.id),1),e.is_root?(s(),C(`span`,_a,` Root `)):S(``,!0)])])])]),b(`td`,va,[b(`div`,ya,W(e.parent?.name||`-`),1)]),b(`td`,ba,[b(`div`,xa,W(e.description||`No description provided`),1)]),b(`td`,Sa,[b(`div`,Ca,[e.has_children?(s(),C(`span`,wa,[T(H(a),{class:`w-3 h-3 mr-1`}),c[31]||=w(` Has Children `,-1)])):(s(),C(`span`,Ta,`-`))])]),b(`td`,Ea,[T(se,{active:e.is_active},null,8,[`active`])]),b(`td`,Da,[b(`div`,Oa,[b(`div`,ka,W(e.created_by?.name||`-`),1),b(`div`,Aa,W(H(ae)(e.created_at)),1)])]),b(`td`,ja,[b(`div`,Ma,[b(`button`,{onClick:t=>Q(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[T(H(o),{class:`w-4 h-4`})],8,Na),b(`button`,{onClick:t=>me(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Income Category`},[T(H(t),{class:`h-4 w-4`})],8,Pa),b(`button`,{onClick:t=>ue(e),disabled:e.has_children,class:U([`transition-colors duration-200`,e.has_children?`text-gray-400 dark:text-gray-600 cursor-not-allowed`:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300`]),title:e.has_children?`Cannot delete category with children`:`Delete Income Category`},[T(H(te),{class:`h-4 w-4`})],10,Fa)])])]))),128))])])])),K.value&&K.value.total>0?(s(),C(`div`,Ia,[b(`div`,La,[b(`div`,Ra,[b(`button`,{onClick:c[7]||=e=>Z(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,za),b(`button`,{onClick:c[8]||=e=>Z(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Ba)]),b(`div`,Va,[b(`div`,null,[b(`p`,Ha,[c[32]||=w(` Showing `,-1),b(`span`,Ua,W(K.value.from),1),c[33]||=w(` to `,-1),b(`span`,Wa,W(K.value.to),1),c[34]||=w(` of `,-1),b(`span`,Ga,W(K.value.total),1),c[35]||=w(` results `,-1)])]),b(`div`,null,[b(`nav`,Ka,[b(`button`,{onClick:c[9]||=e=>Z(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[T(H(d),{class:`h-5 w-5`})],8,qa),b(`button`,{onClick:c[10]||=e=>Z(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[T(H(u),{class:`h-5 w-5`})],8,Ja)])])])])])):S(``,!0)]),T(ie,{show:k.value,"onUpdate:show":c[11]||=e=>k.value=e,type:`delete`,title:R.value.title,message:R.value.message,"confirm-text":R.value.buttonText,"loading-text":R.value.loadingText,loading:E.value,onConfirm:de,onCancel:fe},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),T(ce,{show:N.value,"onUpdate:show":c[12]||=e=>N.value=e,item:M.value,title:`Income Category Details`,"display-fields":oe.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),Xa=Ya;const Za={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Qa={class:`max-w-4xl mx-auto`},$a={class:`mb-8`},eo={class:`flex items-center space-x-4 mb-2`},to={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},no={class:`px-6 py-8`},ro={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},io={class:`md:col-span-2`},ao={key:0,class:`mt-1 text-xs text-gray-500`},oo={class:`md:col-span-2`},so=[`disabled`],co=[`value`],lo={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},uo={class:`md:col-span-2`},fo={class:`flex items-start`},po={class:`flex items-center h-5`},mo=[`disabled`],ho=[`disabled`],go={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},_o={key:1,class:`mt-1 text-xs text-gray-500`},vo={class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},yo={class:`flex`},bo={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},xo={class:`space-y-2`},So={class:`text-sm text-green-700 dark:text-green-400`},Co={class:`text-sm text-green-700 dark:text-green-400`},wo={key:0,class:`text-sm text-green-700 dark:text-green-400`},To={class:`text-sm text-green-700 dark:text-green-400`},Eo={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Do=[`disabled`],Oo=[`disabled`],ko={key:0,class:`flex items-center justify-center`},Ao={key:1};var jo=E({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,i=Hi(),a=V({}),o=y(()=>Object.keys(a.value).length>0),c=e=>a.value[e]?.[0],l=e=>{a.value[e]&&delete a.value[e]},u=e=>{a.value={...e}},d=()=>{a.value={}},f=e=>{d();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},p=V(!1),x=V({name:``,parent_id:void 0,description:``,is_active:!0}),E=y(()=>x.value.name.trim().length>0&&x.value.name.length<=255&&(!x.value.description||x.value.description.length<=1e3)),O=y(()=>i.rootCategoriesOnly),A=e=>{if(!e)return``;let t=O.value.find(t=>t.id===Number(e));return t?.name||``},j=()=>{x.value={name:``,parent_id:void 0,description:``,is_active:!0},d()},M=async()=>{if(d(),f(x.value))try{p.value=!0;let e={name:x.value.name.trim(),is_active:x.value.is_active,parent_id:x.value.parent_id?Number(x.value.parent_id):null,description:x.value.description?.trim()??``};await i.createIncomeCategory(e),j(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{p.value=!1}},N=()=>{j(),n(`cancel`)},P=()=>{n(`back`)};return D(async()=>{await i.fetchIncomeCategories({is_active:!0}),j()}),(e,t)=>(s(),C(`div`,Za,[b(`div`,Qa,[b(`div`,$a,[b(`div`,eo,[b(`button`,{onClick:P,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[T(H(k),{class:`w-5 h-5`})]),t[7]||=b(`div`,null,[b(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Income Category `),b(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new income category classification `)],-1)])]),b(`div`,to,[b(`div`,no,[b(`form`,{onSubmit:_(M,[`prevent`]),class:`space-y-8`},[b(`div`,null,[t[12]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),b(`div`,ro,[b(`div`,io,[T(G,{type:`text`,maxlength:255,disabled:p.value,onBlur:t[0]||=()=>l(`name`),modelValue:x.value.name,"onUpdate:modelValue":t[1]||=e=>x.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:c(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),x.value.name.length>0?(s(),C(`p`,ao,W(x.value.name.length)+`/255 characters `,1)):S(``,!0)]),b(`div`,oo,[t[9]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(b(`select`,{"onUpdate:modelValue":t[2]||=e=>x.value.parent_id=e,disabled:p.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>l(`parent_id`)},[t[8]||=b(`option`,{value:``},`Root Category (No Parent)`,-1),(s(!0),C(v,null,I(O.value,e=>(s(),C(`option`,{key:e.id,value:e.id},W(e.name),9,co))),128))],42,so),[[h,x.value.parent_id]]),c(`parent_id`)?(s(),C(`p`,lo,W(c(`parent_id`)),1)):S(``,!0),t[10]||=b(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),b(`div`,uo,[b(`div`,fo,[b(`div`,po,[z(b(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>x.value.is_active=e,type:`checkbox`,disabled:p.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,mo),[[m,x.value.is_active]])]),t[11]||=b(`div`,{class:`ml-3`},[b(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),b(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this income category will be available for selection `)],-1)])])])]),b(`div`,null,[t[14]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),b(`div`,null,[t[13]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(b(`textarea`,{"onUpdate:modelValue":t[5]||=e=>x.value.description=e,disabled:p.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>l(`description`)},null,42,ho),[[g,x.value.description]]),c(`description`)?(s(),C(`p`,go,W(c(`description`)),1)):S(``,!0),x.value.description&&x.value.description.length>0?(s(),C(`p`,_o,W(x.value.description.length)+`/1000 characters `,1)):S(``,!0)])]),b(`div`,vo,[b(`div`,yo,[T(H(r),{class:`h-5 w-5 text-blue-400 mr-2 mt-0.5`}),t[15]||=b(`div`,null,[b(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-1`},` About Category Hierarchy `),b(`div`,{class:`text-sm text-blue-700 dark:text-blue-400 space-y-1`},[b(`p`,null,[b(`strong`,null,`Root Categories:`),w(` Top-level categories that can contain sub-categories`)]),b(`p`,null,[b(`strong`,null,`Sub-categories:`),w(` Categories that belong to a parent category for better organization`)]),b(`p`,null,[b(`strong`,null,`Examples:`),w(` Travel ï¿½ Flights, Hotels, Meals | Office ï¿½ Supplies, Equipment, Software`)])])],-1)])]),x.value.name?(s(),C(`div`,bo,[t[20]||=b(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),b(`div`,xo,[b(`p`,So,[t[16]||=b(`strong`,null,`Name:`,-1),w(` `+W(x.value.name),1)]),b(`p`,Co,[t[17]||=b(`strong`,null,`Type:`,-1),w(` `+W(x.value.parent_id?`Sub-category of "${A(x.value.parent_id)}"`:`Root Category`),1)]),x.value.description?(s(),C(`p`,wo,[t[18]||=b(`strong`,null,`Description:`,-1),w(` `+W(x.value.description),1)])):S(``,!0),b(`p`,To,[t[19]||=b(`strong`,null,`Status:`,-1),b(`span`,{class:U(x.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(x.value.is_active?`Active`:`Inactive`),3)])])])):S(``,!0),b(`div`,Eo,[b(`button`,{type:`button`,onClick:N,disabled:p.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Do),b(`button`,{type:`submit`,disabled:p.value||o.value||!E.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[p.value?(s(),C(`div`,ko,t[21]||=[b(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),w(` Creating... `,-1)])):(s(),C(`span`,Ao,`Create Income Category`))],8,Oo)])],32)])])])]))}}),Mo=jo;const No={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Po={class:`max-w-4xl mx-auto`},Fo={class:`mb-8`},Io={class:`flex items-center space-x-4 mb-2`},Lo={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Ro={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},zo={class:`px-6 py-8`},Bo={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Vo={class:`md:col-span-2`},Ho={key:0,class:`mt-1 text-xs text-gray-500`},Uo={class:`md:col-span-2`},Wo=[`disabled`],Go=[`value`],Ko={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},qo={class:`md:col-span-2`},Jo={class:`flex items-start`},Yo={class:`flex items-center h-5`},Xo=[`disabled`],Zo=[`disabled`],Qo={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},$o={key:1,class:`mt-1 text-xs text-gray-500`},es={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},ts={class:`space-y-2`},ns={class:`text-sm text-green-700 dark:text-green-400`},rs={class:`text-sm text-green-700 dark:text-green-400`},os={key:0,class:`text-sm text-green-700 dark:text-green-400`},ss={class:`text-sm text-green-700 dark:text-green-400`},cs={key:1,class:`p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg`},ls={class:`flex`},us={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},ds=[`disabled`],fs=[`disabled`],ps={key:0,class:`flex items-center justify-center`},ms={key:1},hs={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},gs={class:`flex flex-col items-center`};var _s=E({__name:`EditPage`,props:{id:{},incomeCategory:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=Hi(),a=V({}),o=y(()=>Object.keys(a.value).length>0),l=e=>a.value[e]?.[0],u=e=>{a.value[e]&&delete a.value[e]},d=e=>{a.value={...e}},f=()=>{a.value={}},p=e=>{f();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},x=V(!1),E=V(!1),O=V(null),A=V({name:``,parent_id:``,description:``,is_active:!0}),j=V({name:``,parent_id:``,description:``,is_active:!0}),M=y(()=>A.value.name.trim().length>0&&A.value.name.length<=255&&(!A.value.description||A.value.description.length<=1e3)),N=y(()=>i.rootCategoriesOnly.filter(e=>e.id!==n.id)),P=e=>{if(!e)return``;let t=N.value.find(t=>t.id===Number(e));return t?.name||``},F=async()=>{try{E.value=!0;let e=n.incomeCategory||await i.fetchIncomeCategory(n.id);e&&(O.value=e,A.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},j.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},f())}catch(e){console.error(`Error loading income category:`,e)}finally{E.value=!1}},R=async()=>{if(f(),p(A.value))try{x.value=!0;let e={name:A.value.name.trim(),is_active:A.value.is_active,parent_id:A.value.parent_id?Number(A.value.parent_id):null,description:A.value.description?.trim()??``};await i.updateIncomeCategory(n.id,e),j.value={...A.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&d(e.response.data.errors)}finally{x.value=!1}},B=()=>{r(`cancel`)},K=()=>{r(`back`)};return D(async()=>{await i.fetchIncomeCategories({is_active:!0}),F()}),L(()=>n.id,()=>{n.id&&F()}),(e,t)=>(s(),C(`div`,No,[b(`div`,Po,[b(`div`,Fo,[b(`div`,Io,[b(`button`,{onClick:K,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[T(H(k),{class:`w-5 h-5`})]),t[7]||=b(`div`,null,[b(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Income Category `),b(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update income category information and settings `)],-1)])]),E.value?(s(),C(`div`,Lo,t[8]||=[b(`div`,{class:`flex items-center justify-center`},[b(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),b(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading income category...`)],-1)])):A.value?(s(),C(`div`,Ro,[b(`div`,zo,[b(`form`,{onSubmit:_(R,[`prevent`]),class:`space-y-8`},[b(`div`,null,[t[13]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),b(`div`,Bo,[b(`div`,Vo,[T(G,{type:`text`,maxlength:255,disabled:x.value,onBlur:t[0]||=()=>u(`name`),modelValue:A.value.name,"onUpdate:modelValue":t[1]||=e=>A.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:l(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),A.value.name.length>0?(s(),C(`p`,Ho,W(A.value.name.length)+`/255 characters `,1)):S(``,!0)]),b(`div`,Uo,[t[10]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(b(`select`,{"onUpdate:modelValue":t[2]||=e=>A.value.parent_id=e,disabled:x.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>u(`parent_id`)},[t[9]||=b(`option`,{value:``},`Root Category (No Parent)`,-1),(s(!0),C(v,null,I(N.value,e=>(s(),C(`option`,{key:e.id,value:e.id},W(e.name),9,Go))),128))],42,Wo),[[h,A.value.parent_id]]),l(`parent_id`)?(s(),C(`p`,Ko,W(l(`parent_id`)),1)):S(``,!0),t[11]||=b(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),b(`div`,qo,[b(`div`,Jo,[b(`div`,Yo,[z(b(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>A.value.is_active=e,type:`checkbox`,disabled:x.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Xo),[[m,A.value.is_active]])]),t[12]||=b(`div`,{class:`ml-3`},[b(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),b(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this income category will be available for selection `)],-1)])])])]),b(`div`,null,[t[15]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),b(`div`,null,[t[14]||=b(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(b(`textarea`,{"onUpdate:modelValue":t[5]||=e=>A.value.description=e,disabled:x.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>u(`description`)},null,42,Zo),[[g,A.value.description]]),l(`description`)?(s(),C(`p`,Qo,W(l(`description`)),1)):S(``,!0),A.value.description&&A.value.description.length>0?(s(),C(`p`,$o,W(A.value.description.length)+`/1000 characters `,1)):S(``,!0)])]),A.value.name?(s(),C(`div`,es,[t[20]||=b(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),b(`div`,ts,[b(`p`,ns,[t[16]||=b(`strong`,null,`Name:`,-1),w(` `+W(A.value.name),1)]),b(`p`,rs,[t[17]||=b(`strong`,null,`Type:`,-1),w(` `+W(A.value.parent_id?`Sub-category of "${P(A.value.parent_id)}"`:`Root Category`),1)]),A.value.description?(s(),C(`p`,os,[t[18]||=b(`strong`,null,`Description:`,-1),w(` `+W(A.value.description),1)])):S(``,!0),b(`p`,ss,[t[19]||=b(`strong`,null,`Status:`,-1),b(`span`,{class:U(A.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(A.value.is_active?`Active`:`Inactive`),3)])])])):S(``,!0),O.value?.has_children&&A.value.parent_id?(s(),C(`div`,cs,[b(`div`,ls,[T(H(ee),{class:`h-5 w-5 text-amber-400 mr-2 mt-0.5`}),t[21]||=b(`div`,null,[b(`h4`,{class:`text-sm font-medium text-amber-800 dark:text-amber-300 mb-1`},` Warning: Category has sub-categories `),b(`p`,{class:`text-sm text-amber-700 dark:text-amber-400`},` This category has sub-categories. Changing its parent will affect the entire hierarchy structure. `)],-1)])])):S(``,!0),b(`div`,us,[b(`button`,{type:`button`,onClick:B,disabled:x.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,ds),b(`button`,{type:`submit`,disabled:x.value||o.value||!M.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[x.value?(s(),C(`div`,ps,t[22]||=[b(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),w(` Updating... `,-1)])):(s(),C(`span`,ms,`Update Income Category`))],8,fs)])],32)])])):(s(),C(`div`,hs,[b(`div`,gs,[T(H(c),{class:`w-12 h-12 text-red-400 mb-4`}),t[23]||=b(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Income Category Not Found `,-1),t[24]||=b(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The income category you're trying to edit could not be found. `,-1),b(`button`,{onClick:K,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ï¿½ Back to Income Categories `)])]))])]))}}),vs=_s;const ys={class:`min-h-screen`};var bs=E({__name:`TabPage`,setup(e){let t=V([{id:`account-types`,label:`Account Types`,icon:{type:`lucide`,name:`users`},color:`blue`},{id:`expense-categories`,label:`Expense Categories`,icon:{type:`lucide`,name:`FolderTree`},color:`red`},{id:`income-categories`,label:`Income Categories`,icon:{type:`lucide`,name:`FolderTree`},color:`green`}]),n=V(`account-types`),r=V(`accounttypeindex`),i=V(null),a=V(),o=V(),c=V(),l={"account-types":{index:`accounttypeindex`,create:`accounttypecreate`,edit:`accounttypeedit`},"income-categories":{index:`incomecategoriesindex`,create:`incomecategoriescreate`,edit:`incomecategoriesedit`},"expense-categories":{index:`expensecategoriesindex`,create:`expensecategoriescreate`,edit:`expensecategoriesedit`}},u=e=>{let t=l[e];t&&(r.value=t.create)},d=(e,t)=>{let n=l[e];n&&(i.value={type:e,id:t.id,data:t},r.value=n.edit)},f=e=>{let t=l[e];t&&(r.value=t.index,i.value=null)},p=e=>{let t=l[e];if(t){r.value=t.index,i.value=null;let n={"account-types":a,"expense-categories":o,"income-categories":c},s=n[e];s?.value?.refreshData&&s.value.refreshData()}},m=(e,t)=>{n.value=e;let a={"account-types":`accounttypeindex`,"expense-categories":`expensecategoriesindex`,"income-categories":`incomecategoriesindex`},o=a[e];o&&(r.value=o,i.value=null),console.log(`Switched to tab: ${e}`,t)};return(e,n)=>(s(),C(`div`,ys,[T(Y,{title:``,tabs:t.value,"default-tab":`account-types`,onTabChange:m},{"account-types":R(()=>[r.value===`accounttypeindex`?(s(),x(at,{key:0,onCreate:n[0]||=e=>u(`account-types`),onEdit:n[1]||=e=>d(`account-types`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):S(``,!0),r.value===`accounttypecreate`?(s(),x(Pt,{key:1,onBack:n[2]||=e=>f(`account-types`),onSuccess:n[3]||=e=>p(`account-types`),onCancel:n[4]||=e=>f(`account-types`)})):S(``,!0),r.value===`accounttypeedit`?(s(),x(pn,{key:2,onBack:n[5]||=e=>f(`account-types`),onSuccess:n[6]||=e=>p(`account-types`),onCancel:n[7]||=e=>f(`account-types`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):S(``,!0)]),"expense-categories":R(()=>[r.value===`expensecategoriesindex`?(s(),x(xr,{key:0,onCreate:n[8]||=e=>u(`expense-categories`),onEdit:n[9]||=e=>d(`expense-categories`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):S(``,!0),r.value===`expensecategoriescreate`?(s(),x(ni,{key:1,onBack:n[10]||=e=>f(`expense-categories`),onSuccess:n[11]||=e=>p(`expense-categories`),onCancel:n[12]||=e=>f(`expense-categories`)})):S(``,!0),r.value===`expensecategoriesedit`?(s(),x(Bi,{key:2,onBack:n[13]||=e=>f(`expense-categories`),onSuccess:n[14]||=e=>p(`expense-categories`),onCancel:n[15]||=e=>f(`expense-categories`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):S(``,!0)]),"income-categories":R(()=>[r.value===`incomecategoriesindex`?(s(),x(Xa,{key:0,onCreate:n[16]||=e=>u(`income-categories`),onEdit:n[17]||=e=>d(`income-categories`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):S(``,!0),r.value===`incomecategoriescreate`?(s(),x(Mo,{key:1,onBack:n[18]||=e=>f(`income-categories`),onSuccess:n[19]||=e=>p(`income-categories`),onCancel:n[20]||=e=>f(`income-categories`)})):S(``,!0),r.value===`incomecategoriesedit`?(s(),x(vs,{key:2,onBack:n[21]||=e=>f(`income-categories`),onSuccess:n[22]||=e=>p(`income-categories`),onCancel:n[23]||=e=>f(`income-categories`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):S(``,!0)]),_:1},8,[`tabs`])]))}}),xs=bs;export{xs as default};