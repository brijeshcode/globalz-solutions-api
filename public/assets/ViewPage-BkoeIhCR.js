import{A as e,F as t,W as ee,a$ as n,a7 as te,aC as r,aE as i,aF as a,aH as o,aI as s,aJ as ne,aL as c,aN as l,aO as re,aX as u,aY as d,aZ as f,aj as ie,an as ae,ao as oe,az as se,l as ce,n as le}from"./index-BwKalbrN.js";import{b as ue}from"./useAuth-BsIXqvhY.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import{b as de}from"./ConfirmationModal-CSmxd_XJ.js";import{b as p}from"./common-DPsEy-Xi.js";import"./Modal-Dyb5s5Dj.js";import{b as fe}from"./salesOrderStore-Yefx6QCX.js";import{b as pe}from"./SaleOrderApprove-BjBIT77h.js";const me={class:`max-w-8xl mx-auto py-2`},he={class:``},m={class:`mb-8`},h={class:`flex items-center space-x-4 mb-2`},g={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},_={class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},v={class:`flex items-center justify-between`},y={class:`text-lg font-medium text-gray-900 dark:text-white`},b={class:`text-sm text-gray-500 dark:text-gray-400`},x={class:`flex space-x-3`},S={class:`px-6 py-8`},C={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},w={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6`},T={class:`mt-1 text-sm text-gray-900 dark:text-white`},E={class:`mt-1 text-sm text-gray-900 dark:text-white`},D={class:`mt-1 text-sm text-gray-900 dark:text-white`},O={class:`mt-1 text-sm text-gray-900 dark:text-white`},k={class:`mt-1 text-sm text-gray-900 dark:text-white`},A={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4`},j={class:`mt-1 text-sm text-gray-900 dark:text-white`},M={key:0},N={class:`mt-1`},P={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},F={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},I={class:`mt-1 text-sm text-gray-900 dark:text-white`},L={class:`mt-1 text-sm text-gray-900 dark:text-white`},R={class:`mt-1 text-sm text-gray-900 dark:text-white`},ge={key:0},_e={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},ve={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},ye={key:1,class:`overflow-x-auto`},be={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},xe={class:`bg-gray-50 dark:bg-gray-700`},Se={key:0,class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ce={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},we={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Te={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ee={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},De={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Oe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},ke={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ae={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},je={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Me={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ne={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},z={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Pe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Fe={class:`bg-gray-50 dark:bg-gray-700`},Ie={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Le={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Re={key:0},ze={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Be={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Ve={key:0,class:`px-6 py-4`},He={class:`bg-green-50 dark:bg-green-900`},Ue={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},We={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},Ge={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},Ke={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},qe={class:`bg-blue-50 dark:bg-blue-900 rounded-lg p-4`},Je={class:`mt-1 text-lg font-medium text-blue-900 dark:text-blue-100`},Ye={class:`bg-blue-50 dark:bg-blue-900 rounded-lg p-4`},Xe={class:`mt-1 text-lg font-medium text-blue-900 dark:text-blue-100`},Ze={class:`mt-1 text-lg font-medium`},Qe={key:0,class:`mb-6`},$e={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},et={class:`text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap`},tt={class:`pt-6 border-t border-gray-200 dark:border-gray-700`},nt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},rt={class:`mt-1 text-sm text-gray-900 dark:text-white`},it={class:`mt-1 text-sm text-gray-900 dark:text-white`},at={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ot={class:`px-6 py-8 text-center`};var B=ne({__name:`ViewPage`,setup(ne){let B=oe(),V=ae(),H=ie(),U=fe(),{isSalesman:W,isAdmin:st}=ue(),G=parseInt(V.params.id),K=u(!0),q=u({}),J=u(!1),Y=u(!1),X=u(!1),ct=()=>{B.push({name:`salesOrder.index`})},lt=()=>{B.push({name:`salesOrder.edit`,params:{id:G.toString()}})},ut=()=>{Y.value=!0},dt=()=>{Y.value=!1,H.success(`Sale order approved successfully`),B.push({name:`salesOrder.index`})},ft=()=>{J.value=!0},pt=()=>{J.value=!1,X.value=!1},mt=async()=>{X.value=!0;try{await U.deleteSaleOrder(G),H.success(`Sale order deleted successfully`),B.push({name:`salesOrder.index`})}catch{H.error(`Failed to delete sale order`)}finally{X.value=!1}},ht=async()=>{try{K.value=!0,q.value=await U.fetchSaleOrder(G)}catch(e){console.error(`Error loading sale order:`,e),H.error(`Failed to load sale order details`),B.push({name:`salesOrder.index`})}finally{K.value=!1}},gt=e=>{if(!e)return`bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`;switch(e){case`Waiting`:return`bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`;case`Shipped`:return`bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`;case`Delivered`:return`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`;default:return`bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`}},Z=e=>{let t=Number(e||0);return t>0?`text-green-600 dark:text-green-400 font-medium`:t<0?`text-red-600 dark:text-red-400 font-medium`:`text-gray-600 dark:text-gray-400`},_t=e=>{let t=Number(e||0);return t>0?`bg-green-50 dark:bg-green-900 text-green-600 dark:text-green-400`:t<0?`bg-red-50 dark:bg-red-900 text-red-600 dark:text-red-400`:`bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400`},Q=e=>e?parseFloat(Number(e).toFixed(2)).toString():`0`,vt=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`})},$=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})};return c(async()=>{await ht()}),(ne,c)=>(l(),a(`div`,me,[r(`div`,he,[r(`div`,m,[r(`div`,h,[r(`button`,{onClick:ct,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[s(d(te),{class:`w-5 h-5`})]),c[2]||=r(`div`,null,[r(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Sale Order Details `),r(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` View sale order information `)],-1)])]),K.value?(l(),a(`div`,at,[r(`div`,ot,[s(d(t),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),c[45]||=r(`p`,{class:`mt-2 text-gray-600 dark:text-gray-400`},`Loading sale order details...`,-1)])])):(l(),a(`div`,g,[r(`div`,_,[r(`div`,v,[r(`div`,null,[r(`h3`,y,n(q.value.prefix)+`-`+n(q.value.code),1),r(`p`,b,` Sale Order ID: `+n(q.value.id),1),c[3]||=r(`span`,{class:`inline-flex mt-2 items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`},` Pending Approval `,-1)]),r(`div`,x,[d(st)?(l(),a(`button`,{key:0,onClick:ut,class:`inline-flex items-center px-3 py-2 border border-green-300 dark:border-green-600 text-sm font-medium rounded-md text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 hover:bg-green-50 dark:hover:bg-green-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200`},[s(d(ee),{class:`w-4 h-4 mr-2`}),c[4]||=o(` Approve `,-1)])):i(``,!0),r(`button`,{onClick:lt,class:`inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[s(d(e),{class:`w-4 h-4 mr-2`}),c[5]||=o(` Edit `,-1)]),r(`button`,{onClick:ft,class:`inline-flex items-center px-3 py-2 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200`},[s(d(ce),{class:`w-4 h-4 mr-2`}),c[6]||=o(` Delete `,-1)])])])]),r(`div`,S,[r(`div`,C,[c[14]||=r(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),r(`div`,w,[r(`div`,null,[c[7]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Order Date`,-1),r(`dd`,T,n(vt(q.value.date)),1)]),r(`div`,null,[c[8]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),r(`dd`,E,n(q.value.customer?.name),1)]),r(`div`,null,[c[9]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),r(`dd`,D,n(q.value.salesperson?.name||`-`),1)]),r(`div`,null,[c[10]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),r(`dd`,O,n(q.value.warehouse?.name),1)]),r(`div`,null,[c[11]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),r(`dd`,k,n(q.value.currency?.code)+` - `+n(q.value.currency?.name),1)])]),r(`div`,A,[r(`div`,null,[c[12]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency Rate`,-1),r(`dd`,j,n(Q(q.value.currency_rate)),1)]),q.value.status?(l(),a(`div`,M,[c[13]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Status`,-1),r(`dd`,N,[r(`span`,{class:f([gt(q.value.status),`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium`])},n(q.value.status),3)])])):i(``,!0)])]),r(`div`,P,[c[19]||=r(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Financial Summary `,-1),r(`div`,F,[r(`div`,null,[c[15]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Sub Total`,-1),r(`dd`,I,n(d(p)(q.value.sub_total)),1)]),r(`div`,null,[c[16]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Sub Total (USD)`,-1),r(`dd`,L,n(d(p)(q.value.sub_total_usd)),1)]),r(`div`,null,[c[17]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Discount Amount`,-1),r(`dd`,R,n(d(p)(q.value.discount_amount)),1)]),d(W)?i(``,!0):(l(),a(`div`,ge,[c[18]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Profit`,-1),r(`dd`,{class:f([`mt-1 text-sm`,Z(q.value.total_profit)])},n(d(p)(q.value.total_profit)),3)]))])]),r(`div`,_e,[c[37]||=r(`div`,{class:`flex items-center justify-between mb-4`},[r(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Sale Order Items `)],-1),q.value.items&&q.value.items.length===0?(l(),a(`div`,ve,[s(d(le),{class:`mx-auto h-12 w-12 text-gray-400`}),c[20]||=r(`h5`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items found`,-1),c[21]||=r(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`This sale order has no items.`,-1)])):(l(),a(`div`,ye,[r(`table`,be,[r(`thead`,xe,[r(`tr`,null,[c[22]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`#`,-1),c[23]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Code`,-1),c[24]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Item`,-1),c[25]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Unit`,-1),c[26]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[r(`abbr`,{title:`Total Quantity`},`QTY`)],-1),c[27]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Sale Price`,-1),c[28]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Cost Price`,-1),c[29]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[r(`abbr`,{title:`Discount Percentage`},`Dis. %`)],-1),c[30]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[r(`abbr`,{title:`Tax Percentage`},`Tax %`)],-1),c[31]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[r(`abbr`,{title:`Tax-inclusive Price`},`TTC`)],-1),c[32]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Total`,-1),c[33]||=r(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`USD`,-1),d(W)?i(``,!0):(l(),a(`th`,Se,`Profit`))])]),r(`tbody`,Ce,[(l(!0),a(se,null,re(q.value.items,(e,t)=>(l(),a(`tr`,{key:t,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[r(`td`,we,n(t+1),1),r(`td`,Te,n(e.item.code),1),r(`td`,Ee,n(e.item?.description),1),r(`td`,De,n(e.item?.unit?.name||`-`),1),r(`td`,Oe,n(Q(e.quantity)),1),r(`td`,ke,n(d(p)(e.price)),1),r(`td`,Ae,n(d(p)(e.cost_price)),1),r(`td`,je,n(Q(e.discount_percent))+`%`,1),r(`td`,Me,n(Q(e.tax_percent))+`%`,1),r(`td`,Ne,n(Q(e.ttc_price)),1),r(`td`,z,n(d(p)(e.total_price)),1),r(`td`,Pe,n(d(p)(e.total_price_usd)),1),d(W)?i(``,!0):(l(),a(`td`,{key:0,class:f([`px-6 py-4 whitespace-nowrap text-sm`,Z(e.unit_profit)])},n(d(p)(e.unit_profit)),3))]))),128))]),r(`tfoot`,Fe,[r(`tr`,null,[c[34]||=r(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Sub Total:`,-1),r(`td`,Ie,n(d(p)(q.value.sub_total)),1),r(`td`,Le,n(d(p)(q.value.sub_total_usd)),1),d(W)?i(``,!0):(l(),a(`td`,{key:0,class:f([`px-6 py-4 text-sm font-medium`,Z(q.value.total_profit)])},n(d(p)(q.value.total_profit)),3))]),q.value.discount_amount&&Number(q.value.discount_amount)>0?(l(),a(`tr`,Re,[c[35]||=r(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Additional Discount:`,-1),r(`td`,ze,`-`+n(d(p)(q.value.discount_amount)),1),r(`td`,Be,`-`+n(d(p)(q.value.discount_amount_usd)),1),d(W)?i(``,!0):(l(),a(`td`,Ve))])):i(``,!0),r(`tr`,He,[c[36]||=r(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-bold text-gray-900 dark:text-white`},`Final Total:`,-1),r(`td`,Ue,n(d(p)(q.value.total)),1),r(`td`,We,n(d(p)(q.value.total_usd)),1),d(W)?i(``,!0):(l(),a(`td`,{key:0,class:f([`px-6 py-4 text-sm font-bold`,Z(q.value.total_profit)])},n(d(p)(q.value.total_profit)),3))])])])]))]),r(`div`,Ge,[c[41]||=r(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Final Totals `,-1),r(`div`,Ke,[r(`div`,qe,[c[38]||=r(`dt`,{class:`text-sm font-medium text-blue-600 dark:text-blue-400`},`Total Amount`,-1),r(`dd`,Je,n(d(p)(q.value.total)),1)]),r(`div`,Ye,[c[39]||=r(`dt`,{class:`text-sm font-medium text-blue-600 dark:text-blue-400`},`Total Amount (USD)`,-1),r(`dd`,Xe,n(d(p)(q.value.total_usd)),1)]),d(W)?i(``,!0):(l(),a(`div`,{key:0,class:f([`rounded-lg p-4`,_t(q.value.total_profit)])},[c[40]||=r(`dt`,{class:`text-sm font-medium`},`Total Profit (USD)`,-1),r(`dd`,Ze,n(d(p)(q.value.total_profit)),1)],2))])]),q.value.note?(l(),a(`div`,Qe,[c[42]||=r(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Notes `,-1),r(`div`,$e,[r(`p`,et,n(q.value.note),1)])])):i(``,!0),r(`div`,tt,[r(`div`,nt,[r(`div`,null,[c[43]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created At`,-1),r(`dd`,rt,n($(q.value.created_at)),1)]),r(`div`,null,[c[44]||=r(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated`,-1),r(`dd`,it,n($(q.value.updated_at)),1)])])])])]))]),s(de,{show:J.value,"onUpdate:show":c[0]||=e=>J.value=e,type:`delete`,title:`Delete Sale Order ${q.value.prefix}-${q.value.code}`,message:`Are you sure you want to delete sale order '${q.value.prefix}-${q.value.code}'? This action can be undone by restoring from trash.`,"confirm-text":`Delete Sale Order`,"loading-text":`Deleting...`,loading:X.value,onConfirm:mt,onCancel:pt},null,8,[`show`,`title`,`message`,`loading`]),s(pe,{show:Y.value,"onUpdate:show":c[1]||=e=>Y.value=e,"sale-order":q.value,onApproved:dt},null,8,[`show`,`sale-order`])]))}}),V=B;export{V as default};