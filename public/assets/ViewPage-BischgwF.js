import{M as e,R as t,a1 as n,aB as r,aC as i,aD as ee,aF as a,aH as o,aI as te,aK as ne,aO as s,aR as c,aS as l,aV as u,ah as re,ai as d,at as f,av as p,aw as m,ax as ie,ay as h,az as g,m as ae,z as oe}from"./index-BDpughmq.js";import{b as se}from"./useAuth-DDh1Biip.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import"./StatusBadge-gQWuGOCM.js";import{b as _,c as v,d as y,f as b}from"./common-Cukj2-S-.js";import"./Modal-BcCsT0D_.js";import{b as x}from"./CustomerReturnMarkReceived-hNsPqNEE.js";import{b as S}from"./customerReturnOrdersStore-G1TKf4mA.js";import{b as C}from"./CustomerReturnApprove-og6r1Uh0.js";const w={class:`max-w-7xl mx-auto sm:px-6 lg:px-8 py-6`},T={class:`mb-6`},E={class:`flex items-center justify-between`},D={key:0,class:`mt-1 text-sm text-gray-600 dark:text-gray-400`},O={class:`flex items-center space-x-3`},k={key:0,class:`flex justify-center items-center py-8`},A={key:1,class:`space-y-6`},j={class:`flex items-center space-x-3`},M={key:0,class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200`},N={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},P={class:`px-6 py-4`},F={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3`},I={class:`mt-1 text-sm text-gray-900 dark:text-white font-mono`},L={class:`mt-1 text-sm text-gray-900 dark:text-white`},R={class:`mt-1 text-sm text-gray-900 dark:text-white`},z={class:`mt-1 text-sm text-gray-900 dark:text-white`},B={class:`mt-1 text-sm text-gray-900 dark:text-white`},V={class:`mt-1 text-sm text-gray-900 dark:text-white`},H={key:0},U={class:`mt-1 text-sm text-gray-900 dark:text-white`},W={key:0,class:`mt-6`},G={class:`mt-1 text-sm text-gray-900 dark:text-white`},K={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ce={class:`px-6 py-4`},le={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},ue={class:`mt-1 text-sm text-gray-900 dark:text-white`},de={class:`mt-1 text-sm text-gray-900 dark:text-white`},fe={key:0,class:`mt-6`},pe={class:`mt-1 text-sm text-gray-900 dark:text-white`},me={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},he={class:`px-6 py-4`},ge={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2`},_e={class:`mt-1 text-sm text-gray-900 dark:text-white`},ve={class:`mt-1 text-sm text-gray-900 dark:text-white`},ye={key:0,class:`mt-6`},be={class:`mt-1 text-sm text-gray-900 dark:text-white`},xe={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Se={class:`overflow-x-auto`},Ce={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},we={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Te={class:`px-6 py-4 whitespace-nowrap`},Ee={class:`flex items-center`},De={class:`flex-shrink-0 h-10 w-10`},Oe=[`src`,`alt`],ke={key:1,class:`h-10 w-10 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center`},Ae={class:`ml-4`},je={class:`text-sm font-medium text-gray-900 dark:text-white`},Me={class:`text-sm text-gray-500 dark:text-gray-400`},Ne={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Pe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Fe={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Ie={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Le={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},Re={class:`px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white`},ze={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900 dark:text-white`},Be={class:`px-6 py-4 text-right`},Ve={key:0,class:`px-6 py-4 text-right`},He={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ue={class:`px-6 py-4`},We={class:`grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-4`},Ge={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ke={class:`mt-1 text-sm text-gray-900 dark:text-white`},qe={class:`mt-1 text-sm text-gray-900 dark:text-white`};var q=ee({__name:`ViewPage`,setup(ee){let q=re(),J=d(),Je=S(),{isAdmin:Y,isWarehouseManager:Ye,hasAnyRole:Xe}=se(),X=c(null),Z=c(!0),Q=c(!1),$=c(!1),Ze=p(()=>Xe([`admin`,`salesman`])),Qe=p(()=>!0),$e=async()=>{try{Z.value=!0;let e=parseInt(q.params.id);X.value=await Je.fetchReturnOrder(e)}catch(e){console.error(`Error fetching return order:`,e),J.push({name:`customer.return-orders.index`})}finally{Z.value=!1}},et=e=>{X.value=e,Q.value=!1},tt=e=>{X.value=e,$.value=!1};return a(()=>{$e()}),(ee,a)=>{let c=ne(`router-link`);return o(),g(`div`,w,[m(`div`,T,[m(`div`,E,[m(`div`,null,[a[4]||=m(`h1`,{class:`text-2xl font-semibold text-gray-900 dark:text-white`},`Return Order Details`,-1),X.value?(o(),g(`p`,D,u(X.value.return_code)+` " `+u(l(v)(X.value.date)),1)):h(``,!0)]),m(`div`,O,[X.value&&!X.value.is_approved&&Ze.value?(o(),ie(c,{key:0,to:{name:`customer.return-orders.edit`,params:{id:X.value?.id}},class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},{default:s(()=>[i(l(ae),{class:`h-4 w-4 mr-2`}),a[5]||=r(` Edit `,-1)]),_:1,__:[5]},8,[`to`])):h(``,!0),X.value&&X.value.is_pending&&l(Y)?(o(),g(`button`,{key:1,onClick:a[0]||=e=>Q.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`},[i(l(t),{class:`h-4 w-4 mr-2`}),a[6]||=r(` Approve `,-1)])):h(``,!0),X.value&&X.value.is_approved&&!X.value.is_received&&Qe.value?(o(),g(`button`,{key:2,onClick:a[1]||=e=>$.value=!0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`},[i(l(e),{class:`h-4 w-4 mr-2`}),a[7]||=r(` Mark as Received `,-1)])):h(``,!0),i(c,{to:{name:`customer.return-orders.index`},class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},{default:s(()=>[i(l(n),{class:`h-4 w-4 mr-2`}),a[8]||=r(` Back to List `,-1)]),_:1,__:[8]})])])]),Z.value?(o(),g(`div`,k,a[9]||=[m(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`},null,-1)])):X.value?(o(),g(`div`,A,[m(`div`,j,[X.value.is_received?(o(),g(`span`,M,[i(l(t),{class:`h-4 w-4 mr-1`}),a[10]||=r(` Received `,-1)])):h(``,!0)]),m(`div`,N,[a[19]||=m(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[m(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Order Information`)],-1),m(`div`,P,[m(`dl`,F,[m(`div`,null,[a[11]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Return Code`,-1),m(`dd`,I,u(X.value.return_code),1)]),m(`div`,null,[a[12]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Date`,-1),m(`dd`,L,u(l(v)(X.value.date)),1)]),m(`div`,null,[a[13]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),m(`dd`,R,u(X.value.customer?.name),1)]),m(`div`,null,[a[14]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),m(`dd`,z,u(X.value.salesperson?.name),1)]),m(`div`,null,[a[15]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),m(`dd`,B,u(X.value.warehouse?.name),1)]),m(`div`,null,[a[16]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),m(`dd`,V,u(X.value.currency?.code),1)]),X.value.currency_rate?(o(),g(`div`,H,[a[17]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Exchange Rate`,-1),m(`dd`,U,u(X.value.currency_rate),1)])):h(``,!0)]),X.value.note?(o(),g(`div`,W,[a[18]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Note`,-1),m(`dd`,G,u(X.value.note),1)])):h(``,!0)])]),X.value.is_approved?(o(),g(`div`,K,[a[23]||=m(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[m(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),m(`div`,ce,[m(`dl`,le,[m(`div`,null,[a[20]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved By`,-1),m(`dd`,ue,u(X.value.approved_by_user?.name),1)]),m(`div`,null,[a[21]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved At`,-1),m(`dd`,de,u(l(y)(X.value.approved_at)),1)])]),X.value.approve_note?(o(),g(`div`,fe,[a[22]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approval Note`,-1),m(`dd`,pe,u(X.value.approve_note),1)])):h(``,!0)])])):h(``,!0),X.value.is_received?(o(),g(`div`,me,[a[27]||=m(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[m(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Receipt Information`)],-1),m(`div`,he,[m(`dl`,ge,[m(`div`,null,[a[24]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received By`,-1),m(`dd`,_e,u(X.value.return_received_by_user?.name),1)]),m(`div`,null,[a[25]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Received At`,-1),m(`dd`,ve,u(l(y)(X.value.return_received_at)),1)])]),X.value.return_received_note?(o(),g(`div`,ye,[a[26]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Receipt Note`,-1),m(`dd`,be,u(X.value.return_received_note),1)])):h(``,!0)])])):h(``,!0),m(`div`,xe,[a[31]||=m(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[m(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Return Items`)],-1),m(`div`,Se,[m(`table`,Ce,[a[30]||=m(`thead`,{class:`bg-gray-50 dark:bg-gray-900`},[m(`tr`,null,[m(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`item`),m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Quantity`),m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Unit Price`),m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[m(`abbr`,{title:`Discount %`},`Dis %`)]),m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[m(`abbr`,{title:`Tax %`},`TAX %`)]),m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},[m(`abbr`,{title:`ttc price`},`TTC`)]),m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total`),m(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`},`Total USD`)])],-1),m(`tbody`,we,[(o(!0),g(f,null,te(X.value.items,e=>(o(),g(`tr`,{key:e.id},[m(`td`,Te,[m(`div`,Ee,[m(`div`,De,[e.item?.image?(o(),g(`img`,{key:0,src:e.item.image,alt:e.item.name,class:`h-10 w-10 rounded object-cover`},null,8,Oe)):(o(),g(`div`,ke,[i(l(oe),{class:`h-6 w-6 text-gray-400`})]))]),m(`div`,Ae,[m(`div`,je,u(e.item?.name),1),m(`div`,Me,u(e.item_code),1)])])]),m(`td`,Ne,u(l(b)(e.quantity)),1),m(`td`,Pe,u(l(_)(e.price,X.value.currency?.code)),1),m(`td`,Fe,u(l(b)(e.discount_percent)),1),m(`td`,Ie,u(l(b)(e.tax_percent)),1),m(`td`,Le,u(l(b)(e.ttc_price)),1),m(`td`,Re,u(l(_)(e.total_price,X.value.currency?.code)),1),m(`td`,ze,u(l(_)(e.total_price_usd,`usd`)),1)]))),128))]),m(`tfoot`,null,[a[28]||=m(`td`,{colspan:`5`},null,-1),a[29]||=m(`td`,{class:`px-6 py-4 text-right`},`Total`,-1),m(`td`,Be,u(l(_)(X.value.total,X.value.currency?.code)),1),X.value.currency?.code===`USD`?h(``,!0):(o(),g(`td`,Ve,u(l(_)(X.value.total_usd,`usd`)),1))])])])]),m(`div`,He,[a[35]||=m(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[m(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Summary`)],-1),m(`div`,Ue,[m(`dl`,We,[m(`div`,null,[a[32]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Volume`,-1),m(`dd`,Ge,u(l(b)(X.value.total_volume_cbm)),1)]),m(`div`,null,[a[33]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Weight`,-1),m(`dd`,Ke,u(l(b)(X.value.total_weight_kg))+` kg`,1)]),m(`div`,null,[a[34]||=m(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Items`,-1),m(`dd`,qe,u(X.value.items?.length||0),1)])])])])])):h(``,!0),i(C,{show:Q.value,"onUpdate:show":a[2]||=e=>Q.value=e,"return-order":X.value,onApproved:et},null,8,[`show`,`return-order`]),i(x,{show:$.value,"onUpdate:show":a[3]||=e=>$.value=e,"return-order":X.value,onMarkedReceived:tt},null,8,[`show`,`return-order`])])}}}),J=q;export{J as default};