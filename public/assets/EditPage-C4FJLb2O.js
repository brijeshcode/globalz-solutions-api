import{O as e,R as t,a8 as ee,aD as te,aE as n,aI as ne,aK as re,aL as r,aO as ie,aP as ae,aR as i,aS as a,aU as o,aV as s,aW as oe,aX as se,aY as c,aZ as ce,al as le,az as ue,b0 as de,b2 as l,b3 as fe,b8 as pe,ba as u,bc as d,bd as f,be as me,bg as p,g as m}from"./index-CPSuq9q8.js";import"./GlobalConfig-wPgXFcZ5.js";import"./tableUtils-dXs1kjAL.js";import{b as he}from"./employeesStore-BZWbpLFe.js";import{c as ge}from"./departmentsStore-DypzqRtA.js";const _e={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},h={class:`max-w-4xl mx-auto`},g={class:`mb-8`},_={class:`flex items-center space-x-4 mb-2`},v={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},y={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},b={class:`px-6 py-8`},x={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},S={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},C={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},w={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},T={class:`md:col-span-2`},E={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},D={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},O=[`disabled`],k=[`value`],A={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},j={key:1,class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},M={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},N={class:`mb-6`},P=[`disabled`],F={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},I=[`disabled`],ve={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},ye={class:`pb-6`},be={class:`flex items-start`},xe={class:`flex items-center h-5`},Se=[`disabled`],Ce={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},we=[`disabled`],Te=[`disabled`],Ee={key:0,class:`flex items-center justify-center`},L={key:1},De={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Oe={class:`flex flex-col items-center`},ke={key:3,class:`mt-6 bg-white dark:bg-gray-800 shadow rounded-lg`},Ae={class:`px-6 py-4`},je={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Me={class:`text-sm text-gray-900 dark:text-gray-100`},Ne={class:`text-sm text-gray-900 dark:text-gray-100`},Pe={class:`text-sm text-gray-900 dark:text-gray-100`},Fe={class:`text-sm text-gray-900 dark:text-gray-100`},Ie={class:`text-sm text-gray-900 dark:text-gray-100`},Le={key:4,class:`mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4`},Re={class:`flex`},ze={class:`flex-shrink-0`};var R=ce({__name:`EditPage`,setup(ce){let R=n(),z=te(),Be=ue(),B=i(()=>parseInt(z.params.id)),V=he(),H=ge(),U=d(!1),W=d(!1),G=d({}),K=d({code:``,name:``,start_date:``,base_salary:0,mobile:``,phone:``,email:``,address:``,notes:``,department_id:void 0,user_id:void 0,is_active:!0}),q=i(()=>H.activeDepartments);i(()=>K.value.name?.trim().length>0&&K.value.mobile?.trim().length>0);let Ve=i(()=>Object.keys(G.value).length>0),J=i(()=>{if(!K.value)return null;let e=q.value.find(e=>e.id===K.value.department_id);return{code:K.value.code,name:K.value.name,mobile:K.value.mobile,email:K.value.email,departmentName:e?.name,is_active:K.value.is_active}}),Y=e=>G.value[e]||``,X=e=>{G.value[e]&&delete G.value[e]},Z=()=>{G.value={}},He=e=>{G.value={},Object.keys(e).forEach(t=>{G.value[t]=e[t][0]})},Q=async()=>{try{W.value=!0;let e=await V.fetchEmployee(B.value);e&&(K.value={start_date:e.start_date||``,code:e.code||``,name:e.name||``,base_salary:e.base_salary,mobile:e.mobile||``,phone:e.phone||``,email:e.email||``,address:e.address||``,notes:e.notes||``,department_id:e.department?.id||void 0,user_id:e.user?.id||void 0,is_active:e.is_active},Z())}catch(e){console.error(`Error loading employee:`,e)}finally{W.value=!1}},Ue=()=>{Z();let e=!0;return K.value.name?.trim()||(G.value.name=`Name is required`,e=!1),K.value.mobile?.trim()||(G.value.mobile=`Mobile is required`,e=!1),e},We=async()=>{if(Ue()){U.value=!0;try{let e={name:K.value.name,start_date:K.value.start_date,mobile:K.value.mobile,base_salary:K.value.base_salary,phone:K.value.phone||void 0,email:K.value.email||void 0,address:K.value.address||void 0,notes:K.value.notes||void 0,department_id:K.value.department_id,user_id:K.value.user_id,is_active:K.value.is_active};await V.updateEmployee(B.value,e),Be.success(`Employee updated successfully`),R.push({name:`employees.index`})}catch(e){e.response?.status===422&&e.response?.data?.errors&&He(e.response.data.errors)}finally{U.value=!1}}},Ge=()=>{R.push({name:`employees.index`})},$=()=>{R.push({name:`employees.index`})};return de(async()=>{try{W.value=!0,await Promise.all([H.fetchDepartments({is_active:!0})])}catch(e){console.error(`Error loading dropdown data:`,e)}finally{W.value=!1}await Q()}),pe(()=>B.value,()=>{B.value&&Q()}),(te,n)=>(l(),s(`div`,_e,[a(`div`,h,[a(`div`,g,[a(`div`,_,[a(`button`,{onClick:$,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[c(f(le),{class:`w-5 h-5`})]),n[22]||=a(`div`,null,[a(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Employee `),a(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update employee information and department details `)],-1)])]),W.value?(l(),s(`div`,v,n[23]||=[a(`div`,{class:`flex items-center justify-center`},[a(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-4`}),a(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading employee...`)],-1)])):K.value?(l(),s(`div`,y,[a(`div`,b,[a(`form`,{onSubmit:ie(We,[`prevent`]),class:`space-y-6`},[a(`div`,x,[n[25]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),a(`div`,S,[a(`div`,null,[c(m,{modelValue:K.value.code,"onUpdate:modelValue":n[0]||=e=>K.value.code=e,label:`Employee Code`,placeholder:`Auto-generated code`,disabled:``,error:Y(`code`)},null,8,[`modelValue`,`error`]),n[24]||=a(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Employee code is auto-generated and cannot be modified `,-1)]),a(`div`,null,[c(m,{modelValue:K.value.name,"onUpdate:modelValue":n[1]||=e=>K.value.name=e,label:`Name`,placeholder:`Employee full name`,disabled:U.value,error:Y(`name`),onBlur:n[2]||=e=>X(`name`),required:``,clearable:``},null,8,[`modelValue`,`disabled`,`error`])])])]),a(`div`,C,[n[26]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Contact Information `,-1),a(`div`,w,[a(`div`,null,[c(m,{modelValue:K.value.mobile,"onUpdate:modelValue":n[3]||=e=>K.value.mobile=e,label:`Mobile`,placeholder:`Employee mobile number`,disabled:U.value,error:Y(`mobile`),onBlur:n[4]||=e=>X(`mobile`),required:``,clearable:``},null,8,[`modelValue`,`disabled`,`error`])]),a(`div`,null,[c(m,{modelValue:K.value.phone,"onUpdate:modelValue":n[5]||=e=>K.value.phone=e,label:`Phone`,placeholder:`Optional phone number`,disabled:U.value,error:Y(`phone`),onBlur:n[6]||=e=>X(`phone`),clearable:``},null,8,[`modelValue`,`disabled`,`error`])]),a(`div`,T,[c(m,{modelValue:K.value.email,"onUpdate:modelValue":n[7]||=e=>K.value.email=e,type:`email`,label:`Email`,placeholder:`Optional email address`,disabled:U.value,error:Y(`email`),onBlur:n[8]||=e=>X(`email`),clearable:``},null,8,[`modelValue`,`disabled`,`error`])])])]),a(`div`,E,[n[31]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Department & Access `,-1),a(`div`,D,[a(`div`,null,[n[28]||=a(`label`,{for:`department_id`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Department `,-1),u(a(`select`,{id:`department_id`,"onUpdate:modelValue":n[9]||=e=>K.value.department_id=e,disabled:U.value||q.value.length===0,onChange:n[10]||=e=>X(`department_id`),class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},[n[27]||=a(`option`,{value:``},`No Department`,-1),(l(!0),s(ae,null,fe(q.value,e=>(l(),s(`option`,{key:e.id,value:e.id},p(e.name),9,k))),128))],40,O),[[re,K.value.department_id]]),Y(`department_id`)?(l(),s(`p`,A,p(Y(`department_id`)),1)):q.value.length===0?(l(),s(`p`,j,` No departments available `)):o(``,!0)]),a(`div`,null,[c(m,{modelValue:K.value.base_salary,"onUpdate:modelValue":n[11]||=e=>K.value.base_salary=e,label:`Base salary`,placeholder:`Employee base salary`,disabled:U.value,error:Y(`base_salary`),onBlur:n[12]||=e=>X(`base_salary`),required:``,clearable:``},null,8,[`modelValue`,`disabled`,`error`])]),a(`div`,null,[c(m,{modelValue:K.value.start_date,"onUpdate:modelValue":n[13]||=e=>K.value.start_date=e,label:`Start Date`,type:`date`,disabled:U.value,error:Y(`start_date`),onBlur:n[14]||=e=>X(`start_date`)},null,8,[`modelValue`,`disabled`,`error`])]),o(``,!0)])]),a(`div`,M,[n[34]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Additional Information `,-1),a(`div`,N,[n[32]||=a(`label`,{for:`address`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Address `,-1),u(a(`textarea`,{id:`address`,"onUpdate:modelValue":n[17]||=e=>K.value.address=e,rows:`3`,placeholder:`Optional employee address`,disabled:U.value,onBlur:n[18]||=e=>X(`address`),class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 dark:focus:ring-blue-400 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800 resize-vertical`},null,40,P),[[r,K.value.address]]),Y(`address`)?(l(),s(`p`,F,p(Y(`address`)),1)):o(``,!0)]),a(`div`,null,[n[33]||=a(`label`,{for:`notes`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Notes `,-1),u(a(`textarea`,{id:`notes`,"onUpdate:modelValue":n[19]||=e=>K.value.notes=e,rows:`3`,placeholder:`Optional notes about this employee`,disabled:U.value,onBlur:n[20]||=e=>X(`notes`),class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 dark:focus:ring-blue-400 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800 resize-vertical`},null,40,I),[[r,K.value.notes]]),Y(`notes`)?(l(),s(`p`,ve,p(Y(`notes`)),1)):o(``,!0)])]),a(`div`,ye,[n[36]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Status `,-1),a(`div`,be,[a(`div`,xe,[u(a(`input`,{id:`is_active`,"onUpdate:modelValue":n[21]||=e=>K.value.is_active=e,type:`checkbox`,disabled:U.value,class:`h-4 w-4 text-blue-600 focus:ring-blue-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Se),[[ne,K.value.is_active]])]),n[35]||=a(`div`,{class:`ml-3`},[a(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),a(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this employee will be available for use in the system `)],-1)])]),a(`div`,Ce,[a(`button`,{type:`button`,onClick:Ge,disabled:U.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,we),a(`button`,{type:`submit`,disabled:U.value||Ve.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[U.value?(l(),s(`div`,Ee,[c(f(e),{class:`animate-spin h-4 w-4 mr-2`}),n[37]||=se(` Updating... `,-1)])):(l(),s(`span`,L,`Update Employee`))],8,Te)])],32)])])):(l(),s(`div`,De,[a(`div`,Oe,[c(f(ee),{class:`w-12 h-12 text-red-400 mb-4`}),n[38]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Employee Not Found `,-1),n[39]||=a(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The employee you're trying to edit could not be found. `,-1),a(`button`,{onClick:$,class:`px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300`},` ← Back to Employees `)])])),K.value&&J.value?(l(),s(`div`,ke,[n[46]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Employee Preview `)],-1),a(`div`,Ae,[a(`div`,je,[a(`div`,null,[n[40]||=a(`span`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Code:`,-1),a(`p`,Me,p(J.value.code||`Auto-generated`),1)]),a(`div`,null,[n[41]||=a(`span`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Name:`,-1),a(`p`,Ne,p(J.value.name||`—`),1)]),a(`div`,null,[n[42]||=a(`span`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Mobile:`,-1),a(`p`,Pe,p(J.value.mobile||`—`),1)]),a(`div`,null,[n[43]||=a(`span`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Email:`,-1),a(`p`,Fe,p(J.value.email||`—`),1)]),a(`div`,null,[n[44]||=a(`span`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Department:`,-1),a(`p`,Ie,p(J.value.departmentName||`No Department`),1)]),a(`div`,null,[n[45]||=a(`span`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Status:`,-1),a(`span`,{class:me([`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium`,J.value.is_active?`bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400`:`bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400`])},p(J.value.is_active?`Active`:`Inactive`),3)])])])])):o(``,!0),K.value?(l(),s(`div`,Le,[a(`div`,Re,[a(`div`,ze,[c(f(t),{class:`h-5 w-5 text-blue-400`})]),n[47]||=oe(`<div class="ml-3"><h3 class="text-sm font-medium text-blue-800 dark:text-blue-300"> Editing Employee Information </h3><div class="mt-2 text-sm text-blue-700 dark:text-blue-400"><p class="mb-2"> Update the employee details carefully as this information is used for: </p><ul class="list-disc list-inside space-y-1"><li>System access and permissions (if user account is linked)</li><li>Department organization and reporting</li><li>Communication and contact purposes</li><li>Employee management and tracking</li><li>Reports and analytics</li></ul><p class="mt-2 text-xs"><strong>Note:</strong> The employee code cannot be changed once created. </p></div></div>`,1)])])):o(``,!0)])]))}}),z=R;export{z as default};