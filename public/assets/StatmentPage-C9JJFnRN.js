import{D as e,M as t,aC as n,aE as ee,aF as r,aG as te,aI as i,aK as a,aL as ne,aR as re,aS as o,aU as s,aV as c,aW as ie,aY as l,ag as u,ak as d,al as ae,as as f,aw as oe,ay as se,az as p,o as m,u as ce}from"./index-DpMJns70.js";import"./GlobalConfig-Dep5CV3r.js";import{c as le}from"./accountsStore-DnjAKIu4.js";import"./tableUtils-jdfVzp2e.js";import{b as ue}from"./PageHeader-CmyrhijE.js";import{b as h,c as de,f as g}from"./common-DPsEy-Xi.js";const _={class:`space-y-6`},v=[`disabled`],y={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},b={class:`grid grid-cols-1 md:grid-cols-6 gap-4`},x={class:`md:col-span-2`},S={class:`relative`},C={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},w={key:0,class:`p-8 text-center`},T={key:1,class:`p-8 text-center`},E={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},D={key:2,class:`overflow-x-auto`},O={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},k={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},A={class:`px-4 py-1 whitespace-nowrap`},j={class:`text-sm text-gray-900 dark:text-white`},M={class:`px-4 py-1 whitespace-nowrap`},N={class:`px-4 py-1 whitespace-nowrap`},P={class:`text-sm text-gray-900 dark:text-white`},F={class:`px-4 py-1 whitespace-nowrap`},I={class:`text-sm text-gray-900 dark:text-white`},L={class:`px-4 py-1 whitespace-nowrap text-right`},R={class:`text-sm font-medium text-red-600 dark:text-red-400`},fe={class:`px-4 py-1 whitespace-nowrap text-right`},z={class:`text-sm font-medium text-green-600 dark:text-green-400`},B={class:`px-4 py-1 whitespace-nowrap text-right`},V={class:`font-bold`},pe={class:`px-4 py-1 whitespace-nowrap text-right`},me={class:`px-4 py-1 whitespace-nowrap text-right`},he={class:`px-4 py-1 whitespace-nowrap text-right`};var H=te({__name:`StatmentPage`,setup(te){let H=d(),U=ae(),ge=u(),W=le(),G=se(()=>parseInt(H.params.id)),K=s(!1),q=s([]),J=s({}),Y=s(``),X=s(null),Z=s({search:``,from_date:``,to_date:``,withPage:!1}),Q=async()=>{try{K.value=!0;let e=await W.getAccountStatements(G.value,Z.value);console.log(e),q.value=e.data,J.value=e.stats}catch(e){ge.error(`Failed to load account statements`,{title:`Error`}),console.error(`Error fetching statements:`,e)}finally{K.value=!1}},_e=()=>{X.value&&clearTimeout(X.value),X.value=setTimeout(()=>{Q()},300)},$=()=>{Q()},ve=()=>{Z.value={search:``,from_date:``,to_date:``,withPage:!1},Q()},ye=e=>{let t={sales:`Sales`,payments:`Payment`,credit_note:`Credit Note`,debit_note:`Debit Note`,returns:`Return`,journal:`Journal Entry`,opening_balance:`Opening Balance`};return t[e]||e},be=async()=>{try{let e=await W.fetchAccount(G.value);Y.value=e.name}catch(e){console.error(`Error fetching account details:`,e)}},xe=()=>{U.push({name:`accounts.statement.preview`,params:{id:G.value},query:{from_date:Z.value.from_date,to_date:Z.value.to_date,search:Z.value.search}})};return i(async()=>{try{await Promise.all([be(),Q()])}catch(e){console.error(`Error loading initial data:`,e)}}),(te,i)=>(a(),n(`div`,_,[r(ue,{title:`Account Statement - ${Y.value}`,description:`View account transaction history including debits, credits, and balance`,showCreateButton:!1},{actions:re(()=>[p(`button`,{onClick:xe,disabled:q.value.length===0,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[r(c(ce),{class:`w-4 h-4 mr-2`}),i[3]||=ee(` Print Preview `,-1)],8,v)]),_:1},8,[`title`]),p(`div`,y,[p(`div`,b,[p(`div`,x,[i[4]||=p(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search `,-1),p(`div`,S,[o(p(`input`,{id:`search`,"onUpdate:modelValue":i[0]||=e=>Z.value.search=e,type:`text`,placeholder:`Search note...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:_e},null,544),[[f,Z.value.search]]),r(c(m),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),p(`div`,null,[i[5]||=p(`label`,{for:`from_date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` From Date `,-1),o(p(`input`,{id:`from_date`,"onUpdate:modelValue":i[1]||=e=>Z.value.from_date=e,type:`date`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:$},null,544),[[f,Z.value.from_date]])]),p(`div`,null,[i[6]||=p(`label`,{for:`to_date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` To Date `,-1),o(p(`input`,{id:`to_date`,"onUpdate:modelValue":i[2]||=e=>Z.value.to_date=e,type:`date`,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:$},null,544),[[f,Z.value.to_date]])]),p(`div`,{class:`flex items-end`},[p(`button`,{onClick:ve,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200`},` Clear `)])])]),p(`div`,C,[K.value?(a(),n(`div`,w,[r(c(e),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),i[7]||=p(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading statements...`,-1)])):q.value.length===0?(a(),n(`div`,T,[r(c(t),{class:`h-12 w-12 mx-auto text-gray-400`}),i[8]||=p(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No statements found `,-1),p(`p`,E,l(Z.value.search?`Try adjusting your search criteria.`:`No transactions available for this account.`),1)])):(a(),n(`div`,D,[p(`table`,O,[i[13]||=p(`thead`,{class:`bg-gray-50 dark:bg-gray-700`},[p(`tr`,null,[p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Date `),p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Type `),p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Transaction ID `),p(`th`,{class:`px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Note `),p(`th`,{class:`px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Debit `),p(`th`,{class:`px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Credit `),p(`th`,{class:`px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Balance `)])],-1),p(`tbody`,k,[i[11]||=p(`tr`,null,[p(`td`,{class:`px-4 py-1 whitespace-nowrap`,colspan:`3`}),p(`td`,{class:`px-4 py-1 whitespace-nowrap`},`Old Balance`),p(`td`,{class:`px-4 py-1 whitespace-nowrap text-right`},`0`),p(`td`,{class:`px-4 py-1 whitespace-nowrap text-right`},`0`),p(`td`,{class:`px-4 py-1 whitespace-nowrap text-right`},`0`)],-1),(a(!0),n(oe,null,ne(q.value,e=>(a(),n(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[p(`td`,A,[p(`div`,j,l(c(de)(e.date)),1)]),p(`td`,M,l(ye(e.type)),1),p(`td`,N,[p(`div`,P,l(e.code||`-`),1)]),p(`td`,F,[p(`div`,I,l(e.note||`-`),1)]),p(`td`,L,[p(`div`,R,l(e.debit?c(h)(e.debit,`usd`):`-`),1)]),p(`td`,fe,[p(`div`,z,l(e.credit?c(h)(e.credit,`usd`):`-`),1)]),p(`td`,B,[p(`div`,{class:ie([`text-sm font-medium`,e.balance>=0?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`])},l(c(h)(e.balance,`usd`)),3)])]))),128)),i[12]||=p(`tr`,null,[p(`td`,{class:`px-4 py-2`,colspan:`7`},`\xA0`)],-1),p(`tr`,V,[i[9]||=p(`td`,{class:`px-4 py-1 whitespace-nowrap`,colspan:`3`},null,-1),i[10]||=p(`td`,{class:`px-4 py-1 whitespace-nowrap`},`Total`,-1),p(`td`,pe,l(c(g)(J.value.total_debit)),1),p(`td`,me,l(c(g)(J.value.total_credit)),1),p(`td`,he,l(c(g)(J.value.balance)),1)])])])]))])]))}}),U=H;export{U as default};