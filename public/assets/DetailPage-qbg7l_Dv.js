import{Q as e,V as t,W as n,Y as r,_ as i,a$ as a,a6 as ee,aB as te,aC as ne,aN as re,aP as ie,aQ as o,aR as ae,aS as s,aT as c,aV as l,aW as u,aX as oe,aZ as se,aj as ce,b0 as le,b3 as d,b6 as f,b9 as p,ba as m,bb as ue,bd as h,i as de,t as fe}from"./index-BtPw0N95.js";import"./GlobalConfig-wPgXFcZ5.js";import"./tableUtils-ylneqlK-.js";import{d as g}from"./common-qdv5PS_C.js";import"./currencyUtil-Ciu0r-gB.js";import{b as _}from"./DataItems-wDLieK9p.js";import{b as pe,c as v}from"./SystemInfoCard-CMaRExjS.js";import{b as y}from"./documentService-CPhObUBH.js";import{c as b}from"./suppliersStore-FXn2KdGN.js";const x={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},S={class:`mb-8`},C={class:`flex items-center justify-between`},w={class:`flex items-center space-x-4`},T={class:`text-3xl font-bold text-gray-900 dark:text-gray-100`},E={class:`text-sm text-gray-600 dark:text-gray-400 mt-1`},D={class:`flex items-center space-x-3`},O={key:0,class:`flex items-center justify-center py-12`},k={key:1,class:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6`},A={class:`flex items-center`},j={class:`text-red-600 dark:text-red-400 mt-1`},M={key:2,class:`space-y-8`},N=[`href`],P={key:1},F={key:0},I={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},L=[`href`],R={key:1},z={class:`mt-1 text-sm text-gray-900 dark:text-gray-100`},B=[`href`],me={key:2,class:`sm:col-span-2`},he={class:`text-sm text-gray-900 dark:text-gray-100`},ge={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},_e={class:`grid grid-cols-1 gap-2 sm:grid-cols-3`},ve={class:`font-medium`},ye={key:0},be=[`href`],xe={key:1},Se=[`href`],Ce={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},we={class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},Te={class:`flex items-center justify-between`},Ee={class:`text-lg font-medium text-gray-900 dark:text-gray-100`},De={class:`px-6 py-5`},Oe={class:`grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3`},ke={class:`flex items-start space-x-3`},Ae={class:`flex-shrink-0`},je={class:`flex-1 min-w-0`},Me={class:`text-sm font-medium text-gray-900 dark:text-gray-100 truncate`},Ne={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},Pe={class:`text-xs text-gray-500 dark:text-gray-400`},Fe={class:`flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity`},Ie={class:`flex space-x-2`},Le=[`onClick`],Re=[`onClick`],ze={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Be={class:`px-6 py-8 text-center`},Ve={key:3,class:`fixed inset-0 z-50 overflow-y-auto`,"aria-labelledby":`modal-title`,role:`dialog`,"aria-modal":`true`},He={class:`flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0`},Ue={class:`inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6`},We={class:`absolute top-0 right-0 pt-4 pr-4`},Ge={class:`mt-3 text-center sm:mt-5`},Ke={class:`text-lg leading-6 font-medium text-gray-900 dark:text-gray-100 mb-4`},qe={key:0,class:`max-h-96 overflow-auto`},Je=[`src`,`alt`],Ye={key:1,class:`flex items-center justify-center py-8`},Xe={key:1,class:`h-96`},Ze=[`src`],Qe={key:1,class:`flex items-center justify-center py-8`},$e={key:2,class:`text-center py-8`},et={class:`mt-5 sm:mt-6 flex justify-center space-x-3`};var V=oe({__name:`DetailPage`,setup(oe){let V=ne(),H=te(),tt=ie(()=>parseInt(H.params.id)),nt=b(),U=p(null),W=p(!1),G=p(``),K=p(!1),q=p(null),J=p(``),Y=async()=>{try{W.value=!0,G.value=``,U.value=await nt.fetchSupplier(tt.value)}catch(e){G.value=e.message||`Failed to load supplier details`,console.error(`Error loading supplier:`,e)}finally{W.value=!1}},rt=()=>{V.push({name:`suppliers.index`})},it=()=>{U.value&&V.push({name:`suppliers.edit`,params:{id:U.value.id.toString()}})},X=async e=>{await y.download(e)},at=async e=>{try{q.value=e,K.value=!0;let t=await y.preview(e.id);J.value=t.preview_url}catch(t){console.error(`Error getting preview URL:`,t),J.value=st(e)}},Z=()=>{K.value=!1,q.value=null,J.value=``},ot=e=>Q(e)||$(e),Q=e=>{let t=e.file_extension?.toLowerCase();return[`jpg`,`jpeg`,`png`,`gif`,`bmp`,`svg`,`webp`].includes(t||``)},$=e=>{let t=e.file_extension?.toLowerCase();return t===`pdf`},st=e=>{let t=`https://staging.globalzsolutions.com`;return`${t}/api/documents/${e.id}/preview`},ct=r=>{let i=r?.toLowerCase();return[`jpg`,`jpeg`,`png`,`gif`,`bmp`,`svg`].includes(i)?e:[`pdf`].includes(i)?n:t};return se(()=>{Y()}),(e,t)=>(a(),c(`div`,x,[o(`div`,S,[o(`div`,C,[o(`div`,w,[o(`button`,{onClick:rt,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[u(m(ce),{class:`w-5 h-5`})]),o(`div`,null,[o(`h1`,T,h(U.value?.name||`Supplier Details`),1),o(`p`,E,` Supplier Code: `+h(U.value?.code),1)])]),o(`div`,D,[U.value?(a(),c(`span`,{key:0,class:ue([`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium`,U.value?.is_active?`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300`:`bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300`])},h(U.value?.is_active?`Active`:`Inactive`),3)):s(``,!0),o(`button`,{onClick:it,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700`},[u(m(fe),{class:`w-4 h-4 mr-2`}),t[1]||=l(` Edit `,-1)])])])]),W.value?(a(),c(`div`,O,t[2]||=[o(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),o(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading supplier details...`,-1)])):G.value?(a(),c(`div`,k,[o(`div`,A,[u(m(ee),{class:`w-6 h-6 text-red-500 mr-3`}),o(`div`,null,[t[3]||=o(`h3`,{class:`text-lg font-medium text-red-800 dark:text-red-300`},`Error Loading Supplier`,-1),o(`p`,j,h(G.value),1)])])])):U.value?(a(),c(`div`,M,[u(v,{title:`General Information`},{default:f(()=>[u(_,{label:`Supplier Name`,value:U.value.name},null,8,[`value`]),u(_,{label:`Code`,value:U.value.code},null,8,[`value`]),u(_,{label:`Type`,value:U.value.supplier_type?.name},null,8,[`value`]),u(_,{label:`Country`,value:U.value.country?.name},null,8,[`value`]),u(_,{label:`Currency`,value:`${U.value.currency?.name} (${U.value.currency?.code})`},null,8,[`value`])]),_:1}),u(v,{title:`Contact Information`,gridCols:`cols-2`},{default:f(()=>[u(_,{label:`Address`,value:U.value.address,class:`sm:col-span-2`},null,8,[`value`]),u(_,{label:`Phone`},{default:f(()=>[U.value.phone?(a(),c(`a`,{key:0,href:`tel:${U.value.phone}`,class:`text-indigo-600 hover:text-indigo-500`},h(U.value.phone),9,N)):(a(),c(`span`,P,`No phone number`))]),_:1}),U.value.email?(a(),c(`div`,F,[t[4]||=o(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Email`,-1),o(`dd`,I,[o(`a`,{href:`mailto:${U.value.email}`,class:`text-indigo-600 hover:text-indigo-500`},h(U.value.email),9,L)])])):s(``,!0),U.value.url?(a(),c(`div`,R,[t[5]||=o(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Website`,-1),o(`dd`,z,[o(`a`,{href:U.value.url,target:`_blank`,class:`text-indigo-600 hover:text-indigo-500`},h(U.value.url),9,B)])])):s(``,!0),U.value.contact_person?(a(),c(`div`,me,[t[6]||=o(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400 mb-2`},`Contact Person`,-1),o(`dd`,he,[o(`div`,ge,[o(`div`,_e,[o(`div`,null,[o(`span`,ve,h(U.value.contact_person),1)]),U.value.contact_person_email?(a(),c(`div`,ye,[o(`a`,{href:`mailto:${U.value.contact_person_email}`,class:`text-indigo-600 hover:text-indigo-500`},h(U.value.contact_person_email),9,be)])):s(``,!0),U.value.contact_person_mobile?(a(),c(`div`,xe,[o(`a`,{href:`tel:${U.value.contact_person_mobile}`,class:`text-indigo-600 hover:text-indigo-500`},h(U.value.contact_person_mobile),9,Se)])):s(``,!0)])])])])):s(``,!0)]),_:1}),u(v,{title:`Business Information`,gridCols:`cols-2`},{default:f(()=>[u(_,{label:`Payment Term`,value:U.value.payment_term?.name},null,8,[`value`]),u(_,{label:`Ship From`,value:U.value.ship_from},null,8,[`value`]),u(_,{label:`Discount Percentage`,value:`${U.value.discount_percentage}%`},null,8,[`value`]),u(_,{label:`Bank Information`,value:U.value.bank_info,class:`sm:col-span-2`},null,8,[`value`]),u(_,{label:`Notes`,value:U.value.notes,class:`sm:col-span-2`},null,8,[`value`])]),_:1}),U.value.documents&&U.value.documents.length>0?(a(),c(`div`,Ce,[o(`div`,we,[o(`div`,Te,[o(`h3`,Ee,` Documents (`+h(U.value.documents.length)+`) `,1)])]),o(`div`,De,[o(`div`,Oe,[(a(!0),c(re,null,le(U.value.documents,e=>(a(),c(`div`,{key:e.id,class:`relative group bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors`},[o(`div`,ke,[o(`div`,Ae,[(a(),ae(d(ct(e.file_extension)),{class:`h-8 w-8 text-gray-400`}))]),o(`div`,je,[o(`p`,Me,h(e.title||e.original_name),1),o(`p`,Ne,h(e.file_size_human),1),o(`p`,Pe,h(m(g)(e.created_at)),1)]),o(`div`,Fe,[o(`div`,Ie,[ot(e)?(a(),c(`button`,{key:0,onClick:t=>at(e),class:`text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300`,title:`Preview`},[u(m(r),{class:`h-5 w-5`})],8,Le)):s(``,!0),o(`button`,{onClick:t=>X(e),class:`text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300`,title:`Download`},[u(m(i),{class:`h-5 w-5`})],8,Re)])])])]))),128))])])])):(a(),c(`div`,ze,[t[9]||=o(`div`,{class:`px-6 py-5 border-b border-gray-200 dark:border-gray-700`},[o(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100`},` Documents `)],-1),o(`div`,Be,[u(m(n),{class:`mx-auto h-12 w-12 text-gray-400`}),t[7]||=o(`h3`,{class:`mt-4 text-sm font-medium text-gray-900 dark:text-gray-100`},`No documents`,-1),t[8]||=o(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},` No documents have been uploaded for this supplier. `,-1)])])),u(pe,{item:U.value,formatDateTime:m(g)},null,8,[`item`,`formatDateTime`])])):s(``,!0),K.value?(a(),c(`div`,Ve,[o(`div`,He,[o(`div`,{class:`fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity`,onClick:Z}),o(`div`,Ue,[o(`div`,We,[o(`button`,{onClick:Z,class:`bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none`},[u(m(de),{class:`h-6 w-6`})])]),o(`div`,Ge,[o(`h3`,Ke,h(q.value?.title||q.value?.original_name),1),q.value&&Q(q.value)?(a(),c(`div`,qe,[J.value?(a(),c(`img`,{key:0,src:J.value,alt:q.value.original_name,class:`max-w-full h-auto mx-auto rounded-lg shadow-lg`},null,8,Je)):(a(),c(`div`,Ye,t[10]||=[o(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),o(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading preview...`,-1)]))])):q.value&&$(q.value)?(a(),c(`div`,Xe,[J.value?(a(),c(`iframe`,{key:0,src:J.value,class:`w-full h-full border rounded-lg`,title:`PDF Preview`,frameborder:`0`},null,8,Ze)):(a(),c(`div`,Qe,t[11]||=[o(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`},null,-1),o(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading preview...`,-1)]))])):(a(),c(`div`,$e,[u(m(n),{class:`mx-auto h-12 w-12 text-gray-400 mb-4`}),t[12]||=o(`p`,{class:`text-gray-500 dark:text-gray-400`},`Preview not available for this file type.`,-1)]))]),o(`div`,et,[o(`button`,{onClick:t[0]||=e=>X(q.value),class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700`},[u(m(i),{class:`h-4 w-4 mr-2`}),t[13]||=l(` Download `,-1)]),o(`button`,{onClick:Z,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600`},` Close `)])])])])):s(``,!0)]))}}),H=V;export{H as default};