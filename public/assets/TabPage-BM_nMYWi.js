import{E as e,F as t,G as n,H as r,I as i,L as a,M as o,V as s,_ as c,a3 as l,a4 as u,a5 as d,a7 as f,a8 as p,aA as m,aa as h,ab as g,ac as _,ad as v,ae as y,af as b,ag as x,ah as S,ai as C,ak as ee,am as w,an as T,as as E,at as D,au as O,av as k,aw as A,ax as j,ay as M,c as N,i as P,k as F,n as I,p as L,r as R,t as z,y as B}from"./index-CxTKwM3X.js";import{b as V,c as te}from"./StatusBadge-0zRrsR2g.js";import{b as H}from"./ConfirmationModal-B2CGWCOC.js";import{c as U}from"./departmentsStore-ByaUeL_2.js";import{b as W}from"./Tabs-BOkv8WFO.js";import{b as ne}from"./DetailsModal-CdvxrH7W.js";const G={class:`space-y-6`},re={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},ie={class:`grid grid-cols-1 md:grid-cols-4 gap-4`},ae={class:`md:col-span-2`},oe={class:`relative`},se={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},ce={key:0,class:`p-8 text-center`},le={key:1,class:`p-8 text-center`},ue={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},de={key:0,class:`mt-6`},fe={key:2,class:`overflow-x-auto`},pe={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},me={class:`bg-gray-50 dark:bg-gray-700`},he={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ge={class:`flex flex-col`},_e={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ve={class:`flex flex-col`},ye={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},be={class:`flex flex-col`},xe={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Se={class:`px-6 py-4 whitespace-nowrap`},Ce={class:`flex items-center`},we={class:`flex-shrink-0 h-10 w-10`},Te={class:`h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},Ee={class:`ml-4`},De={class:`text-sm font-medium text-gray-900 dark:text-white`},Oe={class:`text-sm text-gray-500 dark:text-gray-400`},ke={class:`px-6 py-4 whitespace-nowrap`},Ae={class:`px-6 py-4 whitespace-nowrap`},je={class:`text-sm text-gray-900 dark:text-white`},Me={class:`text-sm text-gray-600 dark:text-gray-400`},Ne={class:`text-xs text-gray-500 dark:text-gray-500`},Pe={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Fe={class:`flex items-center justify-end space-x-2`},Ie=[`onClick`],Le=[`onClick`],Re=[`onClick`],ze={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},Be={class:`flex items-center justify-between`},Ve={class:`flex-1 flex justify-between sm:hidden`},He=[`disabled`],Ue=[`disabled`],We={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Ge={class:`text-sm text-gray-700 dark:text-gray-300`},Ke={class:`font-medium`},qe={class:`font-medium`},Je={class:`font-medium`},Ye={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},Xe=[`disabled`],Ze=[`disabled`];var K=C({__name:`IndexPage`,emits:[`create`,`edit`],setup(e,{expose:o,emit:l}){c();let f=s(),_=U(),b=l,C=A(!1),D=A(!1),N=A(null),z=A(null),W=A(null),K=A(!1),q=k({search:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),J=A({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),Y=h(()=>_.departments),X=h(()=>_.pagination),Qe=h(()=>_.loading),$e=h(()=>[{key:`name`,label:`Department Name`,type:`text`},{key:`description`,label:`Description`,type:`text`,fallback:`No description`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);E(()=>({...q}),e=>{let{page:t,...n}=e;_.updateFilters(n)},{deep:!0});let Z=async(e=1)=>{try{let t={...q,page:e};await _.fetchDepartments(t)}catch{f.error(`Failed to load departments`,{title:`Error`})}},et=()=>{Z(q.page||1)},tt=()=>{z.value&&clearTimeout(z.value),z.value=setTimeout(()=>{Z(1)},300)},Q=e=>{q.sort_by===e?q.sort_direction=q.sort_direction===`asc`?`desc`:`asc`:(q.sort_by=e,q.sort_direction=`asc`),Z(1)},$=e=>{e>=1&&X.value&&e<=X.value.last_page&&(q.page=e,Z(e))},nt=e=>{W.value=e,K.value=!0},rt=e=>new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}),it=e=>{N.value=e,J.value={title:`Delete Department`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},D.value=!0},at=async()=>{N.value&&(await _.deleteDepartment(N.value.id),ot())},ot=()=>{D.value=!1,N.value=null,J.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},st=()=>{b(`create`)},ct=e=>{b(`edit`,e)};return ee(()=>{Z()}),o({refreshData:et}),(e,o)=>(w(),y(`div`,G,[S(te,{title:`Departments`,description:`Manage company departments and organizational structure`,"create-button-text":`Create New Department`,onCreate:st}),g(`div`,re,[g(`div`,ie,[g(`div`,ae,[o[12]||=g(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Departments `,-1),g(`div`,oe,[O(g(`input`,{id:`search`,"onUpdate:modelValue":o[0]||=e=>q.search=e,type:`text`,placeholder:`Search by name, code, or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:tt},null,544),[[d,q.search]]),S(j(F),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),g(`div`,null,[o[14]||=g(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),O(g(`select`,{id:`status`,"onUpdate:modelValue":o[1]||=e=>q.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Z},o[13]||=[g(`option`,{value:``},`All Status`,-1),g(`option`,{value:`true`},`Active`,-1),g(`option`,{value:`false`},`Inactive`,-1)],544),[[u,q.is_active]])]),g(`div`,null,[o[16]||=g(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),O(g(`select`,{id:`per-page`,"onUpdate:modelValue":o[2]||=e=>q.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Z},o[15]||=[g(`option`,{value:15},`15`,-1),g(`option`,{value:25},`25`,-1),g(`option`,{value:50},`50`,-1),g(`option`,{value:100},`100`,-1)],544),[[u,q.per_page]])])])]),g(`div`,se,[Qe.value?(w(),y(`div`,ce,[S(j(R),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),o[17]||=g(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading departments...`,-1)])):Y.value.length===0?(w(),y(`div`,le,[S(j(a),{class:`h-12 w-12 mx-auto text-gray-400`}),o[19]||=g(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No departments found `,-1),g(`p`,ue,m(q.search?`Try adjusting your search criteria.`:`Get started by creating your first department.`),1),q.search?v(``,!0):(w(),y(`div`,de,[g(`button`,{onClick:st,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[S(j(I),{class:`h-5 w-5 mr-2`}),o[18]||=x(` Add Your First Department `,-1)])]))])):(w(),y(`div`,fe,[g(`table`,pe,[g(`thead`,me,[g(`tr`,null,[g(`th`,he,[g(`button`,{onClick:o[3]||=e=>Q(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[o[20]||=g(`span`,null,`Department`,-1),g(`div`,ge,[S(j(t),{class:M([`h-3 w-3`,q.sort_by===`name`&&q.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(j(i),{class:M([`h-3 w-3 -mt-1`,q.sort_by===`name`&&q.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),g(`th`,_e,[g(`button`,{onClick:o[4]||=e=>Q(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[o[21]||=g(`span`,null,`Status`,-1),g(`div`,ve,[S(j(t),{class:M([`h-3 w-3`,q.sort_by===`is_active`&&q.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(j(i),{class:M([`h-3 w-3 -mt-1`,q.sort_by===`is_active`&&q.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),g(`th`,ye,[g(`button`,{onClick:o[5]||=e=>Q(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[o[22]||=g(`span`,null,`Created`,-1),g(`div`,be,[S(j(t),{class:M([`h-3 w-3`,q.sort_by===`created_at`&&q.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),S(j(i),{class:M([`h-3 w-3 -mt-1`,q.sort_by===`created_at`&&q.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),o[23]||=g(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),g(`tbody`,xe,[(w(!0),y(p,null,T(Y.value,e=>(w(),y(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[g(`td`,Se,[g(`div`,Ce,[g(`div`,we,[g(`div`,Te,[S(j(a),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})])]),g(`div`,Ee,[g(`div`,De,m(e.name),1),g(`div`,Oe,m(e.description||`No description`),1)])])]),g(`td`,ke,[S(V,{active:e.is_active},null,8,[`active`])]),g(`td`,Ae,[g(`div`,je,[g(`div`,Me,m(e.created_by?.name||`-`),1),g(`div`,Ne,m(rt(e.created_at)),1)])]),g(`td`,Pe,[g(`div`,Fe,[g(`button`,{onClick:t=>nt(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[S(j(B),{class:`w-4 h-4`})],8,Ie),g(`button`,{onClick:t=>ct(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Department`},[S(j(L),{class:`h-4 w-4`})],8,Le),g(`button`,{onClick:t=>it(e),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Delete Department`},[S(j(P),{class:`h-4 w-4`})],8,Re)])])]))),128))])])])),X.value&&X.value.total>0?(w(),y(`div`,ze,[g(`div`,Be,[g(`div`,Ve,[g(`button`,{onClick:o[6]||=e=>$(X.value.current_page-1),disabled:X.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,He),g(`button`,{onClick:o[7]||=e=>$(X.value.current_page+1),disabled:X.value.current_page>=X.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Ue)]),g(`div`,We,[g(`div`,null,[g(`p`,Ge,[o[24]||=x(` Showing `,-1),g(`span`,Ke,m(X.value.from),1),o[25]||=x(` to `,-1),g(`span`,qe,m(X.value.to),1),o[26]||=x(` of `,-1),g(`span`,Je,m(X.value.total),1),o[27]||=x(` results `,-1)])]),g(`div`,null,[g(`nav`,Ye,[g(`button`,{onClick:o[8]||=e=>$(X.value.current_page-1),disabled:X.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(j(r),{class:`h-5 w-5`})],8,Xe),g(`button`,{onClick:o[9]||=e=>$(X.value.current_page+1),disabled:X.value.current_page>=X.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[S(j(n),{class:`h-5 w-5`})],8,Ze)])])])])])):v(``,!0)]),S(H,{show:D.value,"onUpdate:show":o[10]||=e=>D.value=e,type:`delete`,title:J.value.title,message:J.value.message,"confirm-text":J.value.buttonText,"loading-text":J.value.loadingText,loading:C.value,onConfirm:at,onCancel:ot},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),S(ne,{show:K.value,"onUpdate:show":o[11]||=e=>K.value=e,item:W.value,title:`Department Details`,"display-fields":$e.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),q=K;function J(){let e=A({}),t=h(()=>Object.keys(e.value).length>0),n=t=>e.value[t]?.[0],r=n=>{let r={};return!n.name||n.name.trim().length===0?r.name=[`Department name is required`]:n.name.trim().length>255&&(r.name=[`Department name must not exceed 255 characters`]),n.code!==void 0&&n.code!==null&&n.code.trim().length>0&&(n.code.trim().length>10?r.code=[`Department code must not exceed 10 characters`]:/^[A-Z0-9_-]+$/.test(n.code.trim())||(r.code=[`Department code must contain only uppercase letters, numbers, underscores, and hyphens`])),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Department description must not exceed 1000 characters`]),n.parent_id!==void 0&&n.parent_id!==null&&(typeof n.parent_id!=`number`||n.parent_id<=0)&&(r.parent_id=[`Parent department must be a valid department`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},i=n=>{let r={};return n.name!==void 0&&(!n.name||n.name.trim().length===0?r.name=[`Department name is required`]:n.name.trim().length>255&&(r.name=[`Department name must not exceed 255 characters`])),n.code!==void 0&&n.code!==null&&n.code.trim().length>0&&(n.code.trim().length>10?r.code=[`Department code must not exceed 10 characters`]:/^[A-Z0-9_-]+$/.test(n.code.trim())||(r.code=[`Department code must contain only uppercase letters, numbers, underscores, and hyphens`])),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Department description must not exceed 1000 characters`]),n.parent_id!==void 0&&n.parent_id!==null&&(typeof n.parent_id!=`number`||n.parent_id<=0)&&(r.parent_id=[`Parent department must be a valid department`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},a=()=>{e.value={}},o=t=>{e.value[t]&&delete e.value[t]},s=t=>{e.value=t};return{errors:e,hasErrors:t,getFieldError:n,validateCreateRequest:r,validateUpdateRequest:i,clearErrors:a,clearFieldError:o,setServerErrors:s}}const Y={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},X={class:`max-w-4xl mx-auto`},Qe={class:`mb-8`},$e={class:`flex items-center space-x-4 mb-2`},Z={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},et={class:`px-6 py-8`},tt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Q={class:`md:col-span-2`},$={key:0,class:`mt-1 text-xs text-gray-500`},nt={class:`md:col-span-2`},rt={class:`flex items-start`},it={class:`flex items-center h-5`},at=[`disabled`],ot=[`disabled`],st={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},ct={key:1,class:`mt-1 text-xs text-gray-500`},lt={key:0,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},ut={class:`space-y-2`},dt={class:`text-sm text-blue-700 dark:text-blue-400`},ft={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},pt={class:`text-sm text-blue-700 dark:text-blue-400`},mt={key:1,class:`text-sm text-blue-700 dark:text-blue-400`},ht={class:`text-sm text-blue-700 dark:text-blue-400`},gt={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},_t=[`disabled`],vt=[`disabled`],yt={key:0,class:`flex items-center justify-center`},bt={key:1},xt={class:`mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4`},St={class:`flex`},Ct={class:`flex-shrink-0`};var wt=C({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,r=U(),{errors:i,hasErrors:a,getFieldError:s,validateCreateRequest:c,clearFieldError:u,setServerErrors:p,clearErrors:_}=J(),C=A(!1),T=A(!1),E=A([]),D=A({name:``,code:``,description:``,is_active:!0,parent_id:void 0}),k=h(()=>D.value.name.trim().length>0&&D.value.name.length<=255&&(!D.value.code||D.value.code.length<=10&&/^[A-Z0-9_-]+$/.test(D.value.code))&&(!D.value.description||D.value.description.length<=1e3)),P=h(()=>D.value.parent_id&&E.value.find(e=>e.id===D.value.parent_id)||null),F=async()=>{try{T.value=!0,await r.fetchDepartments({is_active:!0,per_page:1e3,sort_by:`name`,sort_direction:`asc`}),E.value=r.departments}catch(e){console.error(`Failed to fetch parent departments:`,e)}finally{T.value=!1}},I=()=>{D.value={name:``,code:``,description:``,is_active:!0,parent_id:void 0},_()},L=async()=>{if(_(),c(D.value))try{C.value=!0;let e={name:D.value.name.trim(),is_active:D.value.is_active,...D.value.code&&{code:D.value.code.trim()},...D.value.description&&{description:D.value.description.trim()},...D.value.parent_id&&{parent_id:D.value.parent_id}};await r.createDepartment(e),I(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&p(e.response.data.errors)}finally{C.value=!1}},R=()=>{I(),n(`cancel`)},B=()=>{n(`back`)};return ee(()=>{I(),F()}),(e,t)=>(w(),y(`div`,Y,[g(`div`,X,[g(`div`,Qe,[g(`div`,$e,[g(`button`,{onClick:B,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(j(o),{class:`w-5 h-5`})]),t[5]||=g(`div`,null,[g(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Department `),g(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new department to the organization `)],-1)])]),g(`div`,Z,[g(`div`,et,[g(`form`,{onSubmit:f(L,[`prevent`]),class:`space-y-8`},[g(`div`,null,[t[7]||=g(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),g(`div`,tt,[g(`div`,Q,[S(N,{type:`text`,maxlength:255,disabled:C.value,onBlur:t[0]||=()=>j(u)(`name`),modelValue:D.value.name,"onUpdate:modelValue":t[1]||=e=>D.value.name=e,placeholder:`Enter department name (e.g., Human Resources)`,error:j(s)(`name`),required:``,label:`Department Name`},null,8,[`disabled`,`modelValue`,`error`]),D.value.name.length>0?(w(),y(`p`,$,m(D.value.name.length)+`/255 characters `,1)):v(``,!0)]),g(`div`,nt,[g(`div`,rt,[g(`div`,it,[O(g(`input`,{id:`is_active`,"onUpdate:modelValue":t[2]||=e=>D.value.is_active=e,type:`checkbox`,disabled:C.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,at),[[l,D.value.is_active]])]),t[6]||=g(`div`,{class:`ml-3`},[g(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),g(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this department will be available for selection `)],-1)])])])]),g(`div`,null,[t[9]||=g(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),g(`div`,null,[t[8]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Department Description `,-1),O(g(`textarea`,{"onUpdate:modelValue":t[3]||=e=>D.value.description=e,disabled:C.value,maxlength:1e3,rows:`4`,placeholder:`Enter department description and responsibilities (optional)`,class:M([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,j(s)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[4]||=()=>j(u)(`description`)},null,42,ot),[[d,D.value.description]]),j(s)(`description`)?(w(),y(`p`,st,m(j(s)(`description`)),1)):v(``,!0),D.value.description&&D.value.description.length>0?(w(),y(`p`,ct,m(D.value.description.length)+`/1000 characters `,1)):v(``,!0)])]),D.value.name?(w(),y(`div`,lt,[t[15]||=g(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Department Preview`,-1),g(`div`,ut,[g(`p`,dt,[t[10]||=g(`strong`,null,`Name:`,-1),x(` `+m(D.value.name),1)]),D.value.code?(w(),y(`p`,ft,[t[11]||=g(`strong`,null,`Code:`,-1),x(` `+m(D.value.code),1)])):v(``,!0),g(`p`,pt,[t[12]||=g(`strong`,null,`Type:`,-1),x(` `+m(P.value?`Sub-department of ${P.value.name}`:`Root Department`),1)]),D.value.description?(w(),y(`p`,mt,[t[13]||=g(`strong`,null,`Description:`,-1),x(` `+m(D.value.description),1)])):v(``,!0),g(`p`,ht,[t[14]||=g(`strong`,null,`Status:`,-1),g(`span`,{class:M(D.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},m(D.value.is_active?`Active`:`Inactive`),3)])])])):v(``,!0),g(`div`,gt,[g(`button`,{type:`button`,onClick:R,disabled:C.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,_t),g(`button`,{type:`submit`,disabled:C.value||j(a)||!k.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[C.value?(w(),y(`div`,yt,t[16]||=[g(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Creating... `,-1)])):(w(),y(`span`,bt,`Create Department`))],8,vt)])],32)])]),g(`div`,xt,[g(`div`,St,[g(`div`,Ct,[S(j(z),{class:`h-5 w-5 text-blue-400`})]),t[17]||=b(`<div class="ml-3"><h3 class="text-sm font-medium text-blue-800 dark:text-blue-300"> About Departments </h3><div class="mt-2 text-sm text-blue-700 dark:text-blue-400"><p class="mb-2"> Departments are used to organize employees and define organizational structure: </p><ul class="list-disc list-inside space-y-1"><li><strong>Name:</strong> Full department name (e.g., &quot;Human Resources&quot;)</li><li><strong>Code:</strong> Short identifier for the department (e.g., &quot;HR&quot;, &quot;IT&quot;)</li><li><strong>Parent:</strong> Create hierarchical structure by selecting a parent department</li><li><strong>Description:</strong> Additional details about the department&#39;s role</li><li><strong>Status:</strong> Active departments appear in employee assignment lists</li></ul></div></div>`,1)])])])]))}}),Tt=wt;const Et={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Dt={class:`max-w-4xl mx-auto`},Ot={class:`mb-8`},kt={class:`flex items-center space-x-4 mb-2`},At={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},jt={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Mt={class:`px-6 py-8`},Nt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Pt={class:`md:col-span-2`},Ft={key:0,class:`mt-1 text-xs text-gray-500`},It={class:`md:col-span-2`},Lt={class:`flex items-start`},Rt={class:`flex items-center h-5`},zt=[`disabled`],Bt=[`disabled`],Vt={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Ht={key:1,class:`mt-1 text-xs text-gray-500`},Ut={key:0,class:`p-4 bg-gray-50 dark:bg-gray-700 rounded-lg`},Wt={class:`text-sm text-gray-600 dark:text-gray-400`},Gt={key:0},Kt={class:`text-gray-900 dark:text-gray-100`},qt={key:1},Jt={key:1,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},Yt={class:`space-y-2`},Xt={class:`text-sm text-blue-700 dark:text-blue-400`},Zt={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},Qt={class:`text-sm text-blue-700 dark:text-blue-400`},$t={key:1,class:`text-sm text-blue-700 dark:text-blue-400`},en={class:`text-sm text-blue-700 dark:text-blue-400`},tn={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},nn=[`disabled`],rn=[`disabled`],an={key:0,class:`flex items-center justify-center`},on={key:1},sn={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},cn={class:`flex flex-col items-center`},ln={key:3,class:`mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4`},un={class:`flex`},dn={class:`flex-shrink-0`};var fn=C({__name:`EditPage`,props:{id:{},department:{}},emits:[`back`,`success`,`cancel`],setup(t,{emit:n}){let r=t,i=n,a=U(),{errors:s,hasErrors:c,getFieldError:u,validateUpdateRequest:p,clearFieldError:_,setServerErrors:C,clearErrors:T}=J(),D=A(!1),k=A(!1),P=A(!1),F=A([]),I=A(null),L=A({name:``,code:``,description:``,is_active:!0,parent_id:void 0}),R=A({name:``,code:``,description:``,is_active:!0,parent_id:void 0}),B=h(()=>L.value.name.trim().length>0&&L.value.name.length<=255&&(!L.value.code||L.value.code.length<=10&&/^[A-Z0-9_-]+$/.test(L.value.code))&&(!L.value.description||L.value.description.length<=1e3)),V=h(()=>L.value.parent_id&&F.value.find(e=>e.id===L.value.parent_id)||null);h(()=>{if(!I.value)return F.value;let e=new Set([I.value.id]),t=n=>{n.children&&n.children.forEach(n=>{e.add(n.id),t(n)})};return t(I.value),F.value.filter(t=>!e.has(t.id))});let te=async()=>{try{P.value=!0,await a.fetchDepartments({is_active:!0,per_page:1e3,sort_by:`name`,sort_direction:`asc`}),F.value=a.departments}catch(e){console.error(`Failed to fetch parent departments:`,e)}finally{P.value=!1}},H=async()=>{try{k.value=!0;let e=r.department||await a.fetchDepartment(r.id);e&&(I.value=e,L.value={name:e.name,code:e.code||``,description:e.description||``,is_active:e.is_active,parent_id:e.parent_id||void 0},R.value={name:e.name,code:e.code||``,description:e.description||``,is_active:e.is_active,parent_id:e.parent_id||void 0},T())}catch(e){console.error(`Error loading department:`,e)}finally{k.value=!1}},W=async()=>{if(T(),p(L.value))try{D.value=!0;let e={name:L.value.name.trim(),is_active:L.value.is_active,...L.value.code&&{code:L.value.code.trim()},...L.value.description&&{description:L.value.description.trim()},...L.value.parent_id&&{parent_id:L.value.parent_id}};L.value.parent_id||(e.parent_id=null),await a.updateDepartment(r.id,e),R.value={...L.value},i(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&C(e.response.data.errors)}finally{D.value=!1}},ne=()=>{i(`cancel`)},G=()=>{i(`back`)};return ee(()=>{Promise.all([H(),te()])}),E(()=>r.id,()=>{r.id&&H()}),(t,n)=>(w(),y(`div`,Et,[g(`div`,Dt,[g(`div`,Ot,[g(`div`,kt,[g(`button`,{onClick:G,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[S(j(o),{class:`w-5 h-5`})]),n[5]||=g(`div`,null,[g(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Department `),g(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update department information and settings `)],-1)])]),k.value?(w(),y(`div`,At,n[6]||=[g(`div`,{class:`flex items-center justify-center`},[g(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),g(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading department...`)],-1)])):L.value?(w(),y(`div`,jt,[g(`div`,Mt,[g(`form`,{onSubmit:f(W,[`prevent`]),class:`space-y-8`},[g(`div`,null,[n[8]||=g(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),g(`div`,Nt,[g(`div`,Pt,[S(N,{type:`text`,maxlength:255,disabled:D.value,onBlur:n[0]||=()=>j(_)(`name`),modelValue:L.value.name,"onUpdate:modelValue":n[1]||=e=>L.value.name=e,placeholder:`Enter department name (e.g., Human Resources)`,error:j(u)(`name`),required:``,label:`Department Name`},null,8,[`disabled`,`modelValue`,`error`]),L.value.name.length>0?(w(),y(`p`,Ft,m(L.value.name.length)+`/255 characters `,1)):v(``,!0)]),g(`div`,It,[g(`div`,Lt,[g(`div`,Rt,[O(g(`input`,{id:`is_active`,"onUpdate:modelValue":n[2]||=e=>L.value.is_active=e,type:`checkbox`,disabled:D.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,zt),[[l,L.value.is_active]])]),n[7]||=g(`div`,{class:`ml-3`},[g(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),g(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this department will be available for selection `)],-1)])])])]),g(`div`,null,[n[10]||=g(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),g(`div`,null,[n[9]||=g(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Department Description `,-1),O(g(`textarea`,{"onUpdate:modelValue":n[3]||=e=>L.value.description=e,disabled:D.value,maxlength:1e3,rows:`4`,placeholder:`Enter department description and responsibilities (optional)`,class:M([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,j(u)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:n[4]||=()=>j(_)(`description`)},null,42,Bt),[[d,L.value.description]]),j(u)(`description`)?(w(),y(`p`,Vt,m(j(u)(`description`)),1)):v(``,!0),L.value.description&&L.value.description.length>0?(w(),y(`p`,Ht,m(L.value.description.length)+`/1000 characters `,1)):v(``,!0)])]),I.value?(w(),y(`div`,Ut,[n[11]||=g(`h4`,{class:`text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},`Current Department Hierarchy`,-1),g(`div`,Wt,[I.value.parent?(w(),y(`span`,Gt,m(I.value.parent.name)+` → `,1)):v(``,!0),g(`strong`,Kt,m(I.value.name),1),I.value.children&&I.value.children.length>0?(w(),y(`span`,qt,` → `+m(I.value.children.length)+` sub-department`+m(I.value.children.length===1?``:`s`),1)):v(``,!0)])])):v(``,!0),L.value.name?(w(),y(`div`,Jt,[n[17]||=g(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Department Preview`,-1),g(`div`,Yt,[g(`p`,Xt,[n[12]||=g(`strong`,null,`Name:`,-1),x(` `+m(L.value.name),1)]),L.value.code?(w(),y(`p`,Zt,[n[13]||=g(`strong`,null,`Code:`,-1),x(` `+m(L.value.code),1)])):v(``,!0),g(`p`,Qt,[n[14]||=g(`strong`,null,`Type:`,-1),x(` `+m(V.value?`Sub-department of ${V.value.name}`:`Root Department`),1)]),L.value.description?(w(),y(`p`,$t,[n[15]||=g(`strong`,null,`Description:`,-1),x(` `+m(L.value.description),1)])):v(``,!0),g(`p`,en,[n[16]||=g(`strong`,null,`Status:`,-1),g(`span`,{class:M(L.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},m(L.value.is_active?`Active`:`Inactive`),3)])])])):v(``,!0),g(`div`,tn,[g(`button`,{type:`button`,onClick:ne,disabled:D.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,nn),g(`button`,{type:`submit`,disabled:D.value||j(c)||!B.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[D.value?(w(),y(`div`,an,n[18]||=[g(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),x(` Updating... `,-1)])):(w(),y(`span`,on,`Update Department`))],8,rn)])],32)])])):(w(),y(`div`,sn,[g(`div`,cn,[S(j(e),{class:`w-12 h-12 text-red-400 mb-4`}),n[19]||=g(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Department Not Found `,-1),n[20]||=g(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The department you're trying to edit could not be found. `,-1),g(`button`,{onClick:G,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ← Back to Departments `)])])),L.value?(w(),y(`div`,ln,[g(`div`,un,[g(`div`,dn,[S(j(z),{class:`h-5 w-5 text-blue-400`})]),n[21]||=b(`<div class="ml-3"><h3 class="text-sm font-medium text-blue-800 dark:text-blue-300"> Editing Department Information </h3><div class="mt-2 text-sm text-blue-700 dark:text-blue-400"><p class="mb-2"> Update department details carefully as this information affects: </p><ul class="list-disc list-inside space-y-1"><li>Employee assignment and organizational charts</li><li>Department hierarchies and reporting structure</li><li>Access permissions and role assignments</li><li>Reporting and analytics groupings</li></ul><p class="mt-2 text-xs"><strong>Note:</strong> Changing the parent department will affect the organizational hierarchy. </p></div></div>`,1)])])):v(``,!0)])]))}}),pn=fn;const mn={class:`min-h-screen`};var hn=C({__name:`TabPage`,setup(e){let t=A([{id:`departments`,label:`Departments`,icon:{type:`lucide`,name:`building-2`},color:`blue`}]),n=A(`departments`),r=A(`departmentindex`),i=A(null),a=A(),o={departments:{index:`departmentindex`,create:`departmentcreate`,edit:`departmentedit`}},s=e=>{let t=o[e];t&&(r.value=t.create)},c=(e,t)=>{let n=o[e];n&&(i.value={type:e,id:t.id,data:t},r.value=n.edit)},l=e=>{let t=o[e];t&&(r.value=t.index,i.value=null)},u=e=>{let t=o[e];if(t){r.value=t.index,i.value=null;let n={departments:a},o=n[e];o?.value?.refreshData&&o.value.refreshData()}},d=(e,t)=>{n.value=e;let a={departments:`departmentindex`},o=a[e];o&&(r.value=o,i.value=null),console.log(`Switched to tab: ${e}`,t)};return(e,n)=>(w(),y(`div`,mn,[S(W,{title:``,tabs:t.value,"default-tab":`departments`,onTabChange:d},{departments:D(()=>[r.value===`departmentindex`?(w(),_(q,{key:0,onCreate:n[0]||=e=>s(`departments`),onEdit:n[1]||=e=>c(`departments`,e),ref_key:`departmentIndexRef`,ref:a},null,512)):v(``,!0),r.value===`departmentcreate`?(w(),_(Tt,{key:1,onBack:n[2]||=e=>l(`departments`),onSuccess:n[3]||=e=>u(`departments`),onCancel:n[4]||=e=>l(`departments`)})):v(``,!0),r.value===`departmentedit`?(w(),_(pn,{key:2,onBack:n[5]||=e=>l(`departments`),onSuccess:n[6]||=e=>u(`departments`),onCancel:n[7]||=e=>l(`departments`),id:i.value.id,department:i.value.data},null,8,[`id`,`department`])):v(``,!0)]),_:1},8,[`tabs`])]))}}),gn=hn;export{gn as default};