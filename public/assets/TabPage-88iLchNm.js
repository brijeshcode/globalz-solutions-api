import{G as e,I as t,N as n,Q as r,U as i,V as a,Z as o,a$ as s,a7 as c,a8 as l,a9 as u,aD as d,aE as f,aH as p,aJ as m,aK as h,aN as g,aO as _,aQ as v,aR as y,aS as b,aT as x,aU as S,aW as C,aX as w,aY as T,aa as E,ab as D,ak as O,at as k,au as A,av as j,aw as M,ax as N,ay as P,b1 as F,b2 as I,b7 as L,b8 as R,b9 as z,ba as B,bb as V,bc as H,bd as U,bf as W,f as G,k as K,o as q,r as ee,x as te}from"./index-B0KD7do8.js";import"./GlobalConfig-wPgXFcZ5.js";import{d as ne}from"./common-CZbH6H1Z.js";import{b as J}from"./tableUtils-dXs1kjAL.js";import{b as re}from"./PageHeader-DVVxcgni.js";import{b as ie}from"./ConfirmationModal-D_gbbtq6.js";import{b as ae}from"./accountTypesStore-Cc6oVss2.js";import{b as oe}from"./StatusBadge-B7OM76Vw.js";import"./currencyUtil-DN8BeuxT.js";import{b as Y}from"./expenseCategoriesStore-CpBgAxba.js";import{b as X}from"./Tabs-CH-YWDrI.js";import{b as se}from"./DetailsModal-Cmy2aq02.js";const ce={class:`space-y-6`},le={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},Z={class:`grid grid-cols-1 md:grid-cols-4 gap-4`},Q={class:`md:col-span-2`},ue={class:`relative`},de={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},fe={key:0,class:`p-8 text-center`},pe={key:1,class:`p-8 text-center`},me={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},he={key:0,class:`mt-6`},ge={key:2,class:`overflow-x-auto`},_e={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},ve={class:`bg-gray-50 dark:bg-gray-700`},ye={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},be={class:`flex flex-col`},xe={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Se={class:`flex flex-col`},Ce={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},we={class:`flex flex-col`},Te={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Ee={class:`px-6 py-4 whitespace-nowrap`},De={class:`flex items-center`},Oe={class:`flex-shrink-0 h-10 w-10`},ke={class:`h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},Ae={class:`ml-4`},je={class:`text-sm font-medium text-gray-900 dark:text-white`},Me={class:`text-sm text-gray-500 dark:text-gray-400`},Ne={class:`px-6 py-4`},Pe={class:`text-sm text-gray-900 dark:text-white`},Fe={class:`px-6 py-4 whitespace-nowrap`},Ie={class:`px-6 py-4 whitespace-nowrap`},Le={class:`text-sm text-gray-900 dark:text-white`},Re={class:`text-sm text-gray-600 dark:text-gray-400`},ze={class:`text-xs text-gray-500 dark:text-gray-500`},Be={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Ve={class:`flex items-center justify-end space-x-2`},He=[`onClick`],Ue=[`onClick`],We=[`onClick`],Ge={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},Ke={class:`flex items-center justify-between`},qe={class:`flex-1 flex justify-between sm:hidden`},Je=[`disabled`],Ye=[`disabled`],Xe={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Ze={class:`text-sm text-gray-700 dark:text-gray-300`},Qe={class:`font-medium`},$e={class:`font-medium`},et={class:`font-medium`},tt={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},nt=[`disabled`],rt=[`disabled`];var it=T({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:i,emit:a}){d();let c=P(),f=ae(),p=a,g=V(!1),b=V(!1),T=V(null),O=V(null),k=V(null),A=V(!1),j=B({search:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),M=V({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),N=v(()=>f.accountTypes),R=v(()=>f.pagination),G=v(()=>f.loading),q=v(()=>[{key:`name`,label:`Account Type Name`,type:`text`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...j}),e=>{let{page:t,...n}=e;f.updateFilters(n)},{deep:!0});let J=async(e=1)=>{try{let t={...j,page:e};await f.fetchAccountTypes(t)}catch{c.error(`Failed to load account types`,{title:`Error`})}},Y=()=>{J(j.page||1)},X=()=>{O.value&&clearTimeout(O.value),O.value=setTimeout(()=>{J(1)},300)},it=e=>{j.sort_by===e?j.sort_direction=j.sort_direction===`asc`?`desc`:`asc`:(j.sort_by=e,j.sort_direction=`asc`),J(1)},at=e=>{e>=1&&R.value&&e<=R.value.last_page&&(j.page=e,J(e))},ot=e=>{k.value=e,A.value=!0},st=e=>{T.value=e,M.value={title:`Delete Account Type`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},b.value=!0},ct=async()=>{T.value&&(await f.deleteAccountType(T.value.id),lt())},lt=()=>{b.value=!1,T.value=null,M.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},ut=()=>{p(`create`)},dt=e=>{p(`edit`,e)};return s(()=>{J()}),i({refreshData:Y}),(r,i)=>(F(),S(`div`,ce,[w(re,{title:`Account Types`,description:`Manage account types and classifications`,"create-button-text":`Create New Account Type`,onCreate:ut}),y(`div`,le,[y(`div`,Z,[y(`div`,Q,[i[12]||=y(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Account Types `,-1),y(`div`,ue,[z(y(`input`,{id:`search`,"onUpdate:modelValue":i[0]||=e=>j.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:X},null,544),[[h,j.search]]),w(H(te),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),y(`div`,null,[i[14]||=y(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(y(`select`,{id:`status`,"onUpdate:modelValue":i[1]||=e=>j.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},i[13]||=[y(`option`,{value:``},`All Status`,-1),y(`option`,{value:`true`},`Active`,-1),y(`option`,{value:`false`},`Inactive`,-1)],544),[[m,j.is_active]])]),y(`div`,null,[i[16]||=y(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(y(`select`,{id:`per-page`,"onUpdate:modelValue":i[2]||=e=>j.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:J},i[15]||=[y(`option`,{value:15},`15`,-1),y(`option`,{value:25},`25`,-1),y(`option`,{value:50},`50`,-1),y(`option`,{value:100},`100`,-1)],544),[[m,j.per_page]])])])]),y(`div`,de,[G.value?(F(),S(`div`,fe,[w(H(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),i[17]||=y(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading account types...`,-1)])):N.value.length===0?(F(),S(`div`,pe,[w(H(K),{class:`h-12 w-12 mx-auto text-gray-400`}),i[19]||=y(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No account types found `,-1),y(`p`,me,W(j.search?`Try adjusting your search criteria.`:`Get started by creating your first account type.`),1),j.search?x(``,!0):(F(),S(`div`,he,[y(`button`,{onClick:ut,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[w(H(e),{class:`h-5 w-5 mr-2`}),i[18]||=C(` Add Your First Account Type `,-1)])]))])):(F(),S(`div`,ge,[y(`table`,_e,[y(`thead`,ve,[y(`tr`,null,[y(`th`,ye,[y(`button`,{onClick:i[3]||=e=>it(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[20]||=y(`span`,null,`Account Type`,-1),y(`div`,be,[w(H(l),{class:U([`h-3 w-3`,j.sort_by===`name`&&j.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,j.sort_by===`name`&&j.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),i[23]||=y(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),y(`th`,xe,[y(`button`,{onClick:i[4]||=e=>it(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[21]||=y(`span`,null,`Status`,-1),y(`div`,Se,[w(H(l),{class:U([`h-3 w-3`,j.sort_by===`is_active`&&j.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,j.sort_by===`is_active`&&j.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),y(`th`,Ce,[y(`button`,{onClick:i[5]||=e=>it(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[i[22]||=y(`span`,null,`Created`,-1),y(`div`,we,[w(H(l),{class:U([`h-3 w-3`,j.sort_by===`created_at`&&j.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,j.sort_by===`created_at`&&j.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),i[24]||=y(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),y(`tbody`,Te,[(F(!0),S(_,null,I(N.value,e=>(F(),S(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[y(`td`,Ee,[y(`div`,De,[y(`div`,Oe,[y(`div`,ke,[w(H(K),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})])]),y(`div`,Ae,[y(`div`,je,W(e.name),1),y(`div`,Me,` ID: `+W(e.id),1)])])]),y(`td`,Ne,[y(`div`,Pe,W(e.description||`No description provided`),1)]),y(`td`,Fe,[w(oe,{active:e.is_active},null,8,[`active`])]),y(`td`,Ie,[y(`div`,Le,[y(`div`,Re,W(e.created_by?.name||`-`),1),y(`div`,ze,W(H(ne)(e.created_at)),1)])]),y(`td`,Be,[y(`div`,Ve,[y(`button`,{onClick:t=>ot(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[w(H(o),{class:`w-4 h-4`})],8,He),y(`button`,{onClick:t=>dt(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Account Type`},[w(H(t),{class:`h-4 w-4`})],8,Ue),y(`button`,{onClick:t=>st(e),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Delete Account Type`},[w(H(ee),{class:`h-4 w-4`})],8,We)])])]))),128))])])])),R.value&&R.value.total>0?(F(),S(`div`,Ge,[y(`div`,Ke,[y(`div`,qe,[y(`button`,{onClick:i[6]||=e=>at(R.value.current_page-1),disabled:R.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,Je),y(`button`,{onClick:i[7]||=e=>at(R.value.current_page+1),disabled:R.value.current_page>=R.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Ye)]),y(`div`,Xe,[y(`div`,null,[y(`p`,Ze,[i[25]||=C(` Showing `,-1),y(`span`,Qe,W(R.value.from),1),i[26]||=C(` to `,-1),y(`span`,$e,W(R.value.to),1),i[27]||=C(` of `,-1),y(`span`,et,W(R.value.total),1),i[28]||=C(` results `,-1)])]),y(`div`,null,[y(`nav`,tt,[y(`button`,{onClick:i[8]||=e=>at(R.value.current_page-1),disabled:R.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[w(H(E),{class:`h-5 w-5`})],8,nt),y(`button`,{onClick:i[9]||=e=>at(R.value.current_page+1),disabled:R.value.current_page>=R.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[w(H(u),{class:`h-5 w-5`})],8,rt)])])])])])):x(``,!0)]),w(ie,{show:b.value,"onUpdate:show":i[10]||=e=>b.value=e,type:`delete`,title:M.value.title,message:M.value.message,"confirm-text":M.value.buttonText,"loading-text":M.value.loadingText,loading:g.value,onConfirm:ct,onCancel:lt},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),w(se,{show:A.value,"onUpdate:show":i[11]||=e=>A.value=e,item:k.value,title:`Account Type Details`,"display-fields":q.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),at=it;function ot(){let e=V({}),t=v(()=>Object.keys(e.value).length>0),n=t=>e.value[t]?.[0],r=n=>{let r={};return!n.name||n.name.trim().length===0?r.name=[`Account type name is required`]:n.name.trim().length>255&&(r.name=[`Account type name must not exceed 255 characters`]),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Account type description must not exceed 1000 characters`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},i=n=>{let r={};return n.name!==void 0&&(!n.name||n.name.trim().length===0?r.name=[`Account type name is required`]:n.name.trim().length>255&&(r.name=[`Account type name must not exceed 255 characters`])),n.description!==void 0&&n.description!==null&&n.description.trim().length>0&&n.description.trim().length>1e3&&(r.description=[`Account type description must not exceed 1000 characters`]),n.is_active!==void 0&&typeof n.is_active!=`boolean`&&(r.is_active=[`Status must be either active or inactive`]),e.value=r,!t.value},a=()=>{e.value={}},o=t=>{e.value[t]&&delete e.value[t]},s=t=>{e.value=t};return{errors:e,hasErrors:t,getFieldError:n,validateCreateRequest:r,validateUpdateRequest:i,clearErrors:a,clearFieldError:o,setServerErrors:s}}const st={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},ct={class:`max-w-4xl mx-auto`},lt={class:`mb-8`},ut={class:`flex items-center space-x-4 mb-2`},dt={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ft={class:`px-6 py-8`},pt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},mt={class:`md:col-span-2`},ht={key:0,class:`mt-1 text-xs text-gray-500`},gt={class:`md:col-span-2`},_t={class:`flex items-start`},vt={class:`flex items-center h-5`},yt=[`disabled`],bt=[`disabled`],xt={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},St={key:1,class:`mt-1 text-xs text-gray-500`},Ct={key:0,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},wt={class:`space-y-2`},Tt={class:`text-sm text-blue-700 dark:text-blue-400`},Et={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},Dt={class:`text-sm text-blue-700 dark:text-blue-400`},Ot={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},kt=[`disabled`],At=[`disabled`],jt={key:0,class:`flex items-center justify-center`},Mt={key:1};var Nt=T({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,r=ae(),{errors:i,hasErrors:a,getFieldError:o,validateCreateRequest:c,clearFieldError:l,setServerErrors:u,clearErrors:d}=ot(),f=V(!1),m=V({name:``,description:``,is_active:!0}),_=v(()=>m.value.name.trim().length>0&&m.value.name.length<=255&&(!m.value.description||m.value.description.length<=1e3)),b=()=>{m.value={name:``,description:``,is_active:!0},d()},T=async()=>{if(d(),c(m.value))try{f.value=!0;let e={name:m.value.name.trim(),is_active:m.value.is_active,description:m.value.description?.trim()??``};await r.createAccountType(e),b(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{f.value=!1}},E=()=>{b(),n(`cancel`)},D=()=>{n(`back`)};return s(()=>{b()}),(e,t)=>(F(),S(`div`,st,[y(`div`,ct,[y(`div`,lt,[y(`div`,ut,[y(`button`,{onClick:D,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[w(H(O),{class:`w-5 h-5`})]),t[5]||=y(`div`,null,[y(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Account Type `),y(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new account type classification `)],-1)])]),y(`div`,dt,[y(`div`,ft,[y(`form`,{onSubmit:g(T,[`prevent`]),class:`space-y-8`},[y(`div`,null,[t[7]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),y(`div`,pt,[y(`div`,mt,[w(G,{type:`text`,maxlength:255,disabled:f.value,onBlur:t[0]||=()=>H(l)(`name`),modelValue:m.value.name,"onUpdate:modelValue":t[1]||=e=>m.value.name=e,placeholder:`Enter account type name (e.g., Retail, Wholesale, Corporate)`,error:H(o)(`name`),required:``,label:`Account Type Name`},null,8,[`disabled`,`modelValue`,`error`]),m.value.name.length>0?(F(),S(`p`,ht,W(m.value.name.length)+`/255 characters `,1)):x(``,!0)]),y(`div`,gt,[y(`div`,_t,[y(`div`,vt,[z(y(`input`,{id:`is_active`,"onUpdate:modelValue":t[2]||=e=>m.value.is_active=e,type:`checkbox`,disabled:f.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,yt),[[p,m.value.is_active]])]),t[6]||=y(`div`,{class:`ml-3`},[y(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),y(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this account type will be available for selection `)],-1)])])])]),y(`div`,null,[t[9]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),y(`div`,null,[t[8]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account Type Description `,-1),z(y(`textarea`,{"onUpdate:modelValue":t[3]||=e=>m.value.description=e,disabled:f.value,maxlength:1e3,rows:`4`,placeholder:`Enter account type description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,H(o)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[4]||=()=>H(l)(`description`)},null,42,bt),[[h,m.value.description]]),H(o)(`description`)?(F(),S(`p`,xt,W(H(o)(`description`)),1)):x(``,!0),m.value.description&&m.value.description.length>0?(F(),S(`p`,St,W(m.value.description.length)+`/1000 characters `,1)):x(``,!0)])]),m.value.name?(F(),S(`div`,Ct,[t[13]||=y(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Account Type Preview`,-1),y(`div`,wt,[y(`p`,Tt,[t[10]||=y(`strong`,null,`Name:`,-1),C(` `+W(m.value.name),1)]),m.value.description?(F(),S(`p`,Et,[t[11]||=y(`strong`,null,`Description:`,-1),C(` `+W(m.value.description),1)])):x(``,!0),y(`p`,Dt,[t[12]||=y(`strong`,null,`Status:`,-1),y(`span`,{class:U(m.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(m.value.is_active?`Active`:`Inactive`),3)])])])):x(``,!0),y(`div`,Ot,[y(`button`,{type:`button`,onClick:E,disabled:f.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,kt),y(`button`,{type:`submit`,disabled:f.value||H(a)||!_.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[f.value?(F(),S(`div`,jt,t[14]||=[y(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),C(` Creating... `,-1)])):(F(),S(`span`,Mt,`Create Account Type`))],8,At)])],32)])])])]))}}),Pt=Nt;const Ft={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},It={class:`max-w-4xl mx-auto`},Lt={class:`mb-8`},Rt={class:`flex items-center space-x-4 mb-2`},zt={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Bt={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Vt={class:`px-6 py-8`},Ht={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ut={class:`md:col-span-2`},Wt={key:0,class:`mt-1 text-xs text-gray-500`},Gt={class:`md:col-span-2`},Kt={class:`flex items-start`},qt={class:`flex items-center h-5`},Jt=[`disabled`],Yt={class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},Xt=[`disabled`],Zt={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Qt={key:1,class:`mt-1 text-xs text-gray-500`},$t={key:0,class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},en={class:`space-y-2`},tn={class:`text-sm text-blue-700 dark:text-blue-400`},nn={key:0,class:`text-sm text-blue-700 dark:text-blue-400`},rn={class:`text-sm text-blue-700 dark:text-blue-400`},an={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},on=[`disabled`],sn=[`disabled`],cn={key:0,class:`flex items-center justify-center`},ln={key:1},un={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},dn={class:`flex flex-col items-center`};var fn=T({__name:`EditPage`,props:{id:{},accountType:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=ae(),{errors:a,hasErrors:o,getFieldError:l,validateUpdateRequest:u,clearFieldError:d,setServerErrors:f,clearErrors:m}=ot(),_=V(!1),b=V(!1),T=V({name:``,description:``,is_active:!0}),E=V({name:``,description:``,is_active:!0}),D=v(()=>T.value.name.trim().length>0&&T.value.name.length<=255&&(!T.value.description||T.value.description.length<=1e3)),k=async()=>{try{b.value=!0;let e=n.accountType||await i.fetchAccountType(n.id);e&&(T.value={name:e.name,description:e.description||``,is_active:e.is_active},E.value={name:e.name,description:e.description||``,is_active:e.is_active},m())}catch(e){console.error(`Error loading account type:`,e)}finally{b.value=!1}},A=async()=>{if(m(),u(T.value))try{_.value=!0;let e={name:T.value.name.trim(),is_active:T.value.is_active,description:T.value.description?.trim()??``};await i.updateAccountType(n.id,e),E.value={...T.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&f(e.response.data.errors)}finally{_.value=!1}},j=()=>{r(`cancel`)},M=()=>{r(`back`)};return s(()=>{k()}),L(()=>n.id,()=>{n.id&&k()}),(e,t)=>(F(),S(`div`,Ft,[y(`div`,It,[y(`div`,Lt,[y(`div`,Rt,[y(`button`,{onClick:M,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[w(H(O),{class:`w-5 h-5`})]),t[5]||=y(`div`,null,[y(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Account Type `),y(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update account type information and settings `)],-1)])]),b.value?(F(),S(`div`,zt,t[6]||=[y(`div`,{class:`flex items-center justify-center`},[y(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),y(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading account type...`)],-1)])):T.value?(F(),S(`div`,Bt,[y(`div`,Vt,[y(`form`,{onSubmit:g(A,[`prevent`]),class:`space-y-8`},[y(`div`,null,[t[8]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),y(`div`,Ht,[y(`div`,Ut,[w(G,{type:`text`,maxlength:255,disabled:_.value,onBlur:t[0]||=()=>H(d)(`name`),modelValue:T.value.name,"onUpdate:modelValue":t[1]||=e=>T.value.name=e,placeholder:`Enter account type name (e.g., Retail, Wholesale, Corporate)`,error:H(l)(`name`),required:``,label:`Account Type Name`},null,8,[`disabled`,`modelValue`,`error`]),T.value.name.length>0?(F(),S(`p`,Wt,W(T.value.name.length)+`/255 characters `,1)):x(``,!0)]),y(`div`,Gt,[y(`div`,Kt,[y(`div`,qt,[z(y(`input`,{id:`is_active`,"onUpdate:modelValue":t[2]||=e=>T.value.is_active=e,type:`checkbox`,disabled:_.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Jt),[[p,T.value.is_active]])]),t[7]||=y(`div`,{class:`ml-3`},[y(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),y(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this account type will be available for selection `)],-1)])])])]),y(`div`,null,[y(`h3`,Yt,` Description `+W(T.value.description),1),y(`div`,null,[t[9]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Account Type Description `,-1),z(y(`textarea`,{"onUpdate:modelValue":t[3]||=e=>T.value.description=e,disabled:_.value,maxlength:1e3,rows:`4`,placeholder:`Enter account type description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,H(l)(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[4]||=()=>H(d)(`description`)},null,42,Xt),[[h,T.value.description]]),H(l)(`description`)?(F(),S(`p`,Zt,W(H(l)(`description`)),1)):x(``,!0),T.value.description&&T.value.description.length>0?(F(),S(`p`,Qt,W(T.value.description.length)+`/1000 characters `,1)):x(``,!0)])]),T.value.name?(F(),S(`div`,$t,[t[13]||=y(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-2`},`Account Type Preview`,-1),y(`div`,en,[y(`p`,tn,[t[10]||=y(`strong`,null,`Name:`,-1),C(` `+W(T.value.name),1)]),T.value.description?(F(),S(`p`,nn,[t[11]||=y(`strong`,null,`Description:`,-1),C(` `+W(T.value.description),1)])):x(``,!0),y(`p`,rn,[t[12]||=y(`strong`,null,`Status:`,-1),y(`span`,{class:U(T.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(T.value.is_active?`Active`:`Inactive`),3)])])])):x(``,!0),y(`div`,an,[y(`button`,{type:`button`,onClick:j,disabled:_.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,on),y(`button`,{type:`submit`,disabled:_.value||H(o)||!D.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[_.value?(F(),S(`div`,cn,t[14]||=[y(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),C(` Updating... `,-1)])):(F(),S(`span`,ln,`Update Account Type`))],8,sn)])],32)])])):(F(),S(`div`,un,[y(`div`,dn,[w(H(c),{class:`w-12 h-12 text-red-400 mb-4`}),t[15]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Account Type Not Found `,-1),t[16]||=y(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The account type you're trying to edit could not be found. `,-1),y(`button`,{onClick:M,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` â† Back to Account Types `)])]))])]))}}),pn=fn;const mn={class:`space-y-6`},hn={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},gn={class:`grid grid-cols-1 md:grid-cols-5 gap-4`},_n={class:`md:col-span-2`},vn={class:`relative`},yn=[`value`],bn={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},xn={key:0,class:`p-8 text-center`},Sn={key:1,class:`p-8 text-center`},Cn={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},wn={key:0,class:`mt-6`},Tn={key:2,class:`overflow-x-auto`},En={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Dn={class:`bg-gray-50 dark:bg-gray-700`},On={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},kn={class:`flex flex-col`},An={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},jn={class:`flex flex-col`},Mn={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Nn={class:`flex flex-col`},Pn={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Fn={class:`px-6 py-4 whitespace-nowrap`},In={class:`flex items-center`},Ln={class:`flex-shrink-0 h-10 w-10`},Rn={class:`h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center`},zn={class:`ml-4`},Bn={class:`text-sm font-medium text-gray-900 dark:text-white`},Vn={class:`text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2`},Hn={key:0,class:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`},Un={class:`px-6 py-4 whitespace-nowrap`},Wn={class:`text-sm text-gray-900 dark:text-white`},Gn={class:`px-6 py-4`},Kn={class:`text-sm text-gray-900 dark:text-white`},qn={class:`px-6 py-4 whitespace-nowrap`},Jn={class:`text-sm text-gray-900 dark:text-white`},Yn={key:0,class:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200`},Xn={key:1,class:`text-gray-500 dark:text-gray-400`},Zn={class:`px-6 py-4 whitespace-nowrap`},Qn={class:`px-6 py-4 whitespace-nowrap`},$n={class:`text-sm text-gray-900 dark:text-white`},er={class:`text-sm text-gray-600 dark:text-gray-400`},tr={class:`text-xs text-gray-500 dark:text-gray-500`},nr={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},rr={class:`flex items-center justify-end space-x-2`},ir=[`onClick`],ar=[`onClick`],or=[`onClick`,`disabled`,`title`],sr={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},cr={class:`flex items-center justify-between`},lr={class:`flex-1 flex justify-between sm:hidden`},ur=[`disabled`],dr=[`disabled`],fr={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},pr={class:`text-sm text-gray-700 dark:text-gray-300`},mr={class:`font-medium`},hr={class:`font-medium`},gr={class:`font-medium`},_r={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},vr=[`disabled`],yr=[`disabled`];var br=T({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:c,emit:f}){d();let p=P(),g=Y(),b=f,T=V(!1),O=V(!1),k=V(null),A=V(null),j=V(null),M=V(!1),N=B({search:``,parent_id:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),R=V({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),G=v(()=>g.expenseCategories),K=v(()=>g.pagination),q=v(()=>g.loading),J=v(()=>g.rootExpenseCategories),ae=v(()=>[{key:`name`,label:`Category Name`,type:`text`},{key:`parent.name`,label:`Parent Category`,type:`text`,fallback:`Root Category`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_root`,label:`Category Type`,type:`custom`,customRender:e=>e?`Root Category`:`Sub Category`},{key:`has_children`,label:`Has Children`,type:`custom`,customRender:e=>e?`Yes`:`No`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...N}),e=>{let{page:t,...n}=e;g.updateFilters(n)},{deep:!0});let X=async(e=1)=>{try{let t={...N,page:e};await g.fetchExpenseCategories(t)}catch{p.error(`Failed to load expense categories`,{title:`Error`})}},ce=()=>{X(N.page||1)},le=()=>{A.value&&clearTimeout(A.value),A.value=setTimeout(()=>{X(1)},300)},Z=e=>{N.sort_by===e?N.sort_direction=N.sort_direction===`asc`?`desc`:`asc`:(N.sort_by=e,N.sort_direction=`asc`),X(1)},Q=e=>{e>=1&&K.value&&e<=K.value.last_page&&(N.page=e,X(e))},ue=e=>{j.value=e,M.value=!0},de=e=>{if(e.has_children){p.warning(`Cannot delete category that has children`);return}k.value=e,R.value={title:`Delete Expense Category`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},O.value=!0},fe=async()=>{k.value&&(await g.deleteExpenseCategory(k.value.id),pe())},pe=()=>{O.value=!1,k.value=null,R.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},me=()=>{b(`create`)},he=e=>{b(`edit`,e)};return s(async()=>{await g.fetchRootExpenseCategories(),X()}),c({refreshData:ce}),(r,s)=>(F(),S(`div`,mn,[w(re,{title:`Expense Categories`,description:`Manage expense categories and classifications`,"create-button-text":`Create New Expense Category`,onCreate:me}),y(`div`,hn,[y(`div`,gn,[y(`div`,_n,[s[13]||=y(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Expense Categories `,-1),y(`div`,vn,[z(y(`input`,{id:`search`,"onUpdate:modelValue":s[0]||=e=>N.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:le},null,544),[[h,N.search]]),w(H(te),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),y(`div`,null,[s[16]||=y(`label`,{for:`parent_category`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(y(`select`,{id:`parent_category`,"onUpdate:modelValue":s[1]||=e=>N.parent_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:X},[s[14]||=y(`option`,{value:``},`All Categories`,-1),s[15]||=y(`option`,{value:`null`},`Root Categories Only`,-1),(F(!0),S(_,null,I(J.value,e=>(F(),S(`option`,{key:e.id,value:e.id},W(e.name),9,yn))),128))],544),[[m,N.parent_id]])]),y(`div`,null,[s[18]||=y(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(y(`select`,{id:`status`,"onUpdate:modelValue":s[2]||=e=>N.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:X},s[17]||=[y(`option`,{value:``},`All Status`,-1),y(`option`,{value:`true`},`Active`,-1),y(`option`,{value:`false`},`Inactive`,-1)],544),[[m,N.is_active]])]),y(`div`,null,[s[20]||=y(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(y(`select`,{id:`per-page`,"onUpdate:modelValue":s[3]||=e=>N.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:X},s[19]||=[y(`option`,{value:15},`15`,-1),y(`option`,{value:25},`25`,-1),y(`option`,{value:50},`50`,-1),y(`option`,{value:100},`100`,-1)],544),[[m,N.per_page]])])])]),y(`div`,bn,[q.value?(F(),S(`div`,xn,[w(H(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),s[21]||=y(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading expense categories...`,-1)])):G.value.length===0?(F(),S(`div`,Sn,[w(H(i),{class:`h-12 w-12 mx-auto text-gray-400`}),s[23]||=y(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No expense categories found `,-1),y(`p`,Cn,W(N.search?`Try adjusting your search criteria.`:`Get started by creating your first expense category.`),1),N.search?x(``,!0):(F(),S(`div`,wn,[y(`button`,{onClick:me,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[w(H(e),{class:`h-5 w-5 mr-2`}),s[22]||=C(` Add Your First Expense Category `,-1)])]))])):(F(),S(`div`,Tn,[y(`table`,En,[y(`thead`,Dn,[y(`tr`,null,[y(`th`,On,[y(`button`,{onClick:s[4]||=e=>Z(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[24]||=y(`span`,null,`Category Name`,-1),y(`div`,kn,[w(H(l),{class:U([`h-3 w-3`,N.sort_by===`name`&&N.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,N.sort_by===`name`&&N.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[27]||=y(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Parent Category `,-1),s[28]||=y(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),s[29]||=y(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Children `,-1),y(`th`,An,[y(`button`,{onClick:s[5]||=e=>Z(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[25]||=y(`span`,null,`Status`,-1),y(`div`,jn,[w(H(l),{class:U([`h-3 w-3`,N.sort_by===`is_active`&&N.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,N.sort_by===`is_active`&&N.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),y(`th`,Mn,[y(`button`,{onClick:s[6]||=e=>Z(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[26]||=y(`span`,null,`Created`,-1),y(`div`,Nn,[w(H(l),{class:U([`h-3 w-3`,N.sort_by===`created_at`&&N.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,N.sort_by===`created_at`&&N.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[30]||=y(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),y(`tbody`,Pn,[(F(!0),S(_,null,I(G.value,e=>(F(),S(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[y(`td`,Fn,[y(`div`,In,[y(`div`,Ln,[y(`div`,Rn,[w(H(i),{class:`h-5 w-5 text-green-600 dark:text-green-400`})])]),y(`div`,zn,[y(`div`,Bn,W(e.name),1),y(`div`,Vn,[y(`span`,null,`ID: `+W(e.id),1),e.is_root?(F(),S(`span`,Hn,` Root `)):x(``,!0)])])])]),y(`td`,Un,[y(`div`,Wn,W(e.parent?.name||`-`),1)]),y(`td`,Gn,[y(`div`,Kn,W(e.description||`No description provided`),1)]),y(`td`,qn,[y(`div`,Jn,[e.has_children?(F(),S(`span`,Yn,[w(H(a),{class:`w-3 h-3 mr-1`}),s[31]||=C(` Has Children `,-1)])):(F(),S(`span`,Xn,`-`))])]),y(`td`,Zn,[w(oe,{active:e.is_active},null,8,[`active`])]),y(`td`,Qn,[y(`div`,$n,[y(`div`,er,W(e.created_by?.name||`-`),1),y(`div`,tr,W(H(ne)(e.created_at)),1)])]),y(`td`,nr,[y(`div`,rr,[y(`button`,{onClick:t=>ue(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[w(H(o),{class:`w-4 h-4`})],8,ir),y(`button`,{onClick:t=>he(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Expense Category`},[w(H(t),{class:`h-4 w-4`})],8,ar),y(`button`,{onClick:t=>de(e),disabled:e.has_children,class:U([`transition-colors duration-200`,e.has_children?`text-gray-400 dark:text-gray-600 cursor-not-allowed`:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300`]),title:e.has_children?`Cannot delete category with children`:`Delete Expense Category`},[w(H(ee),{class:`h-4 w-4`})],10,or)])])]))),128))])])])),K.value&&K.value.total>0?(F(),S(`div`,sr,[y(`div`,cr,[y(`div`,lr,[y(`button`,{onClick:s[7]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,ur),y(`button`,{onClick:s[8]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,dr)]),y(`div`,fr,[y(`div`,null,[y(`p`,pr,[s[32]||=C(` Showing `,-1),y(`span`,mr,W(K.value.from),1),s[33]||=C(` to `,-1),y(`span`,hr,W(K.value.to),1),s[34]||=C(` of `,-1),y(`span`,gr,W(K.value.total),1),s[35]||=C(` results `,-1)])]),y(`div`,null,[y(`nav`,_r,[y(`button`,{onClick:s[9]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[w(H(E),{class:`h-5 w-5`})],8,vr),y(`button`,{onClick:s[10]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[w(H(u),{class:`h-5 w-5`})],8,yr)])])])])])):x(``,!0)]),w(ie,{show:O.value,"onUpdate:show":s[11]||=e=>O.value=e,type:`delete`,title:R.value.title,message:R.value.message,"confirm-text":R.value.buttonText,"loading-text":R.value.loadingText,loading:T.value,onConfirm:fe,onCancel:pe},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),w(se,{show:M.value,"onUpdate:show":s[12]||=e=>M.value=e,item:j.value,title:`Expense Category Details`,"display-fields":ae.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),xr=br;const Sr={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Cr={class:`max-w-4xl mx-auto`},wr={class:`mb-8`},Tr={class:`flex items-center space-x-4 mb-2`},Er={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Dr={class:`px-6 py-8`},Or={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},kr={class:`md:col-span-2`},Ar={key:0,class:`mt-1 text-xs text-gray-500`},jr={class:`md:col-span-2`},Mr=[`disabled`],Nr=[`value`],Pr={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Fr={class:`md:col-span-2`},Ir={class:`flex items-start`},Lr={class:`flex items-center h-5`},Rr=[`disabled`],zr=[`disabled`],Br={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Vr={key:1,class:`mt-1 text-xs text-gray-500`},Hr={class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},Ur={class:`flex`},Wr={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},Gr={class:`space-y-2`},Kr={class:`text-sm text-green-700 dark:text-green-400`},qr={class:`text-sm text-green-700 dark:text-green-400`},Jr={key:0,class:`text-sm text-green-700 dark:text-green-400`},Yr={class:`text-sm text-green-700 dark:text-green-400`},Xr={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Zr=[`disabled`],Qr=[`disabled`],$r={key:0,class:`flex items-center justify-center`},ei={key:1};var ti=T({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,i=Y(),a=V({}),o=v(()=>Object.keys(a.value).length>0),c=e=>a.value[e]?.[0],l=e=>{a.value[e]&&delete a.value[e]},u=e=>{a.value={...e}},d=()=>{a.value={}},f=e=>{d();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},b=V(!1),T=V({name:``,parent_id:void 0,description:``,is_active:!0}),E=v(()=>T.value.name.trim().length>0&&T.value.name.length<=255&&(!T.value.description||T.value.description.length<=1e3)),D=v(()=>i.rootCategoriesOnly),k=e=>{if(!e)return``;let t=D.value.find(t=>t.id===Number(e));return t?.name||``},A=()=>{T.value={name:``,parent_id:void 0,description:``,is_active:!0},d()},j=async()=>{if(d(),f(T.value))try{b.value=!0;let e={name:T.value.name.trim(),is_active:T.value.is_active,parent_id:T.value.parent_id?Number(T.value.parent_id):null,description:T.value.description?.trim()??``};await i.createExpenseCategory(e),A(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{b.value=!1}},M=()=>{A(),n(`cancel`)},N=()=>{n(`back`)};return s(async()=>{await i.fetchExpenseCategories({is_active:!0}),A()}),(e,t)=>(F(),S(`div`,Sr,[y(`div`,Cr,[y(`div`,wr,[y(`div`,Tr,[y(`button`,{onClick:N,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[w(H(O),{class:`w-5 h-5`})]),t[7]||=y(`div`,null,[y(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Expense Category `),y(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new expense category classification `)],-1)])]),y(`div`,Er,[y(`div`,Dr,[y(`form`,{onSubmit:g(j,[`prevent`]),class:`space-y-8`},[y(`div`,null,[t[12]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),y(`div`,Or,[y(`div`,kr,[w(G,{type:`text`,maxlength:255,disabled:b.value,onBlur:t[0]||=()=>l(`name`),modelValue:T.value.name,"onUpdate:modelValue":t[1]||=e=>T.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:c(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),T.value.name.length>0?(F(),S(`p`,Ar,W(T.value.name.length)+`/255 characters `,1)):x(``,!0)]),y(`div`,jr,[t[9]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(y(`select`,{"onUpdate:modelValue":t[2]||=e=>T.value.parent_id=e,disabled:b.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>l(`parent_id`)},[t[8]||=y(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),S(_,null,I(D.value,e=>(F(),S(`option`,{key:e.id,value:e.id},W(e.name),9,Nr))),128))],42,Mr),[[m,T.value.parent_id]]),c(`parent_id`)?(F(),S(`p`,Pr,W(c(`parent_id`)),1)):x(``,!0),t[10]||=y(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),y(`div`,Fr,[y(`div`,Ir,[y(`div`,Lr,[z(y(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>T.value.is_active=e,type:`checkbox`,disabled:b.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Rr),[[p,T.value.is_active]])]),t[11]||=y(`div`,{class:`ml-3`},[y(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),y(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this expense category will be available for selection `)],-1)])])])]),y(`div`,null,[t[14]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),y(`div`,null,[t[13]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(y(`textarea`,{"onUpdate:modelValue":t[5]||=e=>T.value.description=e,disabled:b.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>l(`description`)},null,42,zr),[[h,T.value.description]]),c(`description`)?(F(),S(`p`,Br,W(c(`description`)),1)):x(``,!0),T.value.description&&T.value.description.length>0?(F(),S(`p`,Vr,W(T.value.description.length)+`/1000 characters `,1)):x(``,!0)])]),y(`div`,Hr,[y(`div`,Ur,[w(H(r),{class:`h-5 w-5 text-blue-400 mr-2 mt-0.5`}),t[15]||=y(`div`,null,[y(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-1`},` About Category Hierarchy `),y(`div`,{class:`text-sm text-blue-700 dark:text-blue-400 space-y-1`},[y(`p`,null,[y(`strong`,null,`Root Categories:`),C(` Top-level categories that can contain sub-categories`)]),y(`p`,null,[y(`strong`,null,`Sub-categories:`),C(` Categories that belong to a parent category for better organization`)]),y(`p`,null,[y(`strong`,null,`Examples:`),C(` Travel ï¿½ Flights, Hotels, Meals | Office ï¿½ Supplies, Equipment, Software`)])])],-1)])]),T.value.name?(F(),S(`div`,Wr,[t[20]||=y(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),y(`div`,Gr,[y(`p`,Kr,[t[16]||=y(`strong`,null,`Name:`,-1),C(` `+W(T.value.name),1)]),y(`p`,qr,[t[17]||=y(`strong`,null,`Type:`,-1),C(` `+W(T.value.parent_id?`Sub-category of "${k(T.value.parent_id)}"`:`Root Category`),1)]),T.value.description?(F(),S(`p`,Jr,[t[18]||=y(`strong`,null,`Description:`,-1),C(` `+W(T.value.description),1)])):x(``,!0),y(`p`,Yr,[t[19]||=y(`strong`,null,`Status:`,-1),y(`span`,{class:U(T.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(T.value.is_active?`Active`:`Inactive`),3)])])])):x(``,!0),y(`div`,Xr,[y(`button`,{type:`button`,onClick:M,disabled:b.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Zr),y(`button`,{type:`submit`,disabled:b.value||o.value||!E.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[b.value?(F(),S(`div`,$r,t[21]||=[y(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),C(` Creating... `,-1)])):(F(),S(`span`,ei,`Create Expense Category`))],8,Qr)])],32)])])])]))}}),ni=ti;const ri={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},ii={class:`max-w-4xl mx-auto`},ai={class:`mb-8`},oi={class:`flex items-center space-x-4 mb-2`},si={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},ci={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},li={class:`px-6 py-8`},ui={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},di={class:`md:col-span-2`},fi={key:0,class:`mt-1 text-xs text-gray-500`},pi={class:`md:col-span-2`},mi=[`disabled`],hi=[`value`],gi={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},_i={class:`md:col-span-2`},vi={class:`flex items-start`},yi={class:`flex items-center h-5`},bi=[`disabled`],xi=[`disabled`],Si={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},Ci={key:1,class:`mt-1 text-xs text-gray-500`},wi={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},Ti={class:`space-y-2`},Ei={class:`text-sm text-green-700 dark:text-green-400`},Di={class:`text-sm text-green-700 dark:text-green-400`},Oi={key:0,class:`text-sm text-green-700 dark:text-green-400`},ki={class:`text-sm text-green-700 dark:text-green-400`},Ai={key:1,class:`p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg`},ji={class:`flex`},Mi={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Ni=[`disabled`],Pi=[`disabled`],Fi={key:0,class:`flex items-center justify-center`},Ii={key:1},Li={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Ri={class:`flex flex-col items-center`};var zi=T({__name:`EditPage`,props:{id:{},expenseCategory:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=Y(),a=V({}),o=v(()=>Object.keys(a.value).length>0),l=e=>a.value[e]?.[0],u=e=>{a.value[e]&&delete a.value[e]},d=e=>{a.value={...e}},f=()=>{a.value={}},b=e=>{f();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},T=V(!1),E=V(!1),D=V(null),k=V({name:``,parent_id:``,description:``,is_active:!0}),A=V({name:``,parent_id:``,description:``,is_active:!0}),j=v(()=>k.value.name.trim().length>0&&k.value.name.length<=255&&(!k.value.description||k.value.description.length<=1e3)),M=v(()=>i.rootCategoriesOnly.filter(e=>e.id!==n.id)),N=e=>{if(!e)return``;let t=M.value.find(t=>t.id===Number(e));return t?.name||``},P=async()=>{try{E.value=!0;let e=n.expenseCategory||await i.fetchExpenseCategory(n.id);e&&(D.value=e,k.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},A.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},f())}catch(e){console.error(`Error loading expense category:`,e)}finally{E.value=!1}},R=async()=>{if(f(),b(k.value))try{T.value=!0;let e={name:k.value.name.trim(),is_active:k.value.is_active,parent_id:k.value.parent_id?Number(k.value.parent_id):null,description:k.value.description?.trim()??``};await i.updateExpenseCategory(n.id,e),A.value={...k.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&d(e.response.data.errors)}finally{T.value=!1}},B=()=>{r(`cancel`)},K=()=>{r(`back`)};return s(async()=>{await i.fetchExpenseCategories({is_active:!0}),P()}),L(()=>n.id,()=>{n.id&&P()}),(e,t)=>(F(),S(`div`,ri,[y(`div`,ii,[y(`div`,ai,[y(`div`,oi,[y(`button`,{onClick:K,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[w(H(O),{class:`w-5 h-5`})]),t[7]||=y(`div`,null,[y(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Expense Category `),y(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update expense category information and settings `)],-1)])]),E.value?(F(),S(`div`,si,t[8]||=[y(`div`,{class:`flex items-center justify-center`},[y(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),y(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading expense category...`)],-1)])):k.value?(F(),S(`div`,ci,[y(`div`,li,[y(`form`,{onSubmit:g(R,[`prevent`]),class:`space-y-8`},[y(`div`,null,[t[13]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),y(`div`,ui,[y(`div`,di,[w(G,{type:`text`,maxlength:255,disabled:T.value,onBlur:t[0]||=()=>u(`name`),modelValue:k.value.name,"onUpdate:modelValue":t[1]||=e=>k.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:l(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),k.value.name.length>0?(F(),S(`p`,fi,W(k.value.name.length)+`/255 characters `,1)):x(``,!0)]),y(`div`,pi,[t[10]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(y(`select`,{"onUpdate:modelValue":t[2]||=e=>k.value.parent_id=e,disabled:T.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>u(`parent_id`)},[t[9]||=y(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),S(_,null,I(M.value,e=>(F(),S(`option`,{key:e.id,value:e.id},W(e.name),9,hi))),128))],42,mi),[[m,k.value.parent_id]]),l(`parent_id`)?(F(),S(`p`,gi,W(l(`parent_id`)),1)):x(``,!0),t[11]||=y(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),y(`div`,_i,[y(`div`,vi,[y(`div`,yi,[z(y(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>k.value.is_active=e,type:`checkbox`,disabled:T.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,bi),[[p,k.value.is_active]])]),t[12]||=y(`div`,{class:`ml-3`},[y(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),y(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this expense category will be available for selection `)],-1)])])])]),y(`div`,null,[t[15]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),y(`div`,null,[t[14]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(y(`textarea`,{"onUpdate:modelValue":t[5]||=e=>k.value.description=e,disabled:T.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>u(`description`)},null,42,xi),[[h,k.value.description]]),l(`description`)?(F(),S(`p`,Si,W(l(`description`)),1)):x(``,!0),k.value.description&&k.value.description.length>0?(F(),S(`p`,Ci,W(k.value.description.length)+`/1000 characters `,1)):x(``,!0)])]),k.value.name?(F(),S(`div`,wi,[t[20]||=y(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),y(`div`,Ti,[y(`p`,Ei,[t[16]||=y(`strong`,null,`Name:`,-1),C(` `+W(k.value.name),1)]),y(`p`,Di,[t[17]||=y(`strong`,null,`Type:`,-1),C(` `+W(k.value.parent_id?`Sub-category of "${N(k.value.parent_id)}"`:`Root Category`),1)]),k.value.description?(F(),S(`p`,Oi,[t[18]||=y(`strong`,null,`Description:`,-1),C(` `+W(k.value.description),1)])):x(``,!0),y(`p`,ki,[t[19]||=y(`strong`,null,`Status:`,-1),y(`span`,{class:U(k.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(k.value.is_active?`Active`:`Inactive`),3)])])])):x(``,!0),D.value?.has_children&&k.value.parent_id?(F(),S(`div`,Ai,[y(`div`,ji,[w(H(q),{class:`h-5 w-5 text-amber-400 mr-2 mt-0.5`}),t[21]||=y(`div`,null,[y(`h4`,{class:`text-sm font-medium text-amber-800 dark:text-amber-300 mb-1`},` Warning: Category has sub-categories `),y(`p`,{class:`text-sm text-amber-700 dark:text-amber-400`},` This category has sub-categories. Changing its parent will affect the entire hierarchy structure. `)],-1)])])):x(``,!0),y(`div`,Mi,[y(`button`,{type:`button`,onClick:B,disabled:T.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Ni),y(`button`,{type:`submit`,disabled:T.value||o.value||!j.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[T.value?(F(),S(`div`,Fi,t[22]||=[y(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),C(` Updating... `,-1)])):(F(),S(`span`,Ii,`Update Expense Category`))],8,Pi)])],32)])])):(F(),S(`div`,Li,[y(`div`,Ri,[w(H(c),{class:`w-12 h-12 text-red-400 mb-4`}),t[23]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Expense Category Not Found `,-1),t[24]||=y(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The expense category you're trying to edit could not be found. `,-1),y(`button`,{onClick:K,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ï¿½ Back to Expense Categories `)])]))])]))}}),Bi=zi,Vi=class{baseUrl=`/setups/incomes/categories`;async getIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await A(`${this.baseUrl}?${t}`,{loadingMessage:`Loading income categories...`,showLoading:!0});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching income categories:`,e),e}}async getIncomeCategory(e){try{let t=await A(`${this.baseUrl}/${e}`,{loadingMessage:`Loading income category...`});return t.data.data}catch(e){throw console.error(`Error fetching income category:`,e),e}}async createIncomeCategory(e){try{let t=await M(this.baseUrl,e,{loadingMessage:`Creating income category...`,showSuccessNotification:!0,successMessage:`Income category created successfully`});return t.data.data}catch(e){throw console.error(`Error creating income category:`,e),e}}async updateIncomeCategory(e,t){try{let n=await N(`${this.baseUrl}/${e}`,t,{loadingMessage:`Updating income category...`,showSuccessNotification:!0,successMessage:`Income category updated successfully`});return n.data.data}catch(e){throw console.error(`Error updating income category:`,e),e}}async deleteIncomeCategory(e){try{await k(`${this.baseUrl}/${e}`,{loadingMessage:`Deleting income category...`,showSuccessNotification:!0,successMessage:`Income category deleted successfully`})}catch(e){throw console.error(`Error deleting income category:`,e),e}}async getTrashedIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await A(`${this.baseUrl}/trashed?${t}`,{loadingMessage:`Loading trashed income categories...`});return{data:n.data.data,pagination:n.data.pagination}}catch(e){throw console.error(`Error fetching trashed income categories:`,e),e}}async restoreIncomeCategory(e){try{let t=await j(`${this.baseUrl}/${e}/restore`,{},{loadingMessage:`Restoring income category...`,showSuccessNotification:!0,successMessage:`Income category restored successfully`});return t.data.data}catch(e){throw console.error(`Error restoring income category:`,e),e}}async forceDeleteIncomeCategory(e){try{await k(`${this.baseUrl}/${e}/force-delete`,{loadingMessage:`Permanently deleting income category...`,showSuccessNotification:!0,successMessage:`Income category permanently deleted`})}catch(e){throw console.error(`Error permanently deleting income category:`,e),e}}async getIncomeCategoriesForSelect(){try{let e=await A(`${this.baseUrl}`,{showLoading:!1}),t=e.data.data;return t.filter(e=>e.is_active).map(e=>({value:e.id,label:e.name,disabled:!1,parent_id:e.parent_id,level:0}))}catch(e){throw console.error(`Error fetching income categories for select:`,e),e}}async getIncomeCategoryHierarchy(){try{let e=await A(`${this.baseUrl}/hierarchy`,{loadingMessage:`Loading income category hierarchy...`});return e.data.data}catch(e){throw console.error(`Error fetching income category hierarchy:`,e),e}}async getRootIncomeCategories(){try{let e=await A(`${this.baseUrl}/roots`,{loadingMessage:`Loading root income categories...`});return e.data.data}catch(e){throw console.error(`Error fetching root income categories:`,e),e}}async getIncomeCategoryChildren(e){try{let t=await A(`${this.baseUrl}/${e}/children`,{loadingMessage:`Loading income category children...`});return t.data.data}catch(e){throw console.error(`Error fetching income category children:`,e),e}}async getIncomeCategoryStats(){try{let e=await A(`${this.baseUrl}/stats`,{loadingMessage:`Loading income category statistics...`});return e.data.data}catch(e){throw console.error(`Error fetching income category statistics:`,e),e}}async exportIncomeCategories(e){try{let t=this.buildQueryParams(e),n=await A(`${this.baseUrl}/export?${t}`,{loadingMessage:`Exporting income categories...`,responseType:`blob`});return n.data.data}catch(e){throw console.error(`Error exporting income categories:`,e),e}}async searchIncomeCategories(e){try{let t=await A(`${this.baseUrl}/search?q=${encodeURIComponent(e)}`,{showLoading:!1});return t.data.data}catch(e){throw console.error(`Error searching income categories:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const $=new Vi,Hi=f(`incomeCategories`,()=>{let e=V([]),t=V(null),n=V([]),r=V([]),i=V([]),a=V(null),o=V(J()),s=V(!1),c=V({}),l=v(()=>e.value.filter(e=>e.is_active)),u=v(()=>e.value.filter(e=>!e.is_active)),d=v(()=>e.value.filter(e=>e.is_root)),f=v(()=>e.value.filter(e=>e.has_children)),p=v(()=>l.value.map(e=>({value:e.id,label:e.name,disabled:!1,parent_id:e.parent_id,level:0}))),m=v(()=>t=>t===null?e.value.filter(e=>e.parent_id===null):e.value.filter(e=>e.parent_id===t)),h=async t=>{try{s.value=!0,t&&(c.value={...c.value,...t});let n=await $.getIncomeCategories(c.value);e.value=n.data,o.value=n.pagination}catch(e){throw console.error(`Error fetching income categories:`,e),e}finally{s.value=!1}},g=async e=>{try{let n=await $.getIncomeCategory(e);return t.value=n,n}catch(e){throw console.error(`Error fetching income category:`,e),e}},_=async t=>{try{let n=await $.createIncomeCategory(t);return e.value.unshift(n),o.value.total+=1,n.is_root&&i.value.unshift(n),n}catch(e){throw console.error(`Error creating income category:`,e),e}},y=async(n,r)=>{try{let a=await $.updateIncomeCategory(n,r),o=e.value.findIndex(e=>e.id===n);o!==-1&&(e.value[o]=a);let s=i.value.findIndex(e=>e.id===n);return s===-1?a.is_root&&i.value.unshift(a):a.is_root?i.value[s]=a:i.value.splice(s,1),t.value?.id===n&&(t.value=a),a}catch(e){throw console.error(`Error updating income category:`,e),e}},b=async n=>{try{await $.deleteIncomeCategory(n);let r=e.value.findIndex(e=>e.id===n);r!==-1&&e.value.splice(r,1);let a=i.value.findIndex(e=>e.id===n);a!==-1&&i.value.splice(a,1),--o.value.total,t.value?.id===n&&(t.value=null)}catch(e){throw console.error(`Error deleting income category:`,e),e}},x=async e=>{try{s.value=!0;let t=e||{},r=await $.getTrashedIncomeCategories(t);n.value=r.data}catch(e){throw console.error(`Error fetching trashed income categories:`,e),e}finally{s.value=!1}},S=async t=>{try{let r=await $.restoreIncomeCategory(t),a=n.value.findIndex(e=>e.id===t);return a!==-1&&n.value.splice(a,1),e.value.unshift(r),o.value.total+=1,r.is_root&&i.value.unshift(r),r}catch(e){throw console.error(`Error restoring income category:`,e),e}},C=async e=>{try{await $.forceDeleteIncomeCategory(e);let t=n.value.findIndex(t=>t.id===e);t!==-1&&n.value.splice(t,1)}catch(e){throw console.error(`Error permanently deleting income category:`,e),e}},w=async()=>{try{s.value=!0;let e=await $.getIncomeCategoryHierarchy();return r.value=e,e}catch(e){throw console.error(`Error fetching income category hierarchy:`,e),e}finally{s.value=!1}},T=async()=>{try{let e=await $.getRootIncomeCategories();return i.value=e,e}catch(e){throw console.error(`Error fetching root income categories:`,e),e}},E=async e=>{try{return await $.getIncomeCategoryChildren(e)}catch(e){throw console.error(`Error fetching income category children:`,e),e}},D=async()=>{try{let e=await $.getIncomeCategoryStats();return a.value=e,e}catch(e){throw console.error(`Error fetching income category statistics:`,e),e}},O=async e=>{try{return await $.exportIncomeCategories(e)}catch(e){throw console.error(`Error exporting income categories:`,e),e}},k=async e=>{try{return await $.searchIncomeCategories(e)}catch(e){throw console.error(`Error searching income categories:`,e),e}},A=e=>{c.value={...c.value,...e}},j=()=>{c.value={}},M=()=>{t.value=null},N=()=>{e.value=[],t.value=null,n.value=[],r.value=[],i.value=[],a.value=null,o.value=J(),c.value={},s.value=!1},P=async()=>{try{return await $.getIncomeCategoriesForSelect()}catch(e){return console.error(`Error fetching income categories for select:`,e),[]}},F=(e,t=null)=>e.filter(e=>e.parent_id===t).map(t=>({...t,children:F(e,t.id)})),I=v(()=>F(e.value));return{incomeCategories:e,currentIncomeCategory:t,trashedIncomeCategories:n,hierarchyIncomeCategories:r,rootIncomeCategories:i,incomeCategoryStats:a,pagination:o,loading:s,filters:c,activeIncomeCategories:l,inactiveIncomeCategories:u,rootCategoriesOnly:d,categoriesWithChildren:f,incomeCategoriesForSelect:p,incomeCategoriesByParent:m,incomeCategoryTree:I,fetchIncomeCategories:h,fetchIncomeCategory:g,createIncomeCategory:_,updateIncomeCategory:y,deleteIncomeCategory:b,fetchTrashedIncomeCategories:x,restoreIncomeCategory:S,forceDeleteIncomeCategory:C,fetchIncomeCategoryHierarchy:w,fetchRootIncomeCategories:T,fetchIncomeCategoryChildren:E,fetchIncomeCategoryStats:D,exportIncomeCategories:O,searchIncomeCategories:k,updateFilters:A,clearFilters:j,clearCurrentIncomeCategory:M,reset:N,fetchIncomeCategoriesForSelect:P,buildTree:F}}),Ui={class:`space-y-6`},Wi={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},Gi={class:`grid grid-cols-1 md:grid-cols-5 gap-4`},Ki={class:`md:col-span-2`},qi={class:`relative`},Ji=[`value`],Yi={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},Xi={key:0,class:`p-8 text-center`},Zi={key:1,class:`p-8 text-center`},Qi={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},$i={key:0,class:`mt-6`},ea={key:2,class:`overflow-x-auto`},ta={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},na={class:`bg-gray-50 dark:bg-gray-700`},ra={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ia={class:`flex flex-col`},aa={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},oa={class:`flex flex-col`},sa={class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ca={class:`flex flex-col`},la={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},ua={class:`px-6 py-4 whitespace-nowrap`},da={class:`flex items-center`},fa={class:`flex-shrink-0 h-10 w-10`},pa={class:`h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center`},ma={class:`ml-4`},ha={class:`text-sm font-medium text-gray-900 dark:text-white`},ga={class:`text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2`},_a={key:0,class:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`},va={class:`px-6 py-4 whitespace-nowrap`},ya={class:`text-sm text-gray-900 dark:text-white`},ba={class:`px-6 py-4`},xa={class:`text-sm text-gray-900 dark:text-white`},Sa={class:`px-6 py-4 whitespace-nowrap`},Ca={class:`text-sm text-gray-900 dark:text-white`},wa={key:0,class:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200`},Ta={key:1,class:`text-gray-500 dark:text-gray-400`},Ea={class:`px-6 py-4 whitespace-nowrap`},Da={class:`px-6 py-4 whitespace-nowrap`},Oa={class:`text-sm text-gray-900 dark:text-white`},ka={class:`text-sm text-gray-600 dark:text-gray-400`},Aa={class:`text-xs text-gray-500 dark:text-gray-500`},ja={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Ma={class:`flex items-center justify-end space-x-2`},Na=[`onClick`],Pa=[`onClick`],Fa=[`onClick`,`disabled`,`title`],Ia={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},La={class:`flex items-center justify-between`},Ra={class:`flex-1 flex justify-between sm:hidden`},za=[`disabled`],Ba=[`disabled`],Va={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Ha={class:`text-sm text-gray-700 dark:text-gray-300`},Ua={class:`font-medium`},Wa={class:`font-medium`},Ga={class:`font-medium`},Ka={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},qa=[`disabled`],Ja=[`disabled`];var Ya=T({__name:`IndexPage`,emits:[`create`,`edit`],setup(r,{expose:c,emit:f}){d();let p=P(),g=Hi(),b=f,T=V(!1),O=V(!1),k=V(null),A=V(null),j=V(null),M=V(!1),N=B({search:``,parent_id:``,is_active:``,per_page:15,sort_by:``,sort_direction:`asc`,page:1}),R=V({title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}),G=v(()=>g.incomeCategories),K=v(()=>g.pagination),q=v(()=>g.loading),J=v(()=>g.rootIncomeCategories),ae=v(()=>[{key:`name`,label:`Category Name`,type:`text`},{key:`parent.name`,label:`Parent Category`,type:`text`,fallback:`Root Category`},{key:`description`,label:`Description`,type:`text`,fallback:`No description provided`},{key:`is_root`,label:`Category Type`,type:`custom`,customRender:e=>e?`Root Category`:`Sub Category`},{key:`has_children`,label:`Has Children`,type:`custom`,customRender:e=>e?`Yes`:`No`},{key:`is_active`,label:`Status`,type:`status`},{key:`created_by.name`,label:`Created By`,type:`text`,subKey:`created_at`},{key:`updated_by.name`,label:`Last Updated By`,type:`text`,subKey:`updated_at`}]);L(()=>({...N}),e=>{let{page:t,...n}=e;g.updateFilters(n)},{deep:!0});let Y=async(e=1)=>{try{let t={...N,page:e};await g.fetchIncomeCategories(t)}catch{p.error(`Failed to load income categories`,{title:`Error`})}},X=()=>{Y(N.page||1)},ce=()=>{A.value&&clearTimeout(A.value),A.value=setTimeout(()=>{Y(1)},300)},le=e=>{N.sort_by===e?N.sort_direction=N.sort_direction===`asc`?`desc`:`asc`:(N.sort_by=e,N.sort_direction=`asc`),Y(1)},Z=e=>{e>=1&&K.value&&e<=K.value.last_page&&(N.page=e,Y(e))},Q=e=>{j.value=e,M.value=!0},ue=e=>{if(e.has_children){p.warning(`Cannot delete category that has children`);return}k.value=e,R.value={title:`Delete Income Category`,message:`Are you sure you want to delete "${e.name}"? This action can be undone from the trash.`,buttonText:`Delete`,loadingText:`Deleting...`,buttonClass:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,action:`delete`},O.value=!0},de=async()=>{k.value&&(await g.deleteIncomeCategory(k.value.id),fe())},fe=()=>{O.value=!1,k.value=null,R.value={title:``,message:``,buttonText:``,loadingText:``,buttonClass:``,action:``}},pe=()=>{b(`create`)},me=e=>{b(`edit`,e)};return s(async()=>{await g.fetchRootIncomeCategories(),Y()}),c({refreshData:X}),(r,s)=>(F(),S(`div`,Ui,[w(re,{title:`Income Categories`,description:`Manage income categories and classifications`,"create-button-text":`Create New Income Category`,onCreate:pe}),y(`div`,Wi,[y(`div`,Gi,[y(`div`,Ki,[s[13]||=y(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Income Categories `,-1),y(`div`,qi,[z(y(`input`,{id:`search`,"onUpdate:modelValue":s[0]||=e=>N.search=e,type:`text`,placeholder:`Search by name or description...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:ce},null,544),[[h,N.search]]),w(H(te),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),y(`div`,null,[s[16]||=y(`label`,{for:`parent_category`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(y(`select`,{id:`parent_category`,"onUpdate:modelValue":s[1]||=e=>N.parent_id=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},[s[14]||=y(`option`,{value:``},`All Categories`,-1),s[15]||=y(`option`,{value:`null`},`Root Categories Only`,-1),(F(!0),S(_,null,I(J.value,e=>(F(),S(`option`,{key:e.id,value:e.id},W(e.name),9,Ji))),128))],544),[[m,N.parent_id]])]),y(`div`,null,[s[18]||=y(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),z(y(`select`,{id:`status`,"onUpdate:modelValue":s[2]||=e=>N.is_active=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},s[17]||=[y(`option`,{value:``},`All Status`,-1),y(`option`,{value:`true`},`Active`,-1),y(`option`,{value:`false`},`Inactive`,-1)],544),[[m,N.is_active]])]),y(`div`,null,[s[20]||=y(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),z(y(`select`,{id:`per-page`,"onUpdate:modelValue":s[3]||=e=>N.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Y},s[19]||=[y(`option`,{value:15},`15`,-1),y(`option`,{value:25},`25`,-1),y(`option`,{value:50},`50`,-1),y(`option`,{value:100},`100`,-1)],544),[[m,N.per_page]])])])]),y(`div`,Yi,[q.value?(F(),S(`div`,Xi,[w(H(n),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),s[21]||=y(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading income categories...`,-1)])):G.value.length===0?(F(),S(`div`,Zi,[w(H(i),{class:`h-12 w-12 mx-auto text-gray-400`}),s[23]||=y(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},` No income categories found `,-1),y(`p`,Qi,W(N.search?`Try adjusting your search criteria.`:`Get started by creating your first income category.`),1),N.search?x(``,!0):(F(),S(`div`,$i,[y(`button`,{onClick:pe,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},[w(H(e),{class:`h-5 w-5 mr-2`}),s[22]||=C(` Add Your First Income Category `,-1)])]))])):(F(),S(`div`,ea,[y(`table`,ta,[y(`thead`,na,[y(`tr`,null,[y(`th`,ra,[y(`button`,{onClick:s[4]||=e=>le(`name`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[24]||=y(`span`,null,`Category Name`,-1),y(`div`,ia,[w(H(l),{class:U([`h-3 w-3`,N.sort_by===`name`&&N.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,N.sort_by===`name`&&N.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[27]||=y(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Parent Category `,-1),s[28]||=y(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `,-1),s[29]||=y(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Children `,-1),y(`th`,aa,[y(`button`,{onClick:s[5]||=e=>le(`is_active`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[25]||=y(`span`,null,`Status`,-1),y(`div`,oa,[w(H(l),{class:U([`h-3 w-3`,N.sort_by===`is_active`&&N.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,N.sort_by===`is_active`&&N.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),y(`th`,sa,[y(`button`,{onClick:s[6]||=e=>le(`created_at`),class:`flex items-center space-x-1 hover:text-gray-700 dark:hover:text-gray-100 transition-colors duration-200`},[s[26]||=y(`span`,null,`Created`,-1),y(`div`,ca,[w(H(l),{class:U([`h-3 w-3`,N.sort_by===`created_at`&&N.sort_direction===`asc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`]),w(H(D),{class:U([`h-3 w-3 -mt-1`,N.sort_by===`created_at`&&N.sort_direction===`desc`?`text-blue-600 dark:text-blue-400`:`text-gray-400`])},null,8,[`class`])])])]),s[30]||=y(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `,-1)])]),y(`tbody`,la,[(F(!0),S(_,null,I(G.value,e=>(F(),S(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[y(`td`,ua,[y(`div`,da,[y(`div`,fa,[y(`div`,pa,[w(H(i),{class:`h-5 w-5 text-green-600 dark:text-green-400`})])]),y(`div`,ma,[y(`div`,ha,W(e.name),1),y(`div`,ga,[y(`span`,null,`ID: `+W(e.id),1),e.is_root?(F(),S(`span`,_a,` Root `)):x(``,!0)])])])]),y(`td`,va,[y(`div`,ya,W(e.parent?.name||`-`),1)]),y(`td`,ba,[y(`div`,xa,W(e.description||`No description provided`),1)]),y(`td`,Sa,[y(`div`,Ca,[e.has_children?(F(),S(`span`,wa,[w(H(a),{class:`w-3 h-3 mr-1`}),s[31]||=C(` Has Children `,-1)])):(F(),S(`span`,Ta,`-`))])]),y(`td`,Ea,[w(oe,{active:e.is_active},null,8,[`active`])]),y(`td`,Da,[y(`div`,Oa,[y(`div`,ka,W(e.created_by?.name||`-`),1),y(`div`,Aa,W(H(ne)(e.created_at)),1)])]),y(`td`,ja,[y(`div`,Ma,[y(`button`,{onClick:t=>Q(e),class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View details`},[w(H(o),{class:`w-4 h-4`})],8,Na),y(`button`,{onClick:t=>me(e),class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Income Category`},[w(H(t),{class:`h-4 w-4`})],8,Pa),y(`button`,{onClick:t=>ue(e),disabled:e.has_children,class:U([`transition-colors duration-200`,e.has_children?`text-gray-400 dark:text-gray-600 cursor-not-allowed`:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300`]),title:e.has_children?`Cannot delete category with children`:`Delete Income Category`},[w(H(ee),{class:`h-4 w-4`})],10,Fa)])])]))),128))])])])),K.value&&K.value.total>0?(F(),S(`div`,Ia,[y(`div`,La,[y(`div`,Ra,[y(`button`,{onClick:s[7]||=e=>Z(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,za),y(`button`,{onClick:s[8]||=e=>Z(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Ba)]),y(`div`,Va,[y(`div`,null,[y(`p`,Ha,[s[32]||=C(` Showing `,-1),y(`span`,Ua,W(K.value.from),1),s[33]||=C(` to `,-1),y(`span`,Wa,W(K.value.to),1),s[34]||=C(` of `,-1),y(`span`,Ga,W(K.value.total),1),s[35]||=C(` results `,-1)])]),y(`div`,null,[y(`nav`,Ka,[y(`button`,{onClick:s[9]||=e=>Z(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[w(H(E),{class:`h-5 w-5`})],8,qa),y(`button`,{onClick:s[10]||=e=>Z(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[w(H(u),{class:`h-5 w-5`})],8,Ja)])])])])])):x(``,!0)]),w(ie,{show:O.value,"onUpdate:show":s[11]||=e=>O.value=e,type:`delete`,title:R.value.title,message:R.value.message,"confirm-text":R.value.buttonText,"loading-text":R.value.loadingText,loading:T.value,onConfirm:de,onCancel:fe},null,8,[`show`,`title`,`message`,`confirm-text`,`loading-text`,`loading`]),w(se,{show:M.value,"onUpdate:show":s[12]||=e=>M.value=e,item:j.value,title:`Income Category Details`,"display-fields":ae.value,size:`lg`},null,8,[`show`,`item`,`display-fields`])]))}}),Xa=Ya;const Za={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Qa={class:`max-w-4xl mx-auto`},$a={class:`mb-8`},eo={class:`flex items-center space-x-4 mb-2`},to={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},no={class:`px-6 py-8`},ro={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},io={class:`md:col-span-2`},ao={key:0,class:`mt-1 text-xs text-gray-500`},oo={class:`md:col-span-2`},so=[`disabled`],co=[`value`],lo={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},uo={class:`md:col-span-2`},fo={class:`flex items-start`},po={class:`flex items-center h-5`},mo=[`disabled`],ho=[`disabled`],go={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},_o={key:1,class:`mt-1 text-xs text-gray-500`},vo={class:`p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg`},yo={class:`flex`},bo={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},xo={class:`space-y-2`},So={class:`text-sm text-green-700 dark:text-green-400`},Co={class:`text-sm text-green-700 dark:text-green-400`},wo={key:0,class:`text-sm text-green-700 dark:text-green-400`},To={class:`text-sm text-green-700 dark:text-green-400`},Eo={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},Do=[`disabled`],Oo=[`disabled`],ko={key:0,class:`flex items-center justify-center`},Ao={key:1};var jo=T({__name:`CreatePage`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,i=Hi(),a=V({}),o=v(()=>Object.keys(a.value).length>0),c=e=>a.value[e]?.[0],l=e=>{a.value[e]&&delete a.value[e]},u=e=>{a.value={...e}},d=()=>{a.value={}},f=e=>{d();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},b=V(!1),T=V({name:``,parent_id:void 0,description:``,is_active:!0}),E=v(()=>T.value.name.trim().length>0&&T.value.name.length<=255&&(!T.value.description||T.value.description.length<=1e3)),D=v(()=>i.rootCategoriesOnly),k=e=>{if(!e)return``;let t=D.value.find(t=>t.id===Number(e));return t?.name||``},A=()=>{T.value={name:``,parent_id:void 0,description:``,is_active:!0},d()},j=async()=>{if(d(),f(T.value))try{b.value=!0;let e={name:T.value.name.trim(),is_active:T.value.is_active,parent_id:T.value.parent_id?Number(T.value.parent_id):null,description:T.value.description?.trim()??``};await i.createIncomeCategory(e),A(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&u(e.response.data.errors)}finally{b.value=!1}},M=()=>{A(),n(`cancel`)},N=()=>{n(`back`)};return s(async()=>{await i.fetchIncomeCategories({is_active:!0}),A()}),(e,t)=>(F(),S(`div`,Za,[y(`div`,Qa,[y(`div`,$a,[y(`div`,eo,[y(`button`,{onClick:N,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[w(H(O),{class:`w-5 h-5`})]),t[7]||=y(`div`,null,[y(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Income Category `),y(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new income category classification `)],-1)])]),y(`div`,to,[y(`div`,no,[y(`form`,{onSubmit:g(j,[`prevent`]),class:`space-y-8`},[y(`div`,null,[t[12]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),y(`div`,ro,[y(`div`,io,[w(G,{type:`text`,maxlength:255,disabled:b.value,onBlur:t[0]||=()=>l(`name`),modelValue:T.value.name,"onUpdate:modelValue":t[1]||=e=>T.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:c(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),T.value.name.length>0?(F(),S(`p`,ao,W(T.value.name.length)+`/255 characters `,1)):x(``,!0)]),y(`div`,oo,[t[9]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(y(`select`,{"onUpdate:modelValue":t[2]||=e=>T.value.parent_id=e,disabled:b.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>l(`parent_id`)},[t[8]||=y(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),S(_,null,I(D.value,e=>(F(),S(`option`,{key:e.id,value:e.id},W(e.name),9,co))),128))],42,so),[[m,T.value.parent_id]]),c(`parent_id`)?(F(),S(`p`,lo,W(c(`parent_id`)),1)):x(``,!0),t[10]||=y(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),y(`div`,uo,[y(`div`,fo,[y(`div`,po,[z(y(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>T.value.is_active=e,type:`checkbox`,disabled:b.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,mo),[[p,T.value.is_active]])]),t[11]||=y(`div`,{class:`ml-3`},[y(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),y(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this income category will be available for selection `)],-1)])])])]),y(`div`,null,[t[14]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),y(`div`,null,[t[13]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(y(`textarea`,{"onUpdate:modelValue":t[5]||=e=>T.value.description=e,disabled:b.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,c(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>l(`description`)},null,42,ho),[[h,T.value.description]]),c(`description`)?(F(),S(`p`,go,W(c(`description`)),1)):x(``,!0),T.value.description&&T.value.description.length>0?(F(),S(`p`,_o,W(T.value.description.length)+`/1000 characters `,1)):x(``,!0)])]),y(`div`,vo,[y(`div`,yo,[w(H(r),{class:`h-5 w-5 text-blue-400 mr-2 mt-0.5`}),t[15]||=y(`div`,null,[y(`h4`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300 mb-1`},` About Category Hierarchy `),y(`div`,{class:`text-sm text-blue-700 dark:text-blue-400 space-y-1`},[y(`p`,null,[y(`strong`,null,`Root Categories:`),C(` Top-level categories that can contain sub-categories`)]),y(`p`,null,[y(`strong`,null,`Sub-categories:`),C(` Categories that belong to a parent category for better organization`)]),y(`p`,null,[y(`strong`,null,`Examples:`),C(` Travel ï¿½ Flights, Hotels, Meals | Office ï¿½ Supplies, Equipment, Software`)])])],-1)])]),T.value.name?(F(),S(`div`,bo,[t[20]||=y(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),y(`div`,xo,[y(`p`,So,[t[16]||=y(`strong`,null,`Name:`,-1),C(` `+W(T.value.name),1)]),y(`p`,Co,[t[17]||=y(`strong`,null,`Type:`,-1),C(` `+W(T.value.parent_id?`Sub-category of "${k(T.value.parent_id)}"`:`Root Category`),1)]),T.value.description?(F(),S(`p`,wo,[t[18]||=y(`strong`,null,`Description:`,-1),C(` `+W(T.value.description),1)])):x(``,!0),y(`p`,To,[t[19]||=y(`strong`,null,`Status:`,-1),y(`span`,{class:U(T.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(T.value.is_active?`Active`:`Inactive`),3)])])])):x(``,!0),y(`div`,Eo,[y(`button`,{type:`button`,onClick:M,disabled:b.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,Do),y(`button`,{type:`submit`,disabled:b.value||o.value||!E.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[b.value?(F(),S(`div`,ko,t[21]||=[y(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),C(` Creating... `,-1)])):(F(),S(`span`,Ao,`Create Income Category`))],8,Oo)])],32)])])])]))}}),Mo=jo;const No={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},Po={class:`max-w-4xl mx-auto`},Fo={class:`mb-8`},Io={class:`flex items-center space-x-4 mb-2`},Lo={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},Ro={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},zo={class:`px-6 py-8`},Bo={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Vo={class:`md:col-span-2`},Ho={key:0,class:`mt-1 text-xs text-gray-500`},Uo={class:`md:col-span-2`},Wo=[`disabled`],Go=[`value`],Ko={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},qo={class:`md:col-span-2`},Jo={class:`flex items-start`},Yo={class:`flex items-center h-5`},Xo=[`disabled`],Zo=[`disabled`],Qo={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},$o={key:1,class:`mt-1 text-xs text-gray-500`},es={key:0,class:`p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg`},ts={class:`space-y-2`},ns={class:`text-sm text-green-700 dark:text-green-400`},rs={class:`text-sm text-green-700 dark:text-green-400`},os={key:0,class:`text-sm text-green-700 dark:text-green-400`},ss={class:`text-sm text-green-700 dark:text-green-400`},cs={key:1,class:`p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg`},ls={class:`flex`},us={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},ds=[`disabled`],fs=[`disabled`],ps={key:0,class:`flex items-center justify-center`},ms={key:1},hs={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},gs={class:`flex flex-col items-center`};var _s=T({__name:`EditPage`,props:{id:{},incomeCategory:{}},emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=e,r=t,i=Hi(),a=V({}),o=v(()=>Object.keys(a.value).length>0),l=e=>a.value[e]?.[0],u=e=>{a.value[e]&&delete a.value[e]},d=e=>{a.value={...e}},f=()=>{a.value={}},b=e=>{f();let t={};return!e.name||!e.name.trim()?t.name=[`Category name is required`]:e.name.length>255&&(t.name=[`Category name must not exceed 255 characters`]),e.description&&e.description.length>1e3&&(t.description=[`Description must not exceed 1000 characters`]),a.value=t,Object.keys(t).length===0},T=V(!1),E=V(!1),D=V(null),k=V({name:``,parent_id:``,description:``,is_active:!0}),A=V({name:``,parent_id:``,description:``,is_active:!0}),j=v(()=>k.value.name.trim().length>0&&k.value.name.length<=255&&(!k.value.description||k.value.description.length<=1e3)),M=v(()=>i.rootCategoriesOnly.filter(e=>e.id!==n.id)),N=e=>{if(!e)return``;let t=M.value.find(t=>t.id===Number(e));return t?.name||``},P=async()=>{try{E.value=!0;let e=n.incomeCategory||await i.fetchIncomeCategory(n.id);e&&(D.value=e,k.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},A.value={name:e.name,parent_id:e.parent_id?String(e.parent_id):``,description:e.description||``,is_active:e.is_active},f())}catch(e){console.error(`Error loading income category:`,e)}finally{E.value=!1}},R=async()=>{if(f(),b(k.value))try{T.value=!0;let e={name:k.value.name.trim(),is_active:k.value.is_active,parent_id:k.value.parent_id?Number(k.value.parent_id):null,description:k.value.description?.trim()??``};await i.updateIncomeCategory(n.id,e),A.value={...k.value},r(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&d(e.response.data.errors)}finally{T.value=!1}},B=()=>{r(`cancel`)},K=()=>{r(`back`)};return s(async()=>{await i.fetchIncomeCategories({is_active:!0}),P()}),L(()=>n.id,()=>{n.id&&P()}),(e,t)=>(F(),S(`div`,No,[y(`div`,Po,[y(`div`,Fo,[y(`div`,Io,[y(`button`,{onClick:K,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[w(H(O),{class:`w-5 h-5`})]),t[7]||=y(`div`,null,[y(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Income Category `),y(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update income category information and settings `)],-1)])]),E.value?(F(),S(`div`,Lo,t[8]||=[y(`div`,{class:`flex items-center justify-center`},[y(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),y(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading income category...`)],-1)])):k.value?(F(),S(`div`,Ro,[y(`div`,zo,[y(`form`,{onSubmit:g(R,[`prevent`]),class:`space-y-8`},[y(`div`,null,[t[13]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Basic Information `,-1),y(`div`,Bo,[y(`div`,Vo,[w(G,{type:`text`,maxlength:255,disabled:T.value,onBlur:t[0]||=()=>u(`name`),modelValue:k.value.name,"onUpdate:modelValue":t[1]||=e=>k.value.name=e,placeholder:`Enter category name (e.g., Office Supplies, Travel, Marketing)`,error:l(`name`),required:``,label:`Category Name`},null,8,[`disabled`,`modelValue`,`error`]),k.value.name.length>0?(F(),S(`p`,Ho,W(k.value.name.length)+`/255 characters `,1)):x(``,!0)]),y(`div`,Uo,[t[10]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Parent Category `,-1),z(y(`select`,{"onUpdate:modelValue":t[2]||=e=>k.value.parent_id=e,disabled:T.value,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`parent_id`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[3]||=()=>u(`parent_id`)},[t[9]||=y(`option`,{value:``},`Root Category (No Parent)`,-1),(F(!0),S(_,null,I(M.value,e=>(F(),S(`option`,{key:e.id,value:e.id},W(e.name),9,Go))),128))],42,Wo),[[m,k.value.parent_id]]),l(`parent_id`)?(F(),S(`p`,Ko,W(l(`parent_id`)),1)):x(``,!0),t[11]||=y(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},` Select a parent category to create a sub-category, or leave empty for a root category `,-1)]),y(`div`,qo,[y(`div`,Jo,[y(`div`,Yo,[z(y(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>k.value.is_active=e,type:`checkbox`,disabled:T.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,Xo),[[p,k.value.is_active]])]),t[12]||=y(`div`,{class:`ml-3`},[y(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),y(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this income category will be available for selection `)],-1)])])])]),y(`div`,null,[t[15]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-4`},` Description `,-1),y(`div`,null,[t[14]||=y(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Category Description `,-1),z(y(`textarea`,{"onUpdate:modelValue":t[5]||=e=>k.value.description=e,disabled:T.value,maxlength:1e3,rows:`4`,placeholder:`Enter category description and characteristics (optional)`,class:U([`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,l(`description`)?`border-red-300 text-red-900`:`border-gray-300 dark:border-gray-600`,`bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`]),onBlur:t[6]||=()=>u(`description`)},null,42,Zo),[[h,k.value.description]]),l(`description`)?(F(),S(`p`,Qo,W(l(`description`)),1)):x(``,!0),k.value.description&&k.value.description.length>0?(F(),S(`p`,$o,W(k.value.description.length)+`/1000 characters `,1)):x(``,!0)])]),k.value.name?(F(),S(`div`,es,[t[20]||=y(`h4`,{class:`text-sm font-medium text-green-800 dark:text-green-300 mb-2`},`Category Preview`,-1),y(`div`,ts,[y(`p`,ns,[t[16]||=y(`strong`,null,`Name:`,-1),C(` `+W(k.value.name),1)]),y(`p`,rs,[t[17]||=y(`strong`,null,`Type:`,-1),C(` `+W(k.value.parent_id?`Sub-category of "${N(k.value.parent_id)}"`:`Root Category`),1)]),k.value.description?(F(),S(`p`,os,[t[18]||=y(`strong`,null,`Description:`,-1),C(` `+W(k.value.description),1)])):x(``,!0),y(`p`,ss,[t[19]||=y(`strong`,null,`Status:`,-1),y(`span`,{class:U(k.value.is_active?`text-green-600 dark:text-green-400`:`text-red-600 dark:text-red-400`)},W(k.value.is_active?`Active`:`Inactive`),3)])])])):x(``,!0),D.value?.has_children&&k.value.parent_id?(F(),S(`div`,cs,[y(`div`,ls,[w(H(q),{class:`h-5 w-5 text-amber-400 mr-2 mt-0.5`}),t[21]||=y(`div`,null,[y(`h4`,{class:`text-sm font-medium text-amber-800 dark:text-amber-300 mb-1`},` Warning: Category has sub-categories `),y(`p`,{class:`text-sm text-amber-700 dark:text-amber-400`},` This category has sub-categories. Changing its parent will affect the entire hierarchy structure. `)],-1)])])):x(``,!0),y(`div`,us,[y(`button`,{type:`button`,onClick:B,disabled:T.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,ds),y(`button`,{type:`submit`,disabled:T.value||o.value||!j.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[T.value?(F(),S(`div`,ps,t[22]||=[y(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),C(` Updating... `,-1)])):(F(),S(`span`,ms,`Update Income Category`))],8,fs)])],32)])])):(F(),S(`div`,hs,[y(`div`,gs,[w(H(c),{class:`w-12 h-12 text-red-400 mb-4`}),t[23]||=y(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Income Category Not Found `,-1),t[24]||=y(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The income category you're trying to edit could not be found. `,-1),y(`button`,{onClick:K,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ï¿½ Back to Income Categories `)])]))])]))}}),vs=_s;const ys={class:`min-h-screen`};var bs=T({__name:`TabPage`,setup(e){let t=V([{id:`account-types`,label:`Account Types`,icon:{type:`lucide`,name:`users`},color:`blue`},{id:`expense-categories`,label:`Expense Categories`,icon:{type:`lucide`,name:`FolderTree`},color:`red`},{id:`income-categories`,label:`Income Categories`,icon:{type:`lucide`,name:`FolderTree`},color:`green`}]),n=V(`account-types`),r=V(`accounttypeindex`),i=V(null),a=V(),o=V(),s=V(),c={"account-types":{index:`accounttypeindex`,create:`accounttypecreate`,edit:`accounttypeedit`},"income-categories":{index:`incomecategoriesindex`,create:`incomecategoriescreate`,edit:`incomecategoriesedit`},"expense-categories":{index:`expensecategoriesindex`,create:`expensecategoriescreate`,edit:`expensecategoriesedit`}},l=e=>{let t=c[e];t&&(r.value=t.create)},u=(e,t)=>{let n=c[e];n&&(i.value={type:e,id:t.id,data:t},r.value=n.edit)},d=e=>{let t=c[e];t&&(r.value=t.index,i.value=null)},f=e=>{let t=c[e];if(t){r.value=t.index,i.value=null;let n={"account-types":a,"expense-categories":o,"income-categories":s},c=n[e];c?.value?.refreshData&&c.value.refreshData()}},p=(e,t)=>{n.value=e;let a={"account-types":`accounttypeindex`,"expense-categories":`expensecategoriesindex`,"income-categories":`incomecategoriesindex`},o=a[e];o&&(r.value=o,i.value=null),console.log(`Switched to tab: ${e}`,t)};return(e,n)=>(F(),S(`div`,ys,[w(X,{title:``,tabs:t.value,"default-tab":`account-types`,onTabChange:p},{"account-types":R(()=>[r.value===`accounttypeindex`?(F(),b(at,{key:0,onCreate:n[0]||=e=>l(`account-types`),onEdit:n[1]||=e=>u(`account-types`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):x(``,!0),r.value===`accounttypecreate`?(F(),b(Pt,{key:1,onBack:n[2]||=e=>d(`account-types`),onSuccess:n[3]||=e=>f(`account-types`),onCancel:n[4]||=e=>d(`account-types`)})):x(``,!0),r.value===`accounttypeedit`?(F(),b(pn,{key:2,onBack:n[5]||=e=>d(`account-types`),onSuccess:n[6]||=e=>f(`account-types`),onCancel:n[7]||=e=>d(`account-types`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):x(``,!0)]),"expense-categories":R(()=>[r.value===`expensecategoriesindex`?(F(),b(xr,{key:0,onCreate:n[8]||=e=>l(`expense-categories`),onEdit:n[9]||=e=>u(`expense-categories`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):x(``,!0),r.value===`expensecategoriescreate`?(F(),b(ni,{key:1,onBack:n[10]||=e=>d(`expense-categories`),onSuccess:n[11]||=e=>f(`expense-categories`),onCancel:n[12]||=e=>d(`expense-categories`)})):x(``,!0),r.value===`expensecategoriesedit`?(F(),b(Bi,{key:2,onBack:n[13]||=e=>d(`expense-categories`),onSuccess:n[14]||=e=>f(`expense-categories`),onCancel:n[15]||=e=>d(`expense-categories`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):x(``,!0)]),"income-categories":R(()=>[r.value===`incomecategoriesindex`?(F(),b(Xa,{key:0,onCreate:n[16]||=e=>l(`income-categories`),onEdit:n[17]||=e=>u(`income-categories`,e),ref_key:`accountTypeIndexRef`,ref:a},null,512)):x(``,!0),r.value===`incomecategoriescreate`?(F(),b(Mo,{key:1,onBack:n[18]||=e=>d(`income-categories`),onSuccess:n[19]||=e=>f(`income-categories`),onCancel:n[20]||=e=>d(`income-categories`)})):x(``,!0),r.value===`incomecategoriesedit`?(F(),b(vs,{key:2,onBack:n[21]||=e=>d(`income-categories`),onSuccess:n[22]||=e=>f(`income-categories`),onCancel:n[23]||=e=>d(`income-categories`),id:i.value.id,"account-type":i.value.data},null,8,[`id`,`account-type`])):x(``,!0)]),_:1},8,[`tabs`])]))}}),xs=bs;export{xs as default};