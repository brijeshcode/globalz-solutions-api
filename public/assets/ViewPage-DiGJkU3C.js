import{$ as e,C as t,N as n,X as r,a$ as ee,aC as i,aD as te,aO as ne,aR as a,aS as o,aT as s,aU as c,aW as l,aX as u,aY as re,ak as d,ao as f,ay as p,b1 as m,b2 as ie,b8 as h,bb as g,bc as _,bf as v,o as ae,u as y}from"./index-CEMSkyNR.js";import{b as oe}from"./useAuth-CTli-9fr.js";import"./GlobalConfig-wPgXFcZ5.js";import{c as b}from"./common-CZbH6H1Z.js";import"./tableUtils-dXs1kjAL.js";import{b as x,d as S}from"./currencyUtil-CWk0vOWe.js";import{b as C}from"./DataItems-C7M-Sneo.js";import{b as se}from"./SupplierPaymentStore-CvQy6X2v.js";const w={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},T={class:``},E={class:`mb-8`},D={class:`flex items-center justify-between`},O={class:`flex items-center space-x-4`},k={class:`text-sm text-gray-600 dark:text-gray-400`},A={key:0,class:`flex space-x-3`},j={key:0,class:`flex items-center justify-center py-12`},M={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},N={class:`px-6 py-8`},P={class:`mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-md`},F={class:`flex items-center justify-between`},I={class:`flex`},L={class:`ml-3`},R={class:`mt-1 text-sm text-blue-700 dark:text-blue-300`},z={class:`text-right`},B={class:`text-lg font-bold text-blue-900 dark:text-blue-100`},V={class:`space-y-8`},H={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},U={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},W={class:`text-sm text-gray-900 dark:text-white`},G={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},K={key:0,class:`text-sm text-gray-900 dark:text-white`},ce={key:1,class:`text-xs text-gray-500 dark:text-gray-400`},le={key:2,class:`text-sm text-gray-900 dark:text-white`},ue={class:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6`},de={class:`text-lg font-semibold text-gray-900 dark:text-white`},fe={class:`text-lg font-semibold text-green-600 dark:text-green-400`},pe={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},me={class:`text-sm text-gray-900 dark:text-white`},he={key:0,class:`text-xs text-gray-500 dark:text-gray-400`},ge={class:`text-sm text-gray-900 dark:text-white`},_e={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},ve={key:0},ye={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`},be={class:`flex-1 min-w-0`},xe={class:`text-sm font-medium text-gray-900 dark:text-white truncate`},Se={class:`text-xs text-gray-500 dark:text-gray-400`},Ce=[`href`],we={key:1},Te={class:`grid grid-cols-1 gap-6`},Ee={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},De={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Oe={class:`text-sm text-gray-900 dark:text-white`},ke={class:`text-sm text-gray-900 dark:text-white`},Ae={class:`flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700`},je={key:2,class:`text-center py-12`};var q=re({__name:`ViewPage`,setup(re){let f=te(),q=i(),J=p(),Me=se(),{isAdmin:Y}=oe(),X=g(!1),Z=g(null),Q=()=>{f.push({name:`supplier.payments.index`})},$=()=>{f.push({name:`supplier.payments.edit`,params:{id:q.params.id}})},Ne=e=>{if(!e)return`0 Bytes`;let t=1024,n=[`Bytes`,`KB`,`MB`,`GB`],r=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/t**+r*100)/100+` `+n[r]},Pe=async()=>{let e=Number(q.params.id);if(!e){J.error(`Invalid payment ID`),Q();return}X.value=!0;try{let t=await Me.fetchSupplierPayment(e);Z.value=t}catch{J.error(`Failed to load supplier payment`),Z.value=null}finally{X.value=!1}};return ee(async()=>{await Pe()}),(ee,i)=>(m(),c(`div`,w,[a(`div`,T,[a(`div`,E,[a(`div`,D,[a(`div`,O,[a(`button`,{onClick:Q,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[u(_(d),{class:`w-5 h-5`})]),a(`div`,null,[i[0]||=a(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Supplier Payment Details `,-1),a(`p`,k,v(Z.value?`${Z.value.prefix}${Z.value.code}`:`Loading...`),1)])]),Z.value&&!X.value?(m(),c(`div`,A,[_(Y)?(m(),c(`button`,{key:0,onClick:$,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[u(_(y),{class:`h-4 w-4 mr-2`}),i[1]||=l(` Edit Payment `,-1)])):s(``,!0)])):s(``,!0)])]),X.value?(m(),c(`div`,j,[u(_(n),{class:`h-8 w-8 animate-spin text-blue-600`}),i[2]||=a(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment details...`,-1)])):Z.value?(m(),c(`div`,M,[a(`div`,N,[a(`div`,P,[a(`div`,F,[a(`div`,I,[u(_(t),{class:`h-5 w-5 text-blue-400`}),a(`div`,L,[i[3]||=a(`h3`,{class:`text-sm font-medium text-blue-800 dark:text-blue-200`},` Payment Recorded `,-1),a(`div`,R,[a(`p`,null,`Created by `+v(Z.value.created_by_user?.name||`N/A`)+` on `+v(_(b)(Z.value.updated_at)),1)])])]),a(`div`,z,[i[4]||=a(`div`,{class:`text-sm font-medium text-blue-800 dark:text-blue-200`},`Total Amount (USD)`,-1),a(`div`,B,v(_(x)(Z.value.amount_usd,!0)),1)])])]),a(`div`,V,[a(`div`,null,[i[5]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Basic Information `,-1),a(`div`,H,[u(C,{label:`Payment Code`,value:`${Z.value.prefix}${Z.value.code}`},null,8,[`value`]),u(C,{label:`Payment Date`,value:_(b)(Z.value.date)},null,8,[`value`]),u(C,{label:`Created By`,value:Z.value.created_by_user?.name||`-`},null,8,[`value`])])]),a(`div`,null,[i[6]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Supplier Information `,-1),a(`div`,U,[u(C,{label:`Supplier Name`},{default:h(()=>[a(`div`,W,v(Z.value.supplier?.name||`-`),1),Z.value.supplier?.code?(m(),c(`div`,G,` Code: `+v(Z.value.supplier.code),1)):s(``,!0)]),_:1}),u(C,{label:`Supplier Contact`},{default:h(()=>[Z.value.supplier?.email?(m(),c(`div`,K,v(Z.value.supplier.email),1)):s(``,!0),Z.value.supplier?.phone?(m(),c(`div`,ce,v(Z.value.supplier.phone),1)):s(``,!0),!Z.value.supplier?.email&&!Z.value.supplier?.phone?(m(),c(`div`,le,` - `)):s(``,!0)]),_:1})])]),a(`div`,null,[i[7]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Payment Details `,-1),a(`div`,ue,[u(C,{label:`Currency`,value:Z.value.currency?.name?`${Z.value.currency.name} (${Z.value.currency.code})`:`-`},null,8,[`value`]),_(S)(Z.value.currency?.code)?s(``,!0):(m(),o(C,{key:0,label:`Currency Rate`,value:Z.value.currency_rate*1},null,8,[`value`])),u(C,{label:`Amount`},{default:h(()=>[a(`div`,de,v(_(x)(Z.value.amount,!0,Z.value.currency)),1)]),_:1}),_(S)(Z.value.currency?.code)?s(``,!0):(m(),o(C,{key:1,label:`Amount (USD)`},{default:h(()=>[a(`div`,fe,v(_(x)(Z.value.amount_usd,!0)),1)]),_:1}))])]),a(`div`,null,[i[8]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Account Information `,-1),a(`div`,pe,[u(C,{label:`Account`},{default:h(()=>[a(`div`,me,v(Z.value.account?.name||`-`),1),Z.value.account?.account_number?(m(),c(`div`,he,` Account Number: `+v(Z.value.account.account_number),1)):s(``,!0)]),_:1}),u(C,{label:`Account Type`},{default:h(()=>[a(`div`,ge,v(Z.value.account?.account_type||`-`),1)]),_:1})])]),a(`div`,null,[i[9]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Reference Information `,-1),a(`div`,_e,[u(C,{label:`Supplier Order #`,value:Z.value.supplier_order_number||`-`},null,8,[`value`]),u(C,{label:`Check Number`,value:Z.value.check_number||`-`},null,8,[`value`]),u(C,{label:`Bank Reference`,value:Z.value.bank_ref_number||`-`},null,8,[`value`])])]),Z.value.documents&&Z.value.documents.length>0?(m(),c(`div`,ve,[i[10]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Documents `,-1),a(`div`,ye,[(m(!0),c(ne,null,ie(Z.value.documents,t=>(m(),c(`div`,{key:t.id,class:`flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors`},[u(_(r),{class:`h-5 w-5 text-gray-400 mr-3`}),a(`div`,be,[a(`p`,xe,v(t.file_name||`Document`),1),a(`p`,Se,v(Ne(t.file_size)),1)]),a(`a`,{href:t.preview_url,target:`_blank`,class:`ml-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300`},[u(_(e),{class:`h-4 w-4`})],8,Ce)]))),128))])])):s(``,!0),Z.value.note?(m(),c(`div`,we,[i[11]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Notes `,-1),a(`div`,Te,[u(C,{label:`Payment Notes`},{default:h(()=>[a(`div`,Ee,v(Z.value.note),1)]),_:1})])])):s(``,!0),a(`div`,null,[i[12]||=a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-gray-700 pb-2`},` Audit Trail `,-1),a(`div`,De,[u(C,{label:`Created By`},{default:h(()=>[a(`div`,Oe,v(Z.value.created_by_user?.name||`-`),1)]),_:1}),u(C,{label:`Last Updated By`},{default:h(()=>[a(`div`,ke,v(Z.value.updated_by_user?.name||`-`),1)]),_:1}),u(C,{label:`Last Updated`,value:_(b)(Z.value.updated_at)},null,8,[`value`])])]),a(`div`,Ae,[a(`button`,{type:`button`,onClick:Q,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[u(_(d),{class:`h-4 w-4 mr-2`}),i[13]||=l(` Back to Payments `,-1)]),_(Y)?(m(),c(`button`,{key:0,type:`button`,onClick:$,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[u(_(y),{class:`h-4 w-4 mr-2`}),i[14]||=l(` Edit Payment `,-1)])):s(``,!0)])])])])):X.value?s(``,!0):(m(),c(`div`,je,[u(_(ae),{class:`mx-auto h-12 w-12 text-red-400`}),i[15]||=a(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment not found`,-1),i[16]||=a(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The supplier payment you're looking for doesn't exist or has been deleted. `,-1),a(`div`,{class:`mt-6`},[a(`button`,{onClick:Q,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payments `)])]))])]))}}),J=f(q,[[`__scopeId`,`data-v-f789685a`]]);export{J as default};