import{D as e,a4 as t,a6 as n,aB as r,aC as i,aE as a,aF as o,aG as s,aI as c,aK as l,aU as u,aV as d,aY as f,ag as ee,ak as p,al as m,ay as h,az as g,u as te}from"./index-BHrYO3aQ.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import{c as _}from"./common-DPsEy-Xi.js";import{b as v}from"./companyStore-DLWOuqeV.js";import{b as y}from"./customerPaymentsStore-Bxi18Er_.js";const b={class:`max-w-4xl mx-auto p-8 bg-white text-gray-900 print:h-full print:p-0 print:max-w-none print:mx-0`},x={class:`header`},S={class:`flex justify-between items-start mb-10 pb-6 border-b-2 border-blue-600 print:border-black print:mb-6`},C={class:`flex-1`},w={class:`flex items-center mb-3`},T=[`src`,`alt`],E={key:1,class:`text-3xl font-bold text-blue-600 print:text-black print:text-2xl`},D={key:0},O={class:`text-sm print:text-xs print:text-black`},k={class:`text-right flex-1 mt-4`},A={class:`text-lg font-semibold text-gray-600 print:text-black print:text-base`},j={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 print:grid-cols-2 print:gap-6 print:mb-6`},M={class:`space-y-2 print:space-y-1`},N={class:`flex justify-between`},P={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},F={key:0,class:`flex justify-between`},I={class:`text-gray-900 print:text-black print:text-xs`},L={key:1,class:`flex justify-between`},R={class:`text-gray-900 print:text-black print:text-xs`},z={class:`space-y-2 print:space-y-1`},B={class:`flex justify-between`},V={class:`text-gray-900 print:text-black print:text-xs`},H={class:`flex justify-between`},U={class:`text-gray-900 print:text-black print:text-xs`},W={class:`flex justify-between`},G={class:`text-gray-900 print:text-black print:text-xs`},K={class:`body`},q={class:`mb-8 print:mb-6`},J={class:`bg-green-50 dark:bg-green-900/20 border-2 border-green-500 rounded-lg p-6 print:p-4 print:bg-white print:border-black`},Y={class:`grid grid-cols-1 md:grid-cols-2 gap-6 print:grid-cols-2 print:gap-4`},X={class:`space-y-1`},Z={class:`flex justify-between`},Q={class:`text-sm font-medium text-gray-900 print:text-black print:text-xs`},ne={class:`flex justify-between`},re={class:`text-sm font-medium text-gray-900 print:text-black print:text-xs`},ie={class:`space-y-1`},ae={class:`flex justify-between`},oe={class:`text-sm text-gray-600 print:text-black print:text-xs`},se={class:`text-lg font-bold text-gray-900 print:text-black print:text-base`},ce={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 print:grid-cols-2 print:gap-6 print:mb-6`},le={class:`space-y-2 print:space-y-1`},ue={class:`flex justify-between`},de={class:`text-gray-900 print:text-black print:text-xs`},fe={key:0,class:`flex justify-between`},pe={class:`text-gray-900 print:text-black print:text-xs`},me={key:1,class:`flex justify-between`},he={class:`text-gray-900 print:text-black print:text-xs`},ge={key:0,class:`mb-8 print:mb-6`},_e={class:`grid grid-cols-1 md:grid-cols-2 gap-6 print:grid-cols-2 print:gap-4`},ve={key:0},ye={class:`bg-gray-50 p-3 rounded-md text-sm text-gray-900 print:bg-white print:border print:border-black print:text-xs print:text-black`},be={key:1},xe={class:`bg-gray-50 p-3 rounded-md text-sm text-gray-900 print:bg-white print:border print:border-black print:text-xs print:text-black`},Se={class:`flex justify-between items-center mb-8 print:mb-4 mt-12 print:mt-8`},Ce={class:`print:block hidden print:fixed print:bottom-0 print:left-0 print:right-0`},we={class:`border-t-2 border-gray-300 print:border-black pt-3 pb-2 print:bg-white`},Te={class:`mt-1`},Ee={class:`flex flex-wrap gap-2 text-sm text-gray-600 print:text-black print:text-xs justify-between px-4`},De={key:0,class:`flex-1`},Oe={key:1,class:`flex-1 text-center`},ke={key:2,class:`flex-1 text-center`},Ae={key:3,class:`flex-1 text-right`};var je=s({__name:`PaymentReceipt`,props:{payment:{default:null}},setup(e,{expose:t}){let n=v();c(async()=>{try{n.company.name||await n.fetchCompany()}catch(e){console.error(`Failed to fetch company data:`,e)}});let a=(e,t)=>{if(!e&&e!==0)return`0.00`;let n=Number(e).toLocaleString(`en-US`,{minimumFractionDigits:2,maximumFractionDigits:2});return t?`${t} ${n}`:`$ ${n}`},o=()=>{window.print()};return t({printReceipt:o}),(e,t)=>(l(),i(`div`,b,[g(`section`,x,[g(`div`,S,[g(`div`,C,[g(`div`,w,[d(n).company.logo?.preview_url?(l(),i(`img`,{key:0,src:d(n).company.logo.preview_url,alt:d(n).company.name||`Company Logo`,class:`h-24 w-auto mr-4 print:h-16`},null,8,T)):r(``,!0),d(n).company.logo?.preview_url?r(``,!0):(l(),i(`div`,E,f(d(n).company.name),1))]),d(n).company.tax_number?(l(),i(`div`,D,[g(`p`,O,[g(`b`,null,`Tax Registration #: `+f(d(n).company.tax_number),1)])])):r(``,!0)]),g(`div`,k,[t[0]||=g(`h1`,{class:`text-3xl font-bold text-blue-600 mb-2 print:text-black print:text-2xl`},`PAYMENT RECEIPT`,-1),g(`div`,A,f(e.payment?.prefix)+`-`+f(e.payment?.code),1)])]),g(`div`,j,[g(`div`,null,[t[4]||=g(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Customer Information `,-1),g(`div`,M,[g(`div`,N,[t[1]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Customer:`,-1),g(`span`,P,f(e.payment?.customer?.name||`-`),1)]),e.payment?.customer?.code?(l(),i(`div`,F,[t[2]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Customer Code:`,-1),g(`span`,I,f(e.payment.customer.code),1)])):r(``,!0),e.payment?.customer_payment_term?(l(),i(`div`,L,[t[3]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Payment Term:`,-1),g(`span`,R,f(e.payment.customer_payment_term.name)+` (`+f(e.payment.customer_payment_term.days)+` days) `,1)])):r(``,!0)])]),g(`div`,null,[t[8]||=g(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Payment Details `,-1),g(`div`,z,[g(`div`,B,[t[5]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Payment Date:`,-1),g(`span`,V,f(d(_)(e.payment?.date)),1)]),g(`div`,H,[t[6]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`RCT Book Number:`,-1),g(`span`,U,f(e.payment?.rtc_book_number||`-`),1)]),g(`div`,W,[t[7]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Print Date:`,-1),g(`span`,G,f(d(_)(new Date().toISOString())),1)])])])])]),g(`section`,K,[g(`div`,q,[g(`div`,J,[g(`div`,Y,[g(`div`,null,[t[11]||=g(`h3`,{class:`text-sm font-semibold text-gray-700 mb-2 print:text-black print:text-xs`},`Received Currency Information`,-1),g(`div`,X,[g(`div`,Z,[t[9]||=g(`span`,{class:`text-sm text-gray-600 print:text-black print:text-xs`},`Currency:`,-1),g(`span`,Q,f(e.payment?.currency?.name||`-`)+` (`+f(e.payment?.currency?.code||`-`)+`) `,1)]),g(`div`,ne,[t[10]||=g(`span`,{class:`text-sm text-gray-600 print:text-black print:text-xs`},`Currency Rate:`,-1),g(`span`,re,f(e.payment?.currency_rate?(e.payment.currency_rate*1).toFixed(4):`-`),1)])])]),g(`div`,null,[t[13]||=g(`h3`,{class:`text-sm font-semibold text-gray-700 mb-2 print:text-black print:text-xs`},`Payment Amount`,-1),g(`div`,ie,[g(`div`,ae,[g(`span`,oe,`Received Amount (`+f(e.payment?.currency?.code)+`):`,1),g(`span`,se,f(a(e.payment?.amount,e.payment?.currency?.code)),1)]),r(``,!0)])])])])]),g(`div`,ce,[r(``,!0),g(`div`,null,[t[21]||=g(`h3`,{class:`text-lg font-bold text-gray-900 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Approval Details `,-1),g(`div`,le,[g(`div`,ue,[t[18]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Approved By:`,-1),g(`span`,de,f(e.payment?.approved_by_user?.name||`-`),1)]),e.payment?.approved_at?(l(),i(`div`,fe,[t[19]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Approval Date:`,-1),g(`span`,pe,f(d(_)(e.payment.approved_at)),1)])):r(``,!0),e.payment?.approved_by_user?.email?(l(),i(`div`,me,[t[20]||=g(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Email:`,-1),g(`span`,he,f(e.payment.approved_by_user.email),1)])):r(``,!0)])])]),e.payment?.note||e.payment?.approve_note?(l(),i(`div`,ge,[t[24]||=g(`h3`,{class:`text-lg font-bold text-gray-900 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Notes `,-1),g(`div`,_e,[e.payment?.note?(l(),i(`div`,ve,[t[22]||=g(`p`,{class:`text-xs font-semibold text-gray-600 mb-1 print:text-black`},`Payment Notes:`,-1),g(`div`,ye,f(e.payment.note),1)])):r(``,!0),e.payment?.approve_note?(l(),i(`div`,be,[t[23]||=g(`p`,{class:`text-xs font-semibold text-gray-600 mb-1 print:text-black`},`Approval Notes:`,-1),g(`div`,xe,f(e.payment.approve_note),1)])):r(``,!0)])])):r(``,!0),g(`div`,Se,[t[26]||=g(`div`,{class:`flex-1 text-center`},[g(`p`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Received By`),g(`div`,{class:`border-b-2 border-gray-400 print:border-black mt-12 print:mt-8 mx-8`}),g(`p`,{class:`text-xs text-gray-500 mt-2 print:text-black print:mt-1`},`Signature & Date`)],-1),r(``,!0)])]),g(`section`,Ce,[g(`footer`,we,[g(`div`,Te,[g(`div`,Ee,[d(n).company.address?(l(),i(`p`,De,f(d(n).company.address),1)):r(``,!0),d(n).company.phone?(l(),i(`p`,Oe,`Tel: `+f(d(n).company.phone),1)):r(``,!0),d(n).company.email?(l(),i(`p`,ke,`Email: `+f(d(n).company.email),1)):r(``,!0),d(n).company.website?(l(),i(`p`,Ae,f(d(n).company.website),1)):r(``,!0)])])])])]))}}),Me=n(je,[[`__scopeId`,`data-v-f44d75bb`]]);const Ne={class:`min-h-screen bg-gray-50 print:bg-white`},Pe={class:`bg-white shadow-sm border-b print:hidden`},$={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`},Fe={class:`flex items-center justify-between h-16`},Ie={class:`flex items-center space-x-4`},Le={class:`text-sm text-gray-500`},Re={class:`flex items-center space-x-3`},ze={key:0,class:`flex items-center justify-center min-h-screen`},Be={class:`text-center`},Ve={key:1,class:`py-8 print:py-0`},He={class:`max-w-6xl mx-auto print:max-w-none`};var Ue=s({__name:`PreviewPage`,setup(n){let r=m(),s=p(),_=ee(),v=y(),b=h(()=>parseInt(s.params.id)),x=u(!0),S=u(null),C=u(null),w=()=>{r.back()},T=async()=>{if(C.value)try{await C.value.printReceipt()}catch(e){console.error(`Failed to print receipt:`,e),_.error(`Failed to print receipt`)}},E=async()=>{try{let e=await v.fetchPayment(b.value);S.value=e}catch(e){_.error(`Failed to load payment details`,{title:`Error`}),console.error(`Error fetching payment:`,e),r.push({name:`customer.payments.index`})}};return c(async()=>{try{x.value=!0,await E()}catch(e){console.error(`Error initializing payment preview:`,e)}finally{x.value=!1}}),(n,r)=>(l(),i(`div`,Ne,[g(`div`,Pe,[g(`div`,$,[g(`div`,Fe,[g(`div`,Ie,[g(`button`,{onClick:w,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 transition-colors`},[o(d(t),{class:`w-5 h-5`})]),g(`div`,null,[r[0]||=g(`h1`,{class:`text-lg font-semibold text-gray-900`},`Payment Receipt Preview`,-1),g(`p`,Le,f(S.value?.prefix)+`-`+f(S.value?.code),1)])]),g(`div`,Re,[g(`button`,{onClick:T,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},[o(d(te),{class:`w-4 h-4 mr-2`}),r[1]||=a(` Print Receipt `,-1)])])])])]),x.value?(l(),i(`div`,ze,[g(`div`,Be,[o(d(e),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),r[2]||=g(`p`,{class:`mt-2 text-gray-600`},`Loading payment receipt...`,-1)])])):(l(),i(`div`,Ve,[g(`div`,He,[o(Me,{ref_key:`paymentReceiptRef`,ref:C,payment:S.value},null,8,[`payment`])])]))]))}}),We=Ue;export{We as default};