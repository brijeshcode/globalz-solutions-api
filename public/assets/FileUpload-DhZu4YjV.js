import{a$ as e,aN as t,aP as n,aQ as r,aS as i,aT as a,aV as o,aX as s,a_ as c,b0 as l,b5 as u,b9 as d,bb as f,bd as p}from"./index-CcY0y1vK.js";const m={class:`w-full`},h={class:`space-y-3`},g={for:`file-upload`,class:`cursor-pointer`},_=[`multiple`,`accept`,`disabled`],v={class:`text-xs text-gray-500 dark:text-gray-400`},y={key:0},ee={key:0,class:`mt-2 text-sm text-red-600 dark:text-red-400`},b={key:1,class:`mt-4 space-y-4`},x={class:`text-sm font-medium text-gray-700 dark:text-gray-300`},S={key:0,class:`space-y-3`},C={class:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4`},te={class:`aspect-square bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden`},w=[`src`,`alt`,`onLoad`],T={class:`absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-end`},E={class:`p-2 text-white opacity-0 group-hover:opacity-100 transition-opacity`},D={class:`text-xs font-medium truncate`},O={class:`text-xs`},k=[`onClick`,`disabled`],A={key:1,class:`space-y-3`},j={key:0,class:`text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide`},M={class:`space-y-2`},N={class:`flex items-center space-x-3`},P={class:`text-sm font-medium text-gray-900 dark:text-gray-100`},F={class:`text-xs text-gray-500 dark:text-gray-400`},I=[`onClick`,`disabled`];var L=s({__name:`FileUpload`,props:{multiple:{type:Boolean,default:!0},accept:{default:`.pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt,.csv,.zip`},maxSize:{default:20*1024*1024},maxFiles:{default:10},disabled:{type:Boolean,default:!1},modelValue:{default:()=>[]}},emits:[`update:modelValue`,`change`,`error`],setup(s,{expose:L,emit:R}){let z=s,B=R,V=d(),H=d([]),U=d(``),W=d(new Map),G=n(()=>z.accept.includes(`.pdf`)?`PDF, DOC, XLS, images`:`All supported files`),K=n(()=>{let e=z.maxSize/(1024*1024);return`${e}MB`}),q=n(()=>H.value.map((e,t)=>({file:e,originalIndex:t})).filter(({file:e})=>Q(e))),J=n(()=>H.value.map((e,t)=>({file:e,originalIndex:t})).filter(({file:e})=>!Q(e))),Y=e=>{let t=e.target;if(!t.files)return;let n=Array.from(t.files);U.value=``;let r=H.value.length+n.length;if(r>z.maxFiles){U.value=`Maximum ${z.maxFiles} files allowed`;return}for(let e of n){if(e.size>z.maxSize){U.value=`File "${e.name}" is too large. Maximum size is ${K.value}`;return}if(z.accept&&!Z(e)){U.value=`File "${e.name}" type is not allowed`;return}}H.value.push(...n),V.value&&(V.value.value=``),B(`update:modelValue`,H.value),B(`change`,H.value)},X=e=>{let t=H.value[e];if(Q(t)){let e=W.value.get(t);e&&(URL.revokeObjectURL(e),W.value.delete(t))}H.value.splice(e,1),U.value=``,B(`update:modelValue`,H.value),B(`change`,H.value)},Z=e=>{if(!z.accept)return!0;let t=z.accept.split(`,`).map(e=>e.trim()),n=e.name.toLowerCase();return t.some(e=>{let t=e.replace(`.`,``);return n.endsWith(`.${t}`)})},Q=e=>e.type.startsWith(`image/`),ne=e=>{if(!W.value.has(e)){let t=URL.createObjectURL(e);W.value.set(e,t)}return W.value.get(e)||``},$=e=>{if(e===0)return`0 Bytes`;let t=1024,n=[`Bytes`,`KB`,`MB`,`GB`],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/t**+r).toFixed(2))+` `+n[r]},re=()=>{W.value.forEach(e=>{URL.revokeObjectURL(e)}),W.value.clear(),H.value=[],U.value=``,V.value&&(V.value.value=``),B(`update:modelValue`,H.value),B(`change`,H.value)};return u(()=>z.modelValue,e=>{H.value=e||[]},{immediate:!0}),c(()=>{W.value.forEach(e=>{URL.revokeObjectURL(e)}),W.value.clear()}),L({clearFiles:re}),(n,s)=>(e(),a(`div`,m,[r(`div`,{class:f([`border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-gray-400 dark:hover:border-gray-500 transition-colors`,{"border-red-300 dark:border-red-600":U.value}])},[r(`div`,h,[s[2]||=r(`svg`,{class:`mx-auto h-12 w-12 text-gray-400`,stroke:`currentColor`,fill:`none`,viewBox:`0 0 48 48`},[r(`path`,{d:`M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`})],-1),r(`div`,null,[r(`label`,g,[s[0]||=r(`span`,{class:`text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300`},` Click to upload files `,-1),r(`input`,{id:`file-upload`,ref_key:`fileInput`,ref:V,type:`file`,class:`sr-only`,multiple:n.multiple,accept:n.accept,disabled:n.disabled,onChange:Y},null,40,_)]),s[1]||=r(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},` or drag and drop`,-1)]),r(`p`,v,[o(p(G.value)+` up to `+p(K.value)+` each `,1),n.maxFiles>1?(e(),a(`span`,y,`(max `+p(n.maxFiles)+` files)`,1)):i(``,!0)])])],2),U.value?(e(),a(`p`,ee,p(U.value),1)):i(``,!0),H.value.length>0?(e(),a(`div`,b,[r(`h4`,x,` Selected Files (`+p(H.value.length)+p(n.maxFiles>1?`/${n.maxFiles}`:``)+`) `,1),q.value.length>0?(e(),a(`div`,S,[s[4]||=r(`h5`,{class:`text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide`},`Images`,-1),r(`div`,C,[(e(!0),a(t,null,l(q.value,(t,i)=>(e(),a(`div`,{key:`image-${i}`,class:`relative group`},[r(`div`,te,[r(`img`,{src:ne(t.file),alt:t.file.name,class:`w-full h-full object-cover`,onLoad:()=>(t.file,void 0)},null,40,w)]),r(`div`,T,[r(`div`,E,[r(`p`,D,p(t.file.name),1),r(`p`,O,p($(t.file.size)),1)])]),r(`button`,{type:`button`,onClick:e=>X(t.originalIndex),disabled:n.disabled,class:`absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed`,title:`Remove image`},s[3]||=[r(`svg`,{class:`h-3 w-3`,fill:`currentColor`,viewBox:`0 0 20 20`},[r(`path`,{"fill-rule":`evenodd`,d:`M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z`,"clip-rule":`evenodd`})],-1)],8,k)]))),128))])])):i(``,!0),J.value.length>0?(e(),a(`div`,A,[q.value.length>0?(e(),a(`h5`,j,`Other Files`)):i(``,!0),r(`div`,M,[(e(!0),a(t,null,l(J.value,(t,i)=>(e(),a(`div`,{key:`file-${i}`,class:`flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md`},[r(`div`,N,[s[5]||=r(`svg`,{class:`h-5 w-5 text-gray-400`,fill:`currentColor`,viewBox:`0 0 20 20`},[r(`path`,{"fill-rule":`evenodd`,d:`M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z`,"clip-rule":`evenodd`})],-1),r(`div`,null,[r(`p`,P,p(t.file.name),1),r(`p`,F,p($(t.file.size)),1)])]),r(`button`,{type:`button`,onClick:e=>X(t.originalIndex),disabled:n.disabled,class:`text-red-500 hover:text-red-700 dark:hover:text-red-400 disabled:opacity-50 disabled:cursor-not-allowed`,title:`Remove file`},s[6]||=[r(`svg`,{class:`h-4 w-4`,fill:`currentColor`,viewBox:`0 0 20 20`},[r(`path`,{"fill-rule":`evenodd`,d:`M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z`,"clip-rule":`evenodd`})],-1)],8,I)]))),128))])])):i(``,!0)])):i(``,!0)]))}}),R=L;export{R as b};