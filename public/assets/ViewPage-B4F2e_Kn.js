import{E as e,K as t,Q as ee,a$ as n,a6 as r,aC as te,aG as i,aH as ne,aV as a,aW as o,aX as s,aY as c,a_ as l,ag as u,ao as re,b0 as ie,b3 as ae,b5 as d,bc as f,bf as p,bg as m,bj as h,p as oe}from"./index-Dtcwuetq.js";import{b as se}from"./useAuth-D6NhwC1E.js";import"./GlobalConfig-wPgXFcZ5.js";import{c as g}from"./common-CZbH6H1Z.js";import"./tableUtils-dXs1kjAL.js";import"./Modal-dX9S2DoC.js";import{b as _,d as v}from"./currencyUtil-DOYhMuUb.js";import{b as y}from"./DataItems-Bpoig8b8.js";import{b as ce}from"./customerPaymentOrdersStore-DkG83Mpj.js";import"./usersStore-DCM-_pJ2.js";import{b}from"./CustomerPaymentApprove-Dl1US9Om.js";const x={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},S={class:``},C={class:`mb-8`},w={class:`flex items-center justify-between`},T={class:`flex items-center space-x-4`},E={class:`text-sm text-gray-600 dark:text-gray-400`},D={key:0,class:`flex space-x-3`},O={key:0,class:`flex items-center justify-center py-12`},k={key:1,class:`space-y-6`},A={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-6`},j={class:`flex items-center justify-between`},M={class:`flex items-center space-x-4`},N={class:`flex-shrink-0`},P={class:`h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},F={class:`text-lg font-medium text-gray-900 dark:text-white`},I={class:`text-sm text-gray-500 dark:text-gray-400`},L={class:`text-right`},R={class:`mb-2`},z={key:0,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`},B={key:1,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`},V={class:`text-2xl font-bold text-gray-900 dark:text-white`},H={key:0,class:`text-sm text-gray-500 dark:text-gray-400`},U={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},W={class:`px-6 py-4`},G={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},le={class:`text-sm text-gray-900 dark:text-white`},ue={key:0,class:`text-gray-500 dark:text-gray-400`},de={class:`text-sm text-gray-900 dark:text-white`},fe={key:0,class:`text-gray-500 dark:text-gray-400`},pe={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},me={class:`px-6 py-4`},he={class:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6`},ge={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},_e={class:`px-6 py-4`},ve={class:`text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-md`},ye={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},be={class:`px-6 py-4`},xe={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Se={class:`text-sm text-gray-900 dark:text-white`},Ce={class:`text-xs text-gray-500 dark:text-gray-400`},we={class:`text-sm text-gray-900 dark:text-white`},Te={class:`text-xs text-gray-500 dark:text-gray-400`},Ee={key:2,class:`text-center py-12`};var K=ie({__name:`ViewPage`,setup(ie){let K=ne(),q=i(),J=te(),De=ce(),{isAdmin:Oe,isSuperAdmin:ke}=se(),Y=p(!1),X=p(null),Z=p(!1),Q=()=>{K.push({name:`customer.payment-orders.index`})},Ae=()=>{X.value&&K.push({name:`customer.payment-orders.edit`,params:{id:X.value.id}})},je=()=>{X.value&&(Z.value=!0)},Me=async e=>{J.success(`Payment order approved successfully`),await $(),Z.value=!1},$=async()=>{let e=Number(q.params.id);if(!e){J.error(`Invalid payment order ID`),Q();return}Y.value=!0;try{let t=await De.fetchPaymentOrder(e);X.value=t}catch{J.error(`Failed to load payment order`),X.value=null}finally{Y.value=!1}};return ae(()=>{$()}),(te,i)=>(d(),c(`div`,x,[a(`div`,S,[a(`div`,C,[a(`div`,w,[a(`div`,T,[a(`button`,{onClick:Q,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[n(m(re),{class:`w-5 h-5`})]),a(`div`,null,[i[1]||=a(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Payment Order Details `,-1),a(`p`,E,h(X.value?`${X.value.prefix}-${X.value.code}`:`Loading...`),1)])]),X.value&&!Y.value?(d(),c(`div`,D,[!X.value.approved_at&&(m(Oe)||m(ke))?(d(),c(`button`,{key:0,onClick:je,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[n(m(u),{class:`h-4 w-4 mr-2`}),i[2]||=l(` Approve Payment `,-1)])):s(``,!0),X.value.approved_at?s(``,!0):(d(),c(`button`,{key:1,onClick:Ae,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[n(m(t),{class:`h-4 w-4 mr-2`}),i[3]||=l(` Edit Order `,-1)]))])):s(``,!0)])]),Y.value?(d(),c(`div`,O,[n(m(ee),{class:`h-8 w-8 animate-spin text-blue-600`}),i[4]||=a(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment order...`,-1)])):X.value?(d(),c(`div`,k,[a(`div`,A,[a(`div`,j,[a(`div`,M,[a(`div`,N,[a(`div`,P,[n(m(e),{class:`h-8 w-8 text-blue-600 dark:text-blue-400`})])]),a(`div`,null,[a(`h3`,F,h(X.value.prefix)+`-`+h(X.value.code),1),a(`p`,I,` Created `+h(m(g)(X.value.created_at)),1)])]),a(`div`,L,[a(`div`,R,[X.value.approved_at?(d(),c(`span`,z,[n(m(u),{class:`h-4 w-4 mr-1`}),i[5]||=l(` Approved `,-1)])):(d(),c(`span`,B,[n(m(r),{class:`h-4 w-4 mr-1`}),i[6]||=l(` Pending Approval `,-1)]))]),a(`div`,V,h(m(_)(X.value.amount_usd,!0)),1),m(v)(X.value.currency.code)?s(``,!0):(d(),c(`div`,H,` Local: `+h(m(_)(X.value.amount,!0,X.value.currency)),1))])])]),a(`div`,U,[i[7]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Basic Information`)],-1),a(`div`,W,[a(`div`,G,[n(y,{label:`Payment Date`,value:m(g)(X.value.date)},null,8,[`value`]),n(y,{label:`Prefix`,value:X.value.prefix},null,8,[`value`]),n(y,{label:`RCT Book Number`,value:X.value.rtc_book_number},null,8,[`value`]),n(y,{label:`Customer`},{default:f(()=>[a(`div`,le,[l(h(X.value.customer?.name||`-`)+` `,1),X.value.customer?.code?(d(),c(`span`,ue,` (`+h(X.value.customer.code)+`) `,1)):s(``,!0)])]),_:1}),n(y,{label:`Currency`},{default:f(()=>[a(`div`,de,[l(h(X.value.currency?.name||`-`)+` `,1),X.value.currency?.code?(d(),c(`span`,fe,` (`+h(X.value.currency.code)+`) `,1)):s(``,!0)])]),_:1})])])]),m(v)(X.value.currency.code)?s(``,!0):(d(),c(`div`,pe,[i[8]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Financial Details`)],-1),a(`div`,me,[a(`div`,he,[m(v)(X.value.currency.code)?s(``,!0):(d(),o(y,{key:0,label:`Currency Rate`,value:X.value.currency_rate*1},null,8,[`value`])),n(y,{label:`Amount`,value:m(_)(X.value.amount,!0,X.value.currency)},null,8,[`value`]),m(v)(X.value.currency.code)?s(``,!0):(d(),o(y,{key:1,label:`Amount USD`,value:m(_)(X.value.amount_usd,!0)},null,8,[`value`]))])])])),X.value.note?(d(),c(`div`,ge,[i[9]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Notes`)],-1),a(`div`,_e,[n(y,{label:`Note`},{default:f(()=>[a(`div`,ve,h(X.value.note),1)]),_:1})])])):s(``,!0),a(`div`,ye,[i[10]||=a(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[a(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Audit Information`)],-1),a(`div`,be,[a(`div`,xe,[n(y,{label:`Created By`},{default:f(()=>[a(`div`,Se,h(X.value.created_by_user?.name||`-`),1),a(`div`,Ce,h(m(g)(X.value.created_at)),1)]),_:1}),n(y,{label:`Last Updated By`},{default:f(()=>[a(`div`,we,h(X.value.updated_by_user?.name||`-`),1),a(`div`,Te,h(m(g)(X.value.updated_at)),1)]),_:1})])])])])):Y.value?s(``,!0):(d(),c(`div`,Ee,[n(m(oe),{class:`mx-auto h-12 w-12 text-red-400`}),i[11]||=a(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment order not found`,-1),i[12]||=a(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The payment order you're looking for doesn't exist or has been deleted. `,-1),a(`div`,{class:`mt-6`},[a(`button`,{onClick:Q,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payment Orders `)])]))]),n(b,{show:Z.value,"onUpdate:show":i[0]||=e=>Z.value=e,"payment-order":X.value,onApproved:Me},null,8,[`show`,`payment-order`])]))}}),q=K;export{q as default};