import{B as e,R as t,a1 as ee,aA as n,aB as r,aC as te,aE as i,aG as a,aH as ne,aQ as o,aR as s,aS as c,aU as l,ad as re,ah as ie,ai as ae,as as oe,av as u,ax as d,ay as f,l as se,n as ce,t as le,x as ue}from"./index-lk-38IH9.js";import{b as de}from"./useAuth-BfZcCkp_.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-jdfVzp2e.js";import{b as fe}from"./ConfirmationModal-DTodrQW0.js";import{b as p}from"./common-Cukj2-S-.js";import"./Modal-C4lYfk9n.js";import{b as pe}from"./salesOrderStore-FA0rzjgd.js";import{b as me}from"./SaleOrderApprove-BR2tmkfH.js";const he={class:`max-w-8xl mx-auto py-2`},m={class:``},h={class:`mb-8`},g={class:`flex items-center space-x-4 mb-2`},_={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},v={class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},y={class:`flex items-center justify-between`},b={class:`text-lg font-medium text-gray-900 dark:text-white`},x={class:`text-sm text-gray-500 dark:text-gray-400`},S={class:`flex space-x-3`},C={class:`px-6 py-8`},w={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},T={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6`},E={class:`mt-1 text-sm text-gray-900 dark:text-white`},D={class:`mt-1 text-sm text-gray-900 dark:text-white`},O={class:`mt-1 text-sm text-gray-900 dark:text-white`},k={class:`mt-1 text-sm text-gray-900 dark:text-white`},A={class:`mt-1 text-sm text-gray-900 dark:text-white`},j={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4`},M={class:`mt-1 text-sm text-gray-900 dark:text-white`},N={key:0},P={class:`mt-1`},F={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},I={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},L={class:`mt-1 text-sm text-gray-900 dark:text-white`},R={class:`mt-1 text-sm text-gray-900 dark:text-white`},ge={class:`mt-1 text-sm text-gray-900 dark:text-white`},_e={key:0},ve={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},ye={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},be={key:1,class:`overflow-x-auto`},xe={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},Se={class:`bg-gray-50 dark:bg-gray-700`},Ce={key:0,class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},we={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Te={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ee={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},De={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Oe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},ke={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ae={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},je={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Me={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},z={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ne={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Pe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Fe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ie={class:`bg-gray-50 dark:bg-gray-700`},Le={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Re={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},ze={key:0},Be={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Ve={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},He={key:0,class:`px-6 py-4`},Ue={class:`bg-green-50 dark:bg-green-900`},We={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},Ge={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},Ke={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},qe={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},Je={class:`bg-blue-50 dark:bg-blue-900 rounded-lg p-4`},Ye={class:`mt-1 text-lg font-medium text-blue-900 dark:text-blue-100`},Xe={class:`bg-blue-50 dark:bg-blue-900 rounded-lg p-4`},Ze={class:`mt-1 text-lg font-medium text-blue-900 dark:text-blue-100`},Qe={class:`mt-1 text-lg font-medium`},$e={key:0,class:`mb-6`},et={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},tt={class:`text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap`},nt={class:`pt-6 border-t border-gray-200 dark:border-gray-700`},rt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},it={class:`mt-1 text-sm text-gray-900 dark:text-white`},at={class:`mt-1 text-sm text-gray-900 dark:text-white`},ot={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},st={class:`px-6 py-8 text-center`};var B=te({__name:`ViewPage`,setup(te){let B=ae(),V=ie(),H=re(),U=pe(),{isSalesman:W,isAdmin:ct}=de(),G=parseInt(V.params.id),K=o(!0),q=o({}),J=o(!1),Y=o(!1),X=o(!1),lt=()=>{B.push({name:`sale-orders.index`})},ut=()=>{B.push({name:`sale-orders.edit`,params:{id:G.toString()}})},dt=()=>{H.info(`Print functionality coming soon`)},ft=()=>{Y.value=!0},pt=()=>{Y.value=!1,H.success(`Sale order approved successfully`),B.push({name:`sale-orders.index`})},mt=()=>{J.value=!0},ht=()=>{J.value=!1,X.value=!1},gt=async()=>{X.value=!0;try{await U.deleteSaleOrder(G),H.success(`Sale order deleted successfully`),B.push({name:`sale-orders.index`})}catch{H.error(`Failed to delete sale order`)}finally{X.value=!1}},_t=async()=>{try{K.value=!0,q.value=await U.fetchSaleOrder(G)}catch(e){console.error(`Error loading sale order:`,e),H.error(`Failed to load sale order details`),B.push({name:`sale-orders.index`})}finally{K.value=!1}},vt=e=>{if(!e)return`bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`;switch(e){case`Waiting`:return`bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`;case`Shipped`:return`bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`;case`Delivered`:return`bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`;default:return`bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`}},Z=e=>{let t=Number(e||0);return t>0?`text-green-600 dark:text-green-400 font-medium`:t<0?`text-red-600 dark:text-red-400 font-medium`:`text-gray-600 dark:text-gray-400`},yt=e=>{let t=Number(e||0);return t>0?`bg-green-50 dark:bg-green-900 text-green-600 dark:text-green-400`:t<0?`bg-red-50 dark:bg-red-900 text-red-600 dark:text-red-400`:`bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400`},Q=e=>e?parseFloat(Number(e).toFixed(2)).toString():`0`,bt=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`})},$=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})};return i(async()=>{await _t()}),(te,i)=>(a(),f(`div`,he,[u(`div`,m,[u(`div`,h,[u(`div`,g,[u(`button`,{onClick:lt,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[r(s(ee),{class:`w-5 h-5`})]),i[2]||=u(`div`,null,[u(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Sale Order Details `),u(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` View sale order information `)],-1)])]),K.value?(a(),f(`div`,ot,[u(`div`,st,[r(s(e),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),i[46]||=u(`p`,{class:`mt-2 text-gray-600 dark:text-gray-400`},`Loading sale order details...`,-1)])])):(a(),f(`div`,_,[u(`div`,v,[u(`div`,y,[u(`div`,null,[u(`h3`,b,l(q.value.prefix)+`-`+l(q.value.code),1),u(`p`,x,` Sale Order ID: `+l(q.value.id),1),i[3]||=u(`span`,{class:`inline-flex mt-2 items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`},` Pending Approval `,-1)]),u(`div`,S,[s(ct)?(a(),f(`button`,{key:0,onClick:ft,class:`inline-flex items-center px-3 py-2 border border-green-300 dark:border-green-600 text-sm font-medium rounded-md text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 hover:bg-green-50 dark:hover:bg-green-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200`},[r(s(t),{class:`w-4 h-4 mr-2`}),i[4]||=n(` Approve `,-1)])):d(``,!0),u(`button`,{onClick:dt,class:`inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[r(s(le),{class:`w-4 h-4 mr-2`}),i[5]||=n(` Print `,-1)]),u(`button`,{onClick:ut,class:`inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[r(s(ue),{class:`w-4 h-4 mr-2`}),i[6]||=n(` Edit `,-1)]),u(`button`,{onClick:mt,class:`inline-flex items-center px-3 py-2 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200`},[r(s(se),{class:`w-4 h-4 mr-2`}),i[7]||=n(` Delete `,-1)])])])]),u(`div`,C,[u(`div`,w,[i[15]||=u(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),u(`div`,T,[u(`div`,null,[i[8]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Order Date`,-1),u(`dd`,E,l(bt(q.value.date)),1)]),u(`div`,null,[i[9]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),u(`dd`,D,l(q.value.customer?.name),1)]),u(`div`,null,[i[10]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),u(`dd`,O,l(q.value.salesperson?.name||`-`),1)]),u(`div`,null,[i[11]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),u(`dd`,k,l(q.value.warehouse?.name),1)]),u(`div`,null,[i[12]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),u(`dd`,A,l(q.value.currency?.code)+` - `+l(q.value.currency?.name),1)])]),u(`div`,j,[u(`div`,null,[i[13]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency Rate`,-1),u(`dd`,M,l(Q(q.value.currency_rate)),1)]),q.value.status?(a(),f(`div`,N,[i[14]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Status`,-1),u(`dd`,P,[u(`span`,{class:c([vt(q.value.status),`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium`])},l(q.value.status),3)])])):d(``,!0)])]),u(`div`,F,[i[20]||=u(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Financial Summary `,-1),u(`div`,I,[u(`div`,null,[i[16]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Sub Total`,-1),u(`dd`,L,l(s(p)(q.value.sub_total)),1)]),u(`div`,null,[i[17]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Sub Total (USD)`,-1),u(`dd`,R,l(s(p)(q.value.sub_total_usd)),1)]),u(`div`,null,[i[18]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Discount Amount`,-1),u(`dd`,ge,l(s(p)(q.value.discount_amount)),1)]),s(W)?d(``,!0):(a(),f(`div`,_e,[i[19]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Profit`,-1),u(`dd`,{class:c([`mt-1 text-sm`,Z(q.value.total_profit)])},l(s(p)(q.value.total_profit)),3)]))])]),u(`div`,ve,[i[38]||=u(`div`,{class:`flex items-center justify-between mb-4`},[u(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Sale Order Items `)],-1),q.value.items&&q.value.items.length===0?(a(),f(`div`,ye,[r(s(ce),{class:`mx-auto h-12 w-12 text-gray-400`}),i[21]||=u(`h5`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items found`,-1),i[22]||=u(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`This sale order has no items.`,-1)])):(a(),f(`div`,be,[u(`table`,xe,[u(`thead`,Se,[u(`tr`,null,[i[23]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`#`,-1),i[24]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Code`,-1),i[25]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Item`,-1),i[26]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Unit`,-1),i[27]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[u(`abbr`,{title:`Total Quantity`},`QTY`)],-1),i[28]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Sale Price`,-1),i[29]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Cost Price`,-1),i[30]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[u(`abbr`,{title:`Discount Percentage`},`Dis. %`)],-1),i[31]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[u(`abbr`,{title:`Tax Percentage`},`Tax %`)],-1),i[32]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[u(`abbr`,{title:`Tax-inclusive Price`},`TTC`)],-1),i[33]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Total`,-1),i[34]||=u(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`USD`,-1),s(W)?d(``,!0):(a(),f(`th`,Ce,`Profit`))])]),u(`tbody`,we,[(a(!0),f(oe,null,ne(q.value.items,(e,t)=>(a(),f(`tr`,{key:t,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[u(`td`,Te,l(t+1),1),u(`td`,Ee,l(e.item_code),1),u(`td`,De,l(e.item?.description),1),u(`td`,Oe,l(e.item?.item_unit?.name||`-`),1),u(`td`,ke,l(Q(e.quantity)),1),u(`td`,Ae,l(s(p)(e.price)),1),u(`td`,je,l(s(p)(e.cost_price)),1),u(`td`,Me,l(Q(e.discount_percent))+`%`,1),u(`td`,z,l(Q(e.tax_percent))+`%`,1),u(`td`,Ne,l(Q(e.ttc_price)),1),u(`td`,Pe,l(s(p)(e.total_price)),1),u(`td`,Fe,l(s(p)(e.total_price_usd)),1),s(W)?d(``,!0):(a(),f(`td`,{key:0,class:c([`px-6 py-4 whitespace-nowrap text-sm`,Z(e.unit_profit)])},l(s(p)(e.unit_profit)),3))]))),128))]),u(`tfoot`,Ie,[u(`tr`,null,[i[35]||=u(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Sub Total:`,-1),u(`td`,Le,l(s(p)(q.value.sub_total)),1),u(`td`,Re,l(s(p)(q.value.sub_total_usd)),1),s(W)?d(``,!0):(a(),f(`td`,{key:0,class:c([`px-6 py-4 text-sm font-medium`,Z(q.value.total_profit)])},l(s(p)(q.value.total_profit)),3))]),q.value.discount_amount&&Number(q.value.discount_amount)>0?(a(),f(`tr`,ze,[i[36]||=u(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Additional Discount:`,-1),u(`td`,Be,`-`+l(s(p)(q.value.discount_amount)),1),u(`td`,Ve,`-`+l(s(p)(q.value.discount_amount_usd)),1),s(W)?d(``,!0):(a(),f(`td`,He))])):d(``,!0),u(`tr`,Ue,[i[37]||=u(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-bold text-gray-900 dark:text-white`},`Final Total:`,-1),u(`td`,We,l(s(p)(q.value.total)),1),u(`td`,Ge,l(s(p)(q.value.total_usd)),1),s(W)?d(``,!0):(a(),f(`td`,{key:0,class:c([`px-6 py-4 text-sm font-bold`,Z(q.value.total_profit)])},l(s(p)(q.value.total_profit)),3))])])])]))]),u(`div`,Ke,[i[42]||=u(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Final Totals `,-1),u(`div`,qe,[u(`div`,Je,[i[39]||=u(`dt`,{class:`text-sm font-medium text-blue-600 dark:text-blue-400`},`Total Amount`,-1),u(`dd`,Ye,l(s(p)(q.value.total)),1)]),u(`div`,Xe,[i[40]||=u(`dt`,{class:`text-sm font-medium text-blue-600 dark:text-blue-400`},`Total Amount (USD)`,-1),u(`dd`,Ze,l(s(p)(q.value.total_usd)),1)]),s(W)?d(``,!0):(a(),f(`div`,{key:0,class:c([`rounded-lg p-4`,yt(q.value.total_profit)])},[i[41]||=u(`dt`,{class:`text-sm font-medium`},`Total Profit (USD)`,-1),u(`dd`,Qe,l(s(p)(q.value.total_profit)),1)],2))])]),q.value.note?(a(),f(`div`,$e,[i[43]||=u(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Notes `,-1),u(`div`,et,[u(`p`,tt,l(q.value.note),1)])])):d(``,!0),u(`div`,nt,[u(`div`,rt,[u(`div`,null,[i[44]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created At`,-1),u(`dd`,it,l($(q.value.created_at)),1)]),u(`div`,null,[i[45]||=u(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated`,-1),u(`dd`,at,l($(q.value.updated_at)),1)])])])])]))]),r(fe,{show:J.value,"onUpdate:show":i[0]||=e=>J.value=e,type:`delete`,title:`Delete Sale Order ${q.value.prefix}-${q.value.code}`,message:`Are you sure you want to delete sale order '${q.value.prefix}-${q.value.code}'? This action can be undone by restoring from trash.`,"confirm-text":`Delete Sale Order`,"loading-text":`Deleting...`,loading:X.value,onConfirm:gt,onCancel:ht},null,8,[`show`,`title`,`message`,`loading`]),r(me,{show:Y.value,"onUpdate:show":i[1]||=e=>Y.value=e,"sale-order":q.value,onApproved:pt},null,8,[`show`,`sale-order`])]))}}),V=B;export{V as default};