import{A as e,B as t,C as n,D as r,J as i,M as a,O as o,Q as s,S as c,T as l,V as u,W as d,Y as f,Z as p,_ as m,a1 as h,a3 as g,a6 as _,aa as v,ac as y,ad as b,ae as x,ag as S,p as C,w as ee,z as w}from"./index-B-rMFD4M.js";var T=class{baseUrl=`/setups/items/types`;async getItemTypes(t){try{let n=this.buildQueryParams(t),r=await e(`${this.baseUrl}?${n}`,{loadingMessage:`Loading item types...`,showLoading:!0});return{data:r.data.data,pagination:r.data.pagination}}catch(e){throw console.error(`Error fetching item types:`,e),e}}async getItemType(t){try{let n=await e(`${this.baseUrl}/${t}`,{loadingMessage:`Loading item type...`});return n.data.data}catch(e){throw console.error(`Error fetching item type:`,e),e}}async createItemType(e){try{let t=await n(this.baseUrl,e,{loadingMessage:`Creating item type...`,showSuccessNotification:!0,successMessage:`Item type created successfully`});return t.data.data}catch(e){throw console.error(`Error creating item type:`,e),e}}async updateItemType(e,t){try{let n=await r(`${this.baseUrl}/${e}`,t,{loadingMessage:`Updating item type...`,showSuccessNotification:!0,successMessage:`Item type updated successfully`});return n.data.data}catch(e){throw console.error(`Error updating item type:`,e),e}}async deleteItemType(e){try{await w(`${this.baseUrl}/${e}`,{loadingMessage:`Deleting item type...`,showSuccessNotification:!0,successMessage:`Item type deleted successfully`})}catch(e){throw console.error(`Error deleting item type:`,e),e}}async getTrashedItemTypes(t){try{let n=this.buildQueryParams(t),r=await e(`${this.baseUrl}/trashed?${n}`,{loadingMessage:`Loading trashed item types...`});return{data:r.data.data,pagination:r.data.pagination}}catch(e){throw console.error(`Error fetching trashed item types:`,e),e}}async restoreItemType(e){try{let n=await t(`${this.baseUrl}/${e}/restore`,{},{loadingMessage:`Restoring item type...`,showSuccessNotification:!0,successMessage:`Item type restored successfully`});return n.data.data}catch(e){throw console.error(`Error restoring item type:`,e),e}}async forceDeleteItemType(e){try{await w(`${this.baseUrl}/${e}/force-delete`,{loadingMessage:`Permanently deleting item type...`,showSuccessNotification:!0,successMessage:`Item type permanently deleted`})}catch(e){throw console.error(`Error permanently deleting item type:`,e),e}}async getItemTypesForSelect(){try{let t=await e(`${this.baseUrl}`,{showLoading:!1}),n=t.data.data;return n.filter(e=>e.is_active).map(e=>({value:e.id,label:e.name,disabled:!1}))}catch(e){throw console.error(`Error fetching item types for select:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const E=new T,D=i(`itemTypes`,()=>{let e=y([]),t=y(null),n=y([]),r=y({current_page:1,per_page:20,total:0,last_page:1,from:null,to:null,has_more_pages:!1,next_page_url:null,prev_page_url:null,first_page_url:``,last_page_url:``}),i=y(!1),a=y({}),o=c(()=>e.value.filter(e=>e.is_active)),s=c(()=>e.value.filter(e=>!e.is_active)),l=c(()=>o.value.map(e=>({value:e.id,label:e.name,disabled:!1}))),u=async t=>{try{i.value=!0,t&&(a.value={...a.value,...t});let n=await E.getItemTypes(a.value);e.value=n.data,r.value=n.pagination}catch(e){throw console.error(`Error fetching item types:`,e),e}finally{i.value=!1}},d=async e=>{try{let n=await E.getItemType(e);return t.value=n,n}catch(e){throw console.error(`Error fetching item type:`,e),e}},f=async t=>{try{let n=await E.createItemType(t);return e.value.unshift(n),r.value.total+=1,n}catch(e){throw console.error(`Error creating item type:`,e),e}},p=async(n,r)=>{try{let i=await E.updateItemType(n,r),a=e.value.findIndex(e=>e.id===n);return a!==-1&&(e.value[a]=i),t.value?.id===n&&(t.value=i),i}catch(e){throw console.error(`Error updating item type:`,e),e}},m=async n=>{try{await E.deleteItemType(n);let i=e.value.findIndex(e=>e.id===n);i!==-1&&e.value.splice(i,1),--r.value.total,t.value?.id===n&&(t.value=null)}catch(e){throw console.error(`Error deleting item type:`,e),e}},h=async e=>{try{i.value=!0;let t=e||{},r=await E.getTrashedItemTypes(t);n.value=r.data}catch(e){throw console.error(`Error fetching trashed item types:`,e),e}finally{i.value=!1}},g=async t=>{try{let i=await E.restoreItemType(t),a=n.value.findIndex(e=>e.id===t);return a!==-1&&n.value.splice(a,1),e.value.unshift(i),r.value.total+=1,i}catch(e){throw console.error(`Error restoring item type:`,e),e}},_=async e=>{try{await E.forceDeleteItemType(e);let t=n.value.findIndex(t=>t.id===e);t!==-1&&n.value.splice(t,1)}catch(e){throw console.error(`Error permanently deleting item type:`,e),e}},v=e=>{a.value={...a.value,...e}},b=()=>{a.value={}},x=()=>{t.value=null},S=()=>{e.value=[],t.value=null,n.value=[],r.value={current_page:1,per_page:20,total:0,last_page:1,from:null,to:null,has_more_pages:!1,next_page_url:null,prev_page_url:null,first_page_url:``,last_page_url:``},a.value={},i.value=!1},C=async()=>{try{return await E.getItemTypesForSelect()}catch(e){return console.error(`Error fetching item types for select:`,e),[]}};return{itemTypes:e,currentItemType:t,trashedItemTypes:n,pagination:r,loading:i,filters:a,activeItemTypes:o,inactiveItemTypes:s,itemTypesForSelect:l,fetchItemTypes:u,fetchItemType:d,createItemType:f,updateItemType:p,deleteItemType:m,fetchTrashedItemTypes:h,restoreItemType:g,forceDeleteItemType:_,updateFilters:v,clearFilters:b,clearCurrentItemType:x,reset:S,fetchItemTypesForSelect:C}});function O(){let e=y({}),t=c(()=>Object.keys(e.value).length>0),n=t=>e.value[t]?.[0],r=n=>{let r={};return!n.name||n.name.trim().length===0?r.name=[`Name is required`]:n.name.trim().length>255&&(r.name=[`Name must not exceed 255 characters`]),n.description&&n.description.length>1e3&&(r.description=[`Description must not exceed 1000 characters`]),e.value=r,!t.value},i=n=>{let r={};return n.name!==void 0&&(!n.name||n.name.trim().length===0?r.name=[`Name is required`]:n.name.trim().length>255&&(r.name=[`Name must not exceed 255 characters`])),n.description!==void 0&&n.description&&n.description.length>1e3&&(r.description=[`Description must not exceed 1000 characters`]),e.value=r,!t.value},a=()=>{e.value={}},o=t=>{e.value[t]&&delete e.value[t]},s=t=>{e.value=t};return{errors:e,hasErrors:t,getFieldError:n,validateCreateRequest:r,validateUpdateRequest:i,clearErrors:a,clearFieldError:o,setServerErrors:s}}const k={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},A={class:`max-w-2xl mx-auto`},te={class:`mb-8`},ne={class:`flex items-center space-x-4 mb-2`},j={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},M={class:`px-6 py-8`},N={key:0,class:`mt-1 text-xs text-gray-500`},P=[`disabled`],F={class:`flex justify-between items-center mt-1`},I={key:0,class:`text-sm text-red-600 dark:text-red-400`},L={class:`text-xs text-gray-500 ml-auto`},R={class:`flex items-start`},z={class:`flex items-center h-5`},B=[`disabled`],V={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},H=[`disabled`],U=[`disabled`],W={key:0,class:`flex items-center justify-center`},G={key:1},K={class:`mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4`},q={class:`flex`},J={class:`flex-shrink-0`};var Y=m({__name:`Create`,emits:[`back`,`success`,`cancel`],setup(e,{emit:t}){let n=t,r=D(),{errors:i,hasErrors:m,getFieldError:w,validateCreateRequest:T,clearFieldError:E,setServerErrors:Y,clearErrors:X}=O(),Z=y(!1),Q=y({name:``,description:``,is_active:!0}),re=c(()=>{let e=[`ring-gray-300 dark:ring-gray-600`,`focus:ring-indigo-600 dark:focus:ring-indigo-400`];return w(`description`)?[`ring-red-300 dark:ring-red-500`,`focus:ring-red-500 dark:focus:ring-red-400`].join(` `):Z.value?[...e,`disabled:cursor-not-allowed`,`disabled:bg-gray-50 dark:disabled:bg-gray-800`,`disabled:text-gray-500 dark:disabled:text-gray-400`].join(` `):e.join(` `)}),ie=c(()=>Q.value.name.trim().length>0&&Q.value.name.length<=255&&(Q.value.description?.length||0)<=500),$=()=>{Q.value={name:``,description:``,is_active:!0},X()},ae=async()=>{if(X(),T(Q.value))try{Z.value=!0,await r.createItemType(Q.value),$(),n(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&Y(e.response.data.errors)}finally{Z.value=!1}},oe=()=>{$(),n(`cancel`)},se=()=>{n(`back`)};return h(()=>{$()}),(e,t)=>{let n=_(`Input`);return g(),d(`div`,k,[l(`div`,A,[l(`div`,te,[l(`div`,ne,[l(`button`,{onClick:se,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[p(b(ee),{class:`w-5 h-5`})]),t[5]||=l(`div`,null,[l(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Item Type `),l(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Add a new item type classification `)],-1)])]),l(`div`,j,[l(`div`,M,[l(`form`,{onSubmit:s(ae,[`prevent`]),class:`space-y-6`},[l(`div`,null,[p(n,{type:`text`,maxlength:255,disabled:Z.value,onBlur:t[0]||=()=>b(E)(`name`),modelValue:Q.value.name,"onUpdate:modelValue":t[1]||=e=>Q.value.name=e,placeholder:`Enter item type name`,error:b(w)(`name`),required:``,label:`Name`},null,8,[`disabled`,`modelValue`,`error`]),Q.value.name.length>0?(g(),d(`p`,N,S(Q.value.name.length)+`/255 characters `,1)):u(``,!0)]),l(`div`,null,[t[6]||=l(`label`,{for:`description`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Description `,-1),v(l(`textarea`,{id:`description`,"onUpdate:modelValue":t[2]||=e=>Q.value.description=e,rows:`4`,placeholder:`Enter item type description (optional)`,disabled:Z.value,class:x([re.value,`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800 resize-vertical`]),onBlur:t[3]||=()=>b(E)(`description`),maxlength:`500`},null,42,P),[[o,Q.value.description]]),l(`div`,F,[b(w)(`description`)?(g(),d(`p`,I,S(b(w)(`description`)),1)):u(``,!0),l(`p`,L,S(Q.value.description?.length||0)+`/500 characters `,1)])]),l(`div`,R,[l(`div`,z,[v(l(`input`,{id:`is_active`,"onUpdate:modelValue":t[4]||=e=>Q.value.is_active=e,type:`checkbox`,disabled:Z.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,B),[[a,Q.value.is_active]])]),t[7]||=l(`div`,{class:`ml-3`},[l(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),l(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this item type will be available for selection `)],-1)]),l(`div`,V,[l(`button`,{type:`button`,onClick:oe,disabled:Z.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,H),l(`button`,{type:`submit`,disabled:Z.value||b(m)||!ie.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[Z.value?(g(),d(`div`,W,t[8]||=[l(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),f(` Creating... `,-1)])):(g(),d(`span`,G,`Create Item Type`))],8,U)])],32)])]),l(`div`,K,[l(`div`,q,[l(`div`,J,[p(b(C),{class:`h-5 w-5 text-blue-400`})]),t[9]||=l(`div`,{class:`ml-3`},[l(`h3`,{class:`text-sm font-medium text-blue-800 dark:text-blue-300`},` About Item Types `),l(`div`,{class:`mt-2 text-sm text-blue-700 dark:text-blue-400`},[l(`p`,null,[f(` Item types help categorize your inventory items. Common examples include: `),l(`span`,{class:`font-medium`},`Inventory, Service, Digital Product, Raw Material`),f(`, etc. `)])])],-1)])])])])}}}),X=Y;export{X as b,O as c,D as d};