import{Z as e,aB as t,aD as n,aE as ee,aN as r,aO as i,aP as a,aR as o,aa as te,ae as ne,af as re,ap as ie,as as s,au as c,av as l,ax as u,ay as d,az as ae,k as oe,m as se,s as ce,w as le,z as ue}from"./index-DacId8ZS.js";import"./GlobalConfig-BnwaQAhg.js";import"./tableUtils-BvWofAYZ.js";import{b as de}from"./ConfirmationModal-E_0yWO_H.js";import{b as f}from"./common-CuFkwpi4.js";import{b as fe}from"./salesStore-BPRn3mQX.js";const p={class:`max-w-8xl mx-auto py-2`},m={class:``},h={class:`mb-8`},g={class:`flex items-center space-x-4 mb-2`},_={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},v={class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},y={class:`flex items-center justify-between`},b={class:`text-lg font-medium text-gray-900 dark:text-white`},x={class:`text-sm text-gray-500 dark:text-gray-400`},S={class:`flex space-x-3`},C={class:`px-6 py-8`},w={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},T={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6`},E={class:`mt-1 text-sm text-gray-900 dark:text-white`},D={class:`mt-1 text-sm text-gray-900 dark:text-white`},O={class:`mt-1 text-sm text-gray-900 dark:text-white`},k={class:`mt-1 text-sm text-gray-900 dark:text-white`},A={class:`mt-1 text-sm text-gray-900 dark:text-white`},j={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4`},M={class:`mt-1 text-sm text-gray-900 dark:text-white`},N={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},P={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},F={class:`mt-1 text-sm text-gray-900 dark:text-white`},I={class:`mt-1 text-sm text-gray-900 dark:text-white`},L={class:`mt-1 text-sm text-gray-900 dark:text-white`},R={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},z={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},B={key:1,class:`overflow-x-auto`},V={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},pe={class:`bg-gray-50 dark:bg-gray-700`},me={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},he={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},ge={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},_e={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},ve={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},ye={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},be={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},xe={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Se={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ce={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},we={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},H={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Te={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ee={class:`bg-gray-50 dark:bg-gray-700`},De={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Oe={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},ke={key:0},Ae={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},je={class:`px-6 py-4 text-sm font-medium text-gray-900 dark:text-white`},Me={class:`bg-green-50 dark:bg-green-900`},Ne={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},Pe={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},Fe={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},Ie={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},Le={class:`bg-blue-50 dark:bg-blue-900 rounded-lg p-4`},Re={class:`mt-1 text-lg font-medium text-blue-900 dark:text-blue-100`},ze={class:`bg-blue-50 dark:bg-blue-900 rounded-lg p-4`},Be={class:`mt-1 text-lg font-medium text-blue-900 dark:text-blue-100`},Ve={class:`mt-1 text-lg font-medium`},He={key:0,class:`mb-6`},Ue={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},We={class:`text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap`},Ge={class:`pt-6 border-t border-gray-200 dark:border-gray-700`},Ke={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},qe={class:`mt-1 text-sm text-gray-900 dark:text-white`},Je={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ye={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Xe={class:`px-6 py-8 text-center`};var U=ae({__name:`ViewPage`,setup(ae){let U=re(),W=ne(),G=te(),K=fe(),q=parseInt(W.params.id),J=r(!0),Y=r({}),X=r(!1),Z=r(!1),Ze=()=>{U.push({name:`sales.index`})},Qe=()=>{U.push({name:`sales.edit`,params:{id:q.toString()}})},$e=()=>{U.push({name:`sales.invoice`,params:{id:q.toString()},query:{from:`view`}})},et=()=>{X.value=!0},tt=()=>{X.value=!1,Z.value=!1},nt=async()=>{Z.value=!0;try{await K.deleteSale(q),G.success(`Sale deleted successfully`),U.push({name:`sales.index`})}catch{G.error(`Failed to delete sale`)}finally{Z.value=!1}},rt=async()=>{try{J.value=!0,Y.value=await K.fetchSale(q)}catch(e){console.error(`Error loading sale:`,e),G.error(`Failed to load sale details`),U.push({name:`sales.index`})}finally{J.value=!1}},it=e=>{let t=Number(e||0);return t>0?`text-green-600 dark:text-green-400 font-medium`:t<0?`text-red-600 dark:text-red-400 font-medium`:`text-gray-600 dark:text-gray-400`},at=e=>{let t=Number(e||0);return t>0?`bg-green-50 dark:bg-green-900 text-green-600 dark:text-green-400`:t<0?`bg-red-50 dark:bg-red-900 text-red-600 dark:text-red-400`:`bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400`},ot=e=>{let t=Number(e||0);return t>0?`text-red-600 dark:text-red-400 font-medium`:`text-gray-900 dark:text-white`},Q=e=>e?parseFloat(Number(e).toFixed(2)).toString():`0`,st=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`})},$=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})};return t(async()=>{await rt()}),(t,r)=>(n(),l(`div`,p,[s(`div`,m,[s(`div`,h,[s(`div`,g,[s(`button`,{onClick:Ze,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[d(i(e),{class:`w-5 h-5`})]),r[1]||=s(`div`,null,[s(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Sale Details `),s(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` View sale order information `)],-1)])]),J.value?(n(),l(`div`,Ye,[s(`div`,Xe,[d(i(ue),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),r[43]||=s(`p`,{class:`mt-2 text-gray-600 dark:text-gray-400`},`Loading sale details...`,-1)])])):(n(),l(`div`,_,[s(`div`,v,[s(`div`,y,[s(`div`,null,[s(`h3`,b,o(Y.value.prefix)+`-`+o(Y.value.code),1),s(`p`,x,` Sale ID: `+o(Y.value.id),1)]),s(`div`,S,[s(`button`,{onClick:$e,class:`inline-flex items-center px-3 py-2 border border-green-300 dark:border-green-600 text-sm font-medium rounded-md text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 hover:bg-green-50 dark:hover:bg-green-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200`},[d(i(ce),{class:`w-4 h-4 mr-2`}),r[2]||=u(` Print Invoice `,-1)]),s(`button`,{onClick:Qe,class:`inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[d(i(le),{class:`w-4 h-4 mr-2`}),r[3]||=u(` Edit `,-1)]),s(`button`,{onClick:et,class:`inline-flex items-center px-3 py-2 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200`},[d(i(oe),{class:`w-4 h-4 mr-2`}),r[4]||=u(` Delete `,-1)])])])]),s(`div`,C,[s(`div`,w,[r[12]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),s(`div`,T,[s(`div`,null,[r[5]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Sale Date`,-1),s(`dd`,E,o(st(Y.value.date)),1)]),s(`div`,null,[r[6]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),s(`dd`,D,o(Y.value.customer.name),1)]),s(`div`,null,[r[7]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Salesperson`,-1),s(`dd`,O,o(Y.value.salesperson.name),1)]),s(`div`,null,[r[8]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),s(`dd`,k,o(Y.value.warehouse.name),1)]),s(`div`,null,[r[9]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),s(`dd`,A,o(Y.value.currency.code)+` - `+o(Y.value.currency.name),1)])]),s(`div`,j,[s(`div`,null,[r[10]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency Rate`,-1),s(`dd`,M,o(Q(Y.value.currency_rate)),1)]),s(`div`,null,[r[11]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Outstanding Balance`,-1),s(`dd`,{class:a([`mt-1 text-sm`,ot(Y.value.outStanding_balance)])},o(i(f)(Y.value.outStanding_balance)),3)])])]),s(`div`,N,[r[17]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Financial Summary `,-1),s(`div`,P,[s(`div`,null,[r[13]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Sub Total`,-1),s(`dd`,F,o(i(f)(Y.value.sub_total)),1)]),s(`div`,null,[r[14]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Sub Total (USD)`,-1),s(`dd`,I,o(i(f)(Y.value.sub_total_usd)),1)]),s(`div`,null,[r[15]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Discount Amount`,-1),s(`dd`,L,o(i(f)(Y.value.discount_amount)),1)]),s(`div`,null,[r[16]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Total Profit`,-1),s(`dd`,{class:a([`mt-1 text-sm`,it(Y.value.total_profit)])},o(i(f)(Y.value.total_profit)),3)])])]),s(`div`,R,[r[35]||=s(`div`,{class:`flex items-center justify-between mb-4`},[s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Sale Items `)],-1),Y.value.items&&Y.value.items.length===0?(n(),l(`div`,z,[d(i(se),{class:`mx-auto h-12 w-12 text-gray-400`}),r[18]||=s(`h5`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items found`,-1),r[19]||=s(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`This sale has no items.`,-1)])):(n(),l(`div`,B,[s(`table`,V,[s(`thead`,pe,[s(`tr`,null,[r[20]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`#`,-1),r[21]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Code`,-1),r[22]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Item`,-1),r[23]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Unit`,-1),r[24]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[s(`abbr`,{title:`Total Quantity`},`QTY`)],-1),r[25]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Sale Price`,-1),r[26]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Cost Price`,-1),r[27]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[s(`abbr`,{title:`Discount Percentage`},`Dis. %`)],-1),r[28]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[s(`abbr`,{title:`Tax Percentage`},`Tax %`)],-1),r[29]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},[s(`abbr`,{title:`Tax-inclusive Price`},`TTC`)],-1),r[30]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Total`,-1),r[31]||=s(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`USD`,-1),c(``,!0)])]),s(`tbody`,me,[(n(!0),l(ie,null,ee(Y.value.items,(e,t)=>(n(),l(`tr`,{key:t,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[s(`td`,he,o(t+1),1),s(`td`,ge,o(e.item_code),1),s(`td`,_e,o(e.item.description),1),s(`td`,ve,o(e.item.item_unit.name),1),s(`td`,ye,o(Q(e.quantity)),1),s(`td`,be,o(i(f)(e.price)),1),s(`td`,xe,o(i(f)(e.cost_price)),1),s(`td`,Se,o(Q(e.discount_percent))+`%`,1),s(`td`,Ce,o(Q(e.tax_percent))+`%`,1),s(`td`,we,o(Q(e.ttc_price)),1),s(`td`,H,o(i(f)(e.total_price)),1),s(`td`,Te,o(i(f)(e.total_price_usd)),1),c(``,!0)]))),128))]),s(`tfoot`,Ee,[s(`tr`,null,[r[32]||=s(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Sub Total:`,-1),s(`td`,De,o(i(f)(Y.value.sub_total)),1),s(`td`,Oe,o(i(f)(Y.value.sub_total_usd)),1),c(``,!0)]),Y.value.discount_amount&&Number(Y.value.discount_amount)>0?(n(),l(`tr`,ke,[r[33]||=s(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Additional Discount:`,-1),s(`td`,Ae,`-`+o(i(f)(Y.value.discount_amount)),1),s(`td`,je,`-`+o(i(f)(Y.value.discount_amount_usd)),1),c(``,!0)])):c(``,!0),s(`tr`,Me,[r[34]||=s(`td`,{colspan:`10`,class:`px-6 py-4 text-right text-sm font-bold text-gray-900 dark:text-white`},`Final Total:`,-1),s(`td`,Ne,o(i(f)(Y.value.total)),1),s(`td`,Pe,o(i(f)(Y.value.total_usd)),1),c(``,!0)])])])]))]),s(`div`,Fe,[r[39]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Final Totals `,-1),s(`div`,Ie,[s(`div`,Le,[r[36]||=s(`dt`,{class:`text-sm font-medium text-blue-600 dark:text-blue-400`},`Total Amount`,-1),s(`dd`,Re,o(i(f)(Y.value.total)),1)]),s(`div`,ze,[r[37]||=s(`dt`,{class:`text-sm font-medium text-blue-600 dark:text-blue-400`},`Total Amount (USD)`,-1),s(`dd`,Be,o(i(f)(Y.value.total_usd)),1)]),s(`div`,{class:a([`rounded-lg p-4`,at(Y.value.total_profit)])},[r[38]||=s(`dt`,{class:`text-sm font-medium`},`Total Profit (USD)`,-1),s(`dd`,Ve,o(i(f)(Y.value.total_profit)),1)],2)])]),Y.value.note?(n(),l(`div`,He,[r[40]||=s(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Notes `,-1),s(`div`,Ue,[s(`p`,We,o(Y.value.note),1)])])):c(``,!0),s(`div`,Ge,[s(`div`,Ke,[s(`div`,null,[r[41]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created At`,-1),s(`dd`,qe,o($(Y.value.created_at)),1)]),s(`div`,null,[r[42]||=s(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated`,-1),s(`dd`,Je,o($(Y.value.updated_at)),1)])])])])]))]),d(de,{show:X.value,"onUpdate:show":r[0]||=e=>X.value=e,type:`delete`,title:`Delete Sale ${Y.value.prefix}-${Y.value.code}`,message:`Are you sure you want to delete sale '${Y.value.prefix}-${Y.value.code}'? This action can be undone by restoring from trash.`,"confirm-text":`Delete Sale`,"loading-text":`Deleting...`,loading:Z.value,onConfirm:nt,onCancel:tt},null,8,[`show`,`title`,`message`,`loading`])]))}}),W=U;export{W as default};