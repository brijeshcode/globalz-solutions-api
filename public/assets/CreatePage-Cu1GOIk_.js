import{I as e,Q as t,a$ as n,aC as ee,aH as r,aN as i,aO as a,aR as o,aS as te,aV as s,aW as c,aX as l,aY as u,a_ as d,ao as ne,b0 as re,b5 as f,b6 as ie,bd as p,be as m,bf as ae,bg as h,bj as g,s as _,t as v}from"./index-Bbnq3hOa.js";import"./GlobalConfig-wPgXFcZ5.js";import"./tableUtils-dXs1kjAL.js";import{b as y}from"./commissionTargetStore-BTmE5ZWQ.js";const b={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},x={class:``},S={class:`mb-8`},C={class:`flex items-center space-x-4 mb-2`},w={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},T={class:`px-6 py-8`},E={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},D={class:`grid grid-cols-1 md:grid-cols-3 gap-6`},O=[`disabled`],k={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},A=[`disabled`],j={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},M={class:`mt-6`},N=[`disabled`],P={key:0,class:`mt-1 text-sm text-red-600 dark:text-red-400`},F={class:`border-b border-gray-200 dark:border-gray-700 pb-6`},I={class:`flex items-center justify-between mb-4`},L=[`disabled`],R={key:0,class:`text-center py-8 bg-gray-50 dark:bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600`},z={key:1,class:`space-y-4`},B={class:`flex items-center justify-between mb-4`},V={class:`text-sm font-medium text-gray-900 dark:text-white`},H=[`onClick`,`disabled`],U={class:`grid grid-cols-1 md:grid-cols-7 gap-4`},oe=[`for`],W=[`id`,`onUpdate:modelValue`,`disabled`],G=[`for`],K=[`id`,`onUpdate:modelValue`,`disabled`],q=[`for`],se=[`id`,`onUpdate:modelValue`,`disabled`],ce=[`for`],le=[`id`,`onUpdate:modelValue`,`disabled`],ue=[`for`],de=[`id`,`onUpdate:modelValue`,`disabled`],fe=[`for`],pe=[`id`,`onUpdate:modelValue`,`disabled`],me=[`for`],he=[`id`,`onUpdate:modelValue`,`disabled`],ge={class:`flex items-center justify-end space-x-4 pt-6`},_e=[`disabled`],ve=[`disabled`];var J=re({__name:`CreatePage`,setup(re){let J=r(),Y=ee(),ye=y(),X=ae(!1),Z=m({}),Q=m({date:new Date().toISOString().split(`T`)[0],name:``,note:null,rules:[]}),be=()=>{Q.rules.push({type:`sale`,include_type:`Own`,minimum_amount:0,maximum_amount:0,percent:0,percent_type:`dynamic`,comission_label:``})},xe=e=>{Q.rules.splice(e,1)},Se=()=>{if(Object.keys(Z).forEach(e=>delete Z[e]),Q.date||(Z.date=`Date is required`),(!Q.name||Q.name.trim()===``)&&(Z.name=`Target name is required`),Q.rules.length===0)return Y.error(`Please add at least one commission rule`),!1;for(let e=0;e<Q.rules.length;e++){let t=Q.rules[e];if(!t.type)return Y.error(`Rule #${e+1}: Type is required`),!1;if(t.minimum_amount===void 0||t.minimum_amount<0)return Y.error(`Rule #${e+1}: Valid minimum amount is required`),!1;if(t.maximum_amount===void 0||t.maximum_amount<0)return Y.error(`Rule #${e+1}: Valid maximum amount is required`),!1;if(t.minimum_amount>=t.maximum_amount)return Y.error(`Rule #${e+1}: Maximum amount must be greater than minimum amount`),!1;if(t.percent===void 0||t.percent<0||t.percent>100)return Y.error(`Rule #${e+1}: Percent must be between 0 and 100`),!1;if(!t.comission_label||t.comission_label.trim()===``)return Y.error(`Rule #${e+1}: Label is required`),!1}return Object.keys(Z).length===0},Ce=async()=>{if(Se()){X.value=!0;try{let e=Q.rules.map(e=>({...e}));await ye.createCommissionTarget({date:Q.date,name:Q.name,note:Q.note,rules:e}),Y.success(`Commission target created successfully`),J.push({name:`commission-targets.index`})}catch(e){console.error(`Error creating commission target:`,e),e.response?.data?.errors&&Object.assign(Z,e.response.data.errors),Y.error(e.response?.data?.message||`Failed to create commission target`)}finally{X.value=!1}}},$=()=>{J.push({name:`commission-targets.index`})};return(ee,r)=>(f(),u(`div`,b,[s(`div`,x,[s(`div`,S,[s(`div`,C,[s(`button`,{onClick:$,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[n(h(ne),{class:`w-5 h-5`})]),r[3]||=s(`div`,null,[s(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Create Commission Target `),s(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Set up new commission target with rules `)],-1)])]),s(`div`,w,[s(`div`,T,[s(`form`,{onSubmit:o(Ce,[`prevent`]),class:`space-y-6`},[s(`div`,E,[r[7]||=s(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),s(`div`,D,[s(`div`,null,[r[4]||=s(`label`,{for:`date`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[d(` Date `),s(`span`,{class:`text-red-500 ml-1`},`*`)],-1),p(s(`input`,{id:`date`,"onUpdate:modelValue":r[0]||=e=>Q.date=e,type:`date`,disabled:X.value,required:``,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,8,O),[[a,Q.date]]),Z.date?(f(),u(`p`,k,g(Z.date),1)):l(``,!0)]),s(`div`,null,[r[5]||=s(`label`,{for:`name`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[d(` Target Name `),s(`span`,{class:`text-red-500 ml-1`},`*`)],-1),p(s(`input`,{id:`name`,"onUpdate:modelValue":r[1]||=e=>Q.name=e,type:`text`,placeholder:`Enter target name`,disabled:X.value,required:``,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,8,A),[[a,Q.name]]),Z.name?(f(),u(`p`,j,g(Z.name),1)):l(``,!0)])]),s(`div`,M,[r[6]||=s(`label`,{for:`note`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Note `,-1),p(s(`textarea`,{id:`note`,"onUpdate:modelValue":r[2]||=e=>Q.note=e,rows:`3`,placeholder:`Add any additional notes or comments...`,disabled:X.value,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-700`},null,8,N),[[a,Q.note]]),Z.note?(f(),u(`p`,P,g(Z.note),1)):l(``,!0)])]),s(`div`,F,[s(`div`,I,[r[9]||=s(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Commission Rules `,-1),s(`button`,{type:`button`,onClick:be,disabled:X.value,class:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[n(h(e),{class:`w-4 h-4 mr-2`}),r[8]||=d(` Add Rule `,-1)],8,L)]),Q.rules.length===0?(f(),u(`div`,R,[n(h(v),{class:`mx-auto h-12 w-12 text-gray-400`}),r[10]||=s(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`No rules added yet`,-1),r[11]||=s(`p`,{class:`text-xs text-gray-400 dark:text-gray-500 mt-1`},`Click "Add Rule" to create commission rules`,-1)])):(f(),u(`div`,z,[(f(!0),u(te,null,ie(Q.rules,(e,t)=>(f(),u(`div`,{key:t,class:`bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-600`},[s(`div`,B,[s(`h4`,V,` Rule #`+g(t+1),1),s(`button`,{type:`button`,onClick:e=>xe(t),disabled:X.value,class:`text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`,title:`Remove rule`},[n(h(_),{class:`w-4 h-4`})],8,H)]),s(`div`,U,[s(`div`,null,[s(`label`,{for:`rule_type_${t}`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},r[12]||=[d(` Type `,-1),s(`span`,{class:`text-red-500`},`*`,-1)],8,oe),p(s(`select`,{id:`rule_type_${t}`,"onUpdate:modelValue":t=>e.type=t,required:``,disabled:X.value,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},r[13]||=[s(`option`,{value:`fuel`},`Fuel`,-1),s(`option`,{value:`payment`},`Payment`,-1),s(`option`,{value:`sale`},`Sale`,-1)],8,W),[[i,e.type]])]),s(`div`,null,[s(`label`,{for:`rule_type_${t}`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},r[14]||=[d(` Include type `,-1),s(`span`,{class:`text-red-500`},`*`,-1)],8,G),p(s(`select`,{id:`rule_type_${t}`,"onUpdate:modelValue":t=>e.include_type=t,required:``,disabled:X.value,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},r[15]||=[s(`option`,{value:`Own`},`Own`,-1),s(`option`,{value:`All`},`All`,-1),s(`option`,{value:`All except own`},`All except own`,-1)],8,K),[[i,e.include_type]])]),s(`div`,null,[s(`label`,{for:`rule_min_${t}`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},r[16]||=[d(` Min Amount `,-1),s(`span`,{class:`text-red-500`},`*`,-1)],8,q),p(s(`input`,{id:`rule_min_${t}`,"onUpdate:modelValue":t=>e.minimum_amount=t,type:`number`,step:`0.01`,min:`0`,placeholder:`0.00`,required:``,disabled:X.value,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm transition-colors duration-200 bg-white dark:bg-gray-700`},null,8,se),[[a,e.minimum_amount,void 0,{number:!0}]])]),s(`div`,null,[s(`label`,{for:`rule_max_${t}`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},r[17]||=[d(` Max Amount `,-1),s(`span`,{class:`text-red-500`},`*`,-1)],8,ce),p(s(`input`,{id:`rule_max_${t}`,"onUpdate:modelValue":t=>e.maximum_amount=t,type:`number`,step:`0.01`,min:`0`,placeholder:`0.00`,required:``,disabled:X.value,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm transition-colors duration-200 bg-white dark:bg-gray-700`},null,8,le),[[a,e.maximum_amount,void 0,{number:!0}]])]),s(`div`,null,[s(`label`,{for:`rule_percent_${t}`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},r[18]||=[d(` Percent (%) `,-1),s(`span`,{class:`text-red-500`},`*`,-1)],8,ue),p(s(`input`,{id:`rule_percent_${t}`,"onUpdate:modelValue":t=>e.percent=t,type:`number`,step:`0.01`,min:`0`,max:`100`,placeholder:`0.00`,required:``,disabled:X.value,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm transition-colors duration-200 bg-white dark:bg-gray-700`},null,8,de),[[a,e.percent,void 0,{number:!0}]])]),s(`div`,null,[s(`label`,{for:`rule_percent_type_${t}`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},r[19]||=[d(` % Type `,-1),s(`span`,{class:`text-red-500`},`*`,-1)],8,fe),p(s(`select`,{id:`rule_percent_type_${t}`,"onUpdate:modelValue":t=>e.percent_type=t,required:``,disabled:X.value,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`},r[20]||=[s(`option`,{value:``},`Select Type`,-1),s(`option`,{value:`fixed`},`Fixed`,-1),s(`option`,{value:`dynamic`},`Dynamic`,-1)],8,pe),[[i,e.percent_type]])]),s(`div`,null,[s(`label`,{for:`rule_label_${t}`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},r[21]||=[d(` Label `,-1),s(`span`,{class:`text-red-500`},`*`,-1)],8,me),p(s(`input`,{id:`rule_label_${t}`,"onUpdate:modelValue":t=>e.comission_label=t,type:`text`,placeholder:`Enter label`,required:``,disabled:X.value,class:`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm transition-colors duration-200 bg-white dark:bg-gray-700`},null,8,he),[[a,e.comission_label]])])])]))),128))]))]),s(`div`,ge,[s(`button`,{type:`button`,onClick:$,disabled:X.value,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Cancel `,8,_e),s(`button`,{type:`submit`,disabled:X.value||Q.rules.length===0,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[X.value?(f(),c(h(t),{key:0,class:`animate-spin -ml-1 mr-2 h-4 w-4`})):l(``,!0),d(` `+g(X.value?`Creating...`:`Create Commission Target`),1)],8,ve)])],32)])])])]))}}),Y=J;export{Y as default};