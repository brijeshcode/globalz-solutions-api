import{I as e,a$ as t,aE as n,aF as r,aH as i,aI as a,aK as o,aL as s,aM as c,aO as l,aQ as u,a_ as d,aa as ee,ac as f,am as p,aq as m,ar as h,b2 as g,z as te}from"./index-ZOM5R8cV.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-BFc6-TYF.js";import{b as _}from"./common-CFanRh6n.js";import{b as v}from"./companyStore-UnHBZJqF.js";import{b as y}from"./currencyUtil-PeHr0xlC.js";import{b}from"./customerPaymentsStore-DdzbDXy2.js";const x={class:`max-w-4xl mx-auto p-8 bg-white text-gray-900 print:h-full print:p-0 print:max-w-none print:mx-0`},S={class:`header`},C={class:`flex justify-between items-start mb-10 pb-6 border-b-2 border-blue-600 print:border-black print:mb-6`},w={class:`flex-1`},T={class:`flex items-center mb-3`},E=[`src`,`alt`],D={key:1,class:`text-3xl font-bold text-blue-600 print:text-black print:text-2xl`},O={key:0},k={class:`text-sm print:text-xs print:text-black`},A={class:`text-right flex-1 mt-4`},j={class:`text-lg font-semibold text-gray-600 print:text-black print:text-base`},M={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 print:grid-cols-2 print:gap-6 print:mb-6`},N={class:`space-y-2 print:space-y-1`},P={class:`flex justify-between`},F={class:`text-gray-900 font-semibold print:font-normal print:text-black print:text-xs`},I={key:0,class:`flex justify-between`},L={class:`text-gray-900 print:text-black print:text-xs`},R={key:1,class:`flex justify-between`},z={class:`text-gray-900 print:text-black print:text-xs`},B={class:`space-y-2 print:space-y-1`},V={class:`flex justify-between`},H={class:`text-gray-900 print:text-black print:text-xs`},U={class:`flex justify-between`},W={class:`text-gray-900 print:text-black print:text-xs`},G={class:`flex justify-between`},K={class:`text-gray-900 print:text-black print:text-xs`},q={class:`body`},J={class:`mb-8 print:mb-6`},Y={class:`bg-green-50 dark:bg-green-900/20 border-2 border-green-500 rounded-lg p-6 print:p-4 print:bg-white print:border-black`},X={class:`grid grid-cols-1 md:grid-cols-2 gap-6 print:grid-cols-2 print:gap-4`},Z={class:`space-y-1`},Q={class:`flex justify-between`},ne={class:`text-sm font-medium text-gray-900 print:text-black print:text-xs`},re={class:`flex justify-between`},ie={class:`text-sm font-medium text-gray-900 print:text-black print:text-xs`},ae={class:`space-y-1`},oe={class:`flex justify-between`},se={class:`text-sm text-gray-600 print:text-black print:text-xs`},ce={class:`text-lg font-bold text-gray-900 print:text-black print:text-base`},le={class:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 print:grid-cols-2 print:gap-6 print:mb-6`},ue={class:`space-y-2 print:space-y-1`},de={class:`flex justify-between`},fe={class:`text-gray-900 print:text-black print:text-xs`},pe={key:0,class:`flex justify-between`},me={class:`text-gray-900 print:text-black print:text-xs`},he={key:1,class:`flex justify-between`},ge={class:`text-gray-900 print:text-black print:text-xs`},_e={key:0,class:`mb-8 print:mb-6`},ve={class:`grid grid-cols-1 md:grid-cols-2 gap-6 print:grid-cols-2 print:gap-4`},ye={key:0},be={class:`bg-gray-50 p-3 rounded-md text-sm text-gray-900 print:bg-white print:border print:border-black print:text-xs print:text-black`},xe={key:1},Se={class:`bg-gray-50 p-3 rounded-md text-sm text-gray-900 print:bg-white print:border print:border-black print:text-xs print:text-black`},Ce={class:`flex justify-between items-center mb-8 print:mb-4 mt-12 print:mt-8`},we={class:`print:block hidden print:fixed print:bottom-0 print:left-0 print:right-0`},Te={class:`border-t-2 border-gray-300 print:border-black pt-3 pb-2 print:bg-white`},Ee={class:`mt-1`},De={class:`flex flex-wrap gap-2 text-sm text-gray-600 print:text-black print:text-xs justify-between px-4`},Oe={key:0,class:`flex-1`},ke={key:1,class:`flex-1 text-center`},Ae={key:2,class:`flex-1 text-center`},je={key:3,class:`flex-1 text-right`};var Me=c({__name:`PaymentReceipt`,props:{payment:{default:null}},setup(e,{expose:n}){let o=v();l(async()=>{try{o.company.name||await o.fetchCompany()}catch(e){console.error(`Failed to fetch company data:`,e)}});let s=()=>{window.print()};return n({printReceipt:s}),(e,n)=>(u(),a(`div`,x,[r(`section`,S,[r(`div`,C,[r(`div`,w,[r(`div`,T,[t(o).company.logo?.preview_url?(u(),a(`img`,{key:0,src:t(o).company.logo.preview_url,alt:t(o).company.name||`Company Logo`,class:`h-24 w-auto mr-4 print:h-16`},null,8,E)):i(``,!0),t(o).company.logo?.preview_url?i(``,!0):(u(),a(`div`,D,g(t(o).company.name),1))]),t(o).company.tax_number?(u(),a(`div`,O,[r(`p`,k,[r(`b`,null,`Tax Registration #: `+g(t(o).company.tax_number),1)])])):i(``,!0)]),r(`div`,A,[n[0]||=r(`h1`,{class:`text-3xl font-bold text-blue-600 mb-2 print:text-black print:text-2xl`},`PAYMENT RECEIPT`,-1),r(`div`,j,g(e.payment?.prefix)+`-`+g(e.payment?.code),1)])]),r(`div`,M,[r(`div`,null,[n[4]||=r(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Customer Information `,-1),r(`div`,N,[r(`div`,P,[n[1]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Customer:`,-1),r(`span`,F,g(e.payment?.customer?.name||`-`),1)]),e.payment?.customer?.code?(u(),a(`div`,I,[n[2]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Customer Code:`,-1),r(`span`,L,g(e.payment.customer.code),1)])):i(``,!0),e.payment?.customer_payment_term?(u(),a(`div`,R,[n[3]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Payment Term:`,-1),r(`span`,z,g(e.payment.customer_payment_term.name)+` (`+g(e.payment.customer_payment_term.days)+` days) `,1)])):i(``,!0)])]),r(`div`,null,[n[8]||=r(`h3`,{class:`text-lg font-bold text-blue-600 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Payment Details `,-1),r(`div`,B,[r(`div`,V,[n[5]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Payment Date:`,-1),r(`span`,H,g(t(_)(e.payment?.date)),1)]),r(`div`,U,[n[6]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`RCT Book Number:`,-1),r(`span`,W,g(e.payment?.rtc_book_number||`-`),1)]),r(`div`,G,[n[7]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Print Date:`,-1),r(`span`,K,g(t(_)(new Date().toISOString())),1)])])])])]),r(`section`,q,[r(`div`,J,[r(`div`,Y,[r(`div`,X,[r(`div`,null,[n[11]||=r(`h3`,{class:`text-sm font-semibold text-gray-700 mb-2 print:text-black print:text-xs`},`Received Currency Information`,-1),r(`div`,Z,[r(`div`,Q,[n[9]||=r(`span`,{class:`text-sm text-gray-600 print:text-black print:text-xs`},`Currency:`,-1),r(`span`,ne,g(e.payment?.currency?.name||`-`)+` (`+g(e.payment?.currency?.code||`-`)+`) `,1)]),r(`div`,re,[n[10]||=r(`span`,{class:`text-sm text-gray-600 print:text-black print:text-xs`},`Currency Rate:`,-1),r(`span`,ie,g(e.payment?.currency_rate?(e.payment.currency_rate*1).toFixed(4):`-`),1)])])]),r(`div`,null,[n[13]||=r(`h3`,{class:`text-sm font-semibold text-gray-700 mb-2 print:text-black print:text-xs`},`Payment Amount`,-1),r(`div`,ae,[r(`div`,oe,[r(`span`,se,`Received Amount (`+g(e.payment?.currency?.code)+`):`,1),r(`span`,ce,g(t(y)(e.payment.amount,e.payment.currency.code)),1)]),i(``,!0)])])])])]),r(`div`,le,[i(``,!0),r(`div`,null,[n[21]||=r(`h3`,{class:`text-lg font-bold text-gray-900 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Approval Details `,-1),r(`div`,ue,[r(`div`,de,[n[18]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Approved By:`,-1),r(`span`,fe,g(e.payment?.approved_by_user?.name||`-`),1)]),e.payment?.approved_at?(u(),a(`div`,pe,[n[19]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Approval Date:`,-1),r(`span`,me,g(t(_)(e.payment.approved_at)),1)])):i(``,!0),e.payment?.approved_by_user?.email?(u(),a(`div`,he,[n[20]||=r(`span`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Email:`,-1),r(`span`,ge,g(e.payment.approved_by_user.email),1)])):i(``,!0)])])]),e.payment?.note||e.payment?.approve_note?(u(),a(`div`,_e,[n[24]||=r(`h3`,{class:`text-lg font-bold text-gray-900 mb-3 print:text-sm border-b border-gray-200 print:text-black print:border-black`},` Notes `,-1),r(`div`,ve,[e.payment?.note?(u(),a(`div`,ye,[n[22]||=r(`p`,{class:`text-xs font-semibold text-gray-600 mb-1 print:text-black`},`Payment Notes:`,-1),r(`div`,be,g(e.payment.note),1)])):i(``,!0),e.payment?.approve_note?(u(),a(`div`,xe,[n[23]||=r(`p`,{class:`text-xs font-semibold text-gray-600 mb-1 print:text-black`},`Approval Notes:`,-1),r(`div`,Se,g(e.payment.approve_note),1)])):i(``,!0)])])):i(``,!0),r(`div`,Ce,[n[26]||=r(`div`,{class:`flex-1 text-center`},[r(`p`,{class:`font-semibold text-gray-700 print:text-black print:text-xs`},`Received By`),r(`div`,{class:`border-b-2 border-gray-400 print:border-black mt-12 print:mt-8 mx-8`}),r(`p`,{class:`text-xs text-gray-500 mt-2 print:text-black print:mt-1`},`Signature & Date`)],-1),i(``,!0)])]),r(`section`,we,[r(`footer`,Te,[r(`div`,Ee,[r(`div`,De,[t(o).company.address?(u(),a(`p`,Oe,g(t(o).company.address),1)):i(``,!0),t(o).company.phone?(u(),a(`p`,ke,`Tel: `+g(t(o).company.phone),1)):i(``,!0),t(o).company.email?(u(),a(`p`,Ae,`Email: `+g(t(o).company.email),1)):i(``,!0),t(o).company.website?(u(),a(`p`,je,g(t(o).company.website),1)):i(``,!0)])])])])]))}}),Ne=f(Me,[[`__scopeId`,`data-v-dc7e3232`]]);const Pe={class:`min-h-screen bg-gray-50 print:bg-white`},$={class:`bg-white shadow-sm border-b print:hidden`},Fe={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`},Ie={class:`flex items-center justify-between h-16`},Le={class:`flex items-center space-x-4`},Re={class:`text-sm text-gray-500`},ze={class:`flex items-center space-x-3`},Be={key:0,class:`flex items-center justify-center min-h-screen`},Ve={class:`text-center`},He={key:1,class:`py-8 print:py-0`},Ue={class:`max-w-6xl mx-auto print:max-w-none`};var We=c({__name:`PreviewPage`,setup(i){let c=h(),f=m(),_=p(),v=b(),y=n(()=>parseInt(f.params.id)),x=d(!0),S=d(null),C=d(null),w=()=>{c.back()},T=async()=>{if(C.value)try{await C.value.printReceipt()}catch(e){console.error(`Failed to print receipt:`,e),_.error(`Failed to print receipt`)}},E=async()=>{try{let e=await v.fetchPayment(y.value);S.value=e}catch(e){_.error(`Failed to load payment details`,{title:`Error`}),console.error(`Error fetching payment:`,e),c.push({name:`customer.payments.index`})}};return l(async()=>{try{x.value=!0,await E()}catch(e){console.error(`Error initializing payment preview:`,e)}finally{x.value=!1}}),(n,i)=>(u(),a(`div`,Pe,[r(`div`,$,[r(`div`,Fe,[r(`div`,Ie,[r(`div`,Le,[r(`button`,{onClick:w,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 transition-colors`},[s(t(ee),{class:`w-5 h-5`})]),r(`div`,null,[i[0]||=r(`h1`,{class:`text-lg font-semibold text-gray-900`},`Payment Receipt Preview`,-1),r(`p`,Re,g(S.value?.prefix)+`-`+g(S.value?.code),1)])]),r(`div`,ze,[r(`button`,{onClick:T,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},[s(t(te),{class:`w-4 h-4 mr-2`}),i[1]||=o(` Print Receipt `,-1)])])])])]),x.value?(u(),a(`div`,Be,[r(`div`,Ve,[s(t(e),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),i[2]||=r(`p`,{class:`mt-2 text-gray-600`},`Loading payment receipt...`,-1)])])):(u(),a(`div`,He,[r(`div`,Ue,[s(Ne,{ref_key:`paymentReceiptRef`,ref:C,payment:S.value},null,8,[`payment`])])]))]))}}),Ge=We;export{Ge as default};