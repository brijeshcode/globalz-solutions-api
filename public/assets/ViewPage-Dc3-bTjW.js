import{A as e,F as t,U as ee,a$ as n,a1 as r,a7 as te,aC as i,aE as a,aF as o,aH as s,aI as c,aJ as ne,aL as l,aN as u,aX as d,aY as f,aj as re,an as ie,ao as ae,j as oe,u as se}from"./index-BwKalbrN.js";import{b as ce}from"./useAuth-BsIXqvhY.js";import"./GlobalConfig-Dep5CV3r.js";import"./accountsStore-B6cttbE9.js";import"./tableUtils-jdfVzp2e.js";import{b as p,c as m}from"./common-DPsEy-Xi.js";import{b as le}from"./customerPaymentOrdersStore-CsKThCn7.js";import"./Modal-Dyb5s5Dj.js";import"./usersStore-Bbr-iBSv.js";import{b as h}from"./CustomerPaymentApprove-uRnxMpkb.js";const g={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},_={class:``},v={class:`mb-8`},y={class:`flex items-center justify-between`},b={class:`flex items-center space-x-4`},x={class:`text-sm text-gray-600 dark:text-gray-400`},S={key:0,class:`flex space-x-3`},C={key:0,class:`flex items-center justify-center py-12`},w={key:1,class:`space-y-6`},T={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-6`},E={class:`flex items-center justify-between`},D={class:`flex items-center space-x-4`},O={class:`flex-shrink-0`},k={class:`h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},A={class:`text-lg font-medium text-gray-900 dark:text-white`},j={class:`text-sm text-gray-500 dark:text-gray-400`},M={class:`text-right`},N={class:`mb-2`},P={key:0,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`},F={key:1,class:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`},I={class:`text-2xl font-bold text-gray-900 dark:text-white`},L={class:`text-sm text-gray-500 dark:text-gray-400`},R={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},z={class:`px-6 py-4`},B={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},V={class:`mt-1 text-sm text-gray-900 dark:text-white`},H={class:`mt-1 text-sm text-gray-900 dark:text-white`},U={class:`mt-1 text-sm text-gray-900 dark:text-white`},W={class:`mt-1 text-sm text-gray-900 dark:text-white`},ue={key:0,class:`text-gray-500 dark:text-gray-400`},de={class:`mt-1 text-sm text-gray-900 dark:text-white`},fe={key:0,class:`text-gray-500 dark:text-gray-400`},pe={class:`mt-1 text-sm text-gray-900 dark:text-white`},me={key:0,class:`text-gray-500 dark:text-gray-400`},he={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ge={class:`px-6 py-4`},_e={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},ve={class:`mt-1 text-sm text-gray-900 dark:text-white`},ye={class:`mt-1 text-sm text-gray-900 dark:text-white`},be={class:`mt-1 text-sm text-gray-900 dark:text-white`},xe={class:`mt-1 text-sm text-gray-900 dark:text-white`},Se={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ce={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},we={class:`px-6 py-4`},Te={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},Ee={class:`mt-1 text-sm text-gray-900 dark:text-white`},De={class:`mt-1 text-sm text-gray-900 dark:text-white`},Oe={class:`mt-1 text-sm text-gray-900 dark:text-white`},ke={key:0,class:`md:col-span-2 lg:col-span-3`},Ae={class:`mt-1 text-sm text-gray-900 dark:text-white`},je={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Me={class:`px-6 py-4`},Ne={class:`text-sm text-gray-900 dark:text-white`},Pe={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Fe={class:`px-6 py-4`},Ie={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Le={class:`mt-1 text-sm text-gray-900 dark:text-white`},Re={class:`text-xs text-gray-500 dark:text-gray-400`},ze={class:`mt-1 text-sm text-gray-900 dark:text-white`},Be={class:`text-xs text-gray-500 dark:text-gray-400`},Ve={key:2,class:`text-center py-12`};var G=ne({__name:`ViewPage`,setup(ne){let G=ae(),K=ie(),q=re(),He=le(),{isAdmin:J,isSuperAdmin:Ue}=ce(),Y=d(!1),X=d(null),Z=d(!1),Q=()=>{G.push({name:`customer.payment-orders.index`})},We=()=>{X.value&&G.push({name:`customer.payment-orders.edit`,params:{id:X.value.id}})},Ge=()=>{X.value&&(Z.value=!0)},Ke=async e=>{q.success(`Payment order approved successfully`),await $(),Z.value=!1},$=async()=>{let e=Number(K.params.id);if(!e){q.error(`Invalid payment order ID`),Q();return}Y.value=!0;try{let t=await He.fetchPaymentOrder(e);X.value=t}catch{q.error(`Failed to load payment order`),X.value=null}finally{Y.value=!1}};return l(()=>{$()}),(ne,l)=>(u(),o(`div`,g,[i(`div`,_,[i(`div`,v,[i(`div`,y,[i(`div`,b,[i(`button`,{onClick:Q,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[c(f(te),{class:`w-5 h-5`})]),i(`div`,null,[l[1]||=i(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Payment Order Details `,-1),i(`p`,x,n(X.value?`${X.value.prefix}-${X.value.code}`:`Loading...`),1)])]),X.value&&!Y.value?(u(),o(`div`,S,[!X.value.approved_at&&(f(J)||f(Ue))?(u(),o(`button`,{key:0,onClick:Ge,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[c(f(r),{class:`h-4 w-4 mr-2`}),l[2]||=s(` Approve Payment `,-1)])):a(``,!0),X.value.approved_at?a(``,!0):(u(),o(`button`,{key:1,onClick:We,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[c(f(e),{class:`h-4 w-4 mr-2`}),l[3]||=s(` Edit Order `,-1)]))])):a(``,!0)])]),Y.value?(u(),o(`div`,C,[c(f(t),{class:`h-8 w-8 animate-spin text-blue-600`}),l[4]||=i(`span`,{class:`ml-2 text-gray-600 dark:text-gray-400`},`Loading payment order...`,-1)])):X.value?(u(),o(`div`,w,[i(`div`,T,[i(`div`,E,[i(`div`,D,[i(`div`,O,[i(`div`,k,[c(f(se),{class:`h-8 w-8 text-blue-600 dark:text-blue-400`})])]),i(`div`,null,[i(`h3`,A,n(X.value.prefix)+`-`+n(X.value.code),1),i(`p`,j,` Created `+n(f(m)(X.value.created_at)),1)])]),i(`div`,M,[i(`div`,N,[X.value.approved_at?(u(),o(`span`,P,[c(f(r),{class:`h-4 w-4 mr-1`}),l[5]||=s(` Approved `,-1)])):(u(),o(`span`,F,[c(f(ee),{class:`h-4 w-4 mr-1`}),l[6]||=s(` Pending Approval `,-1)]))]),i(`div`,I,n(f(p)(X.value.amount_usd)),1),i(`div`,L,` Local: `+n(f(p)(X.value.amount)),1)])])]),i(`div`,R,[l[13]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Basic Information`)],-1),i(`div`,z,[i(`dl`,B,[i(`div`,null,[l[7]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Payment Date`,-1),i(`dd`,V,n(f(m)(X.value.date)),1)]),i(`div`,null,[l[8]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Prefix`,-1),i(`dd`,H,n(X.value.prefix),1)]),i(`div`,null,[l[9]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`RCT Book Number`,-1),i(`dd`,U,n(X.value.rtc_book_number),1)]),i(`div`,null,[l[10]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Customer`,-1),i(`dd`,W,[s(n(X.value.customer?.name||`-`)+` `,1),X.value.customer?.code?(u(),o(`span`,ue,` (`+n(X.value.customer.code)+`) `,1)):a(``,!0)])]),i(`div`,null,[l[11]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency`,-1),i(`dd`,de,[s(n(X.value.currency?.name||`-`)+` `,1),X.value.currency?.code?(u(),o(`span`,fe,` (`+n(X.value.currency.code)+`) `,1)):a(``,!0)])]),i(`div`,null,[l[12]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Payment Term`,-1),i(`dd`,pe,[s(n(X.value.customer_payment_term?.name||`-`)+` `,1),X.value.customer_payment_term?.days?(u(),o(`span`,me,` (`+n(X.value.customer_payment_term.days)+` days) `,1)):a(``,!0)])])])])]),i(`div`,he,[l[19]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Financial Details`)],-1),i(`div`,ge,[i(`dl`,_e,[i(`div`,null,[l[14]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Currency Rate`,-1),i(`dd`,ve,n(X.value.currency_rate),1)]),i(`div`,null,[l[15]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Amount`,-1),i(`dd`,ye,n(f(p)(X.value.amount)),1)]),i(`div`,null,[l[16]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Amount USD`,-1),i(`dd`,be,n(f(p)(X.value.amount_usd)),1)]),i(`div`,null,[l[17]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Credit Limit`,-1),i(`dd`,xe,n(f(p)(X.value.credit_limit)),1)]),i(`div`,null,[l[18]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Payment Amount`,-1),i(`dd`,Se,n(f(p)(X.value.last_payment_amount)),1)])])])]),X.value.approved_at?(u(),o(`div`,Ce,[l[24]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Approval Information`)],-1),i(`div`,we,[i(`dl`,Te,[i(`div`,null,[l[20]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved By`,-1),i(`dd`,Ee,n(X.value.approved_by_user?.name||`-`),1)]),i(`div`,null,[l[21]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approved At`,-1),i(`dd`,De,n(f(m)(X.value.approved_at)),1)]),i(`div`,null,[l[22]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Account`,-1),i(`dd`,Oe,n(X.value.account?.name||`-`),1)]),X.value.approve_note?(u(),o(`div`,ke,[l[23]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Approval Note`,-1),i(`dd`,Ae,n(X.value.approve_note),1)])):a(``,!0)])])])):a(``,!0),X.value.note?(u(),o(`div`,je,[l[25]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Notes`)],-1),i(`div`,Me,[i(`p`,Ne,n(X.value.note),1)])])):a(``,!0),i(`div`,Pe,[l[28]||=i(`div`,{class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},[i(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-white`},`Audit Information`)],-1),i(`div`,Fe,[i(`dl`,Ie,[i(`div`,null,[l[26]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created By`,-1),i(`dd`,Le,n(X.value.created_by_user?.name||`-`),1),i(`dd`,Re,n(f(m)(X.value.created_at)),1)]),i(`div`,null,[l[27]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated By`,-1),i(`dd`,ze,n(X.value.updated_by_user?.name||`-`),1),i(`dd`,Be,n(f(m)(X.value.updated_at)),1)])])])])])):Y.value?a(``,!0):(u(),o(`div`,Ve,[c(f(oe),{class:`mx-auto h-12 w-12 text-red-400`}),l[29]||=i(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Payment order not found`,-1),l[30]||=i(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` The payment order you're looking for doesn't exist or has been deleted. `,-1),i(`div`,{class:`mt-6`},[i(`button`,{onClick:Q,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700`},` Back to Payment Orders `)])]))]),c(h,{show:Z.value,"onUpdate:show":l[0]||=e=>Z.value=e,"payment-order":X.value,onApproved:Ke},null,8,[`show`,`payment-order`])]))}}),K=G;export{K as default};