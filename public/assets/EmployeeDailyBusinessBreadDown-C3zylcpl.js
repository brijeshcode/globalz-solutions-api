import{aH as e,aO as t,aQ as n,aR as r,aT as i,aU as a,aW as o,aY as s,au as c,b1 as l,b2 as u,b9 as d,bb as f,bc as p,bd as m,be as ee,bf as h}from"./index-ce_lcC_P.js";import{f as g}from"./common-CZbH6H1Z.js";import{b as _}from"./currencyUtil-N0Xw3KgX.js";var v=class{baseUrl=`/employee/business`;async getMonthlyCommission(e){try{let t=this.buildQueryParams(e),n=await c(`${this.baseUrl}/monthly/commission?${t}`,{loadingMessage:`Loading monthly commission...`,showLoading:!0});return n.data.data}catch(e){throw console.error(`Error fetching monthly commission:`,e),e}}async getEmployeeMonthlyCommission(e){try{let t=this.buildQueryParams(e),n=await c(`${this.baseUrl}/my-monthly/commission?${t}`,{loadingMessage:`Loading your monthly commission...`,showLoading:!0});return n.data.data}catch(e){throw console.error(`Error fetching employee monthly commission:`,e),e}}buildQueryParams(e){if(!e)return``;let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{n!=null&&n!==``&&t.append(e,String(n))}),t.toString()}};const y=new v,b={key:0,class:`rounded-lg shadow-md overflow-hidden`},x={class:`header p-2 flex justify-between`},S={class:`mr-4`},C={key:0,class:`overflow-x-auto`},w={class:`min-w-full border border-gray-300 dark:border-gray-600`},T={class:`bg-gray-100 dark:bg-gray-700 border-b-2 border-gray-300 dark:border-gray-600`},E={key:0,class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},D={key:1,class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},O={class:`bg-white dark:bg-gray-800`},k={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white capitalize border-r border-gray-200 dark:border-gray-700`},A={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},j={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},M={key:0,class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},N={key:1,class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},P={class:`flex items-center`},F={class:`mr-2`},I={class:`w-20 bg-gray-200 rounded-full h-2 dark:bg-gray-700`},L={class:`px-3 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700`},R={class:`px-3 py-3 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400`},z={class:`bg-gray-100 dark:bg-gray-700 border-t-2 border-gray-300 dark:border-gray-600`},B=[`colspan`],te={class:`px-3 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400`},V={key:1,class:`text-center text-gray-500 dark:text-gray-400 py-8`};var H=s({__name:`MontlyCommissionBreakout`,props:{commissionData:{}},setup(s){let c=f({base_amount:!1,progress:!0}),p=n(()=>{let e=4;return c.value.base_amount&&e++,c.value.progress&&e++,e}),m=e=>e==null?`-`:_(e,!0);return(n,s)=>n.commissionData?(l(),a(`div`,b,[r(`div`,x,[s[4]||=r(`h2`,{class:`text-xl font-semibold mb-4 text-gray-900 dark:text-white`},`Commission Breakdown`,-1),r(`div`,null,[r(`label`,S,[d(r(`input`,{type:`checkbox`,"onUpdate:modelValue":s[0]||=e=>c.value.base_amount=e,class:`mr-1`},null,512),[[e,c.value.base_amount]]),s[2]||=o(` Base Amount `,-1)]),r(`label`,null,[d(r(`input`,{type:`checkbox`,"onUpdate:modelValue":s[1]||=e=>c.value.progress=e,class:`mr-1`},null,512),[[e,c.value.progress]]),s[3]||=o(` Progress `,-1)])])]),n.commissionData.commissions&&n.commissionData.commissions.length>0?(l(),a(`div`,C,[r(`table`,w,[r(`thead`,T,[r(`tr`,null,[s[5]||=r(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Label`,-1),s[6]||=r(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Range`,-1),s[7]||=r(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Percent`,-1),c.value.base_amount?(l(),a(`th`,E,`Base Amount`)):i(``,!0),c.value.progress?(l(),a(`th`,D,`Progress`)):i(``,!0),s[8]||=r(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},`Dynamic%`,-1),s[9]||=r(`th`,{class:`px-3 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider`},`Commission`,-1)])]),r(`tbody`,O,[(l(!0),a(t,null,u(n.commissionData.commissions,e=>(l(),a(`tr`,{key:e.rule_id,class:`border-b border-gray-200 dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer`},[r(`td`,k,h(e.commission_label),1),r(`td`,A,h(m(e.minimum_amount))+` - `+h(m(e.maximum_amount)),1),r(`td`,j,h(e.percent)+`%`,1),c.value.base_amount?(l(),a(`td`,M,h(m(e.base_amount)),1)):i(``,!0),c.value.progress?(l(),a(`td`,N,[r(`div`,P,[r(`span`,F,h(e.achievement_percent.toFixed(2))+`%`,1),r(`div`,I,[r(`div`,{class:`bg-blue-600 dark:bg-blue-500 h-2 rounded-full`,style:ee({width:Math.min(e.achievement_percent,100)+`%`})},null,4)])])])):i(``,!0),r(`td`,L,h(e.percent_commission)+`%`,1),r(`td`,R,h(m(e.commission_amount)),1)]))),128))]),r(`tfoot`,z,[r(`tr`,null,[r(`td`,{colspan:p.value,class:`px-3 py-4 text-right text-sm font-semibold text-gray-900 dark:text-white border-r border-gray-300 dark:border-gray-600`},`Total Commission:`,8,B),r(`td`,te,h(m(n.commissionData.total_commission)),1)])])])])):(l(),a(`div`,V,s[10]||=[r(`p`,null,`No commission rules applied for this period.`,-1)]))])):i(``,!0)}}),U=H;const W={key:0,class:`rounded-lg shadow-md overflow-hidden`},G={key:0,class:`overflow-x-auto`},K={class:`min-w-full border border-gray-300 dark:border-gray-600`},q={class:`bg-gray-100 dark:bg-gray-700 border-b-2 border-gray-300 dark:border-gray-600`},J={class:`bg-white dark:bg-gray-800`},Y={class:`px-3 py-1 whitespace-nowrap text-center text-sm font-medium text-gray-900 dark:text-white border-r border-gray-200 dark:border-gray-700`},X={class:`px-3 py-1 whitespace-nowrap text-center text-sm text-gray-900 dark:text-white bg-blue-50/50 dark:bg-blue-900/10 border-r border-gray-200 dark:border-gray-700`},Z={class:`px-3 py-1 whitespace-nowrap text-right text-sm text-gray-600 dark:text-gray-300 bg-green-50/50 dark:bg-green-900/10 border-r border-gray-200 dark:border-gray-700`},Q={class:`px-3 py-1 whitespace-nowrap text-right text-sm text-gray-600 dark:text-gray-300 bg-red-50/50 dark:bg-red-900/10 border-r border-gray-200 dark:border-gray-700`},ne={class:`bg-gray-100 dark:bg-gray-700 border-t-2 border-gray-300 dark:border-gray-600`},re={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-green-50 dark:bg-green-900 border-r border-b border-gray-300 dark:border-gray-600`},ie={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-red-50 dark:bg-red-900 border-r border-b border-gray-300 dark:border-gray-600`},ae={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-yellow-50 dark:bg-yellow-900 border-r border-b border-gray-300 dark:border-gray-600`},oe={class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},$={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-green-50 dark:bg-green-900/50 border-r border-b border-gray-300 dark:border-gray-600`},se={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-red-50 dark:bg-red-900/50 border-r border-b border-gray-300 dark:border-gray-600`},ce={class:`px-3 py-1 text-right text-sm font-bold text-gray-900 dark:text-white bg-yellow-50 dark:bg-yellow-900/50 border-r border-b border-gray-300 dark:border-gray-600`},le={class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white bg-blue-50 dark:bg-blue-900 border-r border-b border-gray-300 dark:border-gray-600`},ue={colspan:`2`,class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white bg-green-50 dark:bg-green-900 border-r border-b border-gray-300 dark:border-gray-600`},de={colspan:`2`,class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-red-100 bg-red-50 dark:bg-red-900/40 border-r border-b border-gray-300 dark:border-gray-600`},fe={colspan:`2`,class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white bg-yellow-50 dark:bg-yellow-900/80 border-r border-b border-gray-300 dark:border-gray-600`},pe={key:1,class:`text-center text-gray-500 dark:text-gray-400 py-8`};var me=s({__name:`EmployeeDailyBusinessBreadDown`,props:{commissionData:{}},setup(e){let o=e,s=new Date().getDate(),c=e=>{let t=new Date,n=t.getMonth()+1,r=t.getFullYear();return e===s&&o.commissionData.business_summary.month===n&&o.commissionData.business_summary.year===r},d=n(()=>o.commissionData.daily_business.reduce((e,t)=>{let n=t.sales.INV?.count||0,r=t.sales.INX?.count||0;return e+n+r},0)),f=n(()=>o.commissionData.business_summary.total_payments-o.commissionData.business_summary.total_sales-o.commissionData.business_summary.total_returns);return(e,n)=>e.commissionData?(l(),a(`div`,W,[n[10]||=r(`h2`,{class:`text-xl font-semibold mb-4 text-gray-900 dark:text-white`},`Daily Business`,-1),e.commissionData.daily_business&&e.commissionData.daily_business.length>0?(l(),a(`div`,G,[r(`table`,K,[r(`thead`,q,[n[2]||=r(`tr`,null,[r(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-gray-700 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`}),r(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-sky-700 dark:text-sky-300 bg-blue-50 dark:bg-blue-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`}),r(`th`,{colspan:`2`,class:`px-3 py-3 text-center text-xs font-bold text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`},`Sales`),r(`th`,{colspan:`2`,class:`px-3 py-3 text-center text-xs font-bold text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider border-b`},`Returns`),r(`th`,{colspan:`2`,class:`px-3 py-3 text-center text-xs font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-50 dark:bg-yellow-900/20 uppercase tracking-wider border-b border-r border-gray-300 dark:border-gray-600`},`Collection`)],-1),r(`tr`,null,[n[0]||=r(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-gray-700 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},`Day`,-1),n[1]||=r(`th`,{class:`px-3 py-3 text-center text-xs font-bold text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},`# Invoice`,-1),(l(!0),a(t,null,u(e.commissionData.daily_business[0].sales,(e,t)=>(l(),a(`th`,{key:t,class:`px-3 py-3 text-right text-xs font-bold text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},h(t),1))),128)),(l(!0),a(t,null,u(e.commissionData.daily_business[0].returns,(e,t)=>(l(),a(`th`,{key:t,class:`px-3 py-3 text-right text-xs font-bold text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 border-r border-gray-300 dark:border-gray-600 uppercase tracking-wider`},h(t),1))),128)),(l(!0),a(t,null,u(e.commissionData.daily_business[0].payments,(e,t)=>(l(),a(`th`,{key:t,class:`px-3 py-3 text-right text-xs font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-50 dark:bg-yellow-900/20 uppercase tracking-wider border-r border-gray-300 dark:border-gray-600`},h(t),1))),128))])]),r(`tbody`,J,[(l(!0),a(t,null,u(e.commissionData.daily_business,e=>(l(),a(`tr`,{key:e.day,class:m([`border-b border-gray-200 dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer`,c(e.day)?`bg-yellow-100 dark:bg-yellow-900/30 font-semibold`:``])},[r(`td`,Y,h(e.day),1),r(`td`,X,h(e.sales.INV.count+e.sales.INX.count),1),(l(!0),a(t,null,u(e.sales,e=>(l(),a(`td`,Z,h(e.total),1))),256)),(l(!0),a(t,null,u(e.returns,e=>(l(),a(`td`,Q,h(e.total),1))),256)),(l(!0),a(t,null,u(e.payments,(t,n)=>(l(),a(`td`,{key:`pre-data`+e.day,class:`px-3 py-1 whitespace-nowrap text-right text-sm text-gray-600 dark:text-gray-300 bg-yellow-50/50 dark:bg-yellow-900/10`},h(t.total),1))),128))],2))),128))]),r(`tfoot`,ne,[r(`tr`,null,[n[3]||=r(`td`,{class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},`Total`,-1),n[4]||=r(`td`,{class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white bg-blue-50 dark:bg-blue-900 border-r border-b border-gray-300 dark:border-gray-600`},null,-1),(l(!0),a(t,null,u(e.commissionData.business_summary.sales_by_prefix,e=>(l(),a(`td`,re,h(e.total),1))),256)),(l(!0),a(t,null,u(e.commissionData.business_summary.returns_by_prefix,e=>(l(),a(`td`,ie,h(e.total),1))),256)),(l(!0),a(t,null,u(e.commissionData.business_summary.payments_by_prefix,e=>(l(),a(`td`,ae,h(e.total),1))),256))]),r(`tr`,null,[n[5]||=r(`td`,{class:`px-3 py-1 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},`Without VAT`,-1),r(`td`,oe,h(e.commissionData.business_summary.VAT),1),(l(!0),a(t,null,u(e.commissionData.business_summary.sales_by_prefix,e=>(l(),a(`td`,$,h(p(g)(e.after_tax_total)),1))),256)),(l(!0),a(t,null,u(e.commissionData.business_summary.returns_by_prefix,e=>(l(),a(`td`,se,h(p(g)(e.after_tax_total)),1))),256)),(l(!0),a(t,null,u(e.commissionData.business_summary.payments_by_prefix,e=>(l(),a(`td`,ce,h(p(g)(e.after_tax_total)),1))),256))]),r(`tr`,null,[n[6]||=r(`td`,{class:`px-3 py-2 text-center text-sm font-bold text-gray-900 dark:text-white border-r border-b border-gray-300 dark:border-gray-600`},`Month Total`,-1),r(`td`,le,h(d.value),1),r(`td`,ue,h(p(g)(e.commissionData.business_summary.total_sales)),1),r(`td`,de,h(p(g)(e.commissionData.business_summary.total_returns)),1),r(`td`,fe,h(p(g)(e.commissionData.business_summary.total_payments)),1)]),r(`tr`,null,[n[7]||=r(`td`,{class:`px-3 py-2 text-center text-sm font-bold bg-green-50 text-green-900 dark:bg-green-500/50 dark:text-white border-r border-b border-green-300 dark:border-green-600`},`Total Balance`,-1),r(`td`,{class:m([f.value>0?` bg-green-50 text-green-900 dark:bg-green-500/50 dark:text-white`:` bg-red-50 text-red-900 dark:bg-red-500/50 dark:text-white`,`px-3 py-2 text-center text-sm font-bold border-r border-b border-green-300 dark:border-green-600`])},h(p(g)(f.value)),3),n[8]||=r(`td`,{colspan:`6`,class:`px-3 py-2 text-center text-sm font-bold bg-green-50 text-green-900 dark:bg-green-500/50 dark:text-white border-r border-b border-green-300 dark:border-green-600`},`(total payments - total sale - total return )`,-1)])])])])):(l(),a(`div`,pe,n[9]||=[r(`p`,null,`No daily business data available for this period.`,-1)]))])):i(``,!0)}}),he=me;export{he as b,U as c,y as d};