import{F as e,R as t,a$ as n,aB as r,aC as i,aD as a,aE as o,aF as s,aH as c,aI as l,aJ as u,aN as d,aO as f,aT as p,aU as m,aV as ee,aX as h,aY as g,aZ as _,as as te,ay as v,az as y,e as b,h as x}from"./index-BAD4uQTp.js";import{b as ne}from"./Modal-Ck7_9jbA.js";const re={class:`space-y-4 max-h-[60vh] overflow-y-auto pr-2`},ie={key:0,class:`text-sm text-gray-600 dark:text-gray-400`},ae={class:`flex items-center space-x-2`},oe={class:`space-y-2`},se={class:`flex justify-between items-center`},ce=[`disabled`],le=[`accept`,`disabled`],ue={class:`text-center`},de={class:`mt-2`},fe={key:0,class:`text-sm text-gray-600 dark:text-gray-400`},pe={key:1,class:`text-sm font-medium text-green-600 dark:text-green-400`},me={class:`text-xs text-gray-500 dark:text-gray-500 mt-1`},S=[`disabled`],C={key:1,class:`bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4`},w={key:0,class:`text-sm text-gray-600 dark:text-gray-400 space-y-1 list-disc list-inside mt-2`},T={key:2,class:`bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg p-4 border border-green-200 dark:border-green-700`},E={class:`flex items-start justify-between mb-3`},D={class:`flex items-center space-x-2`},O={class:`text-sm font-semibold text-gray-900 dark:text-gray-100`},k={class:`grid grid-cols-2 md:grid-cols-4 gap-3 mb-3`},A={class:`bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm`},j={class:`text-lg font-bold text-green-600 dark:text-green-400`},M={class:`bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm`},N={class:`text-lg font-bold text-blue-600 dark:text-blue-400`},P={class:`bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm`},F={class:`text-lg font-bold text-yellow-600 dark:text-yellow-400`},I={class:`bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm`},L={class:`text-lg font-bold text-red-600 dark:text-red-400`},R={key:0,class:`space-y-2`},z={key:0,class:`space-y-3 pt-2`},he={class:`text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2 capitalize`},ge={class:`grid grid-cols-4 gap-2 text-xs mb-2`},_e={class:`font-semibold ml-1`},ve={class:`font-semibold text-green-600 dark:text-green-400 ml-1`},ye={class:`font-semibold text-blue-600 dark:text-blue-400 ml-1`},be={class:`font-semibold text-yellow-600 dark:text-yellow-400 ml-1`},xe={key:0,class:`mt-2 pt-2 border-t border-gray-200 dark:border-gray-700`},Se={class:`space-y-1`},Ce={class:`font-medium`},we={key:1,class:`mt-3`},Te={class:`bg-red-50 dark:bg-red-900/20 rounded-lg p-3 border border-red-200 dark:border-red-700`},Ee={class:`flex items-center justify-between mb-2`},De={class:`text-sm font-medium text-red-600 dark:text-red-400`},Oe={key:0,class:`max-h-48 overflow-y-auto`},ke={class:`space-y-1`},Ae={class:`font-medium`},je={class:`flex items-center justify-end space-x-3`},Me=[`disabled`],Ne=[`disabled`];var B=u({__name:`ImportModal`,props:{modelValue:{type:Boolean},title:{default:`Import Data`},description:{default:`Upload a file to import data into the system.`},acceptTypes:{default:`.csv,.xlsx,.xls`},acceptTypesLabel:{default:`CSV or Excel files only`},instructions:{default:()=>[]},loading:{type:Boolean},importResult:{default:null}},emits:[`update:modelValue`,`import`,`downloadTemplate`,`close`,`clearResult`],setup(u,{emit:B}){let V=u,H=B,U=h(null),W=h(null),G=h(!1),K=h(!1),q=h(!1),J=h(!1),Y=h(!1),X=r({get:()=>V.modelValue,set:e=>H(`update:modelValue`,e)}),Pe=r(()=>V.importResult?.data?`sheets`in V.importResult.data&&V.importResult.data.sheets!==void 0:!1),Z=r(()=>V.importResult?.data?{total_imported:V.importResult.data.imported||0,total_updated:V.importResult.data.updated||0,total_skipped:V.importResult.data.skipped||0,total_errors:V.importResult.data.errors?.length||0}:null);p(()=>V.loading,e=>{K.value=e});let Fe=()=>{K.value||U.value?.click()},Ie=e=>{let t=e.target,n=t.files?.[0];n&&(W.value=n)},Le=e=>{G.value=!1;let t=e.dataTransfer?.files[0];if(t){let e=`.`+t.name.split(`.`).pop()?.toLowerCase();V.acceptTypes.includes(e)&&(W.value=t)}},Re=()=>{W.value=null,U.value&&(U.value.value=``)},Q=()=>{H(`downloadTemplate`)},ze=()=>{W.value&&H(`import`,W.value,q.value)},$=()=>{K.value||(W.value=null,q.value=!1,U.value&&(U.value.value=``),V.importResult&&H(`clearResult`),H(`update:modelValue`,!1),H(`close`))},Be=()=>{H(`clearResult`)},Ve=()=>V.importResult?.data?.sheets?V.importResult.data.sheets:{},He=e=>e.replace(/_/g,` `).replace(/\b\w/g,e=>e.toUpperCase());return p(()=>V.modelValue,e=>{e||(W.value=null,q.value=!1,U.value&&(U.value.value=``),V.importResult&&H(`clearResult`))}),(r,u)=>(d(),a(ne,{modelValue:X.value,"onUpdate:modelValue":u[6]||=e=>X.value=e,title:r.title,size:`2xl`,loading:K.value,onClose:$},{footer:m(()=>[i(`div`,je,[i(`button`,{onClick:$,disabled:K.value,class:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Cancel `,8,Me),i(`button`,{onClick:ze,disabled:!W.value||K.value,class:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[K.value?(d(),a(g(e),{key:1,class:`h-4 w-4 mr-2 animate-spin`})):(d(),a(g(x),{key:0,class:`h-4 w-4 mr-2`})),c(` `+n(K.value?`Importing...`:`Import`),1)],8,Ne)])]),default:m(()=>[i(`div`,re,[r.description?(d(),s(`p`,ie,n(r.description),1)):o(``,!0),u[25]||=i(`div`,{class:`flex justify-end`},null,-1),i(`div`,ae,[ee(i(`input`,{id:`update-existing`,"onUpdate:modelValue":u[0]||=e=>q.value=e,type:`checkbox`,class:`h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700`},null,512),[[te,q.value]]),u[7]||=i(`label`,{for:`update-existing`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Update existing records if they already exist `,-1)]),i(`div`,oe,[i(`div`,se,[u[9]||=i(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300`},` Select File to Import `,-1),i(`button`,{onClick:Q,disabled:K.value,class:`mt-3 inline-flex items-center px-2 py-1 border border-blue-300 dark:border-blue-600 rounded-md shadow-sm text-sm font-medium text-blue-700 dark:text-blue-200 bg-white dark:bg-blue-900/30 hover:bg-blue-50 dark:hover:bg-blue-900/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[l(g(t),{class:`h-4 w-4 mr-2`}),u[8]||=c(` Download Template `,-1)],8,ce)]),i(`div`,{onClick:Fe,onDrop:v(Le,[`prevent`]),onDragover:u[1]||=v(e=>G.value=!0,[`prevent`]),onDragleave:u[2]||=v(e=>G.value=!1,[`prevent`]),class:_([`relative border-2 border-dashed rounded-lg p-2 transition-colors duration-200 cursor-pointer`,G.value?`border-blue-500 bg-blue-50 dark:bg-blue-900/20`:W.value?`border-green-300 dark:border-green-700 bg-green-50 dark:bg-green-900/20`:`border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500`])},[i(`input`,{ref_key:`fileInput`,ref:U,type:`file`,accept:r.acceptTypes,class:`hidden`,onChange:Ie,disabled:K.value},null,40,le),i(`div`,ue,[l(g(x),{class:_([`mx-auto h-12 w-12`,W.value?`text-green-500 dark:text-green-400`:`text-gray-400 dark:text-gray-500`])},null,8,[`class`]),i(`div`,de,[W.value?(d(),s(`p`,pe,n(W.value.name),1)):(d(),s(`p`,fe,u[10]||=[i(`span`,{class:`font-semibold text-blue-600 dark:text-blue-400`},`Click to upload`,-1),c(` or drag and drop `,-1)]))]),i(`p`,me,n(r.acceptTypesLabel),1)]),W.value?(d(),s(`button`,{key:0,onClick:v(Re,[`stop`]),class:`absolute top-2 right-2 p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors duration-200`,disabled:K.value},[l(g(b),{class:`h-5 w-5`})],8,S)):o(``,!0)],34)]),r.instructions&&r.instructions.length>0?(d(),s(`div`,C,[i(`button`,{onClick:u[3]||=e=>J.value=!J.value,class:`flex items-center justify-between w-full text-left focus:outline-none`,type:`button`},[u[12]||=i(`h4`,{class:`text-sm font-medium text-gray-900 dark:text-gray-200`},` Import Instructions: `,-1),(d(),s(`svg`,{class:_([`w-4 h-4 transition-transform duration-200`,J.value?`rotate-180`:``]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},u[11]||=[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))]),J.value?(d(),s(`ul`,w,[(d(!0),s(y,null,f(r.instructions,(e,t)=>(d(),s(`li`,{key:t},n(e),1))),128))])):o(``,!0)])):o(``,!0),r.importResult?(d(),s(`div`,T,[i(`div`,E,[i(`div`,D,[u[13]||=i(`svg`,{class:`w-5 h-5 text-green-600 dark:text-green-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})],-1),i(`h4`,O,n(r.importResult.message),1)]),i(`button`,{onClick:Be,class:`text-gray-400 hover:text-gray-600 dark:hover:text-gray-300`},[l(g(b),{class:`h-4 w-4`})])]),i(`div`,k,[i(`div`,A,[u[14]||=i(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Imported`,-1),i(`div`,j,n(Z.value?.total_imported||0),1)]),i(`div`,M,[u[15]||=i(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Updated`,-1),i(`div`,N,n(Z.value?.total_updated||0),1)]),i(`div`,P,[u[16]||=i(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Skipped`,-1),i(`div`,F,n(Z.value?.total_skipped||0),1)]),i(`div`,I,[u[17]||=i(`div`,{class:`text-xs text-gray-500 dark:text-gray-400`},`Errors`,-1),i(`div`,L,n(Z.value?.total_errors||0),1)])]),Pe.value?(d(),s(`div`,R,[i(`button`,{onClick:u[4]||=e=>Y.value=!Y.value,class:`flex items-center justify-between w-full text-left focus:outline-none text-sm font-medium text-gray-700 dark:text-gray-300`,type:`button`},[u[19]||=i(`span`,null,`Detailed Breakdown`,-1),(d(),s(`svg`,{class:_([`w-4 h-4 transition-transform duration-200`,Y.value?`rotate-180`:``]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},u[18]||=[i(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)],2))]),Y.value?(d(),s(`div`,z,[(d(!0),s(y,null,f(Ve(),(e,t)=>(d(),s(`div`,{key:t,class:`bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm`},[i(`h5`,he,n(He(t)),1),i(`div`,ge,[i(`div`,null,[u[20]||=i(`span`,{class:`text-gray-500 dark:text-gray-400`},`Total:`,-1),i(`span`,_e,n(e.total),1)]),i(`div`,null,[u[21]||=i(`span`,{class:`text-gray-500 dark:text-gray-400`},`Imported:`,-1),i(`span`,ve,n(e.imported),1)]),i(`div`,null,[u[22]||=i(`span`,{class:`text-gray-500 dark:text-gray-400`},`Updated:`,-1),i(`span`,ye,n(e.updated),1)]),i(`div`,null,[u[23]||=i(`span`,{class:`text-gray-500 dark:text-gray-400`},`Skipped:`,-1),i(`span`,be,n(e.skipped),1)])]),e.errors&&e.errors.length>0?(d(),s(`div`,xe,[u[24]||=i(`div`,{class:`text-xs font-medium text-red-600 dark:text-red-400 mb-1`},`Errors:`,-1),i(`ul`,Se,[(d(!0),s(y,null,f(e.errors,(e,t)=>(d(),s(`li`,{key:t,class:`text-xs text-red-600 dark:text-red-400 pl-2`},[i(`span`,Ce,`Row `+n(e.row)+`:`,1),c(` `+n(e.error),1)]))),128))])])):o(``,!0)]))),128))])):o(``,!0)])):o(``,!0),r.importResult.data.errors&&r.importResult.data.errors.length>0?(d(),s(`div`,we,[i(`div`,Te,[i(`div`,Ee,[i(`div`,De,` Import Errors (`+n(r.importResult.data.errors.length)+`) `,1),i(`button`,{onClick:u[5]||=e=>Y.value=!Y.value,class:`text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300`,type:`button`},n(Y.value?`Hide`:`Show`)+` Details `,1)]),Y.value?(d(),s(`div`,Oe,[i(`ul`,ke,[(d(!0),s(y,null,f(r.importResult.data.errors,(e,t)=>(d(),s(`li`,{key:t,class:`text-xs text-red-600 dark:text-red-400 py-1 border-b border-red-100 dark:border-red-800 last:border-0`},[i(`span`,Ae,`Row `+n(e.row)+`:`,1),c(` `+n(e.error),1)]))),128))])])):o(``,!0)])])):o(``,!0)])):o(``,!0)])]),_:1},8,[`modelValue`,`title`,`loading`]))}}),V=B;export{V as b};