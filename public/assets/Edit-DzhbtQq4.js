import{B as e,I as t,Y as n,_ as r,a1 as i,a4 as a,a5 as o,a7 as s,a8 as c,aa as l,ab as u,ac as d,ae as f,ag as p,aj as m,am as h,ao as g,aq as _,ar as v,as as y,au as b}from"./index-Df_fqmr9.js";import{c as x,d as ee}from"./Create-BFDiVYcV.js";const te={class:`max-w-7xl px-4 sm:px-6 lg:px-8 py-8`},ne={class:`max-w-2xl`},re={class:`mb-8`},ie={class:`flex items-center space-x-4 mb-2`},ae={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},oe={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},S={class:`px-6 py-8`},C={key:0,class:`mt-1 text-xs text-gray-500`},w=[`disabled`],T={class:`flex justify-between items-center mt-1`},E={key:0,class:`text-sm text-red-600 dark:text-red-400`},D={class:`text-xs text-gray-500 ml-auto`},O={class:`flex items-start`},k={class:`flex items-center h-5`},A=[`disabled`],j={class:`flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700`},M=[`disabled`],N=[`disabled`],P={key:0,class:`flex items-center justify-center`},F={key:1},I={key:2,class:`bg-white dark:bg-gray-800 shadow rounded-lg p-8`},se={class:`flex flex-col items-center`};var L=d({__name:`Edit`,props:{id:{},itemType:{}},emits:[`back`,`success`,`cancel`],setup(d,{emit:L}){let R=d,z=L,B=ee(),{errors:ce,hasErrors:V,getFieldError:H,validateUpdateRequest:U,clearFieldError:W,setServerErrors:G,clearErrors:K}=x(),q=_(!1),J=_(!1);_(!1);let Y=_({name:``,description:``,is_active:!0}),X=_({name:``,description:``,is_active:!0}),le=a(()=>{let e=[`ring-gray-300 dark:ring-gray-600`,`focus:ring-indigo-600 dark:focus:ring-indigo-400`];return H(`description`)?[`ring-red-300 dark:ring-red-500`,`focus:ring-red-500 dark:focus:ring-red-400`].join(` `):q.value?[...e,`disabled:cursor-not-allowed`,`disabled:bg-gray-50 dark:disabled:bg-gray-800`,`disabled:text-gray-500 dark:disabled:text-gray-400`].join(` `):e.join(` `)}),ue=a(()=>Y.value.name.trim().length>0&&Y.value.name.length<=255&&(Y.value.description?.length||0)<=500),Z=async()=>{try{J.value=!0;let e=R.itemType||await B.fetchItemType(R.id);e&&(Y.value={name:e.name,description:e.description||``,is_active:e.is_active},X.value={name:e.name,description:e.description||``,is_active:e.is_active},K())}catch(e){console.error(`Error loading item type:`,e)}finally{J.value=!1}},Q=async()=>{if(K(),U(Y.value))try{q.value=!0;let e={name:Y.value.name,description:Y.value.description,is_active:Y.value.is_active};await B.updateItemType(R.id,e),X.value={...Y.value},z(`success`)}catch(e){e.response?.status===422&&e.response?.data?.errors&&G(e.response.data.errors)}finally{q.value=!1}},de=()=>{z(`cancel`)},$=()=>{z(`back`)};return f(()=>{Z()}),h(()=>R.id,()=>{R.id&&Z()}),(a,d)=>{let f=m(`Input`);return p(),c(`div`,te,[o(`div`,ne,[o(`div`,re,[o(`div`,ie,[o(`button`,{onClick:$,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[u(v(t),{class:`w-5 h-5`})]),d[5]||=o(`div`,null,[o(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Edit Item Type `),o(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` Update item type classification `)],-1)])]),J.value?(p(),c(`div`,ae,d[6]||=[o(`div`,{class:`flex items-center justify-center`},[o(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-4`}),o(`span`,{class:`text-gray-600 dark:text-gray-400`},`Loading item type...`)],-1)])):Y.value?(p(),c(`div`,oe,[o(`div`,S,[o(`form`,{onSubmit:i(Q,[`prevent`]),class:`space-y-6`},[o(`div`,null,[d[7]||=o(`label`,{for:`name`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[l(` Name `),o(`span`,{class:`text-red-500 ml-1`},`*`)],-1),u(f,{id:`name`,modelValue:Y.value.name,"onUpdate:modelValue":d[0]||=e=>Y.value.name=e,type:`text`,placeholder:`Enter item type name`,disabled:q.value,error:v(H)(`name`),maxlength:255,required:``,onBlur:d[1]||=()=>v(W)(`name`),class:`w-full`},null,8,[`modelValue`,`disabled`,`error`]),Y.value.name.length>0?(p(),c(`p`,C,b(Y.value.name.length)+`/255 characters `,1)):s(``,!0)]),o(`div`,null,[d[8]||=o(`label`,{for:`description`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Description `,-1),g(o(`textarea`,{id:`description`,"onUpdate:modelValue":d[2]||=e=>Y.value.description=e,rows:`4`,placeholder:`Enter item type description (optional)`,disabled:q.value,class:y([le.value,`block w-full rounded-md border-0 py-2 px-3 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6 transition-colors duration-200 bg-white dark:bg-gray-800 resize-vertical`]),onBlur:d[3]||=()=>v(W)(`description`),maxlength:`500`},null,42,w),[[r,Y.value.description]]),o(`div`,T,[v(H)(`description`)?(p(),c(`p`,E,b(v(H)(`description`)),1)):s(``,!0),o(`p`,D,b(Y.value.description?.length||0)+`/500 characters `,1)])]),o(`div`,O,[o(`div`,k,[g(o(`input`,{id:`is_active`,"onUpdate:modelValue":d[4]||=e=>Y.value.is_active=e,type:`checkbox`,disabled:q.value,class:`h-4 w-4 text-indigo-600 focus:ring-indigo-600 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800`},null,8,A),[[n,Y.value.is_active]])]),d[9]||=o(`div`,{class:`ml-3`},[o(`label`,{for:`is_active`,class:`text-sm font-medium text-gray-700 dark:text-gray-300`},` Active `),o(`p`,{class:`text-xs text-gray-500 dark:text-gray-400`},` When enabled, this item type will be available for selection `)],-1)]),o(`div`,j,[o(`button`,{type:`button`,onClick:de,disabled:q.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},` Cancel `,8,M),o(`button`,{type:`submit`,disabled:q.value||v(V)||!ue.value,class:`w-full sm:w-auto px-6 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[q.value?(p(),c(`div`,P,d[10]||=[o(`div`,{class:`animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2`},null,-1),l(` Updating... `,-1)])):(p(),c(`span`,F,`Update Item Type`))],8,N)])],32)])])):(p(),c(`div`,I,[o(`div`,se,[u(v(e),{class:`w-12 h-12 text-red-400 mb-4`}),d[11]||=o(`h3`,{class:`text-lg font-medium text-gray-900 dark:text-gray-100 mb-2`},` Item Type Not Found `,-1),d[12]||=o(`p`,{class:`text-gray-500 dark:text-gray-400 mb-6`},` The item type you're trying to edit could not be found. `,-1),o(`button`,{onClick:$,class:`px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300`},` ‚Üê Back to Item Types `)])]))])])}}}),R=L;export{R as b};