import{a$ as e,aC as t,aD as n,aG as r,aH as i,aJ as a,aK as o,aM as s,aN as c,aP as l,aQ as u,aR as d,aT as ee,aV as f,aW as p,aY as te,ar as ne,av as re,aw as ie,b0 as m,b1 as h,b3 as g,b4 as ae,b7 as _}from"./index-XQho0VzF.js";import"./GlobalConfig-Dep5CV3r.js";import"./tableUtils-BFc6-TYF.js";import{b as oe}from"./currenciesStore-BTVMnjlx.js";import{c as se,d as v,e as y}from"./currencyUtil-D2yH49xI.js";import{c as ce}from"./itemsStore-BRsb4IHy.js";import{b as le}from"./suppliersStore-By6jJO_X.js";import{c as ue}from"./warehousesStore-Du6YRQYr.js";import{b as de}from"./PurchaseReturnStore-Cn5MXDjB.js";const fe={class:`min-h-screen bg-gray-50 dark:bg-gray-900 py-8`},pe={class:`max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8`},me={class:`mb-8`},he={class:`flex items-center justify-between`},ge={key:0,class:`flex justify-center items-center py-12`},_e={class:`bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6`},ve={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},b=[`value`],x=[`value`],S=[`value`],C=[`disabled`],w={class:`bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6`},T={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},E={class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},D=[`value`],O={class:`bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6`},k={class:`flex justify-between items-center mb-4`},A={class:`flex gap-2`},j={class:`overflow-x-auto`},M={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},N={class:`bg-gray-50 dark:bg-gray-700`},P={key:0,class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},F={key:1,class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},ye={key:2,class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},be={key:3,class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},xe={key:4,class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Se={key:5,class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},Ce={key:6,class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},we={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},Te={class:`px-4 py-3 whitespace-nowrap`},Ee=[`onUpdate:modelValue`,`onChange`],De=[`value`],Oe={class:`px-4 py-3 whitespace-nowrap`},ke=[`onUpdate:modelValue`],Ae={class:`px-4 py-3 whitespace-nowrap`},je=[`onUpdate:modelValue`],Me={class:`px-4 py-3 whitespace-nowrap`},Ne=[`onUpdate:modelValue`],Pe={class:`px-4 py-3 whitespace-nowrap`},Fe=[`onUpdate:modelValue`],Ie={key:0,class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Le={class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Re={key:1,class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},ze={key:2,class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Be={key:3,class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ve={key:4,class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},He={key:5,class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},Ue={key:6,class:`px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white`},We={class:`px-4 py-3 whitespace-nowrap`},Ge=[`onUpdate:modelValue`],Ke={class:`px-4 py-3 whitespace-nowrap`},qe=[`onClick`],Je={class:`bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6`},Ye={class:`space-y-3`},Xe={class:`flex justify-between items-center`},Ze={class:`text-sm text-gray-600 dark:text-gray-400`},Qe={class:`text-sm font-medium text-gray-900 dark:text-white`},$e={class:`flex justify-between items-center`},et={class:`text-sm font-medium text-gray-900 dark:text-white`},tt={class:`flex justify-between items-center`},nt={class:`text-sm font-medium text-gray-900 dark:text-white`},rt={class:`flex justify-between items-center border-t border-gray-200 dark:border-gray-700 pt-3`},it={class:`text-sm text-gray-600 dark:text-gray-400`},at={class:`text-sm font-medium text-gray-900 dark:text-white`},ot={class:`flex justify-between items-center`},st={class:`text-sm font-medium text-gray-900 dark:text-white`},ct={class:`flex justify-between items-center`},lt={class:`text-sm font-medium text-gray-900 dark:text-white`},ut={class:`flex justify-between items-center`},dt={class:`text-sm font-medium text-gray-900 dark:text-white`},ft={class:`flex justify-between items-center`},pt={class:`text-sm font-medium text-gray-900 dark:text-white`},mt={class:`flex justify-between items-center`},ht={class:`text-sm font-medium text-gray-900 dark:text-white`},gt={class:`flex justify-between items-center border-t-2 border-gray-300 dark:border-gray-600 pt-3`},_t={class:`text-base font-semibold text-gray-900 dark:text-white`},vt={class:`text-base font-bold text-gray-900 dark:text-white`},yt={class:`flex justify-between items-center`},bt={class:`text-base font-bold text-gray-900 dark:text-white`},xt={class:`bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6`},St={class:`flex justify-end gap-4`},Ct=[`disabled`];var I=d({__name:`EditPage`,setup(d){let I=ie(),L=re(),R=de(),z=le(),B=ue(),V=oe(),H=ce(),{showSuccess:wt,showError:U}=ne(),W=g(!0),G=g(!1),K=g(!1),q=g({prefix:`PURTN`,date:new Date().toISOString().split(`T`)[0],supplier_id:null,warehouse_id:null,currency_id:null,currency_rate:1,supplier_purchase_return_number:null,shipping_fee_usd:0,customs_fee_usd:0,other_fee_usd:0,tax_usd:0,shipping_fee_usd_percent:0,customs_fee_usd_percent:0,other_fee_usd_percent:0,tax_usd_percent:0,sub_total:0,sub_total_usd:0,additional_charge_amount:0,additional_charge_amount_usd:0,total:0,total_usd:0,final_total:0,final_total_usd:0,note:null,items:[]}),Tt=a(()=>z.suppliers),Et=a(()=>B.warehouses),J=a(()=>V.currencies),Y=a(()=>H.items),Dt=a(()=>J.value.find(e=>e.id===q.value.currency_id)),X=a(()=>Dt.value?.code||`USD`),Ot=()=>{K.value=!K.value},Z=e=>new Intl.NumberFormat(`en-US`,{minimumFractionDigits:2,maximumFractionDigits:2}).format(e||0),Q=()=>{if(v(q.value.currency_id))q.value.currency_rate=1;else{let e=J.value.find(e=>e.id===q.value.currency_id);e&&(q.value.currency_rate=e.exchange_rate||1)}$()},kt=e=>{let t=parseFloat(e.target.value)||0;q.value.additional_charge_amount=t,q.value.additional_charge_amount_usd=y(t,q.value.currency_rate,q.value.currency_id),$()},At=e=>{let t=q.value.items[e],n=Y.value.find(e=>e.id===t.item_id);n&&(t.item_code=n.code)},jt=()=>{q.value.items.push({item_code:``,item_id:null,price:0,quantity:1,discount_percent:0,unit_discount_amount:0,discount_amount:0,total_price:0,total_price_usd:0,total_shipping_usd:0,total_customs_usd:0,total_other_usd:0,final_total_cost_usd:0,cost_per_item_usd:0,note:null})},Mt=e=>{q.value.items.splice(e,1),$()},Nt=e=>{let t=e.price*e.quantity,n=t*(e.discount_percent/100),r=e.unit_discount_amount*e.quantity;e.discount_amount=n+r,e.total_price=t-e.discount_amount,e.total_price_usd=y(e.total_price,q.value.currency_rate,q.value.currency_id)},$=()=>{q.value.items.forEach(e=>{Nt(e)}),q.value.sub_total=q.value.items.reduce((e,t)=>e+t.total_price,0),q.value.sub_total_usd=q.value.items.reduce((e,t)=>e+t.total_price_usd,0),q.value.total=q.value.sub_total+q.value.additional_charge_amount,q.value.total_usd=q.value.sub_total_usd+q.value.additional_charge_amount_usd,q.value.total_usd>0?(q.value.shipping_fee_usd_percent=q.value.shipping_fee_usd/q.value.total_usd*100,q.value.customs_fee_usd_percent=q.value.customs_fee_usd/q.value.total_usd*100,q.value.other_fee_usd_percent=q.value.other_fee_usd/q.value.total_usd*100,q.value.tax_usd_percent=q.value.tax_usd/q.value.total_usd*100):(q.value.shipping_fee_usd_percent=0,q.value.customs_fee_usd_percent=0,q.value.other_fee_usd_percent=0,q.value.tax_usd_percent=0),q.value.items.forEach(e=>{if(q.value.total_usd>0){let t=e.total_price_usd/q.value.total_usd;e.total_shipping_usd=q.value.shipping_fee_usd*t,e.total_customs_usd=q.value.customs_fee_usd*t,e.total_other_usd=q.value.other_fee_usd*t}else e.total_shipping_usd=0,e.total_customs_usd=0,e.total_other_usd=0;e.final_total_cost_usd=e.total_price_usd+e.total_shipping_usd+e.total_customs_usd+e.total_other_usd,e.quantity>0?e.cost_per_item_usd=e.final_total_cost_usd/e.quantity:e.cost_per_item_usd=0}),q.value.final_total_usd=q.value.total_usd+q.value.shipping_fee_usd+q.value.customs_fee_usd+q.value.other_fee_usd+q.value.tax_usd,q.value.final_total=se(q.value.final_total_usd,q.value.currency_rate,q.value.currency_id)},Pt=async()=>{try{W.value=!0;let e=parseInt(L.params.id),t=await R.fetchPurchaseReturn(e);q.value={prefix:`PURTN`,date:t.date,supplier_id:t.supplier_id,warehouse_id:t.warehouse_id,currency_id:t.currency_id,currency_rate:t.currency_rate,supplier_purchase_return_number:t.supplier_purchase_return_number,shipping_fee_usd:t.shipping_fee_usd,customs_fee_usd:t.customs_fee_usd,other_fee_usd:t.other_fee_usd,tax_usd:t.tax_usd,shipping_fee_usd_percent:t.shipping_fee_usd_percent,customs_fee_usd_percent:t.customs_fee_usd_percent,other_fee_usd_percent:t.other_fee_usd_percent,tax_usd_percent:t.tax_usd_percent,sub_total:t.sub_total,sub_total_usd:t.sub_total_usd,additional_charge_amount:t.additional_charge_amount,additional_charge_amount_usd:t.additional_charge_amount_usd,total:t.total,total_usd:t.total_usd,final_total:t.final_total,final_total_usd:t.final_total_usd,note:t.note,items:t.items?.map(e=>({id:e.id,item_code:e.item_code,item_id:e.item_id,price:e.price,quantity:e.quantity,discount_percent:e.discount_percent,unit_discount_amount:e.unit_discount_amount,discount_amount:e.discount_amount,total_price:e.total_price,total_price_usd:e.total_price_usd,total_shipping_usd:e.total_shipping_usd,total_customs_usd:e.total_customs_usd,total_other_usd:e.total_other_usd,final_total_cost_usd:e.final_total_cost_usd,cost_per_item_usd:e.cost_per_item_usd,note:e.note}))||[]}}catch{U(`Failed to load purchase return`),I.push(`/suppliers/purchase-returns`)}finally{W.value=!1}},Ft=async()=>{try{if(G.value=!0,!q.value.supplier_id){U(`Please select a supplier`);return}if(!q.value.warehouse_id){U(`Please select a warehouse`);return}if(!q.value.currency_id){U(`Please select a currency`);return}if(q.value.items.length===0){U(`Please add at least one item`);return}for(let e of q.value.items)if(!e.item_id){U(`Please select an item for all rows`);return}let e=parseInt(L.params.id);await R.updatePurchaseReturn(e,q.value),wt(`Purchase return updated successfully`),I.push(`/suppliers/purchase-returns`)}catch(e){U(e.message||`Failed to update purchase return`)}finally{G.value=!1}};return e(()=>q.value.items,()=>{$()},{deep:!0}),e([()=>q.value.shipping_fee_usd,()=>q.value.customs_fee_usd,()=>q.value.other_fee_usd,()=>q.value.tax_usd,()=>q.value.additional_charge_amount_usd,()=>q.value.currency_rate],()=>{$()}),ee(async()=>{try{await Promise.all([z.fetchSuppliers(),B.fetchWarehouses(),V.fetchCurrencies(),H.fetchItems(),Pt()])}catch{U(`Failed to load required data`)}}),(e,a)=>{let d=te(`router-link`);return f(),c(`div`,fe,[o(`div`,pe,[o(`div`,me,[o(`div`,he,[a[13]||=o(`div`,null,[o(`h1`,{class:`text-3xl font-bold text-gray-900 dark:text-white`},`Edit Purchase Return`),o(`p`,{class:`mt-2 text-sm text-gray-600 dark:text-gray-400`},` Update purchase return information `)],-1),u(d,{to:`/suppliers/purchase-returns`,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},{default:m(()=>a[12]||=[o(`svg`,{class:`w-5 h-5 mr-2`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[o(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})],-1),l(` Back to List `,-1)]),_:1,__:[12]})])]),W.value?(f(),c(`div`,ge,a[14]||=[o(`div`,{class:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600`},null,-1)])):(f(),c(`form`,{key:1,onSubmit:r(Ft,[`prevent`]),class:`space-y-6`},[o(`div`,_e,[a[25]||=o(`h2`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-4`},`Basic Information`,-1),o(`div`,ve,[o(`div`,null,[a[15]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[l(` Date `),o(`span`,{class:`text-red-500`},`*`)],-1),h(o(`input`,{type:`date`,"onUpdate:modelValue":a[0]||=e=>q.value.date=e,required:``,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[n,q.value.date]])]),o(`div`,null,[a[17]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[l(` Supplier `),o(`span`,{class:`text-red-500`},`*`)],-1),h(o(`select`,{"onUpdate:modelValue":a[1]||=e=>q.value.supplier_id=e,disabled:``,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white cursor-not-allowed`},[a[16]||=o(`option`,{value:null},`Select Supplier`,-1),(f(!0),c(i,null,p(Tt.value,e=>(f(),c(`option`,{key:e.id,value:e.id},_(e.code)+` - `+_(e.name),9,b))),128))],512),[[t,q.value.supplier_id]]),a[18]||=o(`p`,{class:`mt-1 text-xs text-gray-500 dark:text-gray-400`},`Supplier cannot be changed after creation`,-1)]),o(`div`,null,[a[20]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[l(` Warehouse `),o(`span`,{class:`text-red-500`},`*`)],-1),h(o(`select`,{"onUpdate:modelValue":a[2]||=e=>q.value.warehouse_id=e,required:``,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},[a[19]||=o(`option`,{value:null},`Select Warehouse`,-1),(f(!0),c(i,null,p(Et.value,e=>(f(),c(`option`,{key:e.id,value:e.id},_(e.name),9,x))),128))],512),[[t,q.value.warehouse_id]])]),o(`div`,null,[a[22]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[l(` Currency `),o(`span`,{class:`text-red-500`},`*`)],-1),h(o(`select`,{"onUpdate:modelValue":a[3]||=e=>q.value.currency_id=e,required:``,onChange:Q,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},[a[21]||=o(`option`,{value:null},`Select Currency`,-1),(f(!0),c(i,null,p(J.value,e=>(f(),c(`option`,{key:e.id,value:e.id},_(e.code)+` - `+_(e.name),9,S))),128))],544),[[t,q.value.currency_id]])]),o(`div`,null,[a[23]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},[l(` Currency Rate `),o(`span`,{class:`text-red-500`},`*`)],-1),h(o(`input`,{type:`number`,"onUpdate:modelValue":a[4]||=e=>q.value.currency_rate=e,step:`0.0001`,min:`0`,required:``,disabled:ae(v)(q.value.currency_id),class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:bg-gray-100 disabled:dark:bg-gray-600`},null,8,C),[[n,q.value.currency_rate,void 0,{number:!0}]])]),o(`div`,null,[a[24]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Supplier Return Number `,-1),h(o(`input`,{type:`text`,"onUpdate:modelValue":a[5]||=e=>q.value.supplier_purchase_return_number=e,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[n,q.value.supplier_purchase_return_number]])])])]),o(`div`,w,[a[31]||=o(`h2`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-4`},`Fees and Charges (USD)`,-1),o(`div`,T,[o(`div`,null,[a[26]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Shipping Fee (USD) `,-1),h(o(`input`,{type:`number`,"onUpdate:modelValue":a[6]||=e=>q.value.shipping_fee_usd=e,step:`0.01`,min:`0`,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[n,q.value.shipping_fee_usd,void 0,{number:!0}]])]),o(`div`,null,[a[27]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Customs Fee (USD) `,-1),h(o(`input`,{type:`number`,"onUpdate:modelValue":a[7]||=e=>q.value.customs_fee_usd=e,step:`0.01`,min:`0`,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[n,q.value.customs_fee_usd,void 0,{number:!0}]])]),o(`div`,null,[a[28]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Other Fee (USD) `,-1),h(o(`input`,{type:`number`,"onUpdate:modelValue":a[8]||=e=>q.value.other_fee_usd=e,step:`0.01`,min:`0`,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[n,q.value.other_fee_usd,void 0,{number:!0}]])]),o(`div`,null,[a[29]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Tax (USD) `,-1),h(o(`input`,{type:`number`,"onUpdate:modelValue":a[9]||=e=>q.value.tax_usd=e,step:`0.01`,min:`0`,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[n,q.value.tax_usd,void 0,{number:!0}]])]),o(`div`,null,[a[30]||=o(`label`,{class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2`},` Additional Charge (USD) `,-1),h(o(`input`,{type:`number`,"onUpdate:modelValue":a[10]||=e=>q.value.additional_charge_amount_usd=e,step:`0.01`,min:`0`,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,512),[[n,q.value.additional_charge_amount_usd,void 0,{number:!0}]])]),o(`div`,null,[o(`label`,E,` Additional Charge (`+_(X.value)+`) `,1),o(`input`,{type:`number`,value:q.value.additional_charge_amount,onInput:kt,step:`0.01`,min:`0`,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`},null,40,D)])])]),o(`div`,O,[o(`div`,k,[a[32]||=o(`h2`,{class:`text-lg font-semibold text-gray-900 dark:text-white`},`Items`,-1),o(`div`,A,[o(`button`,{type:`button`,onClick:Ot,class:`px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600`},_(K.value?`Hide Details`:`Show Details`),1),o(`button`,{type:`button`,onClick:jt,class:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`},` + Add Item `)])]),o(`div`,j,[o(`table`,M,[o(`thead`,N,[o(`tr`,null,[a[33]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Item `,-1),a[34]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Price `,-1),a[35]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Qty `,-1),a[36]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Discount % `,-1),a[37]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Unit Discount `,-1),K.value?(f(),c(`th`,P,` Discount Amount `)):s(``,!0),a[38]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Total `,-1),K.value?(f(),c(`th`,F,` Total USD `)):s(``,!0),K.value?(f(),c(`th`,ye,` Shipping USD `)):s(``,!0),K.value?(f(),c(`th`,be,` Customs USD `)):s(``,!0),K.value?(f(),c(`th`,xe,` Other USD `)):s(``,!0),K.value?(f(),c(`th`,Se,` Final Cost USD `)):s(``,!0),K.value?(f(),c(`th`,Ce,` Cost/Item USD `)):s(``,!0),a[39]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Note `,-1),a[40]||=o(`th`,{class:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Action `,-1)])]),o(`tbody`,we,[(f(!0),c(i,null,p(q.value.items,(e,r)=>(f(),c(`tr`,{key:r},[o(`td`,Te,[h(o(`select`,{"onUpdate:modelValue":t=>e.item_id=t,onChange:e=>At(r),required:``,class:`w-48 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm`},[a[41]||=o(`option`,{value:null},`Select Item`,-1),(f(!0),c(i,null,p(Y.value,e=>(f(),c(`option`,{key:e.id,value:e.id},_(e.code)+` - `+_(e.name),9,De))),128))],40,Ee),[[t,e.item_id]])]),o(`td`,Oe,[h(o(`input`,{type:`number`,"onUpdate:modelValue":t=>e.price=t,step:`0.01`,min:`0`,required:``,class:`w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm`},null,8,ke),[[n,e.price,void 0,{number:!0}]])]),o(`td`,Ae,[h(o(`input`,{type:`number`,"onUpdate:modelValue":t=>e.quantity=t,step:`1`,min:`1`,required:``,class:`w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm`},null,8,je),[[n,e.quantity,void 0,{number:!0}]])]),o(`td`,Me,[h(o(`input`,{type:`number`,"onUpdate:modelValue":t=>e.discount_percent=t,step:`0.01`,min:`0`,max:`100`,class:`w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm`},null,8,Ne),[[n,e.discount_percent,void 0,{number:!0}]])]),o(`td`,Pe,[h(o(`input`,{type:`number`,"onUpdate:modelValue":t=>e.unit_discount_amount=t,step:`0.01`,min:`0`,class:`w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm`},null,8,Fe),[[n,e.unit_discount_amount,void 0,{number:!0}]])]),K.value?(f(),c(`td`,Ie,_(Z(e.discount_amount)),1)):s(``,!0),o(`td`,Le,_(Z(e.total_price)),1),K.value?(f(),c(`td`,Re,_(Z(e.total_price_usd)),1)):s(``,!0),K.value?(f(),c(`td`,ze,_(Z(e.total_shipping_usd)),1)):s(``,!0),K.value?(f(),c(`td`,Be,_(Z(e.total_customs_usd)),1)):s(``,!0),K.value?(f(),c(`td`,Ve,_(Z(e.total_other_usd)),1)):s(``,!0),K.value?(f(),c(`td`,He,_(Z(e.final_total_cost_usd)),1)):s(``,!0),K.value?(f(),c(`td`,Ue,_(Z(e.cost_per_item_usd)),1)):s(``,!0),o(`td`,We,[h(o(`input`,{type:`text`,"onUpdate:modelValue":t=>e.note=t,class:`w-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm`},null,8,Ge),[[n,e.note]])]),o(`td`,Ke,[o(`button`,{type:`button`,onClick:e=>Mt(r),class:`text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300`},a[42]||=[o(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[o(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})],-1)],8,qe)])]))),128))])])])]),o(`div`,Je,[a[51]||=o(`h2`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-4`},`Summary`,-1),o(`div`,Ye,[o(`div`,Xe,[o(`span`,Ze,`Subtotal (`+_(X.value)+`):`,1),o(`span`,Qe,_(Z(q.value.sub_total)),1)]),o(`div`,$e,[a[43]||=o(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Subtotal (USD):`,-1),o(`span`,et,_(Z(q.value.sub_total_usd)),1)]),o(`div`,tt,[a[44]||=o(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Additional Charge (USD):`,-1),o(`span`,nt,_(Z(q.value.additional_charge_amount_usd)),1)]),o(`div`,rt,[o(`span`,it,`Total (`+_(X.value)+`):`,1),o(`span`,at,_(Z(q.value.total)),1)]),o(`div`,ot,[a[45]||=o(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Total (USD):`,-1),o(`span`,st,_(Z(q.value.total_usd)),1)]),o(`div`,ct,[a[46]||=o(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Shipping Fee (USD):`,-1),o(`span`,lt,_(Z(q.value.shipping_fee_usd)),1)]),o(`div`,ut,[a[47]||=o(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Customs Fee (USD):`,-1),o(`span`,dt,_(Z(q.value.customs_fee_usd)),1)]),o(`div`,ft,[a[48]||=o(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Other Fee (USD):`,-1),o(`span`,pt,_(Z(q.value.other_fee_usd)),1)]),o(`div`,mt,[a[49]||=o(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Tax (USD):`,-1),o(`span`,ht,_(Z(q.value.tax_usd)),1)]),o(`div`,gt,[o(`span`,_t,`Final Total (`+_(X.value)+`):`,1),o(`span`,vt,_(Z(q.value.final_total)),1)]),o(`div`,yt,[a[50]||=o(`span`,{class:`text-base font-semibold text-gray-900 dark:text-white`},`Final Total (USD):`,-1),o(`span`,bt,_(Z(q.value.final_total_usd)),1)])])]),o(`div`,xt,[a[52]||=o(`h2`,{class:`text-lg font-semibold text-gray-900 dark:text-white mb-4`},`Notes`,-1),h(o(`textarea`,{"onUpdate:modelValue":a[11]||=e=>q.value.note=e,rows:`4`,class:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:`Enter any additional notes...`},null,512),[[n,q.value.note]])]),o(`div`,St,[u(d,{to:`/suppliers/purchase-returns`,class:`px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`},{default:m(()=>a[53]||=[l(` Cancel `,-1)]),_:1,__:[53]}),o(`button`,{type:`submit`,disabled:G.value,class:`px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed`},_(G.value?`Updating...`:`Update Purchase Return`),9,Ct)])],32))])])}}}),L=I;export{L as default};