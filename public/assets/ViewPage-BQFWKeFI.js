import{K as e,M as t,Q as ee,a$ as n,aC as te,aG as r,aH as ne,aS as re,aU as ie,aV as i,aX as a,aY as o,a_ as s,ao as c,b0 as ae,b3 as oe,b5 as l,b6 as se,bf as u,bg as d,bh as ce,bj as f,s as le}from"./index-Dij-yAxd.js";import{b as ue}from"./useAuth-CjJ4dQzW.js";import"./GlobalConfig-wPgXFcZ5.js";import{aa as p}from"./helpers.dataset-CXqpAWBj.js";import"./tableUtils-dXs1kjAL.js";import{b as de}from"./ConfirmationModal-CYjnOvk0.js";import{b as fe}from"./itemAdjustStore-BFTsJK1X.js";const pe={class:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`},m={class:``},h={class:`mb-8`},g={class:`flex items-center space-x-4 mb-2`},_={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},v={class:`px-6 py-4 border-b border-gray-200 dark:border-gray-700`},y={class:`flex items-center justify-between`},b={class:`text-lg font-medium text-gray-900 dark:text-white`},x={class:`text-sm text-gray-500 dark:text-gray-400`},S={class:`flex space-x-3`},C={class:`px-6 py-8`},w={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},T={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},E={class:`mt-1 text-sm text-gray-900 dark:text-white`},D={class:`mt-1`},O={class:`mt-1 text-sm text-gray-900 dark:text-white`},k={class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},A={class:`flex items-center justify-between mb-4`},j={class:`text-sm text-gray-600 dark:text-gray-400`},M={key:0,class:`text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg`},N={key:1,class:`overflow-x-auto`},P={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},F={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},I={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},L={class:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white`},R={class:`px-6 py-4 text-sm text-gray-900 dark:text-white`},z={class:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white`},B={class:`px-6 py-4 text-sm text-gray-500 dark:text-gray-400`},me={class:`bg-gray-50 dark:bg-gray-700`},he={class:`px-6 py-4 text-sm font-bold text-gray-900 dark:text-white`},ge={key:0,class:`border-b border-gray-200 dark:border-gray-700 pb-6 mb-6`},_e={class:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4`},ve={class:`text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap`},ye={class:`pt-6 border-t border-gray-200 dark:border-gray-700`},be={class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`},xe={key:0},Se={class:`mt-1 text-sm text-gray-900 dark:text-white`},Ce={key:1},we={class:`mt-1 text-sm text-gray-900 dark:text-white`},Te={key:2},Ee={class:`mt-1 text-sm text-gray-900 dark:text-white`},De={key:3},Oe={class:`mt-1 text-sm text-gray-900 dark:text-white`},ke={key:1,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ae={class:`px-6 py-8 text-center`};var V=ae({__name:`ViewPage`,setup(ae){let V=ne(),H=r(),U=te(),W=fe(),{isSuperAdmin:je,isAdmin:Me}=ue(),G=parseInt(H.params.id),K=u(!0),q=u({}),J=u(!1),Y=u(!1),X=ie(()=>je.value||Me.value),Z=()=>{V.push({name:`item-adjusts.index`})},Ne=()=>{V.push({name:`item-adjusts.edit`,params:{id:G.toString()}})},Pe=()=>{J.value=!0},Q=()=>{J.value=!1,Y.value=!1},Fe=async()=>{Y.value=!0;try{await W.deleteItemAdjust(G),U.success(`Item adjustment deleted successfully`),V.push({name:`item-adjusts.index`})}catch(e){console.error(`Error deleting item adjustment:`,e),U.error(`Failed to delete item adjustment`)}finally{Y.value=!1,Q()}},Ie=()=>q.value.items?q.value.items.reduce((e,t)=>e+(t.quantity||0),0):0,Le=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`})},$=e=>{if(!e)return`-`;let t=new Date(e);return t.toLocaleString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})},Re=async()=>{K.value=!0;try{let e=await W.fetchItemAdjust(G);q.value=e}catch(e){console.error(`Error loading item adjustment:`,e),U.error(`Failed to load item adjustment`),Z()}finally{K.value=!1}};return oe(async()=>{await Re()}),(te,r)=>(l(),o(`div`,pe,[i(`div`,m,[i(`div`,h,[i(`div`,g,[i(`button`,{onClick:Z,class:`inline-flex items-center p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors`},[n(d(c),{class:`w-5 h-5`})]),r[1]||=i(`div`,null,[i(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},` Item Adjustment Details `),i(`p`,{class:`text-sm text-gray-600 dark:text-gray-400`},` View item adjustment information `)],-1)])]),K.value?(l(),o(`div`,ke,[i(`div`,Ae,[n(d(ee),{class:`w-8 h-8 animate-spin mx-auto text-blue-600`}),r[20]||=i(`p`,{class:`mt-2 text-gray-600 dark:text-gray-400`},`Loading item adjustment details...`,-1)])])):(l(),o(`div`,_,[i(`div`,v,[i(`div`,y,[i(`div`,null,[i(`h3`,b,f(q.value.prefix)+f(q.value.code),1),i(`p`,x,` Item Adjustment ID: `+f(q.value.id),1)]),i(`div`,S,[X.value?(l(),o(`button`,{key:0,onClick:Ne,class:`inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200`},[n(d(e),{class:`w-4 h-4 mr-2`}),r[2]||=s(` Edit `,-1)])):a(``,!0),X.value?(l(),o(`button`,{key:1,onClick:Pe,class:`inline-flex items-center px-3 py-2 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200`},[n(d(le),{class:`w-4 h-4 mr-2`}),r[3]||=s(` Delete `,-1)])):a(``,!0)])])]),i(`div`,C,[i(`div`,w,[r[7]||=i(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Basic Information `,-1),i(`div`,T,[i(`div`,null,[r[4]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Adjustment Date`,-1),i(`dd`,E,f(Le(q.value.date)),1)]),i(`div`,null,[r[5]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Adjustment Type`,-1),i(`dd`,D,[i(`span`,{class:ce([`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium`,q.value.type===`Add`?`bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100`:`bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100`])},f(q.value.type),3)])]),i(`div`,null,[r[6]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Warehouse`,-1),i(`dd`,O,f(q.value.warehouse?.name||`-`),1)])])]),i(`div`,k,[i(`div`,A,[r[8]||=i(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white`},` Adjustment Items `,-1),i(`div`,j,` Total Items: `+f(q.value.total_items_count||0)+` | Total Quantity: `+f(q.value.total_quantity||0),1)]),!q.value.items||q.value.items.length===0?(l(),o(`div`,M,[n(d(t),{class:`mx-auto h-12 w-12 text-gray-400`}),r[9]||=i(`h5`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No items found`,-1),r[10]||=i(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},`This item adjustment has no items.`,-1)])):(l(),o(`div`,N,[i(`table`,P,[r[13]||=i(`thead`,{class:`bg-gray-50 dark:bg-gray-700`},[i(`tr`,null,[i(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`#`),i(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Item Code`),i(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Description`),i(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Quantity`),i(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},`Note`)])],-1),i(`tbody`,F,[(l(!0),o(re,null,se(q.value.items,(e,t)=>(l(),o(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[i(`td`,I,f(t+1),1),i(`td`,L,f(e.item_code),1),i(`td`,R,f(e.item?.short_name||e.item?.description||`-`),1),i(`td`,z,f(d(p)(e.quantity)),1),i(`td`,B,f(e.note||`-`),1)]))),128))]),i(`tfoot`,me,[i(`tr`,null,[r[11]||=i(`td`,{colspan:`3`,class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},`Total Quantity:`,-1),i(`td`,he,f(d(p)(Ie())),1),r[12]||=i(`td`,null,null,-1)])])])]))]),q.value.note?(l(),o(`div`,ge,[r[14]||=i(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Notes `,-1),i(`div`,_e,[i(`p`,ve,f(q.value.note),1)])])):a(``,!0),i(`div`,ye,[r[19]||=i(`h4`,{class:`text-lg font-medium text-gray-900 dark:text-white mb-4`},` Audit Information `,-1),i(`div`,be,[q.value.created_by?(l(),o(`div`,xe,[r[15]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created By`,-1),i(`dd`,Se,f(q.value.created_by.name),1)])):a(``,!0),q.value.created_at?(l(),o(`div`,Ce,[r[16]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Created At`,-1),i(`dd`,we,f($(q.value.created_at)),1)])):a(``,!0),q.value.updated_by?(l(),o(`div`,Te,[r[17]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Updated By`,-1),i(`dd`,Ee,f(q.value.updated_by.name),1)])):a(``,!0),q.value.updated_at?(l(),o(`div`,De,[r[18]||=i(`dt`,{class:`text-sm font-medium text-gray-500 dark:text-gray-400`},`Last Updated`,-1),i(`dd`,Oe,f($(q.value.updated_at)),1)])):a(``,!0)])])])]))]),n(de,{show:J.value,"onUpdate:show":r[0]||=e=>J.value=e,type:`delete`,title:`Delete Item Adjustment ${q.value.code}`,message:`Are you sure you want to delete item adjustment '${q.value.code}'? This action can be undone by restoring from trash.`,"confirm-text":`Delete Item Adjustment`,"loading-text":`Deleting...`,loading:Y.value,onConfirm:Fe,onCancel:Q},null,8,[`show`,`title`,`message`,`loading`])]))}}),H=V;export{H as default};